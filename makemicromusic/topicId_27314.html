<!DOCTYPE html>
            <html>
            <head>
            <meta charset="utf-8">
                <meta name="viewport"
            content="width=device-width, height=device-height, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no">
                <meta http-equiv="x-ua-compatible" content="ie=edge">
                <title>Yahoo Tuning Groups Ultimate Backup makemicromusic Bandlimited synthesis algorithm</title>
                <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
            </head>
            <body>
            </body>
            </html>
        <a href="/makemicromusic">back to list</a><h1>Bandlimited synthesis algorithm</h1><h3><a id=27314 href="#27314">ðŸ”—</a>Mike Battaglia &#x3C;battaglia01@...&#x3E;</h3><span>3/29/2011 6:22:28 AM</span><button style="float: right; margin-right: 20px">toggle monospace</button><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>On Tue, Mar 29, 2011 at 6:37 AM, Kalle Aho &lt;kalleaho@...&gt; wrote:<br/>&gt;<br/>&gt; &gt;<br/>&gt; &gt; You could probably just replace the sigmoid integration with the<br/>&gt; &gt; above, which I think will be equivalent because of the Taylor series<br/>&gt; &gt; expansion for log(1+x).<br/>&gt;<br/>&gt; What do you think of this?<br/>&gt;<br/>&gt; if x goes from -1 to 1<br/>&gt;<br/>&gt; f(x)=x-tanh(a*x)/tanh(a)<br/>&gt;<br/>&gt; gives a sawtooth wave with roughly 2*a harmonics when a is about<br/>&gt; &gt;=3.5.<br/>&gt;<br/>&gt; Integrating this gives<br/>&gt;<br/>&gt; 1/2*x^2-ln(cosh(a*x))/(a*tanh(a))<br/>&gt;<br/>&gt; for parabolic wave that can be used to get variable duty cycle triangle waves.<br/>&gt;<br/>&gt; Kalle</p><p>That&apos;s one way to do it. Theoretically, this approach is really<br/>interesting, as it basically involves adding a nonlinearity to an<br/>existing sawtooth wave - if you go from -1 to 1 and then repeat, you<br/>are effectively generating a sawtooth wave and then running it through<br/>a nonlinear input-output function. I&apos;m not sure exactly how that will<br/>affect the spectrum, but it generally means that the spectrum is going<br/>to get convolved with itself. How this ends up affecting the aliased<br/>signal I&apos;m not sure.</p><p>I was also looking at this, like I mentioned:</p><p>ln(k+sin(x)) = hilbert(sawtooth(x)) if k = 1.</p><p>I am far too tired to figure out how in the hell to integrate this<br/>now, but if you do, you end up with parabolic waves for different<br/>values of k, and as k moves down to 1 you get a perfect parabolic<br/>wave. You can then take the square root to get triangle waves, or you<br/>can differentiate to get a sawtooth.</p><p>In general I think it&apos;s best to store the integrated version of the<br/>target waveform in a wavetable and then differentiate because of the<br/>paper I sent you. Funny how nobody&apos;s doing this, though, this seems<br/>like such a simple concept.</p><p>-Mike</p></div><h3><a id=27315 href="#27315">ðŸ”—</a>Kalle Aho &#x3C;kalleaho@...&#x3E;</h3><span>3/29/2011 7:04:50 AM</span><button style="float: right; margin-right: 20px">toggle monospace</button><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>--- In <a href="mailto:MakeMicroMusic@yahoogroups.com">MakeMicroMusic@yahoogroups.com</a>, Mike Battaglia &lt;battaglia01@...&gt; wrote:<br/>&gt;<br/>&gt; On Tue, Mar 29, 2011 at 6:37 AM, Kalle Aho &lt;kalleaho@...&gt; wrote:<br/>&gt; &gt;<br/>&gt; &gt; &gt;<br/>&gt; &gt; &gt; You could probably just replace the sigmoid integration with the<br/>&gt; &gt; &gt; above, which I think will be equivalent because of the Taylor series<br/>&gt; &gt; &gt; expansion for log(1+x).<br/>&gt; &gt;<br/>&gt; &gt; What do you think of this?<br/>&gt; &gt;<br/>&gt; &gt; if x goes from -1 to 1<br/>&gt; &gt;<br/>&gt; &gt; f(x)=x-tanh(a*x)/tanh(a)<br/>&gt; &gt;<br/>&gt; &gt; gives a sawtooth wave with roughly 2*a harmonics when a is about<br/>&gt; &gt; &gt;=3.5.<br/>&gt; &gt;<br/>&gt; &gt; Integrating this gives<br/>&gt; &gt;<br/>&gt; &gt; 1/2*x^2-ln(cosh(a*x))/(a*tanh(a))<br/>&gt; &gt;<br/>&gt; &gt; for parabolic wave that can be used to get variable duty cycle triangle waves.<br/>&gt; &gt;<br/>&gt; &gt; Kalle<br/>&gt;<br/>&gt; That&apos;s one way to do it. Theoretically, this approach is really<br/>&gt; interesting, as it basically involves adding a nonlinearity to an<br/>&gt; existing sawtooth wave - if you go from -1 to 1 and then repeat, you<br/>&gt; are effectively generating a sawtooth wave and then running it through<br/>&gt; a nonlinear input-output function. I&apos;m not sure exactly how that will<br/>&gt; affect the spectrum, but it generally means that the spectrum is going<br/>&gt; to get convolved with itself. How this ends up affecting the aliased<br/>&gt; signal I&apos;m not sure.<br/>&gt;<br/>&gt; I was also looking at this, like I mentioned:<br/>&gt;<br/>&gt; ln(k+sin(x)) = hilbert(sawtooth(x)) if k = 1.<br/>&gt;<br/>&gt; I am far too tired to figure out how in the hell to integrate this<br/>&gt; now, but if you do, you end up with parabolic waves for different<br/>&gt; values of k, and as k moves down to 1 you get a perfect parabolic<br/>&gt; wave.</p><p>Integrating it in <a href="http://www.wolframalpha.com">www.wolframalpha.com</a> produced a monster.</p><p>&gt; You can then take the square root to get triangle waves, or you<br/>&gt; can differentiate to get a sawtooth.</p><p>I&apos;d make triangle waves by subtracting two phase shifted parabolic waves.</p><p>&gt; In general I think it&apos;s best to store the integrated version of the<br/>&gt; target waveform in a wavetable and then differentiate because of the<br/>&gt; paper I sent you. Funny how nobody&apos;s doing this, though, this seems<br/>&gt; like such a simple concept.</p><p>I know that technique but it has numerical issues, the<br/>differentiation causes frequency-dependent amplitude scaling. Might<br/>not be an issue with only one differentiation though. But why bother<br/>if the aliasing is already suppressed to inaudibility?</p><p>Kalle</p></div><h3><a id=27316 href="#27316">ðŸ”—</a>Mike Battaglia &#x3C;battaglia01@...&#x3E;</h3><span>3/29/2011 7:19:40 AM</span><button style="float: right; margin-right: 20px">toggle monospace</button><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>On Tue, Mar 29, 2011 at 10:04 AM, Kalle Aho &lt;kalleaho@...&gt; wrote:<br/>&gt;<br/>&gt; &gt; I am far too tired to figure out how in the hell to integrate this<br/>&gt; &gt; now, but if you do, you end up with parabolic waves for different<br/>&gt; &gt; values of k, and as k moves down to 1 you get a perfect parabolic<br/>&gt; &gt; wave.<br/>&gt;<br/>&gt; Integrating it in <a href="http://www.wolframalpha.com">www.wolframalpha.com</a> produced a monster.</p><p>Yikes.</p><p>&gt; &gt; You can then take the square root to get triangle waves, or you<br/>&gt; &gt; can differentiate to get a sawtooth.<br/>&gt;<br/>&gt; I&apos;d make triangle waves by subtracting two phase shifted parabolic waves.</p><p>You could also do that.</p><p>&gt; &gt; In general I think it&apos;s best to store the integrated version of the<br/>&gt; &gt; target waveform in a wavetable and then differentiate because of the<br/>&gt; &gt; paper I sent you. Funny how nobody&apos;s doing this, though, this seems<br/>&gt; &gt; like such a simple concept.<br/>&gt;<br/>&gt; I know that technique but it has numerical issues, the<br/>&gt; differentiation causes frequency-dependent amplitude scaling. Might<br/>&gt; not be an issue with only one differentiation though. But why bother<br/>&gt; if the aliasing is already suppressed to inaudibility?</p><p>It&apos;s supposed to cause frequency-dependent amplitude scaling, that&apos;s<br/>the point. You analytically generate the -integral- of whatever<br/>waveform that you actually want, and then you differentiate. This way,<br/>the aliasing frequencies actually get generated at attenuated<br/>amplitude to begin with, and then once you differentiate, the aliasing<br/>actually works against them - since they&apos;ve now aliased down into the<br/>lower frequency range, when you differentiate they get less of a boost<br/>than if you had just generated the original waveform without taking<br/>the integral. Not sure if I&apos;m explaining it clearly enough, or maybe<br/>you already know. Either way, yeah, I guess it&apos;s not much of an issue<br/>if this technique already produces aliasing components that are below<br/>what we can hear anyway.</p><p>-Mike</p></div>
                <script>
                    let monospace = false
                    $('button').on('click', function () {
                      if (monospace) {
                        $('p').css("font-family", "")
                      } else {
                        $('p').css("font-family", "monospace")
                      }
                      monospace = !monospace
                    })
                </script>
            