<a href="/makemicromusic">back to list</a><h1>New software project using tclabc</h1><h3>hfmlacerda &#x3C;hfmlacerda@...&#x3E;</h3><span>2/11/2009 7:47:57 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>Hi all,</p><p>I have some ideas for new microtonal software, using ABC notation.</p><p>After tinkering a bit with Tcl/Tk (writing TKmicroabc and a game<br/>(tk+-bis)), I revisited tclabc and printed its documentation.</p><p>tclabc (by Jean-Fran&ccedil;ois Moine) is a Tcl extension to manipulate ABC<br/>files. The library is written in C, and it comes with a graphical<br/>interface (tkabc) written in Tcl/Tk.</p><p><a href="http://moinejf.free.fr/">http://moinejf.free.fr/</a><br/><a href="http://moinejf.free.fr/tclabc.html">http://moinejf.free.fr/tclabc.html</a><br/><a href="http://moinejf.free.fr/sample.gif">http://moinejf.free.fr/sample.gif</a></p><p>I noticed that tclabc (as Tcl extension) it is easy to use and very<br/>powerful (its parser is abcm2ps-compatible). It handles ABC (r/w) and<br/>MIDI (playing/recording).</p><p>Compared to abc2midi (maintained by Seymour Shlien), the MIDI player<br/>is currently rather limited (key, meter, tempo, channel, program/bank,<br/>note on/off, no more). Anyway, it is more flexible in other aspects:<br/>abc2midi supports only 16 MIDI channels, and no tone banks, I<br/>guess. In its turn, tclabc can handle up to 32 voices/channels as well<br/>as tone banks. For recording/playing, tclabc can use OSS/ALSA<br/>(GNU+Linux) and Windows MIDI devices.</p><p>The ABC parser supports microtonal accidentals using semitone<br/>fractions (1-to-256)/(1-to-256), and the GUI (tkabc) already<br/>implemented Tartini-Couper accidentals, which are not however played<br/>in MIDI. Although microtonal MIDI is not available, I guess it would<br/>not be difficult to develop a Tcl program to convert the ABC structure<br/>(managed by tclabc) into raw MIDI messages (in pure Tcl, not using the<br/>MIDI backend). Anyway, microtonal MIDI generation can always be<br/>acomplished by abc2midi.</p><p>I just wrote a sample file which converts quartertone ABC to Sagittal<br/>ABC (for microabc/sagittal.fmt). It only converts the first voice of<br/>the first piece:</p><p><a href="http://geocities.yahoo.com.br/hfmlacerda/misc/tkmicroabc/test-abc.tcl.txt">http://geocities.yahoo.com.br/hfmlacerda/misc/tkmicroabc/test-abc.tcl.txt</a></p><p>Remove the .txt extension and run it with:</p><p>     tclsh test-abc.tcl</p><p>Here is my initial TODO list for this project:</p><p>- ABC (Tartini-Couper) to Sagittal ABC (to be tuned using microabc);</p><p>- Split ABC chords as temporary voices (so that the notes go to<br/>  different MIDI channels and thus its pitch bends can apply<br/>  correctly).</p><p>- ABC to microtonal ABC for MIDI (converting Tartini-Couper<br/>  representation to arbitrary tunings directly, not using microabc);</p><p>- Sagittal ABC to microtonal ABC for MIDI (not using microabc);</p><p>- Sagittal accidentals as an extension of tkabc (GUI);</p><p>- Eventually, implement all the funcionality of microabc and more.</p><p>People that already have worked with MIDI might have a look at<br/>converting the ABC structure into raw MIDI instructions.</p><p>I think that exporting Csound and Scala score files would be easy to<br/>implement.</p><p>Advantages:</p><p>- Complete ABC parser/ interpreter/ writer (abcm2ps-compatible);</p><p>- Import/ export/ record/ play MIDI;</p><p>- Can use a graphical interface (tkabc) already functional, to be<br/>  extended;</p><p>- Powerful text preprocessing using Tcl features, to support diverse<br/>  (user-defined) microtonal notation systems;</p><p>- Easy to program, adapt and extend (at least for the Tcl end).</p><p>- &apos;Wrapped&apos; binaries can be built using Starkit or freewrap.</p><p>Disadvantages:</p><p>- Require a Tcl/Tk interpreter (some OSes come missing one<br/>  &lt;8o). Anyway, Starkit could be used to build &apos;standalone&apos;<br/>  executables with a built-in Tcl/Tk interpreter.</p><p>- Require to compile tclabc library for the operating system. Jef<br/>  Moine provides source code for any plataform and also binary objects<br/>  for Windows.</p></div>