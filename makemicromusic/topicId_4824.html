<a href="/makemicromusic">back to list</a><h1>Octet perc fix</h1><h3>Jonathan M. Szanto &#x3C;JSZANTO@...&#x3E;</h3><span>6/5/2003 12:21:30 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>Gene/Manuel,</p><p>I think I have fixed Gene&apos;s retuning of the Octet. It was simple, once I took a look at it. I recommend the tools mf2t.exe and t2mf.exe that come from the MIDIOX site (MidiFile2Text and Text2MidiFile).</p><p>I translated octf.mid to text, using the -t and -n switches:</p><p>-n : write notes in symbolic rather than numeric form. A-G optionally followed by # (sharp) followed by octave number.<br/>-t : event times are written as bar:beat:click rather than a click number</p><p>(Note: I did not try the -t and -a combination...)</p><p>...as in:</p><p>c:\mf2t -tn octf.mid octf.txt</p><p>Upon getting a text file, I simply opened up with a decent text editor and started looking. Unlike in a sequencer, it didn&apos;t list the items simply in time-order, but in time order *by track*. I saw this way that Scala tunes each track, using multiple midi channels as necessary to avoid &apos;bending&apos; pitches on the same channel. This got me thinking...</p><p>I then did a text search for &quot;ch=10&quot;, which is what I knew was causing the problem. Sure enough, all these events occurred in only one track. Now to see how far things went...</p><p>I then search for &quot;ch=11&quot; and upwards numerically, finally realizing that in retuning this piece that contains 8 tracks of musical data, Scala used midi channels 1-13; I found no events on channels 14-16. It seemed safe, then, that I could reassign all the events from 10 to 14 (or higher). This was accomplished with an easy search/replace.</p><p>I then saved the file (octfx.txt) and retranslated:</p><p>c:\t2mf octfx.txt octfx.mid</p><p>I loaded the new midi file into Sonar and it seems like it does what Gene intended.</p><p>Sooooooo....</p><p>Manuel, I&apos;m not sure what to say. Maybe you should use the original file, before Gene tuned it, and see if you can duplicate the addition of channel 10 events even if they are supposed to be included (of course, we expect that Gene will have double-checked his results as well...). I see the logic in your rechannel method, but maybe something slipped through the cracks.</p><p>And Gene, just note that the midi file you used isn&apos;t flawless: if you bring the sucker up in a notation window, you&apos;ll see that it is off by one beat throughout the entire piece, and all the downbeats actually fall on beat 3. For a drummer like me, that is a piece that is 33.33% out of tune! We can also see there is a limit to the complexity of a piece before you run out of channels.</p><p>For large scores, one could end up with multiple files, and each 16 channel allotment file could go to a different midi port, utilizing multiport midi devices to use 64 or more midi channels for a whole lot of retuned polyphony.</p><p>I&apos;ve uploaded the new midi file to Gene&apos;s folder in the files area; there should be an announcement on the list...</p><p>Good night,<br/>Jon</p><p>&grave;&apos;&grave;&apos;&grave;&apos;&grave;&apos;&grave;&apos;&grave;&apos;&grave;&apos;&grave;&apos;&grave;&apos;&grave;&apos;&grave;&apos;&grave;&apos;&grave;&apos;&grave;&apos;&grave;&apos;&grave;&apos;&grave;&apos;&grave;&apos;&grave;&apos;&grave;&apos;&grave;&apos;&grave;&apos;&grave;&apos;&grave;&apos;&grave;&apos;&grave;<br/>Real Life: Orchestral Percussionist<br/>Web Life: &quot;Corporeal Meadows&quot; - about Harry Partch<br/>                         <a href="http://www.corporeal.com/">http://www.corporeal.com/</a><br/>NOTE:<br/>If your reply bounces, try --&gt; jonszanto@...</p></div><h3>Gene Ward Smith &#x3C;gwsmith@...&#x3E;</h3><span>6/5/2003 2:06:04 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>--- In <a href="mailto:MakeMicroMusic@yahoogroups.com">MakeMicroMusic@yahoogroups.com</a>, &quot;Jonathan M. Szanto&quot;<br/>&lt;JSZANTO@A...&gt; wrote:<br/>&gt; Gene/Manuel,<br/>&gt;<br/>&gt; I think I have fixed Gene&apos;s retuning of the Octet.</p><p>Thanks, Jon. This doesn&apos;t look too hard, and again thanks for taking a<br/>look at it.</p><p>&gt; And Gene, just note that the midi file you used isn&apos;t flawless: if you<br/>&gt; bring the sucker up in a notation window, you&apos;ll see that it is off<br/>by one<br/>&gt; beat throughout the entire piece, and all the downbeats actually<br/>fall on<br/>&gt; beat 3. For a drummer like me, that is a piece that is 33.33% out of<br/>tune!<br/>&gt; We can also see there is a limit to the complexity of a piece before<br/>you<br/>&gt; run out of channels.</p><p>That&apos;s the way the fella sequenced it.</p><p>&gt; For large scores, one could end up with multiple files, and each 16<br/>channel<br/>&gt; allotment file could go to a different midi port, utilizing<br/>multiport midi<br/>&gt; devices to use 64 or more midi channels for a whole lot of retuned<br/>polyphony.</p><p>Are you suggesting splitting the midi into separate instrument tracks,<br/>feeding the results into Scala, and then trying to put the whole think<br/>back together again? Or was this for Manuel&apos;s benefit?</p></div><h3>Jonathan M. Szanto &#x3C;JSZANTO@...&#x3E;</h3><span>6/5/2003 9:40:13 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>Gene,</p><p>{you wrote...}<br/>&gt;Are you suggesting splitting the midi into separate instrument tracks, &gt;feeding the results into Scala, and then trying to put the whole think &gt;back together again? Or was this for Manuel&apos;s benefit?</p><p>I&apos;m suggesting that there is an upper limit on the polyphony/complexity of a score that will cause Scala&apos;s channel allocation retuning scheme to fail. Once one begins to run out of channels (there are only 16 per midi port) to swap around as it inserts pitch bends, the only option is to sequence a score as two pieces, and then copy/paste one of them into the other, after reassigning the midi output to a 2nd port, thereby giving a new set of 16 midi channels.</p><p>And I don&apos;t think this could necessarily be included as a Scala feature, because Scala would have no knowledge of how to assign midi ports - I think.</p><p>Cheers,<br/>Jon</p></div>