<a href="/makemicromusic">back to list</a><h1>Documentation/FAQ project for microabc?</h1><h3><a id=13988 href="#13988">ðŸ”—</a>Margo Schulter &#x3C;mschulter@...&#x3E;</h3><span>7/7/2006 3:17:12 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>Hello, Hudson and everyone, and I&apos;d like to suggest a cooperative project<br/>to add more documentation and a FAQ, or the like, to the new microabc<br/>release.</p><p>I realize that such a project, like software development itself, is helped<br/>by lots of dialogue and feedback from users, who have a talent for<br/>originality in interpretations of the documentation &lt;grin&gt;.</p><p>What I&apos;d like to offer to do, through private e-mail or possibly in part<br/>here, is to try doing some things in microabc like a sagittal mapping for<br/>the Peppermint 24 tuning (which might call for some notation macros plus a<br/>tuning definition like that in Scala. I might guess that &apos;scl&apos; and &apos;skip&apos;<br/>are relevant, but am not sure how to use them in an actual file, whether<br/>or not I&apos;d need to run microabc or abcpp, etc.</p><p>I must admit that I&apos;m the kind of user, the less efficient kind, where a<br/>syntax statement of &quot;usage&quot; often leaves me rather confused, but a few<br/>illustrative examples, typically moving from simple to more involved, can<br/>get me nicely oriented.</p><p>A bit more than 3 years ago, George Secor and Dave Keenan helped me devise<br/>a pure sagittal notation for Peppermint based more or less on 121-EDO. I<br/>know which symbol I&apos;d like to make with which of the 24 notes, and have<br/>written down some decimal character mappings -- which I note from your<br/>documentation might also sometimes be written in PostScript octal<br/>notation.</p><p>Anyway, as a Scala user, the idea of just mapping the set of pitches I<br/>plan to use to a set of floating point ratios in cents for midi pitch<br/>bends or timidity tuning tables, and defining macros for the sagittal<br/>notation of each note, very much appeals to me.</p><p>I&apos;m going to look over the examples again and see if I can figure out more<br/>for myself -- but I&apos;d love to help in writing more documentation, maybe in<br/>part by trying some simple projects with sagittal notation in tunings that<br/>I often use and cooperating with you to put together some examples and<br/>step by step procedures.</p><p>One thing I have found, for example with some of the GNU documentation, is<br/>that a tutorial or patient explanation can very much smooth out the<br/>learning curve. If I can help in any way, that would be a great privilege.</p><p>Peace and love, with many thanks,</p><p>Margo</p></div><h3><a id=13996 href="#13996">ðŸ”—</a>Hudson Lacerda &#x3C;hfmlacerda@...&#x3E;</h3><span>7/7/2006 9:43:20 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>Margo Schulter escreveu:<br/>&gt; Hello, Hudson and everyone, and I&apos;d like to suggest a cooperative project<br/>&gt; to add more documentation and a FAQ, or the like, to the new microabc<br/>&gt; release.</p><p>What a wonderful suggestion!<br/>Thanks a lot, Margo!</p><p>&gt; &gt; I realize that such a project, like software development itself, is helped<br/>&gt; by lots of dialogue and feedback from users, who have a talent for<br/>&gt; originality in interpretations of the documentation &lt;grin&gt;.</p><p>ahahahaha :-D</p><p>&gt; &gt; What I&apos;d like to offer to do, through private e-mail or possibly in part<br/>&gt; here, is to try doing some things in microabc like a sagittal mapping for<br/>&gt; the Peppermint 24 tuning (which might call for some notation macros plus a<br/>&gt; tuning definition like that in Scala. I might guess that &apos;scl&apos; and &apos;skip&apos;<br/>&gt; are relevant, but am not sure how to use them in an actual file, whether<br/>&gt; or not I&apos;d need to run microabc or abcpp, etc.</p><p>There are several ways to carry out the task, what just can make the thing confusing for the &grave;&grave;beginners&apos;&apos; and difficult to teach for the &grave;&grave;experts&apos;&apos;. Each way has its strenghts and limitations. I am pretty sure that any actual instances you (or someone else) create can be very helpful for the documentation.</p><p>I should have more information on the scale to help you properly, but here is a trying:</p><p>You scale has 24 tones per octave, is that right? As it is a relativelly small number (you can get a range of 5 octaves and a 3rd using a simple chromatic mapping for MIDI), I suggest you either:</p><p>* generate and #include a .snt file in the ABC headers to insert Standard MIDI Tuning messages into the MIDI file (this requires abcpp --due to the #include directive-- and you need tell microabc what is the tuning);<br/>or:<br/>* retune the MIDI file with Scala (this can do without abcpp and without explicit definition of the tuning).</p><p>Of course, retuning the file with Scala is easier. Let us stick with this option. You just need to assure the correct correspondence name/pitch for Scala mapping and microabc macros.</p><p>For the score, you should know that currently microabc can only deal with just intonation and linear or equal temperaments when interpretating Sagittal pitches (like [C#\], [C^] or [144D.2]). Therefore, we need to use an alternate way:</p><p>You know that one can represent Sagittal accidentals in ABC (with sagittal.fmt) by using their decimal codes (see files &grave;sagittal-list*&apos;); for instance, natural is 144, thus ^/144D or _/144D stand for &grave;D natural&apos;; sharp is 196, thus ^/196A is &grave;A sharp&apos;; flat is 92, thus _/96B is &grave;B flat&apos;. Make a list of the 24 pitches that way.</p><p>Here are a few sample lines:</p><p>0 C  ^/144C<br/>1 Db _/92D<br/>2 C# ^/196C<br/>3 D  ^/144D</p><p>* The first column is just an index to help check the scale. microabc can (must!) ignore this column.<br/>* The second column will be converted into macros like [C], [Db] or [C#].<br/>* The third column is the replacement string, only for the score: we want that [C] be converted into ^/144C; [Db] into _/92D and so on.<br/>* We shall retune the MIDI file with Scala, so we don&apos;t need to set any tuning (except if we want to export a .scl file -- I guess that is not the case). But the replacement text should not be like ^/144D or so; it should be a ABC code for a common MIDI pitch, obeying the order of the lines. For instance, [C] could become =C (MIDI number 60); [Db] could become ^C (61), [C#] could become =D (62) and so on.</p><p>microabc numbers the columns starting from 0. Therefore, column 1 (2nd column) is for macro names, in microabc known as &grave;&grave;aliases&apos;&apos;. The command for that is:</p><p>alias:1</p><p>Column 2 is used only for PS output (not for MIDI), therefore it is better activate it from command line, with the option:</p><p>replaceabc:2</p><p>(&grave;replaceabc:&apos; does the needed octave adjustments according to ABC syntax.)</p><p>Hence, our setup file (&grave;&grave;pepper24.txt&apos;&apos;) will look like this:</p><p>alias:1<br/>0 C  ^/144C<br/>1 Db _/92D<br/>2 C# ^/196C<br/>3 D  ^/144D<br/>{...}<br/>{...}</p><p>By default, microabc assumes that the central pitch is MIDI-60 (middle-C) and the output should be in &grave;&grave;chromatic mode&apos;&apos; (each scale pitch is mapped to a MIDI pitch); one can change that with the command &grave;centre:&apos; if needed.</p><p>By default, octaves in macros will be represented with &apos; and , . We are not using Sagittal accents (are we?), so this is just fine. C octave below is [C,], and C octave up is [C&apos;]. If you rather to use numbers, set &grave;modnum:&apos;. (There is a small limitation I can tell you later.)</p><p>Also by default, the range is from 0 up to 127 (or -60 up to +67 relative to the central pitch); one can change that with &grave;range:&apos;.</p><p>After writing the &grave;&grave;music.abp&apos;&apos; file (the music using macros), we can preprocess it to get a PS score -- recall we need &grave;replaceabc:2&apos;:</p><p>microabc -ipepper24.txt -Pmusic.abp -omusic4ps.abc replaceabc:2</p><p>For MIDI, it is simply:</p><p>microabc -ipepper24.txt -Mmusic.abp -omusic4mid.abc</p><p>(-P would work as well, once we are not converting Sagittal pitches -- Sagittal conversion is done _after_ replacing user-defined macros.)</p><p>Then, we run abc2midi and abc2ps on the generated ABC files, and finally use Scala to retune the MIDI file.</p><p>&gt; &gt; I must admit that I&apos;m the kind of user, the less efficient kind, where a<br/>&gt; syntax statement of &quot;usage&quot; often leaves me rather confused, but a few<br/>&gt; illustrative examples, typically moving from simple to more involved, can<br/>&gt; get me nicely oriented.</p><p>We could start by selecting some commonly used tunings for the examples, and thereafter sort them in a progressive order. I have started some non-Sagittal examples, but actual musical samples would be better.</p><p>&gt; &gt; A bit more than 3 years ago, George Secor and Dave Keenan helped me devise<br/>&gt; a pure sagittal notation for Peppermint based more or less on 121-EDO. I<br/>&gt; know which symbol I&apos;d like to make with which of the 24 notes, and have<br/>&gt; written down some decimal character mappings -- which I note from your<br/>&gt; documentation might also sometimes be written in PostScript octal<br/>&gt; notation.</p><p>Right. Octal notation is to represent characters in a PS string. Usually, they are needed only when creating new Sagittal accidentals (e.g. accented accidentals) or when using Sagittal characters in a text line.</p><p>&gt; &gt; Anyway, as a Scala user, the idea of just mapping the set of pitches I<br/>&gt; plan to use to a set of floating point ratios in cents for midi pitch<br/>&gt; bends or timidity tuning tables, and defining macros for the sagittal<br/>&gt; notation of each note, very much appeals to me.</p><p>I missed timidity tables completely... they can be used instead of retuning the file with Scala (or using SMT), when publishing only the rendered .ogg files.</p><p>To use pitchbends, Sagittal notation can be used (without require setup files or abcpp), but currently they cannot be adjusted/quantised to any tuning except for just intonation and linear or equal temperaments. You could use 121-EDO, for instance. That would be incomparably simpler than the recipe I gave above. Again, I will can provide better help when I know the tuning (and its Sagittal representation).</p><p>&gt; &gt; I&apos;m going to look over the examples again and see if I can figure out more<br/>&gt; for myself -- but I&apos;d love to help in writing more documentation, maybe in<br/>&gt; part by trying some simple projects with sagittal notation in tunings that<br/>&gt; I often use and cooperating with you to put together some examples and<br/>&gt; step by step procedures.</p><p>Sagittal is the more recent and less documented part of microabc. I feel that it is comming a time to freeze microabc development and care of documentation and bug fixes. There are still a list of things I would like to implement before that (like applying Sagittal accents for MIDI, supporting simultaneously mixed and pure forms, and printing warnings on non-recommended usage of Sagittal accidentals/nominals according to the current equal temperament).</p><p>&gt; &gt; One thing I have found, for example with some of the GNU documentation, is<br/>&gt; that a tutorial or patient explanation can very much smooth out the<br/>&gt; learning curve. If I can help in any way, that would be a great privilege.<br/>&gt; &gt; Peace and love, with many thanks,<br/>&gt; &gt; Margo<br/>&gt; Cheers,<br/>Hudson</p><p>P.S.: I can publish our examples and FAQs at SourceForge. I just did not learnt how to use CVS yet -- I see I need read its documentation with care... :-)</p><p>--<br/>  &apos;-------------------------------------------------------------------.<br/>Hudson Lacerda &lt;<a href="http://geocities.yahoo.com.br/hfmlacerda/">http://geocities.yahoo.com.br/hfmlacerda/</a>&gt;<br/>*N&iuml;&iquest;&half;o deixe seu voto sumir! <a href="http://www.votoseguro.org/">http://www.votoseguro.org/</a><br/>*Ap&iuml;&iquest;&half;ie o Manifesto:        <a href="http://www.votoseguro.com/alertaprofessores/">http://www.votoseguro.com/alertaprofessores/</a></p><p>                    == THE WAR IN IRAQ COSTS ==<br/><a href="http://nationalpriorities.org/index.php?option=com_wrapper&Itemid=182">http://nationalpriorities.org/index.php?option=com_wrapper&Itemid=182</a><br/>  .-------------------------------------------------------------------&apos;<br/>--</p><p>&#x9;&#x9;<br/>_______________________________________________________ Novidade no Yahoo! Mail: receba alertas de novas mensagens no seu celular. Registre seu aparelho agora! <a href="http://br.mobile.yahoo.com/mailalertas/">http://br.mobile.yahoo.com/mailalertas/</a></p></div>