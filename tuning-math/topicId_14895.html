<a href="/tuning-math">back to list</a><h1>best rational approximation</h1><h3>Carl Lumma &#x3C;ekin@lumma.org&#x3E;</h3><span>5/26/2006 10:36:03 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>In August of last year I asked about this (where best<br/>is &apos;lowest Tenney height&apos;) and people told me to check<br/>out Euclid&apos;s algorithm.  Though I know how to use it to<br/>find greatest common divisors, I can&apos;t seem to figure<br/>out how to use it to find rational approximations.</p><p>Around that time, I posted some code I thought might<br/>do the trick.  Here&apos;s some output to see if it&apos;s right.<br/>The first parameter is the target, the second is the<br/>factor of acceptable error, and the final number is the<br/>proposed answer.</p><p>(gear (sqrt 2) 1.4) 3/2<br/>(gear (sqrt 2) 1.07) 3/2<br/>(gear (sqrt 2) 1.06) 7/5<br/>(gear (sqrt 2) 1.02) 7/5<br/>(gear (sqrt 2) 1.01) 17/12<br/>(gear (sqrt 2) 1.001) 41/29<br/>(gear (sqrt 2) 1.0001) 99/70</p><p>(gear (sqrt 5) 1.01) 9/4<br/>(gear (sqrt 5) 1.001) 38/17<br/>(gear (sqrt 5) 1.0001) 161/72<br/>(gear (sqrt 5) 1.00001) 521/233<br/>(gear (sqrt 5) 1.000001) 2207/987</p><p>-Carl</p></div><h3>Gene Ward Smith &#x3C;genewardsmith@coolgoose.com&#x3E;</h3><span>5/26/2006 10:56:56 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>--- In <a href="mailto:tuning-math@yahoogroups.com">tuning-math@yahoogroups.com</a>, Carl Lumma &lt;ekin@...&gt; wrote:<br/>&gt;<br/>&gt; In August of last year I asked about this (where best<br/>&gt; is &apos;lowest Tenney height&apos;) and people told me to check<br/>&gt; out Euclid&apos;s algorithm.  Though I know how to use it to<br/>&gt; find greatest common divisors, I can&apos;t seem to figure<br/>&gt; out how to use it to find rational approximations.</p><p>&gt; (gear (sqrt 5) 1.00001) 521/233<br/>&gt; (gear (sqrt 5) 1.000001) 2207/987</p><p>You seem to be getting round off errors, but otherwise are on the<br/>right track.</p><p>The Euclidean algorithm stuff has to do with simple continued fractions.<br/>Check out:</p><p><a href="http://en.wikipedia.org/wiki/Continued_fraction">http://en.wikipedia.org/wiki/Continued_fraction</a></p><p>Plus Hardy and Wright or Niven and Zuckerman.</p></div><h3>Aaron Krister Johnson &#x3C;aaron@akjmusic.com&#x3E;</h3><span>5/27/2006 2:41:27 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>On Saturday 27 May 2006 12:24 pm, <a href="mailto:tuning-math@yahoogroups.com">tuning-math@yahoogroups.com</a> wrote:</p><p>&gt; In August of last year I asked about this (where best<br/>&gt; is &apos;lowest Tenney height&apos;) and people told me to check<br/>&gt; out Euclid&apos;s algorithm.  Though I know how to use it to<br/>&gt; find greatest common divisors, I can&apos;t seem to figure<br/>&gt; out how to use it to find rational approximations.<br/>&gt;<br/>&gt; Around that time, I posted some code I thought might<br/>&gt; do the trick.  Here&apos;s some output to see if it&apos;s right.<br/>&gt; The first parameter is the target, the second is the<br/>&gt; factor of acceptable error, and the final number is the<br/>&gt; proposed answer.<br/>&gt;<br/>&gt; (gear (sqrt 2) 1.4) 3/2<br/>&gt; (gear (sqrt 2) 1.07) 3/2<br/>&gt; (gear (sqrt 2) 1.06) 7/5<br/>&gt; (gear (sqrt 2) 1.02) 7/5<br/>&gt; (gear (sqrt 2) 1.01) 17/12<br/>&gt; (gear (sqrt 2) 1.001) 41/29<br/>&gt; (gear (sqrt 2) 1.0001) 99/70<br/>&gt;<br/>&gt; (gear (sqrt 5) 1.01) 9/4<br/>&gt; (gear (sqrt 5) 1.001) 38/17<br/>&gt; (gear (sqrt 5) 1.0001) 161/72<br/>&gt; (gear (sqrt 5) 1.00001) 521/233<br/>&gt; (gear (sqrt 5) 1.000001) 2207/987</p><p>Carl,</p><p>The other, &apos;brute force&apos; thing you could do is set up the Stern-Brocot tree<br/>and look for approximations to the left and right (greater than or less than)<br/>of your target.</p><p>When I have time, I&apos;ll post some Python code I&apos;ve used for this very thing (I<br/>came across this technique last week, actually, while investigating G.<br/>Secor&apos;s equal-beating temperaments, and the rationale behind his<br/>approximations)</p><p>But I&apos;m sure some kind of algorithm like Gene suggest, using continued<br/>fractions, is more direct (and probably closely related in concept)</p><p>Gene, care to post any pseudo-code (or actual code?)</p><p>-Aaron.</p></div><h3>Carl Lumma &#x3C;ekin@lumma.org&#x3E;</h3><span>5/27/2006 9:50:02 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>At 02:41 AM 5/27/2006, you wrote:<br/>&gt;On Saturday 27 May 2006 12:24 pm, <a href="mailto:tuning-math@yahoogroups.com">tuning-math@yahoogroups.com</a> wrote:<br/>&gt;<br/>&gt;&gt; In August of last year I asked about this (where best<br/>&gt;&gt; is &apos;lowest Tenney height&apos;) and people told me to check<br/>&gt;&gt; out Euclid&apos;s algorithm.  Though I know how to use it to<br/>&gt;&gt; find greatest common divisors, I can&apos;t seem to figure<br/>&gt;&gt; out how to use it to find rational approximations.<br/>&gt;&gt;<br/>&gt;&gt; Around that time, I posted some code I thought might<br/>&gt;&gt; do the trick.  Here&apos;s some output to see if it&apos;s right.<br/>&gt;&gt; The first parameter is the target, the second is the<br/>&gt;&gt; factor of acceptable error, and the final number is the<br/>&gt;&gt; proposed answer.<br/>&gt;&gt;<br/>&gt;&gt; (gear (sqrt 2) 1.4) 3/2<br/>&gt;&gt; (gear (sqrt 2) 1.07) 3/2<br/>&gt;&gt; (gear (sqrt 2) 1.06) 7/5<br/>&gt;&gt; (gear (sqrt 2) 1.02) 7/5<br/>&gt;&gt; (gear (sqrt 2) 1.01) 17/12<br/>&gt;&gt; (gear (sqrt 2) 1.001) 41/29<br/>&gt;&gt; (gear (sqrt 2) 1.0001) 99/70<br/>&gt;&gt;<br/>&gt;&gt; (gear (sqrt 5) 1.01) 9/4<br/>&gt;&gt; (gear (sqrt 5) 1.001) 38/17<br/>&gt;&gt; (gear (sqrt 5) 1.0001) 161/72<br/>&gt;&gt; (gear (sqrt 5) 1.00001) 521/233<br/>&gt;&gt; (gear (sqrt 5) 1.000001) 2207/987<br/>&gt;<br/>&gt;Carl,<br/>&gt;<br/>&gt;The other, &apos;brute force&apos; thing you could do is set up the Stern-Brocot tree<br/>&gt;and look for approximations to the left and right (greater than or less than)<br/>&gt;of your target.</p><p>That sounds like what I&apos;m doing!</p><p>-Carl</p></div><h3>Carl Lumma &#x3C;ekin@lumma.org&#x3E;</h3><span>5/27/2006 10:10:13 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>&gt;&gt; (gear (sqrt 5) 1.00001) 521/233<br/>&gt;&gt; (gear (sqrt 5) 1.000001) 2207/987<br/>&gt;<br/>&gt;You seem to be getting round off errors, but otherwise are on the<br/>&gt;right track.</p><p>I seed the tree with floor(target/range) and ceiling(target*range),<br/>which seems to me the appropriate thing.  Here&apos;s what I do:</p><p>s1       s2<br/>  a<br/>      b<br/>   c<br/>    t</p><p>S1 and S2 are the seeds, and A is their mediant.  Now I take<br/>the mediant between A and the previous generation&apos;s number<br/>that&apos;s on the other side of the target T from it (in this case<br/>S2, yielding B).  Then between B and A yielding C, and let&apos;s<br/>say C is within range so I return it.  No rounding should be<br/>happening.  Here&apos;s a trace of mediants used to find the &quot;gear&quot;<br/>from (sqrt 5) within a factor of 1.000001 (which I&apos;m claming<br/>is 2207/987)...</p><p>|(middle 2 3)<br/>|5/2<br/>|(middle 2 5/2)<br/>|7/3<br/>|(middle 2 7/3)<br/>|9/4<br/>|(middle 2 9/4)<br/>|11/5<br/>|(middle 11/5 9/4)<br/>|20/9<br/>|(middle 20/9 9/4)<br/>|29/13<br/>|(middle 29/13 9/4)<br/>|38/17<br/>|(middle 38/17 9/4)<br/>|47/21<br/>|(middle 38/17 47/21)<br/>|85/38<br/>|(middle 38/17 85/38)<br/>|123/55<br/>|(middle 38/17 123/55)<br/>|161/72<br/>|(middle 38/17 161/72)<br/>|199/89<br/>|(middle 199/89 161/72)<br/>|360/161<br/>|(middle 360/161 161/72)<br/>|521/233<br/>|(middle 521/233 161/72)<br/>|682/305<br/>|(middle 682/305 161/72)<br/>|843/377<br/>|(middle 682/305 843/377)<br/>|1525/682<br/>|(middle 682/305 1525/682)<br/>|2207/987</p><p>&gt;The Euclidean algorithm stuff has to do with simple continued fractions.<br/>&gt;Check out:<br/>&gt;<br/>&gt;<a href="http://en.wikipedia.org/wiki/Continued_fraction">http://en.wikipedia.org/wiki/Continued_fraction</a></p><p>I looked at that, but it&apos;s damn confusing.  However, continued<br/>fractions are apparently paths through the Stern Brocot tree,<br/>so I think if I do it right I&apos;m ok.</p><p>&gt;Plus Hardy and Wright or Niven and Zuckerman.</p><p>Tx, I&apos;ll search for those.</p><p>-Carl</p></div><h3>Gene Ward Smith &#x3C;genewardsmith@coolgoose.com&#x3E;</h3><span>5/27/2006 10:45:45 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>--- In <a href="mailto:tuning-math@yahoogroups.com">tuning-math@yahoogroups.com</a>, Carl Lumma &lt;ekin@...&gt; wrote:</p><p>If you have some x, call it x0. Then set n0 = floor(x0), and<br/>x1 = 1/(x0-n0). Iterate this, n_i = floor(x_i), and<br/>x_(i+1) = 1/(x_i-n_i). You then get a sequence of positive integers<br/>&lt;n0, n1, n2, ...&gt; which is the continued fraction for x; for every<br/>irrational x, there is a *unique* continued fraction, which is pretty<br/>neat.</p><p>Now set h[-2] = 0, h[-1] = 1, h[i] = n_i h[i-1] + h[i-2], and similarly<br/>k[-2] = 1, k[-1] = 0, k[i] = n_i k[i-1] + k[i-2].  Then Q[i] = h[i]/k[i]<br/>is the ith continued fraction approximate for x, starting from i=0.</p></div><h3>Aaron Krister Johnson &#x3C;aaron@akjmusic.com&#x3E;</h3><span>5/27/2006 11:17:52 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>--- In <a href="mailto:tuning-math@yahoogroups.com">tuning-math@yahoogroups.com</a>, &quot;Gene Ward Smith&quot;<br/>&lt;genewardsmith@...&gt; wrote:<br/>&gt;<br/>&gt; --- In <a href="mailto:tuning-math@yahoogroups.com">tuning-math@yahoogroups.com</a>, Carl Lumma &lt;ekin@&gt; wrote:<br/>&gt;<br/>&gt; If you have some x, call it x0. Then set n0 = floor(x0), and<br/>&gt; x1 = 1/(x0-n0). Iterate this, n_i = floor(x_i), and<br/>&gt; x_(i+1) = 1/(x_i-n_i). You then get a sequence of positive integers<br/>&gt; &lt;n0, n1, n2, ...&gt; which is the continued fraction for x; for every<br/>&gt; irrational x, there is a *unique* continued fraction, which is pretty<br/>&gt; neat.<br/>&gt;<br/>&gt; Now set h[-2] = 0, h[-1] = 1, h[i] = n_i h[i-1] + h[i-2], and similarly<br/>&gt; k[-2] = 1, k[-1] = 0, k[i] = n_i k[i-1] + k[i-2].  Then Q[i] = h[i]/k[i]<br/>&gt; is the ith continued fraction approximate for x, starting from i=0.<br/>&gt;<br/>Thanks, Gene!</p><p>I see the connection between<br/>        h[-2] = 0, h[-1] = 1<br/>               and<br/>        k[-2] = 1, k[-1] = 0<br/>must be the first seeds of the Stern-Brocot tree, yes?<br/>      i.e., 0/1 , 1/0, right?</p><p>Fascinating!</p><p>This is related to the Euclidean GCD algorithm too, of course...</p><p>I would love to post some Python code for this, and run it, and you<br/>could confirm that it works.</p><p>Carl, I&apos;m still trying to post what you wrote, I think we were<br/>thinking along the same lines, however, I can&apos;t understand whether<br/>you included in your idea the understanding that unless one starts<br/>with true Stern-Brocot seed fractions, one could end up with errors<br/>in that the SB-tree should never contain fractions which could be<br/>reduced by a common factor--i.e., the numerators and denominators of<br/>each should be relatively prime. The only way to insure this would<br/>be (apparently) the algorithm Gene gave, or to start the tree with<br/>&apos;0/1 1/0&apos;, and make sure that your upper and lower bounds are always<br/>derived as true medians from two adjacent terms from a generation<br/>that derives from that initial seed....(I hope what I just wrote<br/>makes sense to the casual reader!)</p><p>-Aaron</p></div><h3>Aaron Krister Johnson &#x3C;aaron@akjmusic.com&#x3E;</h3><span>5/27/2006 11:14:24 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>--- In <a href="mailto:tuning-math@yahoogroups.com">tuning-math@yahoogroups.com</a>, &quot;Gene Ward Smith&quot;<br/>&lt;genewardsmith@...&gt; wrote:<br/>&gt;<br/>&gt; --- In <a href="mailto:tuning-math@yahoogroups.com">tuning-math@yahoogroups.com</a>, Carl Lumma &lt;ekin@&gt; wrote:<br/>&gt;<br/>&gt; If you have some x, call it x0. Then set n0 = floor(x0), and<br/>&gt; x1 = 1/(x0-n0). Iterate this, n_i = floor(x_i), and<br/>&gt; x_(i+1) = 1/(x_i-n_i). You then get a sequence of positive<br/>integers<br/>&gt; &lt;n0, n1, n2, ...&gt; which is the continued fraction for x; for every<br/>&gt; irrational x, there is a *unique* continued fraction, which is<br/>pretty<br/>&gt; neat.<br/>&gt;<br/>&gt; Now set h[-2] = 0, h[-1] = 1, h[i] = n_i h[i-1] + h[i-2], and<br/>similarly<br/>&gt; k[-2] = 1, k[-1] = 0, k[i] = n_i k[i-1] + k[i-2].  Then Q[i] =<br/>h[i]/k[i]<br/>&gt; is the ith continued fraction approximate for x, starting from<br/>i=0.</p><p>Thanks, Gene!</p><p>I see the connection between<br/>        h[-2] = 0, h[-1] = 1<br/>               and<br/>        k[-2] = 1, k[-1] = 0<br/>must be the first seeds of the Stern-Brocot tree, yes?<br/>      i.e., 0/1 , 1/0, right?</p><p>Fascinating!</p><p>This is related to the Euclidean GCD algorithm too, of course...</p><p>I would love to post some Python code for this, and run it, and you<br/>could confirm that it works.</p><p>Carl, I&apos;m still trying to post what you wrote, I think we were<br/>thinking along the same lines, however, I can&apos;t understand whether<br/>you included in your idea the understanding that unless one starts<br/>with true Stern-Brocot seed fractions, one could end up with errors<br/>in that the SB-tree should never contain fractions which could be<br/>reduced by a common factor--i.e., the numerators and denominators of<br/>each should be relatively prime. The only way to insure this would<br/>be (apparently) the algorithm Gene gave, or to start the tree with<br/>&apos;0/1 1/0&apos;, and make sure that your upper and lower bounds are always<br/>derived as true medians from two adjacent terms from a generation<br/>that derives from that initial seed....(I hope what I just wrote<br/>makes sense to the casual reader!)</p><p>-Aaron</p></div><h3>Kees van Prooijen &#x3C;lists@kees.cc&#x3E;</h3><span>5/27/2006 11:54:39 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>This is also as I used it.</p><p>Have a look:</p><p><a href="http://www.kees.cc/tuning/interface.html">http://www.kees.cc/tuning/interface.html</a></p><p>Kees</p><p>--- In <a href="mailto:tuning-math@yahoogroups.com">tuning-math@yahoogroups.com</a>, &quot;Gene Ward Smith&quot;<br/>&lt;genewardsmith@...&gt; wrote:<br/>&gt;<br/>&gt; --- In <a href="mailto:tuning-math@yahoogroups.com">tuning-math@yahoogroups.com</a>, Carl Lumma &lt;ekin@&gt; wrote:<br/>&gt;<br/>&gt; If you have some x, call it x0. Then set n0 = floor(x0), and<br/>&gt; x1 = 1/(x0-n0). Iterate this, n_i = floor(x_i), and<br/>&gt; x_(i+1) = 1/(x_i-n_i). You then get a sequence of positive integers<br/>&gt; &lt;n0, n1, n2, ...&gt; which is the continued fraction for x; for every<br/>&gt; irrational x, there is a *unique* continued fraction, which is<br/>pretty<br/>&gt; neat.<br/>&gt;<br/>&gt; Now set h[-2] = 0, h[-1] = 1, h[i] = n_i h[i-1] + h[i-2], and<br/>similarly<br/>&gt; k[-2] = 1, k[-1] = 0, k[i] = n_i k[i-1] + k[i-2].  Then Q[i] = h<br/>[i]/k[i]<br/>&gt; is the ith continued fraction approximate for x, starting from i=0.<br/>&gt;</p></div><h3>Carl Lumma &#x3C;ekin@lumma.org&#x3E;</h3><span>5/27/2006 2:18:07 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>&gt;I would love to post some Python code for this, and run it, and you<br/>&gt;could confirm that it works.</p><p>Sure, I have Python here.</p><p>&gt;Carl, I&apos;m still trying to post what you wrote, I think we were<br/>&gt;thinking along the same lines, however, I can&apos;t understand whether<br/>&gt;you included in your idea the understanding that unless one starts<br/>&gt;with true Stern-Brocot seed fractions, one could end up with errors<br/>&gt;in that the SB-tree should never contain fractions which could be<br/>&gt;reduced by a common factor--i.e., the numerators and denominators of<br/>&gt;each should be relatively prime. The only way to insure this would<br/>&gt;be (apparently) the algorithm Gene gave, or to start the tree with<br/>&gt;&apos;0/1 1/0&apos;, and make sure that your upper and lower bounds are always<br/>&gt;derived as true medians from two adjacent terms from a generation<br/>&gt;that derives from that initial seed....(I hope what I just wrote<br/>&gt;makes sense to the casual reader!)</p><p>Is that true?  Brocot&apos;s original procedure uses seeds that<br/>are the floor and ceiling of the target.</p><p><a href="http://www.americanscientist.org/template/AssetDetail/assetid/20826?print=yes">http://www.americanscientist.org/template/AssetDetail/assetid/20826?print=yes</a></p><p>-Carl</p></div><h3>Carl Lumma &#x3C;ekin@lumma.org&#x3E;</h3><span>5/27/2006 3:30:26 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>&gt;If you have some x, call it x0. Then set n0 = floor(x0), and<br/>&gt;x1 = 1/(x0-n0). Iterate this, n_i = floor(x_i), and<br/>&gt;x_(i+1) = 1/(x_i-n_i). You then get a sequence of positive integers<br/>&gt;&lt;n0, n1, n2, ...&gt; which is the continued fraction for x; for every<br/>&gt;irrational x, there is a *unique* continued fraction, which is pretty<br/>&gt;neat.<br/>&gt;<br/>&gt;Now set h[-2] = 0, h[-1] = 1, h[i] = n_i h[i-1] + h[i-2], and similarly<br/>&gt;k[-2] = 1, k[-1] = 0, k[i] = n_i k[i-1] + k[i-2].  Then Q[i] = h[i]/k[i]<br/>&gt;is the ith continued fraction approximate for x, starting from i=0.</p><p>This looks like what I&apos;ve been seeing, attributed apparently<br/>to Gauss.  Here you&apos;ve explained it more clearly than I&apos;ve<br/>seen it elsewhere.  I guess I&apos;ll code it up.  Can you prove<br/>it gives least Tenney Height results (I&apos;ve only seen that it<br/>gives least denominator results)?</p><p>-Carl</p></div><h3>Carl Lumma &#x3C;ekin@lumma.org&#x3E;</h3><span>5/29/2006 11:08:30 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>Since nobody can find a counterexample to the results I&apos;ve given,<br/>I&apos;ll assume my procedure works and there&apos;s no need to worry about<br/>Gauss.</p><p>-Carl</p></div><h3>Gene Ward Smith &#x3C;genewardsmith@coolgoose.com&#x3E;</h3><span>5/29/2006 11:15:51 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>--- In <a href="mailto:tuning-math@yahoogroups.com">tuning-math@yahoogroups.com</a>, Carl Lumma &lt;ekin@...&gt; wrote:<br/>&gt;<br/>&gt; Since nobody can find a counterexample to the results I&apos;ve given,<br/>&gt; I&apos;ll assume my procedure works and there&apos;s no need to worry about<br/>&gt; Gauss.</p><p>I thought I pointed out that some of the values were wrong? Though I<br/>think that was round-off error.</p></div><h3>Carl Lumma &#x3C;ekin@lumma.org&#x3E;</h3><span>5/29/2006 12:10:24 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>&gt;&gt; Since nobody can find a counterexample to the results I&apos;ve given,<br/>&gt;&gt; I&apos;ll assume my procedure works and there&apos;s no need to worry about<br/>&gt;&gt; Gauss.<br/>&gt;<br/>&gt;I thought I pointed out that some of the values were wrong? Though I<br/>&gt;think that was round-off error.</p><p>There was:</p><p>&quot;<br/>&gt; (gear (sqrt 5) 1.00001) 521/233<br/>&gt; (gear (sqrt 5) 1.000001) 2207/987</p><p>You seem to be getting round off errors, but otherwise are on the<br/>right track.<br/>&quot;</p><p>But what are the correct answers?</p><p>-Carl</p></div><h3>Gene Ward Smith &#x3C;genewardsmith@coolgoose.com&#x3E;</h3><span>5/29/2006 1:40:39 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>--- In <a href="mailto:tuning-math@yahoogroups.com">tuning-math@yahoogroups.com</a>, Carl Lumma &lt;ekin@...&gt; wrote:</p><p>&gt; But what are the correct answers?</p><p>For sqrt(5), a particularly simple example BTW, it&apos;s 2, 9/4, 38/17,<br/>161/72, 682/305, 2889/1292, 12238/5473. If N[i]/D[i] is the nth term,<br/>then the n+1 term is (4*N[i]+N[i-1])/(4*D[i]+D[i-1]), making them easy<br/>to compute. Another fun fact is that if you substitute N[i]/D[i] into<br/>(x+5/x)/2, you get N[2i]/D[2i].</p></div><h3>Carl Lumma &#x3C;ekin@lumma.org&#x3E;</h3><span>5/29/2006 1:57:57 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>&gt;&gt;&gt; (gear (sqrt 5) 1.00001) 521/233<br/>&gt;&gt;&gt; (gear (sqrt 5) 1.000001) 2207/987<br/>&gt;&gt;<br/>&gt;&gt;You seem to be getting round off errors, but otherwise are on the<br/>&gt;&gt;right track.<br/>&gt;<br/>&gt;But what are the correct answers?<br/>&gt;<br/>&gt;For sqrt(5), a particularly simple example BTW, it&apos;s 2, 9/4, 38/17,<br/>&gt;161/72, 682/305, 2889/1292, 12238/5473.</p><p>Ok, so the first of these that&apos;s within a factor of 1.00001<br/>(north or south) of sqrt(5) is 682/305...</p><p>&gt; (/ (sqrt 5) 682/305)<br/>1.0000010749815775</p><p>161/72 just misses...</p><p>&gt; (/ 161/72 (sqrt 5))<br/>1.0000192899374059</p><p>And we have</p><p>&gt; (tenneyheight 682/305)<br/>208010</p><p>Meanwhile, my answer, 521/233, is within the range</p><p>&gt; (/ (sqrt 5) 521/233)<br/>1.0000073680565278</p><p>and has a *lower tenney height*...</p><p>&gt; (tenneyheight 521/233)<br/>121393</p><p>For the tighter 1.000001 range, it looks like we have to go to<br/>2889/1292...</p><p>&gt; (/ 2889/1292 (sqrt 5))<br/>1.0000000599066396</p><p>And again, my answer...</p><p>&gt; (/ 2207/987 (sqrt 5))<br/>1.000000410606289</p><p>has lower tenney height and denominator...</p><p>&gt; (tenneyheight 2889/1292)<br/>3732588</p><p>&gt; (tenneyheight 2207/987)<br/>2178309</p><p>-Carl</p></div><h3>Gene Ward Smith &#x3C;genewardsmith@coolgoose.com&#x3E;</h3><span>5/29/2006 3:10:36 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>--- In <a href="mailto:tuning-math@yahoogroups.com">tuning-math@yahoogroups.com</a>, Carl Lumma &lt;ekin@...&gt; wrote:</p><p>&gt; Ok, so the first of these that&apos;s within a factor of 1.00001<br/>&gt; (north or south) of sqrt(5) is 682/305...<br/>&gt;<br/>&gt; &gt; (/ (sqrt 5) 682/305)<br/>&gt; 1.0000010749815775</p><p>D^2 * |sqrt(5)-N/D| = 0.2236</p><p>&gt; 161/72 just misses...<br/>&gt;<br/>&gt; &gt; (/ 161/72 (sqrt 5))<br/>&gt; 1.0000192899374059</p><p>D^2 * |sqrt(5)-N/D| = 0.2236</p><p>&gt; And we have<br/>&gt;<br/>&gt; &gt; (tenneyheight 682/305)<br/>&gt; 208010</p><p>D^2 * |sqrt(5)-N/D| = 0.2236</p><p>&gt; Meanwhile, my answer, 521/233, is within the range<br/>&gt;<br/>&gt; &gt; (/ (sqrt 5) 521/233)<br/>&gt; 1.0000073680565278<br/>&gt;<br/>&gt; and has a *lower tenney height*...</p><p>D^2 * |sqrt(5)-N/D| = 0.8944 (not as good!)</p><p>&gt; For the tighter 1.000001 range, it looks like we have to go to<br/>&gt; 2889/1292...<br/>&gt;<br/>&gt; &gt; (/ 2889/1292 (sqrt 5))<br/>&gt; 1.0000000599066396</p><p>D^2 * |sqrt(5)-N/D| = 0.2236</p><p>&gt; And again, my answer...<br/>&gt;<br/>&gt; &gt; (/ 2207/987 (sqrt 5))<br/>&gt; 1.000000410606289</p><p>D^2 * |sqrt(5)-N/D| = 0.8944</p><p>Your approximations are semiconvergents, but not convergents.</p></div><h3>Carl Lumma &#x3C;ekin@lumma.org&#x3E;</h3><span>5/29/2006 6:16:38 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>&gt;&gt; Ok, so the first of these that&apos;s within a factor of 1.00001<br/>&gt;&gt; (north or south) of sqrt(5) is 682/305...<br/>&gt;&gt;<br/>&gt;&gt; &gt; (/ (sqrt 5) 682/305)<br/>&gt;&gt; 1.0000010749815775<br/>&gt;<br/>&gt;D^2 * |sqrt(5)-N/D| = 0.2236</p><p>What&apos;s the significance of D^2 ??</p><p>&gt;Your approximations are semiconvergents, but not convergents.</p><p>Who cares?  I just want the least Tenney height within the<br/>range.</p><p>-Carl</p></div><h3>Gene Ward Smith &#x3C;genewardsmith@coolgoose.com&#x3E;</h3><span>5/29/2006 6:45:56 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>--- In <a href="mailto:tuning-math@yahoogroups.com">tuning-math@yahoogroups.com</a>, Carl Lumma &lt;ekin@...&gt; wrote:<br/>&gt;<br/>&gt; &gt;&gt; Ok, so the first of these that&apos;s within a factor of 1.00001<br/>&gt; &gt;&gt; (north or south) of sqrt(5) is 682/305...<br/>&gt; &gt;&gt;<br/>&gt; &gt;&gt; &gt; (/ (sqrt 5) 682/305)<br/>&gt; &gt;&gt; 1.0000010749815775<br/>&gt; &gt;<br/>&gt; &gt;D^2 * |sqrt(5)-N/D| = 0.2236<br/>&gt;<br/>&gt; What&apos;s the significance of D^2 ??</p><p>I&apos;m just showing that relative to the size of the numbers involved,<br/>your approximations are not the best possible. You could relate this<br/>to Tenney height by multiplying the error by the numerator times the<br/>denominator. If e is the error and T is the Tenney height, we get to<br/>close approximation that Te = constant1 for the best values, and<br/>constant2 for the second best.</p></div><h3>Carl Lumma &#x3C;ekin@lumma.org&#x3E;</h3><span>5/29/2006 8:06:07 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>At 06:45 PM 5/29/2006, you wrote:<br/>&gt;--- In <a href="mailto:tuning-math@yahoogroups.com">tuning-math@yahoogroups.com</a>, Carl Lumma &lt;ekin@...&gt; wrote:<br/>&gt;&gt;<br/>&gt;&gt; &gt;&gt; Ok, so the first of these that&apos;s within a factor of 1.00001<br/>&gt;&gt; &gt;&gt; (north or south) of sqrt(5) is 682/305...<br/>&gt;&gt; &gt;&gt;<br/>&gt;&gt; &gt;&gt; &gt; (/ (sqrt 5) 682/305)<br/>&gt;&gt; &gt;&gt; 1.0000010749815775<br/>&gt;&gt; &gt;<br/>&gt;&gt; &gt;D^2 * |sqrt(5)-N/D| = 0.2236<br/>&gt;&gt;<br/>&gt;&gt; What&apos;s the significance of D^2 ??<br/>&gt;<br/>&gt;I&apos;m just showing that relative to the size of the numbers involved,<br/>&gt;your approximations are not the best possible.</p><p>I just want the simplest number in the range, nothing more.</p><p>-Carl</p></div>