<a href="/tuning-math">back to list</a><h1>TE weighting for subgroups with fractional bases?</h1><h3>Mike Battaglia &#x3C;battaglia01@gmail.com&#x3E;</h3><span>4/28/2011 11:54:32 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>Let&apos;s take a look at Biome, the rank 3 <a href="http://2.3.7.13/10">2.3.7.13/10</a> temperament<br/>eliminating 91/90:</p><p><a href="http://x31eq.com/cgi-bin/rt.cgi?ets=22p+27p+46p&limit=2.3.7.13/10">http://x31eq.com/cgi-bin/rt.cgi?ets=22p+27p+46p&limit=2.3.7.13/10</a></p><p>That tuning map should look awful weird...</p><p>&lt;1200.000, 1907.273, 3360.484, 454.062]</p><p>And so it is. We have a near-perfect 13/10, within 0.2 cents of<br/>perfect, but 7/1 is 7 cents flat. This is no good.</p><p>My own POTE code, which I just wrote thanks to Graham&apos;s help, exhibits<br/>the same bug, so I know what the deal is: it&apos;s setting the weighting<br/>for 13/10 equal to 1/log2(13/10). So since 13/10 is small, it weights<br/>it even more strongly than 2/1. Changing the subgroup to 13/5 is a<br/>little better, 26/5 even more so, etc.</p><p>So the question is, how should we weight fractions like this? Is there<br/>some way to utilize the L2 norm to work it out? This problem doesn&apos;t<br/>come up with &quot;primes&quot; like 9 or 15, but it sure as hell comes up for<br/>13/10. Graham has suggested using temperamental complexity as a<br/>starting point, although I don&apos;t understand all the details of that.</p><p>-Mike</p></div><h3>Graham Breed &#x3C;gbreed@gmail.com&#x3E;</h3><span>4/29/2011 1:37:46 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>Mike Battaglia &lt;<a href="mailto:battaglia01@gmail.com">battaglia01@gmail.com</a>&gt; wrote:</p><p>&gt; My own POTE code, which I just wrote thanks to Graham&apos;s<br/>&gt; help, exhibits the same bug, so I know what the deal is:<br/>&gt; it&apos;s setting the weighting for 13/10 equal to<br/>&gt; 1/log2(13/10). So since 13/10 is small, it weights it<br/>&gt; even more strongly than 2/1. Changing the subgroup to<br/>&gt; 13/5 is a little better, 26/5 even more so, etc.<br/>&gt;<br/>&gt; So the question is, how should we weight fractions like<br/>&gt; this? Is there some way to utilize the L2 norm to work it<br/>&gt; out? This problem doesn&apos;t come up with &quot;primes&quot; like 9 or<br/>&gt; 15, but it sure as hell comes up for 13/10. Graham has<br/>&gt; suggested using temperamental complexity as a starting<br/>&gt; point, although I don&apos;t understand all the details of<br/>&gt; that.</p><p>What you can do is list every interval you&apos;re interested in<br/>as a vector in terms of this subgroup.  Then, put those<br/>vectors into a matrix.  Multiply that matrix by its<br/>transpose to get a 4x4 matrix.  This is the Gram matrix<br/>that defines an inner product.  Hopefully, it&apos;s the<br/>&quot;observation covariance matrix&quot; that Matlab&apos;s lscov wants<br/>for a general least-squares computation.  I can&apos;t check<br/>that because I don&apos;t have Matlab.</p><p>If you don&apos;t have a list of interesting intervals, the<br/>first thing is to define the subgroup in terms of the<br/>13-limit:</p><p>subgroup =<br/>[1,0,0,0,0,0;0,1,0,0,0,0;0,0,0,1,0,0;0,0,-1,0,0,1];</p><p>Tenney weight it to give this weighted mapping matrix that<br/>I&apos;ll call M:</p><p>[1.000000000000000000000000000 0 0 0 0 0]</p><p>[0 0.6309297535714574370995271143 0 0 0 0]</p><p>[0 0 0 0.4306765580733930506701065688 0 0]</p><p>[0 0 -0.3562071871080221765141770780 0 0<br/>0.3562071871080221765141770780]</p><p>You can multiply M by its transpose to give a Gram matrix.<br/>In Pari/GP, this is M~*M.  In Matlab, it seems to be M&apos;*M.<br/>The result is:</p><p>[1.000000000000000000000000000 0 0 0]</p><p>[0 0.3980723539417400086049989598 0 0]</p><p>[0 0 0.1268835601474095202711337558 0]</p><p>[0 0 0 0.2585109577822286091855855181]</p><p>This happens to be the same as temperamental complexity.<br/>To get an interval complexity metric, you&apos;d take the<br/>inverse.  But for rating mappings you don&apos;t need that.  If<br/>you&apos;re using a formula that requires weighted mappings, you<br/>can take the square roots of the diagonals to use as<br/>weights.</p><p>That 0.259 is, in fact, (log(2)/log(5))^2 +<br/>(log(2)/log(13))^2.</p><p>You could have chosen your subgroup with 13/10 instead of<br/>13/5.</p><p>subgroup2 =<br/>[1,0,0,0,0,0;0,1,0,0,0,0;0,0,0,1,0,0;-1,0,-1,0,0,1];</p><p>That leads to a weighted Gram matrix of</p><p>[1.000000000000000000000000000 0 0<br/>-1.000000000000000000000000000]</p><p>[0 0.3980723539417400086049989598 0 0]</p><p>[0 0 0.1268835601474095202711337558 0]</p><p>[-1.000000000000000000000000000 0 0<br/>1.258510957782228609185585518]</p><p>The -1 elements in the off-diagonals tell you that 13/10<br/>isn&apos;t atomically complex, and could be replaced with 13/5.</p><p>                       Graham</p></div><h3>Mike Battaglia &#x3C;battaglia01@gmail.com&#x3E;</h3><span>4/30/2011 4:59:14 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>On Fri, Apr 29, 2011 at 4:37 AM, Graham Breed &lt;<a href="mailto:gbreed@gmail.com">gbreed@gmail.com</a>&gt; wrote:<br/>&gt;<br/>&gt; This happens to be the same as temperamental complexity.<br/>&gt; To get an interval complexity metric, you&apos;d take the<br/>&gt; inverse. But for rating mappings you don&apos;t need that. If<br/>&gt; you&apos;re using a formula that requires weighted mappings, you<br/>&gt; can take the square roots of the diagonals to use as<br/>&gt; weights.</p><p>Alright. That makes sense. I also notice that 0.259, which as you said<br/>is the value this spits out, is very close to 1/log2(78/5). So I guess<br/>for the purposes of using your temperament finder, <a href="http://2.3.7.78/5">2.3.7.78/5</a> is the<br/>way to go.</p><p>-Mike</p></div>