<a href="/tuning-math">back to list</a><h1>Weird phenomenon with octave-equivalent harmonic entropy curves</h1><h3>Keenan Pepper &#x3C;keenanpepper@gmail.com&#x3E;</h3><span>4/13/2011 4:02:57 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>So, I wanted some really good octave-equivalent HE curves (to do some analysis based on them of MOSes or chords or whatever). I made them myself by just generating all the ratios of some large odd limit (that is, a huge tonality diamond), finding the midpoints between them, and then finding the Gaussian probability for each ratio and plugging into the Shannon entropy formula. (I can show you the Python code if you&apos;re interested.)</p><p>But I noticed this weird phenomenon that I haven&apos;t seen mentioned before, even though I just checked the HE list archives. As you increase the number of ratios in the &quot;seed&quot; or &quot;basis&quot; set, the HE curve has the same maxima and minima, as expected, and the same overall shape *except* that there&apos;s an increasing trend for &quot;small&quot; intervals (near the unison or octaves) to have higher entropy than &quot;large&quot; intervals (near the half octave). This is shown in the following plot:</p><p><a href="https://docs.google.com/viewer?a=v&pid=explorer&chrome=true&srcid=0B9CMyeCjAMQGZWVkYmVhNzgtMDJiNS00NzM5LTk2ZmEtNGI1Nzc0M2VhMDJh&hl=en">https://docs.google.com/viewer?a=v&pid=explorer&chrome=true&srcid=0B9CMyeCjAMQGZWVkYmVhNzgtMDJiNS00NzM5LTk2ZmEtNGI1Nzc0M2VhMDJh&hl=en</a></p><p>(The entropies have all been normalized so the HE of 1/1 is 0 and the maximum HE is 1, for ease of comparison.)</p><p>As you can see, with small bases the curve has a very reasonable overall shape, but as the basis gets larger the shape distorts and the ranking is no longer consistent. This is a big problem for what I was trying to do for the following reason: If you compare the HEs of, say, 7/6 and 7/5, for small bases they are about the same HE, which makes sense, but the curves for larger bases tell you that 7/5 has *much* less entropy than 7/6, even less than 6/5 or 5/4. So although the maxima and minima still make sense, if you want to compare a bunch of arbitrary intervals to each other it&apos;s no good.</p><p>Digging a little deeper, I wondered if this was due to an actual nonuniformity in the asymptotic density of ratios in large tonality diamonds. If you plot the ordering of each ratio in an odd limit against the ratio itself (for example 8/7 is the 4th ratio of the 9-limit after 1/1, 10/9, 9/8, so in that case I would plot the point (231, 4)), then you get what looks like a perfectly straight line, which tells you the density is pretty close to being uniform. But if you subtract out the linear part and look at the deviation from a straight line, what you get is this:</p><p><a href="https://docs.google.com/viewer?a=v&pid=explorer&chrome=true&srcid=0B9CMyeCjAMQGMTIwZGU5ODQtNjk2NC00ZDY0LWE2MzAtNzk4MjRkN2FlMmFi&hl=en">https://docs.google.com/viewer?a=v&pid=explorer&chrome=true&srcid=0B9CMyeCjAMQGMTIwZGU5ODQtNjk2NC00ZDY0LWE2MzAtNzk4MjRkN2FlMmFi&hl=en</a></p><p>The little glitches at simple ratios are to be expected; they just tell you that around each simple ratio the other ratios become more sparse. The weird part is that you don&apos;t just see these glitches - instead the main thing you see is a giant sinusoid-like variation! It tells you that around 1/2, 1/1, 2/1... the ratios are more sparse in general, and around 1/sqrt(2), sqrt(2), 2*sqrt(2)... the ratios are more dense. This totally explains the shape of the HE curves, but what explains *this*?</p><p>Does anybody have a clue? Digging around a little on the Internet leads me to believe it might be not-too-distantly related to the Riemann hypothesis. (!!!)</p><p>And even if nobody knows a mathematical explanation for this, are there any suggestions how to get around it? I gather that a way to solve this problem for non-octave-equivalent HE curves is to use Tenney height n*d, instead of max(n,d), to limit the basis sets. However, I tried the obvious analog of this for octave-equivalent HE (namely, the largest odd factor of n*d), and the resulting curves looked bizarre - sort of like an HE curve but with really weird ranking of the intervals. Is there some other natural choice of basis set that might give me HE curves that don&apos;t get distorted?</p></div><h3>Kalle Aho &#x3C;kalleaho@mappi.helsinki.fi&#x3E;</h3><span>4/13/2011 5:37:45 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>So, does this kind of thing happen only with the octave-equivalent HE<br/>or is there a similar phenomenon with plain HE?</p><p>Kalle</p><p>--- In <a href="mailto:tuning-math@yahoogroups.com">tuning-math@yahoogroups.com</a>, &quot;Keenan Pepper&quot; &lt;keenanpepper@...&gt; wrote:<br/>&gt;<br/>&gt; So, I wanted some really good octave-equivalent HE curves (to do some analysis based on them of MOSes or chords or whatever). I made them myself by just generating all the ratios of some large odd limit (that is, a huge tonality diamond), finding the midpoints between them, and then finding the Gaussian probability for each ratio and plugging into the Shannon entropy formula. (I can show you the Python code if you&apos;re interested.)<br/>&gt;<br/>&gt; But I noticed this weird phenomenon that I haven&apos;t seen mentioned before, even though I just checked the HE list archives. As you increase the number of ratios in the &quot;seed&quot; or &quot;basis&quot; set, the HE curve has the same maxima and minima, as expected, and the same overall shape *except* that there&apos;s an increasing trend for &quot;small&quot; intervals (near the unison or octaves) to have higher entropy than &quot;large&quot; intervals (near the half octave). This is shown in the following plot:<br/>&gt;<br/>&gt; <a href="https://docs.google.com/viewer?a=v&pid=explorer&chrome=true&srcid=0B9CMyeCjAMQGZWVkYmVhNzgtMDJiNS00NzM5LTk2ZmEtNGI1Nzc0M2VhMDJh&hl=en">https://docs.google.com/viewer?a=v&pid=explorer&chrome=true&srcid=0B9CMyeCjAMQGZWVkYmVhNzgtMDJiNS00NzM5LTk2ZmEtNGI1Nzc0M2VhMDJh&hl=en</a><br/>&gt;<br/>&gt; (The entropies have all been normalized so the HE of 1/1 is 0 and the maximum HE is 1, for ease of comparison.)<br/>&gt;<br/>&gt; As you can see, with small bases the curve has a very reasonable overall shape, but as the basis gets larger the shape distorts and the ranking is no longer consistent. This is a big problem for what I was trying to do for the following reason: If you compare the HEs of, say, 7/6 and 7/5, for small bases they are about the same HE, which makes sense, but the curves for larger bases tell you that 7/5 has *much* less entropy than 7/6, even less than 6/5 or 5/4. So although the maxima and minima still make sense, if you want to compare a bunch of arbitrary intervals to each other it&apos;s no good.<br/>&gt;<br/>&gt; Digging a little deeper, I wondered if this was due to an actual nonuniformity in the asymptotic density of ratios in large tonality diamonds. If you plot the ordering of each ratio in an odd limit against the ratio itself (for example 8/7 is the 4th ratio of the 9-limit after 1/1, 10/9, 9/8, so in that case I would plot the point (231, 4)), then you get what looks like a perfectly straight line, which tells you the density is pretty close to being uniform. But if you subtract out the linear part and look at the deviation from a straight line, what you get is this:<br/>&gt;<br/>&gt; <a href="https://docs.google.com/viewer?a=v&pid=explorer&chrome=true&srcid=0B9CMyeCjAMQGMTIwZGU5ODQtNjk2NC00ZDY0LWE2MzAtNzk4MjRkN2FlMmFi&hl=en">https://docs.google.com/viewer?a=v&pid=explorer&chrome=true&srcid=0B9CMyeCjAMQGMTIwZGU5ODQtNjk2NC00ZDY0LWE2MzAtNzk4MjRkN2FlMmFi&hl=en</a><br/>&gt;<br/>&gt; The little glitches at simple ratios are to be expected; they just tell you that around each simple ratio the other ratios become more sparse. The weird part is that you don&apos;t just see these glitches - instead the main thing you see is a giant sinusoid-like variation! It tells you that around 1/2, 1/1, 2/1... the ratios are more sparse in general, and around 1/sqrt(2), sqrt(2), 2*sqrt(2)... the ratios are more dense. This totally explains the shape of the HE curves, but what explains *this*?<br/>&gt;<br/>&gt; Does anybody have a clue? Digging around a little on the Internet leads me to believe it might be not-too-distantly related to the Riemann hypothesis. (!!!)<br/>&gt;<br/>&gt; And even if nobody knows a mathematical explanation for this, are there any suggestions how to get around it? I gather that a way to solve this problem for non-octave-equivalent HE curves is to use Tenney height n*d, instead of max(n,d), to limit the basis sets. However, I tried the obvious analog of this for octave-equivalent HE (namely, the largest odd factor of n*d), and the resulting curves looked bizarre - sort of like an HE curve but with really weird ranking of the intervals. Is there some other natural choice of basis set that might give me HE curves that don&apos;t get distorted?<br/>&gt;</p></div><h3>Mike Battaglia &#x3C;battaglia01@gmail.com&#x3E;</h3><span>4/13/2011 6:38:07 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>On Wed, Apr 13, 2011 at 7:02 AM, Keenan Pepper &lt;<a href="mailto:keenanpepper@gmail.com">keenanpepper@gmail.com</a>&gt; wrote:<br/>&gt;<br/>&gt; So, I wanted some really good octave-equivalent HE curves (to do some analysis based on them of MOSes or chords or whatever). I made them myself by just generating all the ratios of some large odd limit (that is, a huge tonality diamond), finding the midpoints between them, and then finding the Gaussian probability for each ratio and plugging into the Shannon entropy formula. (I can show you the Python code if you&apos;re interested.)</p><p>The series that you use to generate the curves will determine its<br/>shape. The Farey series will give it a downward slope; the Tenney<br/>series will give it a pretty horizontal, neutral slops, and if you<br/>ever decide to use the Stern-Brocot tree, you&apos;ll find that that&apos;s just<br/>ridiculous. For odd limit, the rule seems to be max(n&apos;,d&apos;) &lt; N, where<br/>n&apos; and d&apos; are n and d that are divided down by 2 as much as possible.<br/>So I would expect the curve will have a slope that looks like a Farey<br/>series looped back in on itself; i.e. the downward slope of a Farey<br/>series HE curve will then become un-downward as it works back up to<br/>2/1.</p><p>&gt; As you can see, with small bases the curve has a very reasonable overall shape, but as the basis gets larger the shape distorts and the ranking is no longer consistent. This is a big problem for what I was trying to do for the following reason: If you compare the HEs of, say, 7/6 and 7/5, for small bases they are about the same HE, which makes sense, but the curves for larger bases tell you that 7/5 has *much* less entropy than 7/6, even less than 6/5 or 5/4. So although the maxima and minima still make sense, if you want to compare a bunch of arbitrary intervals to each other it&apos;s no good.</p><p>Is it that there starts to be the trend of a general downward slope?<br/>Can you post the non-octave version? You&apos;re using a pretty interesting<br/>series, and I haven&apos;t seen it much before.</p><p>&gt; Digging a little deeper, I wondered if this was due to an actual nonuniformity in the asymptotic density of ratios in large tonality diamonds. If you plot the ordering of each ratio in an odd limit against the ratio itself (for example 8/7 is the 4th ratio of the 9-limit after 1/1, 10/9, 9/8, so in that case I would plot the point (231, 4)), then you get what looks like a perfectly straight line, which tells you the density is pretty close to being uniform. But if you subtract out the linear part and look at the deviation from a straight line, what you get is this:<br/>&gt;<br/>&gt; <a href="https://docs.google.com/viewer?a=v&pid=explorer&chrome=true&srcid=0B9CMyeCjAMQGMTIwZGU5ODQtNjk2NC00ZDY0LWE2MzAtNzk4MjRkN2FlMmFi&hl=en">https://docs.google.com/viewer?a=v&pid=explorer&chrome=true&srcid=0B9CMyeCjAMQGMTIwZGU5ODQtNjk2NC00ZDY0LWE2MzAtNzk4MjRkN2FlMmFi&hl=en</a></p><p>It says:</p><p>Sorry, we are unable to generate a view of the document at this time.<br/>Please try again later.</p><p>&gt; The little glitches at simple ratios are to be expected; they just tell you that around each simple ratio the other ratios become more sparse. The weird part is that you don&apos;t just see these glitches - instead the main thing you see is a giant sinusoid-like variation! It tells you that around 1/2, 1/1, 2/1... the ratios are more sparse in general, and around 1/sqrt(2), sqrt(2), 2*sqrt(2)... the ratios are more dense. This totally explains the shape of the HE curves, but what explains *this*?</p><p>I think it&apos;s because you&apos;ve built octave equivalence into the series<br/>that you&apos;re using. I&apos;m not sure how Paul did it originally - it seemed<br/>rather that he had just generated Tenney series plots from 0-1200 and<br/>then added a horizontally flipped version to the original.</p><p>&gt; Does anybody have a clue? Digging around a little on the Internet leads me to believe it might be not-too-distantly related to the Riemann hypothesis. (!!!)</p><p>The distribution of the Farey numbers is subjected to the Riemann<br/>hypothesis, and the distribution of this series is definitely related<br/>to the distribution of the Fare numbers. But I&apos;m not sure that&apos;s<br/>what&apos;s at work here...</p><p>&gt; And even if nobody knows a mathematical explanation for this, are there any suggestions how to get around it? I gather that a way to solve this problem for non-octave-equivalent HE curves is to use Tenney height n*d, instead of max(n,d), to limit the basis sets. However, I tried the obvious analog of this for octave-equivalent HE (namely, the largest odd factor of n*d), and the resulting curves looked bizarre - sort of like an HE curve but with really weird ranking of the intervals. Is there some other natural choice of basis set that might give me HE curves that don&apos;t get distorted?</p><p>This is why I&apos;m a fan of just using impulses and convolving with a<br/>Gaussian, because if you&apos;re trying to tweak the series that you&apos;re<br/>using to get an HE curve of a certain shape, you might as well just<br/>get that shape directly with the convolution. Why not first calculate<br/>n&apos;*d&apos; &lt; N, where n&apos; and d&apos; are just n and d with all factors of 2<br/>removed? Maybe that&apos;ll do the trick.</p><p>-Mike</p></div><h3>Keenan Pepper &#x3C;keenanpepper@gmail.com&#x3E;</h3><span>4/13/2011 9:57:24 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>--- In <a href="mailto:tuning-math@yahoogroups.com">tuning-math@yahoogroups.com</a>, Mike Battaglia &lt;battaglia01@...&gt; wrote:<br/>&gt; The series that you use to generate the curves will determine its<br/>&gt; shape. The Farey series will give it a downward slope; the Tenney<br/>&gt; series will give it a pretty horizontal, neutral slops, and if you<br/>&gt; ever decide to use the Stern-Brocot tree, you&apos;ll find that that&apos;s just<br/>&gt; ridiculous. For odd limit, the rule seems to be max(n&apos;,d&apos;) &lt; N, where<br/>&gt; n&apos; and d&apos; are n and d that are divided down by 2 as much as possible.</p><p>This makes sense. By &quot;Stern-Brocot tree&quot;, I assume you mean using the set of all ratios on the Stern-Brocot tree down to a certain fixed level? That is, perform the operation &quot;add all mediants&quot; N times?</p><p>&gt; So I would expect the curve will have a slope that looks like a Farey<br/>&gt; series looped back in on itself; i.e. the downward slope of a Farey<br/>&gt; series HE curve will then become un-downward as it works back up to<br/>&gt; 2/1.</p><p>This is really far from obvious to me. Could you explain your reasoning here?</p><p>To me, it seems natural that the Farey sequence must have a density that goes down away from 1/1, because it&apos;s defined on the open-ended number line R. The density of ratios around 10^100 is definitely going to be much less than the density of ratios around 1. But octave-equivalent sequences are defined on the closed interval [1, sqrt(2)] or [0, 600] cents, so I see no reason the same thing should apply to them.</p><p>&gt; Is it that there starts to be the trend of a general downward slope?<br/>&gt; Can you post the non-octave version? You&apos;re using a pretty interesting<br/>&gt; series, and I haven&apos;t seen it much before.</p><p>What non-octave version? I&apos;m using odd limits as bases, which are naturally periodic at the octave. If I calculated the HE outside the range [0, 600] it would be an even, periodic function, so the new parts of the curve would just be reflections of what you&apos;ve already seen.</p><p>In other words, I&apos;m not doing anything to make it octave-equivalent, it just comes out that way. I guess I could artificially make it non-octave-equivalent by truncating the odd limit at some arbitrary point (e.g. by including 7/5 but not 10/7 and so on), but what purpose would that serve?</p><p>&gt; It says:<br/>&gt;<br/>&gt; Sorry, we are unable to generate a view of the document at this time.<br/>&gt; Please try again later.</p><p>Drat. The other one works though? That&apos;s weird.</p><p>&gt; I think it&apos;s because you&apos;ve built octave equivalence into the series<br/>&gt; that you&apos;re using. I&apos;m not sure how Paul did it originally - it seemed<br/>&gt; rather that he had just generated Tenney series plots from 0-1200 and<br/>&gt; then added a horizontally flipped version to the original.</p><p>See, that seems really ugly and artificial to me. If you added a version shifted by 1200 as well as the flipped version, or shifted and then flipped, it would also change it, right? So to do this properly you&apos;d have to sum the infinite series of functions you get by applying all symmetry transformations.</p><p>&gt; This is why I&apos;m a fan of just using impulses and convolving with a<br/>&gt; Gaussian, because if you&apos;re trying to tweak the series that you&apos;re<br/>&gt; using to get an HE curve of a certain shape, you might as well just<br/>&gt; get that shape directly with the convolution. Why not first calculate<br/>&gt; n&apos;*d&apos; &lt; N, where n&apos; and d&apos; are just n and d with all factors of 2<br/>&gt; removed? Maybe that&apos;ll do the trick.</p><p>You&apos;re talking about making a Gaussian kernel density plot of the basis, right? I don&apos;t see how that is supposed to solve my problem because you&apos;re still looking at the local density of ratios in the basis, and if that density is non-uniform the curve you get will still have that overall shape to it (and it will still get worse as you increase the basis size).</p><p>I did try using the obvious &quot;odd Tenney limit&quot; n&apos; * d&apos; &lt; N (which is equivalent to (n*d)&apos; &lt; N because it doesn&apos;t matter whether you remove factors of 2 first or multiply first). That was the one I said looked really bizarre. I&apos;ll post a plot later.</p><p>Keenan</p></div><h3>Keenan Pepper &#x3C;keenanpepper@gmail.com&#x3E;</h3><span>4/13/2011 10:04:52 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>--- In <a href="mailto:tuning-math@yahoogroups.com">tuning-math@yahoogroups.com</a>, &quot;Kalle Aho&quot; &lt;kalleaho@...&gt; wrote:<br/>&gt;<br/>&gt; So, does this kind of thing happen only with the octave-equivalent HE<br/>&gt; or is there a similar phenomenon with plain HE?</p><p>This is actually a really good question because, although I know that Farey-sequence-based HE curves have an overall shape to them, I never actually tried it out to see if that shape gets more pronounced as you increase the basis size.</p><p>That&apos;s really what&apos;s bothering me here. I wouldn&apos;t really care what the shape was as long as it converged to *something*. I guess the problem is that, if you just used the whole of the rational numbers Q as your basis set, the entropy of everything would be infinite. But we just want the finite variations on top of this infinite background entropy, so we do some &quot;renormalization&quot; in the manner of quantum field theory.</p><p>Keenan</p></div><h3>Keenan Pepper &#x3C;keenanpepper@gmail.com&#x3E;</h3><span>4/13/2011 10:39:37 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>--- In <a href="mailto:tuning-math@yahoogroups.com">tuning-math@yahoogroups.com</a>, &quot;Keenan Pepper&quot; &lt;keenanpepper@...&gt; wrote:<br/>&gt;<br/>&gt;<br/>&gt;<br/>&gt; --- In <a href="mailto:tuning-math@yahoogroups.com">tuning-math@yahoogroups.com</a>, Mike Battaglia &lt;battaglia01@&gt; wrote:<br/>&gt; &gt; It says:<br/>&gt; &gt;<br/>&gt; &gt; Sorry, we are unable to generate a view of the document at this time.<br/>&gt; &gt; Please try again later.<br/>&gt;<br/>&gt; Drat. The other one works though? That&apos;s weird.</p><p>Here&apos;s a rasterized PNG version. The PDF version with millions of points was probably just too big for Google Docs.</p><p><a href="https://docs.google.com/leaf?id=0B9CMyeCjAMQGYjA0ODkxODYtY2E1Ny00OWJkLWE1ZDEtMWM2ZWEwNjgwOGVh&hl=en">https://docs.google.com/leaf?id=0B9CMyeCjAMQGYjA0ODkxODYtY2E1Ny00OWJkLWE1ZDEtMWM2ZWEwNjgwOGVh&hl=en</a></p></div><h3>Keenan Pepper &#x3C;keenanpepper@gmail.com&#x3E;</h3><span>4/13/2011 11:49:07 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>--- In <a href="mailto:tuning-math@yahoogroups.com">tuning-math@yahoogroups.com</a>, &quot;Keenan Pepper&quot; &lt;keenanpepper@...&gt; wrote:<br/>&gt;<br/>&gt; --- In <a href="mailto:tuning-math@yahoogroups.com">tuning-math@yahoogroups.com</a>, &quot;Kalle Aho&quot; &lt;kalleaho@&gt; wrote:<br/>&gt; &gt;<br/>&gt; &gt; So, does this kind of thing happen only with the octave-equivalent HE<br/>&gt; &gt; or is there a similar phenomenon with plain HE?<br/>&gt;<br/>&gt; This is actually a really good question because, although I know that Farey-sequence-based HE curves have an overall shape to them, I never actually tried it out to see if that shape gets more pronounced as you increase the basis size.</p><p>The slope definitely does get more pronounced for larger Farey bases:</p><p><a href="https://docs.google.com/viewer?a=v&pid=explorer&chrome=true&srcid=0B9CMyeCjAMQGMDliYjAxZGUtMDBlMi00MDE1LThiMTYtNTU5M2EzYzA2ZDg4&hl=en">https://docs.google.com/viewer?a=v&pid=explorer&chrome=true&srcid=0B9CMyeCjAMQGMDliYjAxZGUtMDBlMi00MDE1LThiMTYtNTU5M2EzYzA2ZDg4&hl=en</a></p><p>But the thread subject still makes sense, I think, because for the non-octave-equivalent case it&apos;s obvious that the density must go down between e.g. 1 and 10^100. In the octave-equivalent case it&apos;s not obvious why the density should vary at all (unless I&apos;m completely missing something which Mike will explain).</p></div><h3>Keenan Pepper &#x3C;keenanpepper@gmail.com&#x3E;</h3><span>4/13/2011 12:10:51 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>--- In <a href="mailto:tuning-math@yahoogroups.com">tuning-math@yahoogroups.com</a>, &quot;Keenan Pepper&quot; &lt;keenanpepper@...&gt; wrote:<br/>&gt; I did try using the obvious &quot;odd Tenney limit&quot; n&apos; * d&apos; &lt; N (which is equivalent to (n*d)&apos; &lt; N because it doesn&apos;t matter whether you remove factors of 2 first or multiply first). That was the one I said looked really bizarre. I&apos;ll post a plot later.</p><p>Here are some of those:</p><p><a href="https://docs.google.com/viewer?a=v&pid=explorer&chrome=true&srcid=0B9CMyeCjAMQGZjVmNGMyYTYtMjE2Yi00NDVjLWEyMDAtN2JmZDA1NmJiNTNm&hl=en">https://docs.google.com/viewer?a=v&pid=explorer&chrome=true&srcid=0B9CMyeCjAMQGZjVmNGMyYTYtMjE2Yi00NDVjLWEyMDAtN2JmZDA1NmJiNTNm&hl=en</a></p><p>Notice that there are a lot of dips in the right places (4/3, 5/4, etc.), but the overall shape is totally weird. One especially weird thing that I can&apos;t explain at all is the sudden drop in entropy that gradually moves to the right as you increase N from about 4000-5000, then hangs out around 350 cents from then on.</p><p>When I first saw these I was sure I had a programming error, but I double checked and all my functions seem to be doing what they&apos;re supposed to.</p><p>Keenan</p></div><h3>Mike Battaglia &#x3C;battaglia01@gmail.com&#x3E;</h3><span>4/13/2011 4:01:49 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>On Wed, Apr 13, 2011 at 12:57 PM, Keenan Pepper &lt;<a href="mailto:keenanpepper@gmail.com">keenanpepper@gmail.com</a>&gt; wrote:<br/>&gt;<br/>&gt; --- In <a href="mailto:tuning-math@yahoogroups.com">tuning-math@yahoogroups.com</a>, Mike Battaglia &lt;battaglia01@...&gt; wrote:<br/>&gt; &gt; The series that you use to generate the curves will determine its<br/>&gt; &gt; shape. The Farey series will give it a downward slope; the Tenney<br/>&gt; &gt; series will give it a pretty horizontal, neutral slops, and if you<br/>&gt; &gt; ever decide to use the Stern-Brocot tree, you&apos;ll find that that&apos;s just<br/>&gt; &gt; ridiculous. For odd limit, the rule seems to be max(n&apos;,d&apos;) &lt; N, where<br/>&gt; &gt; n&apos; and d&apos; are n and d that are divided down by 2 as much as possible.<br/>&gt;<br/>&gt; This makes sense. By &quot;Stern-Brocot tree&quot;, I assume you mean using the set of all ratios on the Stern-Brocot tree down to a certain fixed level? That is, perform the operation &quot;add all mediants&quot; N times?</p><p>Right. It&apos;s ridiculous.</p><p>&gt; &gt; So I would expect the curve will have a slope that looks like a Farey<br/>&gt; &gt; series looped back in on itself; i.e. the downward slope of a Farey<br/>&gt; &gt; series HE curve will then become un-downward as it works back up to<br/>&gt; &gt; 2/1.<br/>&gt;<br/>&gt; This is really far from obvious to me. Could you explain your reasoning here?</p><p>I&apos;m just speculating, but it seemed like you were using max(n,d),<br/>right? Well, when the rule is to use d, the slope goes down and to the<br/>right. I&apos;m simply speculating that since you&apos;re using max(n,d), the<br/>slope will start to go down, reach a peak in the middle where all of<br/>the ratios are things like 11/8 and 7/5 and so on, and then go back up<br/>when you start to hit something like 2/1. It seemed like it would be<br/>symmetrical. I dunno man, I was just waking up when I wrote that,<br/>sorry :P</p><p>&gt; To me, it seems natural that the Farey sequence must have a density that goes down away from 1/1, because it&apos;s defined on the open-ended number line R. The density of ratios around 10^100 is definitely going to be much less than the density of ratios around 1. But octave-equivalent sequences are defined on the closed interval [1, sqrt(2)] or [0, 600] cents, so I see no reason the same thing should apply to them.</p><p>Right, if what you&apos;re doing is going to cause the curve to reflect on<br/>itself, is it not the case that the density will reach a minimum at<br/>sqrt(2)? But I think you&apos;re aware of this, and are looking for a<br/>concrete mathematical proof of what&apos;s going on. I was just trying to<br/>provide you with some initial points of departure that might have been<br/>useful.</p><p>&gt; &gt; I think it&apos;s because you&apos;ve built octave equivalence into the series<br/>&gt; &gt; that you&apos;re using. I&apos;m not sure how Paul did it originally - it seemed<br/>&gt; &gt; rather that he had just generated Tenney series plots from 0-1200 and<br/>&gt; &gt; then added a horizontally flipped version to the original.<br/>&gt;<br/>&gt; See, that seems really ugly and artificial to me. If you added a version shifted by 1200 as well as the flipped version, or shifted and then flipped, it would also change it, right? So to do this properly you&apos;d have to sum the infinite series of functions you get by applying all symmetry transformations.</p><p>You could convolve the normal HE curve, symmetricized about 0 cents,<br/>with an impulse train of period 1200 cents.</p><p>&gt; &gt; This is why I&apos;m a fan of just using impulses and convolving with a<br/>&gt; &gt; Gaussian, because if you&apos;re trying to tweak the series that you&apos;re<br/>&gt; &gt; using to get an HE curve of a certain shape, you might as well just<br/>&gt; &gt; get that shape directly with the convolution. Why not first calculate<br/>&gt; &gt; n&apos;*d&apos; &lt; N, where n&apos; and d&apos; are just n and d with all factors of 2<br/>&gt; &gt; removed? Maybe that&apos;ll do the trick.<br/>&gt;<br/>&gt; You&apos;re talking about making a Gaussian kernel density plot of the basis, right? I don&apos;t see how that is supposed to solve my problem because you&apos;re still looking at the local density of ratios in the basis, and if that density is non-uniform the curve you get will still have that overall shape to it (and it will still get worse as you increase the basis size).</p><p>I&apos;m not sure what a Gaussian kernel density plot is - I was talking<br/>more about my attempts to model HE as the convolution of a &quot;basis&quot;<br/>function looking like this</p><p><a href="http://en.wikipedia.org/wiki/Thomae%27s_function">http://en.wikipedia.org/wiki/Thomae%27s_function</a></p><p>and a Gaussian. The whole thing ended inconclusively. What is a<br/>Gaussian kernel density plot? Is that what I was doing?</p><p>-Mike</p></div><h3>Keenan Pepper &#x3C;keenanpepper@gmail.com&#x3E;</h3><span>4/13/2011 7:20:13 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>--- In <a href="mailto:tuning-math@yahoogroups.com">tuning-math@yahoogroups.com</a>, Mike Battaglia &lt;battaglia01@...&gt; wrote:<br/>&gt; I&apos;m just speculating, but it seemed like you were using max(n,d),<br/>&gt; right? Well, when the rule is to use d, the slope goes down and to the<br/>&gt; right. I&apos;m simply speculating that since you&apos;re using max(n,d), the<br/>&gt; slope will start to go down, reach a peak in the middle where all of<br/>&gt; the ratios are things like 11/8 and 7/5 and so on, and then go back up<br/>&gt; when you start to hit something like 2/1. It seemed like it would be<br/>&gt; symmetrical. I dunno man, I was just waking up when I wrote that,<br/>&gt; sorry :P</p><p>I&apos;m using the odd limit, that is, max(n&apos;, d&apos;) where n&apos; and d&apos; are numerator and denominator with all 2s factored out. So for ratios between 1/1 and 2/1 this works out to be the same as:</p><p>n, unless n is even, else d</p><p>I think there might be something to what you say, but I haven&apos;t quite figured it out yet.</p><p>&gt; Right, if what you&apos;re doing is going to cause the curve to reflect on<br/>&gt; itself, is it not the case that the density will reach a minimum at<br/>&gt; sqrt(2)? But I think you&apos;re aware of this, and are looking for a<br/>&gt; concrete mathematical proof of what&apos;s going on. I was just trying to<br/>&gt; provide you with some initial points of departure that might have been<br/>&gt; useful.</p><p>That seems like it makes sense...</p><p>&gt; You could convolve the normal HE curve, symmetricized about 0 cents,<br/>&gt; with an impulse train of period 1200 cents.</p><p>Right, but how do you actually do this with the infinite train? I guess there&apos;s nothing wrong with using a finite train as an approximation. That&apos;s something I should try, at least.</p><p>&gt; I&apos;m not sure what a Gaussian kernel density plot is - I was talking<br/>&gt; more about my attempts to model HE as the convolution of a &quot;basis&quot;<br/>&gt; function looking like this<br/>&gt;<br/>&gt; <a href="http://en.wikipedia.org/wiki/Thomae%27s_function">http://en.wikipedia.org/wiki/Thomae%27s_function</a><br/>&gt;<br/>&gt; and a Gaussian. The whole thing ended inconclusively. What is a<br/>&gt; Gaussian kernel density plot? Is that what I was doing?</p><p>If you have a set of real numbers and you want to visualize their distribution, the simplest thing is to put them in bins and make a histogram. But sometimes histograms have an unacceptable trade-off between poor resolution (from too large bins) and a noisy density curve (from to small bins). The second simplest thing you can do is make a kernel density plot by summing up a bunch of gaussians (or other kernel functions), one centered at each of your data points. So it&apos;s a continuous analog of a histogram.</p><p>I believe what you&apos;re talking about is exactly a kernel density plot. Now you know another name for it!</p><p>Keenan</p></div><h3>Carl Lumma &#x3C;carl@lumma.org&#x3E;</h3><span>4/13/2011 7:39:05 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>Keenan wrote:</p><p>&gt;And even if nobody knows a mathematical explanation for this, are<br/>&gt;there any suggestions how to get around it? I gather that a way to<br/>&gt;solve this problem for non-octave-equivalent HE curves is to use<br/>&gt;Tenney height n*d, instead of max(n,d), to limit the basis sets.<br/>&gt;However, I tried the obvious analog of this for octave-equivalent HE<br/>&gt;(namely, the largest odd factor of n*d), and the resulting curves<br/>&gt;looked bizarre - sort of like an HE curve but with really weird<br/>&gt;ranking of the intervals. Is there some other natural choice of basis<br/>&gt;set that might give me HE curves that don&apos;t get distorted?</p><p>I don&apos;t believe any meaningful octave-equivalent harmonic entropy<br/>is possible.  Paul&apos;s version simply averaged the entropies of<br/>octave equivalents.  I never thought this made any sense.</p><p>&gt;by just generating all the ratios of some large odd limit (that<br/>&gt;is, a huge tonality diamond), finding the midpoints between them</p><p>What is the justification for using these midpoints?</p><p>-Carl</p></div><h3>Carl Lumma &#x3C;carl@lumma.org&#x3E;</h3><span>4/13/2011 7:56:39 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>Keenan wrote:</p><p>&gt;That&apos;s really what&apos;s bothering me here. I wouldn&apos;t really care what<br/>&gt;the shape was as long as it converged to *something*. I guess the<br/>&gt;problem is that, if you just used the whole of the rational numbers Q<br/>&gt;as your basis set, the entropy of everything would be infinite. But we<br/>&gt;just want the finite variations on top of this infinite background<br/>&gt;entropy, so we do some &quot;renormalization&quot; in the manner of quantum field<br/>&gt;theory.</p><p>Paul claimed it did, with either the Farey series or the Tenney<br/>series.  Here&apos;s a graph he made to illustrate this, though it&apos;s<br/>hard to make out details</p><p><a href="http://groups.yahoo.com/group/tuning/files/PaulErlich/manuel.jpg">http://groups.yahoo.com/group/tuning/files/PaulErlich/manuel.jpg</a></p><p>-Carl</p></div><h3>Carl Lumma &#x3C;carl@lumma.org&#x3E;</h3><span>4/13/2011 8:10:16 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>I wrote:</p><p>&gt;&gt;by just generating all the ratios of some large odd limit (that<br/>&gt;&gt;is, a huge tonality diamond), finding the midpoints between them<br/>&gt;<br/>&gt;What is the justification for using these midpoints?</p><p>Sorry, I misunderstood what you were saying.  This seems reasonable,<br/>though AFAIK Paul always partitioned the space with mediants (which<br/>are naturally compatible with the Farey series) or else used an<br/>approximation based on Tenney height (naturally compatible with the<br/>Tenney series).</p><p>So I guess my question is, if you approximate the widths by<br/>Tenney height (or perhaps 1/max(n&apos;, d&apos;) to keep with the odd-limit<br/>spirit) or use mediants, does the anomaly go away?</p><p>-Carl</p></div><h3>Keenan Pepper &#x3C;keenanpepper@gmail.com&#x3E;</h3><span>4/18/2011 12:02:52 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>--- In <a href="mailto:tuning-math@yahoogroups.com">tuning-math@yahoogroups.com</a>, Carl Lumma &lt;carl@...&gt; wrote:<br/>&gt;<br/>&gt; I wrote:<br/>&gt;<br/>&gt; &gt;&gt;by just generating all the ratios of some large odd limit (that<br/>&gt; &gt;&gt;is, a huge tonality diamond), finding the midpoints between them<br/>&gt; &gt;<br/>&gt; &gt;What is the justification for using these midpoints?<br/>&gt;<br/>&gt; Sorry, I misunderstood what you were saying.  This seems reasonable,<br/>&gt; though AFAIK Paul always partitioned the space with mediants (which<br/>&gt; are naturally compatible with the Farey series) or else used an<br/>&gt; approximation based on Tenney height (naturally compatible with the<br/>&gt; Tenney series).<br/>&gt;<br/>&gt; So I guess my question is, if you approximate the widths by<br/>&gt; Tenney height (or perhaps 1/max(n&apos;, d&apos;) to keep with the odd-limit<br/>&gt; spirit) or use mediants, does the anomaly go away?</p><p>No, that doesn&apos;t help at all. Here&apos;s the one using 1/max(n&apos;, d&apos;) (odd limit width approximation):</p><p><a href="https://docs.google.com/viewer?a=v&pid=explorer&chrome=true&srcid=0B9CMyeCjAMQGYmViZjE2ZTQtYWZjZS00ZjNhLTgzZDgtMDNlN2ExNmQ1YjRj&hl=en">https://docs.google.com/viewer?a=v&pid=explorer&chrome=true&srcid=0B9CMyeCjAMQGYmViZjE2ZTQtYWZjZS00ZjNhLTgzZDgtMDNlN2ExNmQ1YjRj&hl=en</a></p><p>and here&apos;s another one using an &quot;odd Tenney height&quot; width approximation (1/sqrt(n&apos;*d&apos;)):</p><p><a href="https://docs.google.com/viewer?a=v&pid=explorer&chrome=true&srcid=0B9CMyeCjAMQGZTcwZTMzNTYtYTRhOC00YjBiLTlhN2UtMTQ2ZWRjNWQyOWVj&hl=en">https://docs.google.com/viewer?a=v&pid=explorer&chrome=true&srcid=0B9CMyeCjAMQGZTcwZTMzNTYtYTRhOC00YjBiLTlhN2UtMTQ2ZWRjNWQyOWVj&hl=en</a></p><p>Clearly, both still change shape as the basis gets larger.</p><p>I think what I&apos;m going to do now is use an odd limit basis, but fit the overall density nonuniformity with a few Fourier terms and subtract the corresponding entropy, log(rho), from the HE curve. Conveniently, the density is guaranteed to be an even function, so I just need a cosine series.</p><p>It&apos;d be much nicer if I had a real theoretical expression for the density, but as long as the HE curve looks as I expect it to, I&apos;m not going to worry about it.</p><p>Keenan</p></div><h3>Carl Lumma &#x3C;carl@lumma.org&#x3E;</h3><span>5/20/2011 11:32:06 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>&gt;I don&apos;t believe any meaningful octave-equivalent harmonic entropy<br/>&gt;is possible.  Paul&apos;s version simply averaged the entropies of<br/>&gt;octave equivalents.  I never thought this made any sense.</p><p>The reason it didn&apos;t make any sense is because it&apos;s not what<br/>Paul did -- my mistake.  Actually, he does seem to have used<br/>such an approach on at least one occasion, but his primary<br/>octave-equivalent entropy always used seed-by-odd-limit, just<br/>like Keenan&apos;s.</p><p>Sorry for the confusion.  -Carl</p></div>