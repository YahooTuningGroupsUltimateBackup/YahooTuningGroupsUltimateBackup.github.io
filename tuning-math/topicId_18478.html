<a href="/tuning-math">back to list</a><h1>Representing a p-limit comma in terms of the two simplest intervals that it equates</h1><h3>Mike Battaglia &#x3C;battaglia01@gmail.com&#x3E;</h3><span>12/27/2010 2:02:33 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>I have found it extremely useful, when learning about a new<br/>temperament, to figure out what the most common intervals are that it<br/>equates. For example:</p><p>Tempering 81/80 - meantone - equates 9/8 and 10/9<br/>Tempering 64/63 - superpyth - equates 9/8 and 8/7<br/>Tempering 50/49 - pajara - equates 7/5 and 10/7<br/>Tempering 250/243 - porcupine - equates 10/9 and 27/25 (also useful to<br/>think of it as equating 81/80 and 25/24)<br/>Tempering 16/15 - father - equates 4/3 and 5/4<br/>Tempering 25/24 - dicot - equates 6/5 and 5/4, equates 10/9 and 16/15<br/>Tempering 128/125 - augmented - equates 16/15 and 25/24<br/>Tempering 3125/3072 - magic - equates 128/125 and 25/24</p><p>There might be something simpler for magic but I&apos;m not sure what it is.</p><p>Either way, is there some kind of algorithm that can determine, for<br/>some comma being tempered out, the two simplest intervals that it<br/>equates? For 81/80, for example, the two simplest intervals would be<br/>9/8 and 10/9 rather than 81/80 and 1/1. Perhaps something that<br/>minimizes (n1*d1) + (n2*d2) would be best.</p><p>-Mike</p></div><h3>Mike Battaglia &#x3C;battaglia01@gmail.com&#x3E;</h3><span>12/28/2010 2:42:38 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>I wrote:<br/>&gt; Either way, is there some kind of algorithm that can determine, for<br/>&gt; some comma being tempered out, the two simplest intervals that it<br/>&gt; equates? For 81/80, for example, the two simplest intervals would be<br/>&gt; 9/8 and 10/9 rather than 81/80 and 1/1. Perhaps something that<br/>&gt; minimizes (n1*d1) + (n2*d2) would be best.</p><p>I did some more thinking about this, and rather than minimizing<br/>(n1*d1) + (n2*d2), here&apos;s another algorithm that might be simpler:</p><p>So if we have some comma p/q, and we&apos;re trying to find the two<br/>simplest intervals a/b and c/d that differ by it, then the intervals<br/>involved will satisfy the following relationship:</p><p>ad/bc = p/q</p><p>Now, if we&apos;re trying to make a/b and c/d as simple as possible, then<br/>perhaps the best way to go is to come up with the simplest possible<br/>numbers such that ad = p and bc = q. If we take this approach then<br/>we&apos;re trying to minimize a + d and b + c.</p><p>A quick way to compute the ideal values for a and d is to set them<br/>both equal to sqrt(p). Find the nearest factor to sqrt(p) and set it<br/>equal to a, and find that factor&apos;s complement and set it equal to d.<br/>Do the same thing for b and c with q.</p><p>You will end up with two options depending on how you distribute ad<br/>and bc. For porcupine, for example, you end up with either 10/9 and<br/>27/25, or 25/9 and 27/10. If you minimize (a+b)*(c+d), you get the<br/>first, if you minimize (a*b)+(c*d), you get the second. You only get<br/>one option if a=b or c=d.</p><p>I&apos;m beat but tomorrow I&apos;ll work this out for some common temperaments.</p><p>-Mike</p></div><h3>Carl Lumma &#x3C;carl@lumma.org&#x3E;</h3><span>12/28/2010 9:27:08 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>&gt;I&apos;m beat but tomorrow I&apos;ll work this out for some common temperaments.<br/>&gt;-Mike</p><p>Some of the temperaments you initially listed were codimension &gt; 1,<br/>which means they temper out more than one comma and therefore require<br/>more than a single pair of equated intervals to characterize.  -Carl</p></div><h3>Mike Battaglia &#x3C;battaglia01@gmail.com&#x3E;</h3><span>12/28/2010 9:45:19 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>On Tue, Dec 28, 2010 at 12:27 PM, Carl Lumma &lt;<a href="mailto:carl@lumma.org">carl@lumma.org</a>&gt; wrote:<br/>&gt;<br/>&gt; &gt;I&apos;m beat but tomorrow I&apos;ll work this out for some common temperaments.<br/>&gt; &gt;-Mike<br/>&gt;<br/>&gt; Some of the temperaments you initially listed were codimension &gt; 1,<br/>&gt; which means they temper out more than one comma and therefore require<br/>&gt; more than a single pair of equated intervals to characterize. -Carl</p><p>I think I used the wrong names - I&apos;m not sure if 50/49 is actually<br/>pajara, or if pajara is 50/49 and 64/63. Either way, the simplest two<br/>intervals equated in the rank-3 50/49 temperament are 7/5 and 10/7.</p><p>-Mike</p></div><h3>Graham Breed &#x3C;gbreed@gmail.com&#x3E;</h3><span>12/28/2010 10:33:48 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>Mike Battaglia &lt;<a href="mailto:battaglia01@gmail.com">battaglia01@gmail.com</a>&gt; wrote:</p><p>&gt; There might be something simpler for magic but I&apos;m not<br/>&gt; sure what it is.</p><p>In the 7-limit, there are:</p><p>   63:50    ~=    81:64<br/>   27:25    ~=    49:45    ~=    35:32<br/>    9:7     ~=    35:27    ~=    32:25<br/>   45:32    ~=     7:5<br/>    7:6     ~=    81:70<br/>   49:36    ~=    27:20<br/>   36:35    ~=    25:24    ~=    28:27<br/>   60:49    ~=   100:81<br/>   48:35    ~=   112:81    ~=    25:18<br/>   15:14    ~=    16:15<br/>   28:25    ~=     9:8<br/>   50:49    ~=    64:63<br/>   81:80    ~=    49:48<br/>   56:45    ~=     5:4<br/>   54:49    ~=    10:9<br/>   32:27    ~=    25:21<br/>    6:5     ~=    98:81</p><p>For best alignment, use proportional spacing, in so far as<br/>it matters.  The python session using &quot;<a href="http://temper.py">temper.py</a>&quot; from my<br/>website somewhere, is:</p><p>&gt;&gt;&gt; magic = temper.Temperament(19,22,temper.limit7)<br/>&gt;&gt;&gt; for vecs in<br/>&gt;&gt;&gt; magic.getEquivalences(temper.limit9.secondOrder()):<br/>...     rats = [&apos;%5i:%-5i&apos;%temper.getRatio(v) for v in vecs]<br/>...     print &apos; ~= &apos;.join(rats)<br/>...</p><p>This is including the prompt, that may be interpreted by<br/>your mail reader as quotes, but won&apos;t be stripped away.  I<br/>thought one the dark scripts on my website was doing this,<br/>but apparently not.  So if you want other lists you&apos;ll<br/>either have to get the code or ask for them</p><p>In the 11-limit it gets more interesting, in that 10:9 and<br/>11:10 are the same, because 100:99 is tempered out.  That<br/>also gives you 25:9 =~ 11:4, which enables a neat<br/>substitution with domant seventh chords.</p><p>The full second-order 11-limit equivalences:</p><p> 81:64  ~=  63:50  ~=  14:11<br/> 21:20  ~=  35:33  ~= 128:121 ~=  81:77<br/> 35:32  ~=  49:45  ~=  27:25  ~=  12:11<br/> 11:9   ~=  60:49  ~= 121:100 ~= 100:81<br/> 32:25  ~=  35:27  ~= 128:99  ~=  77:60  ~=   9:7   ~=<br/> 100:77<br/>90:77  ~=  64:55  ~=   7:6   ~=  81:70<br/> 63:55  ~= 140:121<br/>  7:5   ~=  45:32  ~= 140:99  ~= 108:77<br/>  4:3   ~=  33:25<br/>121:108 ~=  55:49<br/> 36:35  ~=  33:32  ~=  25:24  ~=  80:77  ~=  28:27<br/> 15:14  ~=  77:72  ~=  16:15<br/> 48:35  ~=  11:8   ~= 112:81  ~=  25:18<br/>  1:1   ~= 100:99<br/> 28:25  ~=  25:22  ~= 112:99  ~=   9:8<br/> 55:42  ~=  64:49<br/> 64:63  ~=  99:98  ~=  55:54  ~= 121:120 ~=  50:49<br/> 80:63  ~=  44:35  ~= 121:96<br/>121:90  ~=  66:49  ~= 110:81<br/> 49:48  ~=  45:44  ~=  56:55  ~=  81:80<br/> 96:77  ~=   5:4   ~=  56:45  ~=  99:80<br/>  8:7   ~=  55:48<br/> 11:10  ~=  10:9   ~=  54:49<br/> 72:55  ~= 160:121 ~=  21:16<br/> 88:81  ~= 121:112<br/> 33:28  ~=  32:27  ~=  25:21<br/> 98:81  ~=  77:64  ~=   6:5   ~=  40:33<br/> 49:40  ~=  27:22<br/> 49:36  ~=  27:20  ~=  15:11</p><p>                         Graham</p></div><h3>Mike Battaglia &#x3C;battaglia01@gmail.com&#x3E;</h3><span>12/29/2010 9:27:15 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>On Tue, Dec 28, 2010 at 1:33 PM, Graham Breed &lt;<a href="mailto:gbreed@gmail.com">gbreed@gmail.com</a>&gt; wrote:<br/>&gt;<br/>&gt; &gt;&gt;&gt; magic = temper.Temperament(19,22,temper.limit7)<br/>&gt; &gt;&gt;&gt; for vecs in<br/>&gt; &gt;&gt;&gt; magic.getEquivalences(temper.limit9.secondOrder()):<br/>&gt; ... rats = [&apos;%5i:%-5i&apos;%temper.getRatio(v) for v in vecs]<br/>&gt; ... print &apos; ~= &apos;.join(rats)<br/>&gt; ...</p><p>Thanks for the chart, so I see you&apos;ve already done this then. What<br/>algorithm are you using in getEquivalences? Is it similar to what I&apos;m<br/>doing, or does it generate equivalent intervals in order from simplest<br/>-&gt; most complex?</p><p>Also, do you have a &quot;simplest interval reversed&quot; algorithm as well (or<br/>a &quot;goodest&quot; interval reversed?) It would be useful to throw 16/15 in<br/>there and have it spit out that the limma is reversed, so that F is<br/>lower than E and so on.</p><p>&gt; This is including the prompt, that may be interpreted by<br/>&gt; your mail reader as quotes, but won&apos;t be stripped away. I<br/>&gt; thought one the dark scripts on my website was doing this,<br/>&gt; but apparently not. So if you want other lists you&apos;ll<br/>&gt; either have to get the code or ask for them</p><p>Can you run this on the normal 5-limit comma list? That&apos;s what I was<br/>going to spend a bunch of time doing manually, by hand...</p><p>&gt; In the 11-limit it gets more interesting, in that 10:9 and<br/>&gt; 11:10 are the same, because 100:99 is tempered out. That<br/>&gt; also gives you 25:9 =~ 11:4, which enables a neat<br/>&gt; substitution with domant seventh chords.</p><p>Ah right, we were talking about this.</p><p>-Mike</p></div><h3>Graham Breed &#x3C;gbreed@gmail.com&#x3E;</h3><span>12/29/2010 10:28:26 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>Mike Battaglia &lt;<a href="mailto:battaglia01@gmail.com">battaglia01@gmail.com</a>&gt; wrote:</p><p>&gt; Thanks for the chart, so I see you&apos;ve already done this<br/>&gt; then. What algorithm are you using in getEquivalences? Is<br/>&gt; it similar to what I&apos;m doing, or does it generate<br/>&gt; equivalent intervals in order from simplest -&gt; most<br/>&gt; complex?</p><p>It generates intervals of the second-order tonality<br/>diamond, in no particular order, and then puts them into<br/>bins according to generator steps.  At least, that sounds<br/>like a good way to do it, I can&apos;t remember what I actually<br/>did.  Any two intervals in the same bin will be equivalent<br/>(as long as you take proper account of the period division).</p><p>&gt; Also, do you have a &quot;simplest interval reversed&quot;<br/>&gt; algorithm as well (or a &quot;goodest&quot; interval reversed?) It<br/>&gt; would be useful to throw 16/15 in there and have it spit<br/>&gt; out that the limma is reversed, so that F is lower than E<br/>&gt; and so on.</p><p>I don&apos;t have that, and I&apos;m not sure what you want.  But it<br/>might have something to do with chromatic-unison vectors.</p><p>&gt; Can you run this on the normal 5-limit comma list? That&apos;s<br/>&gt; what I was going to spend a bunch of time doing manually,<br/>&gt; by hand...</p><p>I&apos;ve got this, from your original message:</p><p> 81:80  Meantone<br/> 10:9   ~=   9:8<br/> 64:63  Superpyth<br/>failure<br/> 50:49  Pajara<br/>failure<br/>250:243 Porcupine<br/> 16:15  Father<br/>  4:3   ~=   5:4<br/> 25:24  ~=  10:9<br/>  6:5   ~=   9:8   ~=  32:25<br/> 16:15  ~=   1:1<br/> 25:24  Dicot<br/>  6:5   ~=   5:4<br/> 16:15  ~=  10:9<br/> 25:24  ~=   1:1<br/> 25:18  ~=   4:3   ~=  32:25<br/>128:125 Augmented<br/> 25:24  ~=  16:15<br/>  5:4   ~=  32:25<br/>3125:3072 Magic</p><p>Note the two cases where you gave a 7-limit ratio, so it<br/>doesn&apos;t find the right temperament class.</p><p>Here&apos;s some code, in case other of us wants it again (and<br/>with some line-wrap mess):</p><p>&gt;&gt;&gt; text = &quot;&quot;&quot;<br/>... Tempering 81/80 - meantone - equates 9/8 and 10/9<br/>... Tempering 64/63 - superpyth - equates 9/8 and 8/7<br/>... Tempering 50/49 - pajara - equates 7/5 and 10/7<br/>... Tempering 250/243 - porcupine - equates 10/9 and 27/25<br/>(also useful to ... think of it as equating 81/80 and 25/24)<br/>... Tempering 16/15 - father - equates 4/3 and 5/4<br/>... Tempering 25/24 - dicot - equates 6/5 and 5/4, equates<br/>10/9 and 16/15 ... Tempering 128/125 - augmented - equates<br/>16/15 and 25/24 ... Tempering 3125/3072 - magic - equates<br/>128/125 and 25/24 ... &quot;&quot;&quot;<br/>&gt;&gt;&gt; import re<br/>&gt;&gt;&gt; for n, d, name in re.findall(r&quot;(\d+)/(\d+) - (\w+)&quot;,<br/>&gt;&gt;&gt; text):<br/>...     vector = temper.factorizeRatio(int(n),int(d))<br/>...     print &quot;%3i:%-3i %s&quot;%(int(n),<br/>                 int(d),name.capitalize())<br/>...     try:<br/>...         lt = temper.temperOut([vector])<br/>...     except temper.TemperamentException:<br/>...         print &quot;failure&quot;<br/>...         continue<br/>...     for vecs in lt.getEquivalences(<br/>                 temper.limit5.secondOrder()):<br/>...         rats = [&apos;%3i:%-3i&apos;%temper.getRatio(v) for v<br/>                     in vecs]<br/> ...        print &quot; ~= &quot;.join(rats)<br/> ...</p><p>                   Graham</p></div>