<!DOCTYPE html>
            <html>
            <head>
            <meta charset="utf-8">
                <meta name="viewport"
            content="width=device-width, height=device-height, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no">
                <meta http-equiv="x-ua-compatible" content="ie=edge">
                <title>Yahoo Tuning Groups Ultimate Backup tuning-math HEWM notation calculator (was: help with ratio/vector algorithm)</title>
                <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
            </head>
            <body>
            </body>
            </html>
        <a href="/tuning-math">back to list</a><h1>HEWM notation calculator (was: help with ratio/vector algorithm)</h1><h3><a id=3441 href="#3441">ðŸ”—</a>monz &#x3C;joemonz@yahoo.com&#x3E;</h3><span>3/4/2002 5:55:29 PM</span><button style="float: right; margin-right: 20px">toggle monospace</button><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>----- Original Message -----<br/>From: &lt;<a href="mailto:graham@microtonal.co.uk">graham@microtonal.co.uk</a>&gt;<br/>To: &lt;<a href="mailto:tuning-math@yahoogroups.com">tuning-math@yahoogroups.com</a>&gt;<br/>Sent: Monday, March 04, 2002 3:34 AM<br/>Subject: [tuning-math] Re: help with ratio/vector algorithm</p><p>&gt; In-Reply-To: &lt;<a href="mailto:004101c1c32d$603c6540$af48620c@dsl.att.net">004101c1c32d$603c6540$af48620c@dsl.att.net</a>&gt;<br/>&gt; monz wrote:<br/>&gt;<br/>&gt; &gt; &gt; ratio r = 2^p * 3^q<br/>&gt; &gt; &gt;<br/>&gt; &gt; &gt; if q &lt; 0<br/>&gt; &gt; &gt;    then p =  int((log(3^abs(q)) / log(2)) + 0.5)<br/>&gt; &gt; &gt;    else p = (int((log(3^abs(q)) / log(2)) + 1.5)) * -1<br/>&gt; &gt; &gt; end if<br/>&gt; &gt; &gt;<br/>&gt; &gt; &gt; but it&apos;s not foolproof: sometimes the exponent of 2 is<br/>&gt; &gt; &gt; one less or one more than it should be.  i&apos;ve tried<br/>&gt; &gt; &gt; setting up further nested if-statements, to check if<br/>&gt; &gt; &gt; the absolute value of p is greater than that of q and<br/>&gt; &gt; &gt; adjust accordingly, but there&apos;s always an error somewhere.<br/>&gt; &gt;<br/>&gt; &gt;<br/>&gt; &gt; the errors are occurring because the spreadsheet has to<br/>&gt; &gt; check to see if n &gt; d, and i can&apos;t figure out how to<br/>&gt; &gt; implement that without getting a circular reference.<br/>&gt;<br/>&gt; I think =MOD(N20, 1)-N20 does it where N20 is the magnitude of the<br/>&gt; original interval in octaves.  So you have to substitute that with<br/>&gt; log(3^abs(q)) / log(2).</p><p>thanks, Graham!  (duh... of course i have to use MOD!)</p><p>i&apos;ve implemented this in an Excel spreadsheet that assists<br/>in finding the HEWM notation of a ratio:<br/><a href="http://www.ixpres.com/interval/dict/hewm.xls">http://www.ixpres.com/interval/dict/hewm.xls</a></p><p>color LEGEND:</p><p>  cyan = data to be input by user<br/>  magenta = constants, used in calculations<br/>  orange = results of calculations on user data</p><p>at the top are a bunch of constants that i use in the<br/>calculations.</p><p>below those...</p><p>on the left side, the user inputs the exponents of the<br/>target ratio first, and then the exponent of 3 which gets<br/>near it. the spreadsheet subtracts that, and indicates<br/>the letter-name and any sharp or flat.  (there&apos;s still<br/>a bug here -- i don&apos;t know how to generate the negative<br/>numbers when using MOD.)  then the the user enters the<br/>exponents of the notational &quot;commas&quot; from the magenta<br/>table above until all exponents are zero.  eventually,<br/>i want to be able to have the spreadsheet determine all<br/>of the accidental symbols from the exponents entered by<br/>the user... but this is not implemented fully yet.</p><p>on the right side, the user inputs the exponents of the<br/>target ratio, then directly enters the notational symbols<br/>which eventually reduce all exponents to zero.  the only<br/>thing to be aware of here is that an apostrophe (&apos;) must<br/>precede the minus and plus signs when entering them.</p><p>-monz</p><p>_________________________________________________________<br/>Do You Yahoo!?<br/>Get your free <a href="https://twitter.com/yahoo">@yahoo</a>.com address at <a href="http://mail.yahoo.com">http://mail.yahoo.com</a></p></div>
                <script>
                    let monospace = false
                    $('button').on('click', function () {
                      if (monospace) {
                        $('p').css("font-family", "")
                      } else {
                        $('p').css("font-family", "monospace")
                      }
                      monospace = !monospace
                    })
                </script>
            