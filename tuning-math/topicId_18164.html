<a href="/tuning-math">back to list</a><h1>Hobbit scales</h1><h3>genewardsmith &#x3C;genewardsmith@sbcglobal.net&#x3E;</h3><span>9/25/2010 3:31:30 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>Some time back I introduced dwarf scales, which start from a p-limit val v and define a p-limit JI scale by by choosing for each nonzero<br/>value i mod v[1] the smallest positive odd integer n such that v(n) = i mod v[1]. On the other hand for rank two temperaments we have MOS scales. The hobbit scale is a generalization of both, which defines a canonical scale for any val v tempering out a list of commas c, which is tuned in the temperament defined by c.</p><p>The standard Euclidean norm on weighted monzos provides a canonical Euclidean metric on interval space. Projecting othogonally from a set of intervals consisting of the commas + 2 in this metric defines a canonical projection map from the p-limit to a lattice of interval classes. Given a val v tempering out the commas c, we choose the smallest lattice element q (ie, the one nearest the origin) for each i, 0 &lt;= i &lt; v[1] such that v(q) mod v[1] = i. This assumes q is expressed in terms of rational numbers, but since v tempers out the commas and we plan to temper the result that result is independent of the particular choice of q. The result is well-defined except when v[1] is an even number, where both q and 2/q have the same length. We may break the tie by choosing the smallest of the two tempered values; that is, the one less than 600 cents. Since the result is now unique up to choice of tuning, I propose calling it Temperament[n] where &quot;Temperament&quot; is the name of the temperament, and n is v[1].</p><p>When the temperament is rank two, this gives the n-note MOS. For ranks larger than two, we get a scale in the temperament of the commas c which is more likely to be constant structure and etc than most constructions. When the comma list is empty we get a JI scale which is an alternative as a canonical choice to the dwarf scales and which sometimes seems preferable (comparing the 34-note 5-limit dwarf with the hobbit is illuminating in that regard.)</p></div><h3>Carl Lumma &#x3C;carl@lumma.org&#x3E;</h3><span>9/26/2010 1:59:33 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>Gene wrote:</p><p>&gt;The standard Euclidean norm on weighted monzos provides a canonical<br/>&gt;Euclidean metric on interval space. Projecting othogonally from a set<br/>&gt;of intervals consisting of the commas + 2 in this metric defines a<br/>&gt;canonical projection map from the p-limit to a lattice of interval<br/>&gt;classes. Given a val v tempering out the commas c, we choose the<br/>&gt;smallest lattice element q (ie, the one nearest the origin) for each<br/>&gt;i, 0 &lt;= i &lt; v[1] such that v(q) mod v[1] = i. This assumes q is<br/>&gt;expressed in terms of rational numbers, but since v tempers out the<br/>&gt;commas and we plan to temper the result that result is independent of<br/>&gt;the particular choice of q.</p><p>This seems similar to the method for constructing dwarves.<br/>Is there a succinct way to describe the difference?</p><p>&gt;The result is well-defined except when<br/>&gt;v[1] is an even number, where both q and 2/q have the same length. We<br/>&gt;may break the tie by choosing the smallest of the two tempered values;<br/>&gt;that is, the one less than 600 cents. Since the result is now unique<br/>&gt;up to choice of tuning, I propose calling it Temperament[n] where<br/>&gt;&quot;Temperament&quot; is the name of the temperament, and n is v[1].</p><p>Is the capital letter important here, like, are miracle[72]<br/>and Miracle[72] different things?</p><p>&gt;When the temperament is rank two, this gives the n-note MOS.</p><p>How is it done with a pair of vals?  The method above only seems<br/>to refer to a single val.</p><p>-Carl</p></div><h3>genewardsmith &#x3C;genewardsmith@sbcglobal.net&#x3E;</h3><span>9/26/2010 12:11:28 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>--- In <a href="mailto:tuning-math@yahoogroups.com">tuning-math@yahoogroups.com</a>, Carl Lumma &lt;carl@...&gt; wrote:</p><p>&gt; This seems similar to the method for constructing dwarves.<br/>&gt; Is there a succinct way to describe the difference?</p><p>Dwarves start in a corner and work away from it in the positive direction for all primes, and hobbits start in the center and work outwards symmetrically. Also, dwarves use odd Tenney height, while hobbits use Euclidean interval space distance. The biggest difference is that hobbits are defined for regular temperaments.</p><p>&gt; &gt;up to choice of tuning, I propose calling it Temperament[n] where<br/>&gt; &gt;&quot;Temperament&quot; is the name of the temperament, and n is v[1].<br/>&gt;<br/>&gt; Is the capital letter important here, like, are miracle[72]<br/>&gt; and Miracle[72] different things?</p><p>I use the capital letter to flag that it is a MOS, and since hobbits are generalized MOS, I thought I could keep the capitals.</p><p>&gt; &gt;When the temperament is rank two, this gives the n-note MOS.<br/>&gt;<br/>&gt; How is it done with a pair of vals?  The method above only seems<br/>&gt; to refer to a single val.</p><p>It&apos;s not done with a pair of vals, other than that you can use a pair of vals rather than a list of commas to define the temperament if it is rank two. But then, of course, you&apos;ve got a MOS.</p></div><h3>Carl Lumma &#x3C;carl@lumma.org&#x3E;</h3><span>9/27/2010 3:00:06 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>Gene wrote:</p><p>&gt;&gt; This seems similar to the method for constructing dwarves.<br/>&gt;<br/>&gt;The biggest difference<br/>&gt;is that hobbits are defined for regular temperaments.</p><p>Aha</p><p>&gt;&gt; Is the capital letter important here, like, are miracle[72]<br/>&gt;&gt; and Miracle[72] different things?<br/>&gt;<br/>&gt;I use the capital letter to flag that it is a MOS,</p><p>Cool, I hadn&apos;t known.</p><p>&gt;and since hobbits<br/>&gt;are generalized MOS, I thought I could keep the capitals.</p><p>OK</p><p>&gt;&gt; How is it done with a pair of vals?  The method above only seems<br/>&gt;&gt; to refer to a single val.<br/>&gt;<br/>&gt;It&apos;s not done with a pair of vals, other than that you can use a pair<br/>&gt;of vals rather than a list of commas to define the temperament if it<br/>&gt;is rank two. But then, of course, you&apos;ve got a MOS.</p><p>You describe the construction using a single val v, which maps<br/>intervals in the &quot;lattice of interval classes&quot; to the integers<br/>(mod the number of steps per octave).  For each integer you take<br/>the lattice element closest to the origin as the canonical one,<br/>and there&apos;s your scale.  Correct?</p><p>I think I&apos;m not getting the projection -- how to get the lattice<br/>of interval classes from the commas of v.  And then how to plug<br/>coordinates of this lattice into v to get the integers.</p><p>-Carl</p></div><h3>genewardsmith &#x3C;genewardsmith@sbcglobal.net&#x3E;</h3><span>9/27/2010 7:57:09 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>--- In <a href="mailto:tuning-math@yahoogroups.com">tuning-math@yahoogroups.com</a>, Carl Lumma &lt;carl@...&gt; wrote:</p><p>&gt; I think I&apos;m not getting the projection -- how to get the lattice<br/>&gt; of interval classes from the commas of v.</p><p>You don&apos;t get it from the commas of v, you get it from the commas of the temperament, which are also the commas of v, but not all of them. As for the projection, does this help?</p><p><a href="http://xenharmonic.wikispaces.com/Planar+Temperament">http://xenharmonic.wikispaces.com/Planar+Temperament</a></p><p> And then how to plug<br/>&gt; coordinates of this lattice into v to get the integers.</p><p>One way to do that is to use rational numbers for the generators; you don&apos;t use this as a tuning, but you can apply v to them directly. Since v tempers out the commas of the temperament, this gives a unique answer. Or you can first compute the mapping which sends coordinates of a lattice point to an integer representing v applied to that lattice point.</p></div><h3>Graham Breed &#x3C;gbreed@gmail.com&#x3E;</h3><span>10/25/2010 3:14:36 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>This is still the only hobbit definition I know of, so as they&apos;re<br/>being suggested for other purposes I&apos;ll try and understand it.</p><p>On 26 September 2010 02:31, genewardsmith &lt;<a href="mailto:genewardsmith@sbcglobal.net">genewardsmith@sbcglobal.net</a>&gt; wrote:<br/>&gt; Some time back I introduced dwarf scales, which start from a p-limit val v and define a p-limit JI scale by by choosing for each nonzero<br/>&gt; value i mod v[1] the smallest positive odd integer n such that v(n) = i mod v[1]. On the other hand for rank two temperaments we have MOS scales. The hobbit scale is a generalization of both, which defines a canonical scale for any val v tempering out a list of commas c, which is tuned in the temperament defined by c.</p><p>I take it v[1] is the number of steps to an octave (2:1).  What&apos;s<br/>v(n)?  Carl said down-thread that dwarf scales take the simplest ratio<br/>that maps to the given number of scale steps.  Is that right?  If so<br/>how do you get it from v(n) = i mod v[1]?</p><p>If the commas define the temperament, they must be unison vectors.</p><p>The next paragraph&apos;s so dense I&apos;m going to have to break it up.<br/>Nearly every sentence has something I don&apos;t understand.</p><p>&gt; The standard Euclidean norm on weighted monzos provides a canonical Euclidean metric on interval space.</p><p>With Tenney weighting, that&apos;ll give the scalar complexity of the<br/>temperament class defined by the monzo as a unison vector, won&apos;t it?<br/>That looks straightforward.  Do we assume Tenney weighting?</p><p>&gt; Projecting othogonally from a set of intervals consisting of the commas + 2 in this metric defines a canonical projection map from the p-limit to a lattice of interval classes.</p><p>This is your square matrix, is it?  Taken from an intermediate<br/>calculation in the least squares optimization.  Is it weighted?</p><p>Where does +2 come from?</p><p>Why interval classes?  I thought they were octave equivalent.  If so,<br/>what did you do with the octaves?  And what&apos;s the norm?</p><p>&gt; Given a val v tempering out the commas c, we choose the smallest lattice element q (ie, the one nearest the origin) for each i, 0 &lt;= i &lt; v[1] such that v(q) mod v[1] = i.</p><p>Element of what lattice?  The octave equivalent projection above, with<br/>the undefined norm?  And this v(q) comes up again.</p><p>&gt; This assumes q is expressed in terms of rational numbers, but since v tempers out the commas and we plan to temper the result that result is independent of the particular choice of q.</p><p>How can it be expressed in terms of rationals if it&apos;s a lattice<br/>element?  Lattice elements are expressed in terms of integers.<br/>Otherwise, what makes it a lattice element?</p><p>&gt; The result is well-defined except when v[1] is an even number, where both q and 2/q have the same length. We may break the tie by choosing the smallest of the two tempered values; that is, the one less than 600 cents.</p><p>Okay, that seems clear, in itself.</p><p>&gt; Since the result is now unique up to choice of tuning, I propose calling it Temperament[n] where &quot;Temperament&quot; is the name of the temperament, and n is v[1].</p><p>And v[1] is the number of notes in an octave.</p><p>&gt; When the temperament is rank two, this gives the n-note MOS. For ranks larger than two, we get a scale in the temperament of the commas c which is more likely to be constant structure and etc than most constructions. When the comma list is empty we get a JI scale which is an alternative as a canonical choice to the dwarf scales and which sometimes seems preferable (comparing the 34-note 5-limit dwarf with the hobbit is illuminating in that regard.)</p><p>It does?  That&apos;s nice.  More likely than what other constructions?</p><p>                       Graham</p></div><h3>genewardsmith &#x3C;genewardsmith@sbcglobal.net&#x3E;</h3><span>10/25/2010 12:15:12 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>--- In <a href="mailto:tuning-math@yahoogroups.com">tuning-math@yahoogroups.com</a>, Graham Breed &lt;gbreed@...&gt; wrote:</p><p>&gt; &gt; Some time back I introduced dwarf scales, which start from a p-limit val v and define a p-limit JI scale by by choosing for each nonzero<br/>&gt; &gt; value i mod v[1] the smallest positive odd integer n such that v(n) = i mod v[1].</p><p>&gt; I take it v[1] is the number of steps to an octave (2:1).  What&apos;s<br/>&gt; v(n)?</p><p>v is an equal temperament val, so v(2) is the number of steps in an octave, which is the same as the first coefficient of the val, v[1].</p><p> Carl said down-thread that dwarf scales take the simplest ratio<br/>&gt; that maps to the given number of scale steps.  Is that right?</p><p>It takes the smallest odd integer which maps to the given number of steps modulo octaves.</p><p>&gt; If the commas define the temperament, they must be unison vectors.</p><p>If you say so. To me, they are commas.</p><p>&gt; The next paragraph&apos;s so dense I&apos;m going to have to break it up.<br/>&gt; Nearly every sentence has something I don&apos;t understand.<br/>&gt;<br/>&gt; &gt; The standard Euclidean norm on weighted monzos provides a canonical Euclidean metric on interval space.<br/>&gt;<br/>&gt; With Tenney weighting, that&apos;ll give the scalar complexity of the<br/>&gt; temperament class defined by the monzo as a unison vector, won&apos;t it?</p><p>&quot;Scalar complexity&quot; sounds like gibberish to my mind, so I can&apos;t easily retain the definition. And no, I am not kidding nor trying to give you a hard time, this is really true of me. Assuming &quot;temperament class&quot; means the same as &quot;temperament&quot;, you may be asking if the norm of the monzo for a temperament defined by a single comma is the same as its complexity.<br/>It should be proportional, but I don&apos;t know why you think this is important here.</p><p>&gt; That looks straightforward.  Do we assume Tenney weighting?</p><p>Yes, if by that you mean multiplying the prime p coordinate by log2(p).</p><p>&gt; &gt; Projecting othogonally from a set of intervals consisting of the commas + 2 in this metric defines a canonical projection map from the p-limit to a lattice of interval classes.<br/>&gt;<br/>&gt; This is your square matrix, is it?  Taken from an intermediate<br/>&gt; calculation in the least squares optimization.  Is it weighted?</p><p>Its an orthogonal projection, which like any projection can be given by an idempotent (P = P^2) square matrix P. I don&apos;t know what you mean by the weighting question, but we are working in weighted coordinates, and would need to transform the matrix to get the corresponding matrix in unweighted coordinates, which can be useful. In that case, the matrix is no longer symmetric, since the norm is no longer given by the dot product, but it projects unweighted monzos directly without first needing to weight them.</p><p>&gt; Where does +2 come from?</p><p>I mean the octave, 2, is added to the list of commas.</p><p>&gt; Why interval classes?  I thought they were octave equivalent.  If so,<br/>&gt; what did you do with the octaves?  And what&apos;s the norm?</p><p>They are octave equivalent only since 2 is added to the commas. The norm (really, seminorm if we are not looking at equivalence classes) is the ordinary dot product norm on the projected monzos.</p><p>&gt; &gt; Given a val v tempering out the commas c, we choose the smallest lattice element q (ie, the one nearest the origin) for each i, 0 &lt;= i &lt; v[1] such that v(q) mod v[1] = i.<br/>&gt;<br/>&gt; Element of what lattice?  The octave equivalent projection above, with<br/>&gt; the undefined norm?  And this v(q) comes up again.</p><p>I defined the norm. The lattice is the lattice of projected monzos in the subspace, and the norm is the dot product norm.</p><p>&gt; &gt; This assumes q is expressed in terms of rational numbers, but since v tempers out the commas and we plan to temper the result that result is independent of the particular choice of q.<br/>&gt;<br/>&gt; How can it be expressed in terms of rationals if it&apos;s a lattice<br/>&gt; element?  Lattice elements are expressed in terms of integers.<br/>&gt; Otherwise, what makes it a lattice element?</p><p>It&apos;s a lattice element since given a q, there is one and only one lattice point associated to it.</p></div><h3>Carl Lumma &#x3C;carl@lumma.org&#x3E;</h3><span>10/25/2010 1:56:00 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>Graham wrote:</p><p>&gt;&gt; Some time back I introduced dwarf scales, which start from a p-limit<br/>&gt;&gt; val v and define a p-limit JI scale by by choosing for each nonzero<br/>&gt;&gt; value i mod v[1] the smallest positive odd integer n such that v(n)<br/>&gt;&gt; = i mod v[1]. On the other hand for rank two temperaments we have MOS<br/>&gt;&gt; scales. The hobbit scale is a generalization of both, which defines<br/>&gt;&gt; a canonical scale for any val v tempering out a list of commas c,<br/>&gt;&gt; which is tuned in the temperament defined by c.<br/>&gt;<br/>&gt; I take it v[1] is the number of steps to an octave (2:1).  What&apos;s<br/>&gt; v(n)?</p><p>The integer v sends n to.  Note the round brackets.</p><p>&gt; Carl said down-thread that dwarf scales take the simplest ratio<br/>&gt; that maps to the given number of scale steps.  Is that right?  If so<br/>&gt; how do you get it from v(n) = i mod v[1]?</p><p>I think he takes each scale degree (i mod v[1]) and tries odd<br/>integers (n) from 1 on up until he gets that scale degree number<br/>(mod v[1]) out.  Then go on to the next scale degree.</p><p>&gt;&gt; Projecting othogonally from a set of intervals consisting of the<br/>&gt;&gt; commas + 2 in this metric defines a canonical projection map from<br/>&gt;&gt; the p-limit to a lattice of interval classes.<br/>[snip]<br/>&gt;Where does +2 come from?</p><p>He makes the factor 2 a comma, &apos;adding&apos; it to the list of<br/>commas.</p><p>&gt;Why interval classes?  I thought they were octave equivalent.  If so,<br/>&gt;what did you do with the octaves?  And what&apos;s the norm?</p><p>They&apos;re octave equivalent and he got rid of them by adding 2<br/>to the commas.</p><p>&gt;&gt; Given a val v tempering out the commas c, we choose the smallest<br/>&gt;&gt; lattice element q (ie, the one nearest the origin) for each i,<br/>&gt;&gt; 0 &lt;= i &lt; v[1] such that v(q) mod v[1] = i.<br/>&gt;<br/>&gt;Element of what lattice?  The octave equivalent projection above, with<br/>&gt;the undefined norm?</p><p>No, the usual JI lattice.</p><p>-Carl</p></div><h3>Carl Lumma &#x3C;carl@lumma.org&#x3E;</h3><span>10/25/2010 2:10:42 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>&gt;&gt; Carl said down-thread that dwarf scales take the simplest ratio<br/>&gt;&gt; that maps to the given number of scale steps.  Is that right?<br/>&gt;<br/>&gt;It takes the smallest odd integer which maps to the given number of<br/>&gt;steps modulo octaves.</p><p>This may help:<br/><a href="http://lumma.org/tuning/gws/dwarf.htm">http://lumma.org/tuning/gws/dwarf.htm</a></p><p>-Carl</p></div><h3>Graham Breed &#x3C;gbreed@gmail.com&#x3E;</h3><span>10/28/2010 11:48:23 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>&quot;genewardsmith&quot; &lt;<a href="mailto:genewardsmith@sbcglobal.net">genewardsmith@sbcglobal.net</a>&gt; wrote:</p><p>&gt; v is an equal temperament val, so v(2) is the number of<br/>&gt; steps in an octave, which is the same as the first<br/>&gt; coefficient of the val, v[1].</p><p>Okay.</p><p>&gt;  Carl said down-thread that dwarf scales take the<br/>&gt; simplest ratio<br/>&gt; &gt; that maps to the given number of scale steps.  Is that<br/>&gt; &gt; right?<br/>&gt;<br/>&gt; It takes the smallest odd integer which maps to the given<br/>&gt; number of steps modulo octaves.</p><p>Okay.</p><p>&gt; &gt; With Tenney weighting, that&apos;ll give the scalar<br/>&gt; &gt; complexity of the temperament class defined by the<br/>&gt; &gt; monzo as a unison vector, won&apos;t it?<br/>&gt;<br/>&gt; &quot;Scalar complexity&quot; sounds like gibberish to my mind, so<br/>&gt; I can&apos;t easily retain the definition. And no, I am not<br/>&gt; kidding nor trying to give you a hard time, this is<br/>&gt; really true of me. Assuming &quot;temperament class&quot; means the<br/>&gt; same as &quot;temperament&quot;, you may be asking if the norm of<br/>&gt; the monzo for a temperament defined by a single comma is<br/>&gt; the same as its complexity. It should be proportional,<br/>&gt; but I don&apos;t know why you think this is important here.</p><p>Well, it does give me a hard time when you keep on with<br/>these terminology wars.  It&apos;s important because it helps us<br/>to check we understand each other.  A simple &quot;yes&quot; would<br/>have sufficed.</p><p>&gt; &gt; That looks straightforward.  Do we assume Tenney<br/>&gt; &gt; weighting?<br/>&gt;<br/>&gt; Yes, if by that you mean multiplying the prime p<br/>&gt; coordinate by log2(p).</p><p>That&apos;s it.</p><p>&gt; &gt; &gt; Projecting othogonally from a set of intervals<br/>&gt; &gt; &gt; consisting of the commas + 2 in this metric defines a<br/>&gt; &gt; &gt; canonical projection map from the p-limit to a<br/>&gt; &gt; &gt; lattice of interval classes.<br/>&gt; &gt;<br/>&gt; &gt; This is your square matrix, is it?  Taken from an<br/>&gt; &gt; intermediate calculation in the least squares<br/>&gt; &gt; optimization.  Is it weighted?<br/>&gt;<br/>&gt; Its an orthogonal projection, which like any projection<br/>&gt; can be given by an idempotent (P = P^2) square matrix P.<br/>&gt; I don&apos;t know what you mean by the weighting question, but<br/>&gt; we are working in weighted coordinates, and would need to<br/>&gt; transform the matrix to get the corresponding matrix in<br/>&gt; unweighted coordinates, which can be useful. In that<br/>&gt; case, the matrix is no longer symmetric, since the norm<br/>&gt; is no longer given by the dot product, but it projects<br/>&gt; unweighted monzos directly without first needing to<br/>&gt; weight them.</p><p>You obviously do know what weighting is, because you&apos;re<br/>talking about it.  I asked if the matrix was weighted.  You<br/>haven&apos;t answered.  And I still have to ask because the<br/>worked example I went to doesn&apos;t seem to be consistently<br/>weighted.  (I&apos;ll try to find that and go through it.)</p><p>I&apos;ll give some formulas here.  Because I need some<br/>ASCIIfication, I may as well follow GP, and actually make<br/>it GP code.</p><p>The operator * does multiplication, including matrix<br/>multiplication.  A ~ after a symbol returns the transpose.<br/>I&apos;ve defined my own inverse function:</p><p>inverse(x) = matadjoint(x)/matdet(x)</p><p>The weighting matrix W has each diagonal equal to the log<br/>of a prime, so it works in mapping space:</p><p>Tenney weighting(mapping) = {<br/>    size = matsize(mapping)[1];<br/>    matrix(size, size, i, j, (i==j) * log(2) /<br/>log(prime(i))) }<br/>W = Tenney weighting(mapping)</p><p>We&apos;ll start with a mapping matrix with each row a val. This<br/>is the projection I think you&apos;re using:</p><p>P = W*mapping*inverse(mapping~*W*W*mapping)*mapping~*W</p><p>You defined it in another thread and it does generally make<br/>sense.  The unweighted alternative is:</p><p>P = mapping*inverse(mapping~*mapping)*mapping~</p><p>This is also a projection matrix, and so also symmetric.<br/>All I need to know is that you&apos;re not using it or I-P.</p><p>The other issue is about whether the vectors you feed in<br/>are weighted or not.  This is something I&apos;m still not clear<br/>about.  Unweighted vectors mean an interval as a row vector<br/>transforms as:</p><p>interval * P</p><p>so its size is</p><p>interval * P * interval~</p><p>If it&apos;s weighted, then we&apos;d have</p><p>interval * inverse(W) * P</p><p>I think the latter makes more sense, because the inverse(W)<br/>cancels with the first W in P, so that the units agree.</p><p>interval * inverse(W) * P * inverse(W) * interval~<br/>=<br/>interval*mapping*inverse(mapping~*W*W*mapping)*mapping~*interval~</p><p>&gt; &gt; Where does +2 come from?<br/>&gt;<br/>&gt; I mean the octave, 2, is added to the list of commas.</p><p>Okay.</p><p>&gt; &gt; Why interval classes?  I thought they were octave<br/>&gt; &gt; equivalent.  If so, what did you do with the octaves?<br/>&gt; &gt; And what&apos;s the norm?<br/>&gt;<br/>&gt; They are octave equivalent only since 2 is added to the<br/>&gt; commas. The norm (really, seminorm if we are not looking<br/>&gt; at equivalence classes) is the ordinary dot product norm<br/>&gt; on the projected monzos.</p><p>How do you define the octave-equivalent transformation?</p><p>&gt; &gt; &gt; Given a val v tempering out the commas c, we choose<br/>&gt; &gt; &gt; the smallest lattice element q (ie, the one nearest<br/>&gt; &gt; &gt; the origin) for each i, 0 &lt;= i &lt; v[1] such that v(q)<br/>&gt; &gt; &gt; mod v[1] = i.<br/>&gt; &gt;<br/>&gt; &gt; Element of what lattice?  The octave equivalent<br/>&gt; &gt; projection above, with the undefined norm?  And this<br/>&gt; &gt; v(q) comes up again.<br/>&gt;<br/>&gt; I defined the norm. The lattice is the lattice of<br/>&gt; projected monzos in the subspace, and the norm is the dot<br/>&gt; product norm.</p><p>So P is a complexity metric, as you said in another message.</p><p>If we go back to this big formula:</p><p>interval*mapping*inverse(mapping~*W*W*mapping)*mapping~*interval~</p><p>The interval*mapping at the front gives the interval in<br/>tempered coordinates.  And similarly on the other side.<br/>That makes the middle bit a quadratic form on intervals in<br/>the temperament (that is, intervals described by the<br/>mapping, not ratio space):</p><p>K = inverse(mapping~*W*W*mapping)</p><p>The complexity of an interval in the temperament is:</p><p>comp(interval) = interval*K*interval~</p><p>The same complexity of an interval in ratio space is:</p><p>tempcomp(interval) = interval*mapping*K*mapping~*interval~</p><p>What this means is that this is also a quadratic form on<br/>intervals in the temperament, which is simpler.<br/>Calculating the inverse of a rank 2 or 3 matrix is, of<br/>course, fairly easy.  It also has my &quot;scalar&quot; property that<br/>you so deride, in that it&apos;s independent of the choice of<br/>generators.  If you replace mapping with mapping * X where<br/>X is a unimodular transformation,</p><p>Kx = inverse(X~*mapping~*W*W*mapping*X)<br/> = inverse(~)*(mapping~*W*W*mapping)*inverse(X~)<br/> Kx = inverse(X) * K * inverse(X~)</p><p>Calculating the complexity of an interval with this metric<br/>means</p><p>comp(interval) = interval * X * Kx * X~ * interval~<br/> = interval * X * inverse(X) * K * inverse(X~) * interval~<br/> = interval * K * interval~</p><p>I&apos;ll leave it there and carry on in another thread.</p><p>&gt; &gt; &gt; This assumes q is expressed in terms of rational<br/>&gt; &gt; &gt; numbers, but since v tempers out the commas and we<br/>&gt; &gt; &gt; plan to temper the result that result is independent<br/>&gt; &gt; &gt; of the particular choice of q.<br/>&gt; &gt;<br/>&gt; &gt; How can it be expressed in terms of rationals if it&apos;s a<br/>&gt; &gt; lattice element?  Lattice elements are expressed in<br/>&gt; &gt; terms of integers. Otherwise, what makes it a lattice<br/>&gt; &gt; element?<br/>&gt;<br/>&gt; It&apos;s a lattice element since given a q, there is one and<br/>&gt; only one lattice point associated to it.</p><p>If you&apos;re talking about frequency ratios, not if the lattice<br/>is for a temperament.</p><p>                        Graham</p></div>