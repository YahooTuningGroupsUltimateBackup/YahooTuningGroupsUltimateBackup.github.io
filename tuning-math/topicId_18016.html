<!DOCTYPE html>
            <html>
            <head>
            <meta charset="utf-8">
                <meta name="viewport"
            content="width=device-width, height=device-height, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no">
                <meta http-equiv="x-ua-compatible" content="ie=edge">
                <title>Yahoo Tuning Groups Ultimate Backup tuning-math Normalizing badness and complexity</title>
                <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
            </head>
            <body>
            </body>
            </html>
        <a href="/tuning-math">back to list</a><h1>Normalizing badness and complexity</h1><h3><a id=18016 href="#18016">ðŸ”—</a>genewardsmith &#x3C;genewardsmith@sbcglobal.net&#x3E;</h3><span>7/13/2010 11:39:21 PM</span><button style="float: right; margin-right: 20px">toggle monospace</button><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>I have proposed to define the norm of weighted vals or multivals W as</p><p>||W|| = sqrt(W.W/length(W))</p><p>where &quot;length&quot; means the number of coefficients of W; its dimension in terms of how many numbers it lists. The reason for this is to get measures for different prime limits to roughly correspond. If we use this definition, we would want simple badness and complexity defined in terms of wedge products to correspond to the same figures defined as Graham does, so we want to normalize.</p><p>Simple badness of a multival is ||W^JIP||. The corresponding formula for a saturated (GCD reduced) set of independent weighted vals defining the same temperament is</p><p>sqrt(n * det(vi.vj/n - ai*aj))</p><p>where ai is the mean of the coefficients of vi, and det is the determinant.</p><p>Complexity of W is simply ||W||. The corresponding definition in terms of a saturated list of vals v is</p><p>sqrt(det(vi.vj)/C(n, k))</p><p>where C(n, k) = n choose k is the binomial coefficient, where n is the dimension (length) of each val, and k is the number of vals.</p><p>I plan on using these normalizations, and I think they are a good idea, as however you compute things, they have the property of giving some amount of stability from one prime limit to the next.</p></div><h3><a id=18017 href="#18017">ðŸ”—</a>Graham Breed &#x3C;gbreed@gmail.com&#x3E;</h3><span>7/14/2010 11:52:46 AM</span><button style="float: right; margin-right: 20px">toggle monospace</button><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>On 14 July 2010 07:39, genewardsmith &lt;<a href="mailto:genewardsmith@sbcglobal.net">genewardsmith@sbcglobal.net</a>&gt; wrote:<br/>&gt; I have proposed to define the norm of weighted vals or multivals W as<br/>&gt;<br/>&gt; ||W|| = sqrt(W.W/length(W))<br/>&gt;<br/>&gt; where &quot;length&quot; means the number of coefficients of W; its dimension in terms of how many numbers it lists. The reason for this is to get measures for different prime limits to roughly correspond. If we use this definition, we would want simple badness and complexity defined in terms of wedge products to correspond to the same figures defined as Graham does, so we want to normalize.</p><p>Does that mean you want the same values I get, but with wedgies (which<br/>I don&apos;t think I did normalize properly), or that you think the values<br/>I get don&apos;t treat different prime limits correctly?  They&apos;re chosen to<br/>give close results to existing measures, like the number of notes to<br/>the octave, or the standard deviation of the weighted<br/>orthogonal-to-period mapping.</p><p>What I start with is</p><p>||W|| = sqrt(W.W/V.V)</p><p>where V is the weighted JIP.  It&apos;s independent of the units you choose<br/>for weighting.  You can also give zero weight to a prime and it<br/>behaves sensibly.</p><p>The scalar complexity of Miracle in the 5-limit is 2.780.  In the<br/>11-limit, it goes up to 2.786.  That certainly makes it look like the<br/>prime limits correspond.</p><p>&gt; Simple badness of a multival is ||W^JIP||. The corresponding formula for a saturated (GCD reduced) set of independent weighted vals defining the same temperament is</p><p>The badness formula that corresponds to the above is</p><p>||W^JIP||/||JIP||</p><p>That gives the correct TOP-RMS error for badness = error * complexity.<br/> Although the definition I gave above would make ||JIP||=1.</p><p>&gt; sqrt(n * det(vi.vj/n - ai*aj))<br/>&gt;<br/>&gt; where ai is the mean of the coefficients of vi, and det is the determinant.</p><p>Dividing by the JIP should make that</p><p>sqrt(det(vi.vj/n - ai*aj) / n)</p><p>which is the square root of the determinant of the covariance matrix.<br/>For rank 1, it&apos;s a standard deviation.</p><p>&gt; Complexity of W is simply ||W||. The corresponding definition in terms of a saturated list of vals v is<br/>&gt;<br/>&gt; sqrt(det(vi.vj)/C(n, k))<br/>&gt;<br/>&gt; where C(n, k) = n choose k is the binomial coefficient, where n is the dimension (length) of each val, and k is the number of vals.</p><p>Does this mean you&apos;re defining the linear algebra measure to match the<br/>wedgie one?</p><p>&gt; I plan on using these normalizations, and I think they are a good idea, as however you compute things, they have the property of giving some amount of stability from one prime limit to the next.</p><p>You lose the rule that the badness of a rank 2 temperament must be<br/>less than the product of the badnesses of the equal temperaments that<br/>make it up, though, don&apos;t you?</p><p>                Graham</p></div><h3><a id=18020 href="#18020">ðŸ”—</a>genewardsmith &#x3C;genewardsmith@sbcglobal.net&#x3E;</h3><span>7/14/2010 2:48:01 PM</span><button style="float: right; margin-right: 20px">toggle monospace</button><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>--- In <a href="mailto:tuning-math@yahoogroups.com">tuning-math@yahoogroups.com</a>, Graham Breed &lt;gbreed@...&gt; wrote:</p><p>&gt; Does that mean you want the same values I get, but with wedgies (which<br/>&gt; I don&apos;t think I did normalize properly), or that you think the values<br/>&gt; I get don&apos;t treat different prime limits correctly?</p><p>I(&apos;m afraid I didn&apos;t check the numbers you got; my concern was to get the wedgie numbers I got to accord with matrix/determinant numbers.</p><p> They&apos;re chosen to<br/>&gt; give close results to existing measures, like the number of notes to<br/>&gt; the octave, or the standard deviation of the weighted<br/>&gt; orthogonal-to-period mapping.</p><p>Should be the same with the first, at any rate.</p><p>&gt; What I start with is<br/>&gt;<br/>&gt; ||W|| = sqrt(W.W/V.V)<br/>&gt;<br/>&gt; where V is the weighted JIP.  It&apos;s independent of the units you choose<br/>&gt; for weighting.  You can also give zero weight to a prime and it<br/>&gt; behaves sensibly.</p><p>In the special case I&apos;m using, where the weight is just a row of 1s, this is the same as my version. Zero weight would also work the same.</p><p>&gt; The scalar complexity of Miracle in the 5-limit is 2.780.  In the<br/>&gt; 11-limit, it goes up to 2.786.  That certainly makes it look like the<br/>&gt; prime limits correspond.</p><p>The scalar product is physics terminology for the dot product in three dimensional space, and has nothing to do with music theory.</p><p>I get 4.815 in the 5-limit, 3.991 in the 7-limit, and 4.405 in the 11-limit.</p><p>&gt; &gt; sqrt(n * det(vi.vj/n - ai*aj))<br/>&gt; &gt;<br/>&gt; &gt; where ai is the mean of the coefficients of vi, and det is the determinant.<br/>&gt;<br/>&gt; Dividing by the JIP should make that<br/>&gt;<br/>&gt; sqrt(det(vi.vj/n - ai*aj) / n)</p><p>It should? You just got through saying ||JIP|| = 1.</p><p>&gt; &gt; Complexity of W is simply ||W||. The corresponding definition in terms of a saturated list of vals v is<br/>&gt; &gt;<br/>&gt; &gt; sqrt(det(vi.vj)/C(n, k))<br/>&gt; &gt;<br/>&gt; &gt; where C(n, k) = n choose k is the binomial coefficient, where n is the dimension (length) of each val, and k is the number of vals.<br/>&gt;<br/>&gt; Does this mean you&apos;re defining the linear algebra measure to match the<br/>&gt; wedgie one?</p><p>Exactly.</p><p>&gt; You lose the rule that the badness of a rank 2 temperament must be<br/>&gt; less than the product of the badnesses of the equal temperaments that<br/>&gt; make it up, though, don&apos;t you?</p><p>Do I? It&apos;s not clear we are even using a different definition.</p></div><h3><a id=18022 href="#18022">ðŸ”—</a>Graham Breed &#x3C;gbreed@gmail.com&#x3E;</h3><span>7/14/2010 3:39:38 PM</span><button style="float: right; margin-right: 20px">toggle monospace</button><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>On 14 July 2010 22:48, genewardsmith &lt;<a href="mailto:genewardsmith@sbcglobal.net">genewardsmith@sbcglobal.net</a>&gt; wrote:<br/>&gt;</p><p>&gt;&gt; What I start with is<br/>&gt;&gt;<br/>&gt;&gt; ||W|| = sqrt(W.W/V.V)<br/>&gt;&gt;<br/>&gt;&gt; where V is the weighted JIP. &nbsp;It&apos;s independent of the units you choose<br/>&gt;&gt; for weighting. &nbsp;You can also give zero weight to a prime and it<br/>&gt;&gt; behaves sensibly.<br/>&gt;<br/>&gt; In the special case I&apos;m using, where the weight is just a row of 1s, this is the same as my version. Zero weight would also work the same.</p><p>No, the number of coefficients of V isn&apos;t the same as the number of<br/>coefficients of W for rank &gt; 1.</p><p>&gt;&gt; The scalar complexity of Miracle in the 5-limit is 2.780. &nbsp;In the<br/>&gt;&gt; 11-limit, it goes up to 2.786. &nbsp;That certainly makes it look like the<br/>&gt;&gt; prime limits correspond.<br/>&gt;<br/>&gt; The scalar product is physics terminology for the dot product in three dimensional space, and has nothing to do with music theory.</p><p>What&apos;s that got to do with anything?</p><p>&gt; I get 4.815 in the 5-limit, 3.991 in the 7-limit, and 4.405 in the 11-limit.</p><p>4.815 = 2.780*sqrt(3)</p><p>3.991 = 2.444*sqrt(8/3)</p><p>4.405 = 2.786*sqrt(2.5)</p><p>&gt;&gt; &gt; sqrt(n * det(vi.vj/n - ai*aj))<br/>&gt;&gt; &gt;<br/>&gt;&gt; &gt; where ai is the mean of the coefficients of vi, and det is the determinant.<br/>&gt;&gt;<br/>&gt;&gt; Dividing by the JIP should make that<br/>&gt;&gt;<br/>&gt;&gt; sqrt(det(vi.vj/n - ai*aj) / n)<br/>&gt;<br/>&gt; It should? You just got through saying ||JIP|| = 1.</p><p>Only if you define ||...|| in such a way that you don&apos;t get the result above.</p><p>&gt;&gt; &gt; Complexity of W is simply ||W||. The corresponding definition in terms of a saturated list of vals v is<br/>&gt;&gt; &gt;<br/>&gt;&gt; &gt; sqrt(det(vi.vj)/C(n, k))<br/>&gt;&gt; &gt;<br/>&gt;&gt; &gt; where C(n, k) = n choose k is the binomial coefficient, where n is the dimension (length) of each val, and k is the number of vals.<br/>&lt;snip&gt;<br/>&gt;&gt; You lose the rule that the badness of a rank 2 temperament must be<br/>&gt;&gt; less than the product of the badnesses of the equal temperaments that<br/>&gt;&gt; make it up, though, don&apos;t you?<br/>&gt;<br/>&gt; Do I? It&apos;s not clear we are even using a different definition.</p><p>We&apos;re getting different results.  And if you&apos;re putting binomials on<br/>the linear algebra side, we&apos;re using different definitions.</p><p>I do have code doing these wedgie-side.  Here&apos;s the part that defines<br/>the metric:</p><p>sqrt(abs((M^~M).flatten()[0])/ self.dimension**self.rank)</p><p>It could be shortened to</p><p>sqrt(||M||/d**r)</p><p>where ||M|| is the usual Euclidean measure of the multivector, with an<br/>implied sum, d is the number of primes, and r is the rank.</p><p>I forget how rigorously I tested that with different ranks.  It&apos;s<br/>clearly only defined for Tenney weighting.</p><p>                   Graham</p></div><h3><a id=18024 href="#18024">ðŸ”—</a>genewardsmith &#x3C;genewardsmith@sbcglobal.net&#x3E;</h3><span>7/14/2010 6:08:08 PM</span><button style="float: right; margin-right: 20px">toggle monospace</button><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>--- In <a href="mailto:tuning-math@yahoogroups.com">tuning-math@yahoogroups.com</a>, Graham Breed &lt;gbreed@...&gt; wrote:</p><p>&gt; It could be shortened to<br/>&gt;<br/>&gt; sqrt(||M||/d**r)<br/>&gt;<br/>&gt; where ||M|| is the usual Euclidean measure of the multivector, with an<br/>&gt; implied sum, d is the number of primes, and r is the rank.</p><p>Two different degree r polynomials in d as the weight: I use<br/>d choose r, and you use d**r. The justification for doing it my way is that complexity is the rms average size of the coefficients of M. What&apos;s your reasoning?</p></div><h3><a id=18025 href="#18025">ðŸ”—</a>Graham Breed &#x3C;gbreed@gmail.com&#x3E;</h3><span>7/14/2010 6:29:51 PM</span><button style="float: right; margin-right: 20px">toggle monospace</button><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>On 15 July 2010 02:08, genewardsmith &lt;<a href="mailto:genewardsmith@sbcglobal.net">genewardsmith@sbcglobal.net</a>&gt; wrote:<br/>&gt;<br/>&gt;<br/>&gt; --- In <a href="mailto:tuning-math@yahoogroups.com">tuning-math@yahoogroups.com</a>, Graham Breed &lt;gbreed@...&gt; wrote:<br/>&gt;<br/>&gt;&gt; It could be shortened to<br/>&gt;&gt;<br/>&gt;&gt; sqrt(||M||/d**r)<br/>&gt;&gt;<br/>&gt;&gt; where ||M|| is the usual Euclidean measure of the multivector, with an<br/>&gt;&gt; implied sum, d is the number of primes, and r is the rank.<br/>&gt;<br/>&gt; Two different degree r polynomials in d as the weight: I use<br/>&gt; d choose r, and you use d**r. The justification for doing it my way is that complexity is the rms average size of the coefficients of M. What&apos;s your reasoning?</p><p>It should give the right geometry in the inner product space.  The<br/>complexity of a val is its length (or distance from the origin).  The<br/>complexity of a rank 2 temperament is the area of a parallelogram<br/>described by two of its vals without contorsion.  And so on.  That<br/>should also mean you get the same result if you divide through by d as<br/>part of the weighting, and then use the standard Euclidean metric.</p><p>It&apos;s also set so that the scalar complexity approximates the STD<br/>complexity, or vice versa.  This is the RMS equivalent of the range<br/>complexity (or Kees-max complexity) which is in turn the TOP<br/>equivalent of the old odd-limit complexity.  It&apos;s the average<br/>complexity of an interval in terms of generators divided by the<br/>complexity of the ratio it approximates.  So the **r comes in because<br/>you do a sum over r coefficients when you calculate the wedge<br/>products.</p><p>              Graham</p></div>
                <script>
                    let monospace = false
                    $('button').on('click', function () {
                      if (monospace) {
                        $('p').css("font-family", "")
                      } else {
                        $('p').css("font-family", "monospace")
                      }
                      monospace = !monospace
                    })
                </script>
            