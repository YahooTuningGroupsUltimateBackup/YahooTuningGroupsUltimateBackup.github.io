<a href="/tuning-math">back to list</a><h1>Gene's Generator Generator</h1><h3><a id=20703 href="#20703">ðŸ”—</a>Mike Battaglia &#x3C;battaglia01@gmail.com&#x3E;</h3><span>6/2/2012 1:53:41 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>A generator generator is a thing that generates generators, of course!</p><p>I spend some time looking at Gene&apos;s generator-finding algorithm, which<br/>he sent offlist. My conclusion is that we&apos;re basically doing the same<br/>thing with very minor differences. Gene&apos;s approach is as follows:</p><p>Assume we want to find the generator corresponding to the ith val of a<br/>non-contorted mapping matrix M. Then, if monzos are rows:</p><p>1) Find the null space of M, call it N. Make sure that this is an<br/>integer matrix.<br/>2) Find an arbitrary generator with rational coefficients by taking<br/>the ith monzo of the pseudoinverse of M.<br/>3) Tack it onto the null space as the top row.<br/>4) Clear denominators in this top row.<br/>5) Saturate the resulting matrix.<br/>6) For each row in the matrix, figure out what it maps to under the<br/>ith val, and append this as an additional augmented coordinate to the<br/>left of the row.<br/>7) Put this in Hermite form. Note the top row will now have augmented<br/>coordinate 1 and not-so-coincidentally be the generator, and the other<br/>rows will have aug coordinate 0 and not-so-coincidentally also be in<br/>the null space.<br/>8) Lop off the augmented coordinates, take the top generator monzo,<br/>feed it and the bottom null space monzos in rational form into Gene&apos;s<br/>mystery &quot;redic&quot; function, which somehow reduces it in a better way<br/>than my Hermite form thing.</p><p>The key thing here is that it doesn&apos;t matter what order you do steps<br/>4, 5, and 6 in. If you were instead to insert step 6 before step 4,<br/>then Gene&apos;s procedure would lead to you immediately appending an<br/>augmented coordinate of 1 to the row corresponding to the<br/>pseudoinverse entry, and an augmented coordinate of 0 to the rows<br/>corresponding to the null space. Clearing denominators and saturating<br/>after the fact would then still give you the same result, but make it<br/>more explicit that you&apos;re performing elementary row operations on an<br/>augmented matrix.</p><p>The augmented monzo matrix is central to both of these algorithms.<br/>Gene constructs the augmented monzo matrix manually by getting an<br/>arbitrary rational generator via the pseudoinverse, combining it with<br/>the null space matrix, and then attaching the augmented coordinates.<br/>My way takes the null space of the augmented *mapping* matrix<br/>directly, which gives you the augmented monzo matrix in one step. Both<br/>algorithms then go on to clear denominators, saturate, reduce to some<br/>normal form, etc.</p><p>The only thing I don&apos;t get is in Gene&apos;s mystery &quot;redic&quot; function from<br/>step #8, which reduces things much better than any of these variations<br/>on Hermite form. Gene asked me what the best way was to find the<br/>lowest-complexity generator from my approach, so my answer is &quot;take it<br/>and send it into your redic function.&quot;</p><p>Which means I need to ask Gene, what&apos;s the idea behind your redic<br/>procedure? Is it guaranteed to actually give you the lowest-Tenney<br/>height result? (I see it keeps calling your &quot;redi&quot; procedure, which<br/>partially reduces it, until it arrives at a stable result.)</p><p>-Mike</p></div><h3><a id=20704 href="#20704">ðŸ”—</a>Mike Battaglia &#x3C;battaglia01@gmail.com&#x3E;</h3><span>6/2/2012 2:02:48 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>On Sat, Jun 2, 2012 at 4:53 AM, Mike Battaglia &lt;<a href="mailto:battaglia01@gmail.com">battaglia01@gmail.com</a>&gt; wrote:<br/>&gt;<br/>&gt; The augmented monzo matrix is central to both of these algorithms.<br/>&gt; Gene constructs the augmented monzo matrix manually by getting an<br/>&gt; arbitrary rational generator via the pseudoinverse, combining it with<br/>&gt; the null space matrix, and then attaching the augmented coordinates.</p><p>One thing I also still don&apos;t get is why the whole affine space thing<br/>works out so naturally. I guess there&apos;s something magical about<br/>identifying (x, y, z) with ax + by + cz = 1, emphasis on the 1...</p><p>-Mike</p></div><h3><a id=20711 href="#20711">ðŸ”—</a>genewardsmith &#x3C;genewardsmith@sbcglobal.net&#x3E;</h3><span>6/3/2012 2:00:19 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>--- In <a href="mailto:tuning-math@yahoogroups.com">tuning-math@yahoogroups.com</a>, Mike Battaglia &lt;battaglia01@...&gt; wrote:</p><p>&gt; Gene asked me what the best way was to find the<br/>&gt; lowest-complexity generator from my approach, so my answer is &quot;take it<br/>&gt; and send it into your redic function.&quot;</p><p>My redic function blows. I&apos;ve long thought I should take a look at improving it.</p></div><h3><a id=20713 href="#20713">ðŸ”—</a>Mike Battaglia &#x3C;battaglia01@gmail.com&#x3E;</h3><span>6/3/2012 2:47:37 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>On Sun, Jun 3, 2012 at 5:00 PM, genewardsmith &lt;<a href="mailto:genewardsmith@sbcglobal.net">genewardsmith@sbcglobal.net</a>&gt;<br/>wrote:<br/>&gt;<br/>&gt; --- In <a href="mailto:tuning-math@yahoogroups.com">tuning-math@yahoogroups.com</a>, Mike Battaglia &lt;battaglia01@...&gt;<br/>&gt; wrote:<br/>&gt;<br/>&gt; &gt; Gene asked me what the best way was to find the<br/>&gt; &gt; lowest-complexity generator from my approach, so my answer is &quot;take it<br/>&gt; &gt; and send it into your redic function.&quot;<br/>&gt;<br/>&gt; My redic function blows. I&apos;ve long thought I should take a look at<br/>&gt; improving it.</p><p>OK, somewhere in the affine subspace lies the interval with the lowest<br/>complexity also lying in Z^n, which I&apos;ll call C. Also in this subspace<br/>lies the pseudoinverse P, which lies in Q^n. Seems like there ought to<br/>be an upper bound on the weighted distance d between P and C, yes?<br/>Then you could just look at all the points in the d-neighborhood of P<br/>which are also in Z^n, of which there will be a finite amount, and<br/>pick the one with lowest compexity.</p><p>-Mike</p></div><h3><a id=20714 href="#20714">ðŸ”—</a>Mike Battaglia &#x3C;battaglia01@gmail.com&#x3E;</h3><span>6/3/2012 2:51:48 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>On Sun, Jun 3, 2012 at 5:47 PM, Mike Battaglia &lt;<a href="mailto:battaglia01@gmail.com">battaglia01@gmail.com</a>&gt; wrote:<br/>&gt;<br/>&gt; OK, somewhere in the affine subspace lies the interval with the lowest<br/>&gt; complexity also lying in Z^n, which I&apos;ll call C. Also in this subspace<br/>&gt; lies the pseudoinverse P, which lies in Q^n.</p><p>I dunno if this terminology is right if you&apos;re using weighted<br/>coordinates, but whatever. Just take the weighted coordinate version<br/>of what I said.</p><p>-Mike</p></div><h3><a id=20715 href="#20715">ðŸ”—</a>genewardsmith &#x3C;genewardsmith@sbcglobal.net&#x3E;</h3><span>6/4/2012 6:33:50 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>--- In <a href="mailto:tuning-math@yahoogroups.com">tuning-math@yahoogroups.com</a>, Mike Battaglia &lt;battaglia01@...&gt; wrote:</p><p>&gt; OK, somewhere in the affine subspace lies the interval with the lowest<br/>&gt; complexity also lying in Z^n, which I&apos;ll call C. Also in this subspace<br/>&gt; lies the pseudoinverse P, which lies in Q^n. Seems like there ought to<br/>&gt; be an upper bound on the weighted distance d between P and C, yes?<br/>&gt; Then you could just look at all the points in the d-neighborhood of P<br/>&gt; which are also in Z^n, of which there will be a finite amount, and<br/>&gt; pick the one with lowest compexity.</p><p>I think it might help to find a Graver basis routine, especially if I could get one in Maple; don&apos;t know if there is one.</p></div><h3><a id=20716 href="#20716">ðŸ”—</a>genewardsmith &#x3C;genewardsmith@sbcglobal.net&#x3E;</h3><span>6/4/2012 7:08:04 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>--- In <a href="mailto:tuning-math@yahoogroups.com">tuning-math@yahoogroups.com</a>, &quot;genewardsmith&quot; &lt;genewardsmith@...&gt; wrote:</p><p>&gt; I think it might help to find a Graver basis routine, especially if I could get one in Maple; don&apos;t know if there is one.</p><p>So far this is the best I can find. I am not a happy camper.</p><p><a href="http://www.4ti2.de/">http://www.4ti2.de/</a></p></div><h3><a id=20717 href="#20717">ðŸ”—</a>genewardsmith &#x3C;genewardsmith@sbcglobal.net&#x3E;</h3><span>6/4/2012 10:21:06 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>--- In <a href="mailto:tuning-math@yahoogroups.com">tuning-math@yahoogroups.com</a>, &quot;genewardsmith&quot; &lt;genewardsmith@...&gt; wrote:<br/>&gt;<br/>&gt;<br/>&gt;<br/>&gt; --- In <a href="mailto:tuning-math@yahoogroups.com">tuning-math@yahoogroups.com</a>, &quot;genewardsmith&quot; &lt;genewardsmith@&gt; wrote:<br/>&gt;<br/>&gt; &gt; I think it might help to find a Graver basis routine, especially if I could get one in Maple; don&apos;t know if there is one.<br/>&gt;<br/>&gt; So far this is the best I can find. I am not a happy camper.<br/>&gt;<br/>&gt; <a href="http://www.4ti2.de/">http://www.4ti2.de/</a><br/>&gt;</p><p>Brute force might do it, especially if I can figure out how to bound the search. This is the Wikipedia definition of a Graver basis:</p><p><a href="http://en.wikipedia.org/wiki/Graver_basis#Formal_definition">http://en.wikipedia.org/wiki/Graver_basis#Formal_definition</a></p><p>We can cut that in half, since a Graver comma basis could consist only of elements greater than 1, and we allow multiplication and division. What I got for a Graver basis for the commas of 11-limit miracle was {225/224, 1029/1024, 2401/2400, 16875/16807, 33075/32768, 823543/819200, 1063125/1048576, 34171875/33554432}. The idea is that you reduce using commas in the Graver basis one comma at a time. If it works as it&apos;s supposed to, and finding the Graver basis isn&apos;t too hard, that should be a good way of improving &quot;redic&quot;.</p></div><h3><a id=20718 href="#20718">ðŸ”—</a>genewardsmith &#x3C;genewardsmith@sbcglobal.net&#x3E;</h3><span>6/4/2012 11:47:20 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>--- In <a href="mailto:tuning-math@yahoogroups.com">tuning-math@yahoogroups.com</a>, &quot;genewardsmith&quot; &lt;genewardsmith@...&gt; wrote:<br/>What I got for a Graver basis for the commas of 11-limit miracle was {225/224, 1029/1024, 2401/2400, 16875/16807, 33075/32768, 823543/819200, 1063125/1048576, 34171875/33554432}.</p><p>Bah. I think I screwed up again.</p></div><h3><a id=20719 href="#20719">ðŸ”—</a>genewardsmith &#x3C;genewardsmith@sbcglobal.net&#x3E;</h3><span>6/4/2012 4:59:35 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>--- In <a href="mailto:tuning-math@yahoogroups.com">tuning-math@yahoogroups.com</a>, &quot;genewardsmith&quot; &lt;genewardsmith@...&gt; wrote:<br/>&gt;<br/>&gt;<br/>&gt;<br/>&gt; --- In <a href="mailto:tuning-math@yahoogroups.com">tuning-math@yahoogroups.com</a>, &quot;genewardsmith&quot; &lt;genewardsmith@&gt; wrote:<br/>&gt; What I got for a Graver basis for the commas of 11-limit miracle was {225/224, 1029/1024, 2401/2400, 16875/16807, 33075/32768, 823543/819200, 1063125/1048576, 34171875/33554432}.<br/>&gt;<br/>&gt; Bah. I think I screwed up again.<br/>&gt;</p><p>Let&apos;s try septimal meantone as an example: 81/80, 126/125, 225/224, 3136/3125, 3645/3584, 5103/5000, 59049/57344, 321489/312500, 20253807/19531250, 1275989841/1220703125. The question is, how do I find this expeditiously?</p></div>