<a href="/tuning-math">back to list</a><h1>TOP observation</h1><h3><a id=16173 href="#16173">ðŸ”—</a>Herman Miller &#x3C;hmiller@IO.COM&#x3E;</h3><span>3/5/2007 7:54:49 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>This may have some obvious mathematical explanation, but it seems potentially useful if it turns out to be correct. If there&apos;s some problem with the idea, a counterexample or two would be appreciated.</p><p>Take a 7-limit rank 2 temperament, for example lemba, with a wedgie of</p><p>&lt;&lt;6, -2, -2, -17, -20, 1]]</p><p>From this you can derive a set of commas with one of the elements in each comma equal to zero.</p><p>[17, -2, -6, 0&gt;<br/>[10, -1, 0, -3&gt; (simplified from [20, -2, 0, -6&gt;)<br/>[1, 0, 2, -2&gt;<br/>[0, 1, 20, -17&gt;</p><p>Now you can find the TOP errors of each comma using a relatively simple procedure:</p><p>[17, -2, -6, 0&gt;  -3.57<br/>[10, -1, 0, -3&gt;  -0.42<br/>[1, 0, 2, -2&gt;     3.11<br/>[0, 1, 20, -17&gt;   3.74</p><p>But guess what? The TOP error of lemba is 3.74! I&apos;ve tried this with a few other temperaments and it always seems to work out that the TOP error of the temperament is the same as the largest absolute value of the TOP errors of its 3-element commas. Is this generally the case? Can this be extended in the obvious way to 11-limit or higher limit temperaments? If so, this seems like a useful procedure for determining the TOP tuning for a temperament (no need for specialized mathematical software and understanding of how to set up a linear programming problem).</p></div><h3><a id=16177 href="#16177">ðŸ”—</a>Graham Breed &#x3C;gbreed@gmail.com&#x3E;</h3><span>3/6/2007 12:03:06 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>On 06/03/07, Herman Miller &lt;<a href="mailto:hmiller@io.com">hmiller@io.com</a>&gt; wrote:</p><p>&lt;snip&gt;</p><p>&gt; But guess what? The TOP error of lemba is 3.74! I&apos;ve tried this with a<br/>&gt; few other temperaments and it always seems to work out that the TOP<br/>&gt; error of the temperament is the same as the largest absolute value of<br/>&gt; the TOP errors of its 3-element commas. Is this generally the case? Can<br/>&gt; this be extended in the obvious way to 11-limit or higher limit<br/>&gt; temperaments? If so, this seems like a useful procedure for determining<br/>&gt; the TOP tuning for a temperament (no need for specialized mathematical<br/>&gt; software and understanding of how to set up a linear programming problem).</p><p>I think it should always be true for a worst-case comma.  I don&apos;t know<br/>if you can expect that comma to be one of the results of a simple<br/>comma-finding algorithm.  It&apos;d be very handy if it did, so perhaps<br/>I&apos;ll start looking for counter-examples one of these days.</p><p>                         Graham</p></div><h3><a id=16204 href="#16204">ðŸ”—</a>Herman Miller &#x3C;hmiller@IO.COM&#x3E;</h3><span>3/8/2007 7:00:08 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>Graham Breed wrote:<br/>&gt; On 06/03/07, Herman Miller &lt;<a href="mailto:hmiller@io.com">hmiller@io.com</a>&gt; wrote:<br/>&gt; &gt; &lt;snip&gt;<br/>&gt; &gt;&gt; But guess what? The TOP error of lemba is 3.74! I&apos;ve tried this with a<br/>&gt;&gt; few other temperaments and it always seems to work out that the TOP<br/>&gt;&gt; error of the temperament is the same as the largest absolute value of<br/>&gt;&gt; the TOP errors of its 3-element commas. Is this generally the case? Can<br/>&gt;&gt; this be extended in the obvious way to 11-limit or higher limit<br/>&gt;&gt; temperaments? If so, this seems like a useful procedure for determining<br/>&gt;&gt; the TOP tuning for a temperament (no need for specialized mathematical<br/>&gt;&gt; software and understanding of how to set up a linear programming problem).<br/>&gt; &gt; I think it should always be true for a worst-case comma.  I don&apos;t know<br/>&gt; if you can expect that comma to be one of the results of a simple<br/>&gt; comma-finding algorithm.  It&apos;d be very handy if it did, so perhaps<br/>&gt; I&apos;ll start looking for counter-examples one of these days.</p><p>I think I have some idea why it works, and why it should work for any rank 2 temperament. The TOP tunings I&apos;ve calculated agree with Gene&apos;s figures from the old list of 114 linear 7-limit temperaments with at most a difference of 0.000002 cents (and that could be a floating point precision issue).</p><p>Any rank 2 temperament can be represented as a plane in &quot;val&quot; space. The TOP tuning is a point on this plane which is a certain distance away from the JI point; in TOP space, this means it is a point on the surface of an n-dimensional cube (or hypercube) with a particular size. There will always be a way to find a projection of the cube such that the TOP tuning is at a corner of the projected cube! If it is on an edge, project it along the axis parallel to the edge, and so on for faces, etc.</p><p>This means that if you test all the possible projections into 3-dimensional space, at least one of the projections will have the TOP point on a corner of the cube (others may have it on an edge or a face). In that case, finding the TOP point reduces to the problem of finding the TOP error of a single comma with 3 prime factors, which is easily solved. The comma is tempered to zero, so its TOP error is just its &quot;length&quot; as defined by the TOP metric. (I forget who first pointed this out, but I think it was either Graham Breed, Paul Erlich, or Dave Keenan.)</p><p>The only temperaments that might not have the TOP point on a corner of a projected cube that I can think of are ones that are degenerate in some way, missing one of the prime factors in their commas (which could be treated as a lower-dimensional case to begin with).</p><p>Now that you have the maximum TOP error of the temperament, you can find the TOP tuning for those three primes, and fairly easily solve for the tuning of the remaining primes from the generator mapping or the other commas of the temperament. Not as simple as the pseudoinverse method, but still something that a relatively small function in a programming language could handle without much trouble. Actually it might be about as easy if you have to write your own matrix inverse.</p><p>Does this all make sense, mathematically?</p></div><h3><a id=16210 href="#16210">ðŸ”—</a>Graham Breed &#x3C;gbreed@gmail.com&#x3E;</h3><span>3/9/2007 2:14:02 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>On 09/03/07, Herman Miller &lt;<a href="mailto:hmiller@io.com">hmiller@io.com</a>&gt; wrote:<br/>&gt; Graham Breed wrote:<br/>&gt; &gt; On 06/03/07, Herman Miller &lt;<a href="mailto:hmiller@io.com">hmiller@io.com</a>&gt; wrote:<br/>&gt; &gt;<br/>&gt; &gt; &lt;snip&gt;<br/>&gt; &gt;<br/>&gt; &gt;&gt; But guess what? The TOP error of lemba is 3.74! I&apos;ve tried this with a<br/>&gt; &gt;&gt; few other temperaments and it always seems to work out that the TOP<br/>&gt; &gt;&gt; error of the temperament is the same as the largest absolute value of<br/>&gt; &gt;&gt; the TOP errors of its 3-element commas. Is this generally the case? Can<br/>&gt; &gt;&gt; this be extended in the obvious way to 11-limit or higher limit<br/>&gt; &gt;&gt; temperaments? If so, this seems like a useful procedure for determining<br/>&gt; &gt;&gt; the TOP tuning for a temperament (no need for specialized mathematical<br/>&gt; &gt;&gt; software and understanding of how to set up a linear programming problem).<br/>&gt; &gt;<br/>&gt; &gt; I think it should always be true for a worst-case comma.  I don&apos;t know<br/>&gt; &gt; if you can expect that comma to be one of the results of a simple<br/>&gt; &gt; comma-finding algorithm.  It&apos;d be very handy if it did, so perhaps<br/>&gt; &gt; I&apos;ll start looking for counter-examples one of these days.<br/>&gt;<br/>&gt; I think I have some idea why it works, and why it should work for any<br/>&gt; rank 2 temperament. The TOP tunings I&apos;ve calculated agree with Gene&apos;s<br/>&gt; figures from the old list of 114 linear 7-limit temperaments with at<br/>&gt; most a difference of 0.000002 cents (and that could be a floating point<br/>&gt; precision issue).</p><p>It could also be that the TOP tuning isn&apos;t always uniquely specified.</p><p>&gt; Any rank 2 temperament can be represented as a plane in &quot;val&quot; space. The<br/>&gt; TOP tuning is a point on this plane which is a certain distance away<br/>&gt; from the JI point; in TOP space, this means it is a point on the surface<br/>&gt; of an n-dimensional cube (or hypercube) with a particular size. There<br/>&gt; will always be a way to find a projection of the cube such that the TOP<br/>&gt; tuning is at a corner of the projected cube! If it is on an edge,<br/>&gt; project it along the axis parallel to the edge, and so on for faces, etc.</p><p>A plausible TOP tuning will always be a corner of some kind.  This is<br/>how the Simplex algorithm for linear programming works.  But there are<br/>a lot of corners.</p><p>&gt; This means that if you test all the possible projections into<br/>&gt; 3-dimensional space, at least one of the projections will have the TOP<br/>&gt; point on a corner of the cube (others may have it on an edge or a face).<br/>&gt; In that case, finding the TOP point reduces to the problem of finding<br/>&gt; the TOP error of a single comma with 3 prime factors, which is easily<br/>&gt; solved. The comma is tempered to zero, so its TOP error is just its<br/>&gt; &quot;length&quot; as defined by the TOP metric. (I forget who first pointed this<br/>&gt; out, but I think it was either Graham Breed, Paul Erlich, or Dave Keenan.)</p><p>Dave Keenan found something for odd limits, Paul Erlich<br/>(independently) adapted it to Tenney-weighted prime limits.</p><p>&gt; The only temperaments that might not have the TOP point on a corner of a<br/>&gt; projected cube that I can think of are ones that are degenerate in some<br/>&gt; way, missing one of the prime factors in their commas (which could be<br/>&gt; treated as a lower-dimensional case to begin with).</p><p>It has to be a corner of something (or not uniquely defined).</p><p>&gt; Now that you have the maximum TOP error of the temperament, you can find<br/>&gt; the TOP tuning for those three primes, and fairly easily solve for the<br/>&gt; tuning of the remaining primes from the generator mapping or the other<br/>&gt; commas of the temperament. Not as simple as the pseudoinverse method,<br/>&gt; but still something that a relatively small function in a programming<br/>&gt; language could handle without much trouble. Actually it might be about<br/>&gt; as easy if you have to write your own matrix inverse.<br/>&gt;<br/>&gt; Does this all make sense, mathematically?</p><p>I still don&apos;t see how you know it&apos;s one of the commas you can easily<br/>calculate.  How simple is it?  Simplex is non-polynomial, but<br/>generally fast for that.  All pairs of primes would be cubic time.<br/>Least squares is linear time for rank 2, and you don&apos;t need a library.<br/>It may be you&apos;re duplicating Simplex inefficiently, or that you&apos;ve<br/>found a reason Simplex can be beaten in this case.</p><p>                                Graham</p></div><h3><a id=16213 href="#16213">ðŸ”—</a>Gene Ward Smith &#x3C;genewardsmith@coolgoose.com&#x3E;</h3><span>3/9/2007 10:49:49 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>--- In <a href="mailto:tuning-math@yahoogroups.com">tuning-math@yahoogroups.com</a>, &quot;Graham Breed&quot; &lt;gbreed@...&gt; wrote:</p><p>&gt; I still don&apos;t see how you know it&apos;s one of the commas you can easily<br/>&gt; calculate.  How simple is it?</p><p>I didn&apos;t follow Herman&apos;s argument, but I think what is going on is<br/>this: given a rank r tuning, you have enough freedom to give r+1 of the<br/>primes the same relative error. One choice of primes and error signs<br/>(that is, one choice of whether the error tends flat or sharp) will<br/>belong to the actual minimax relative error, ie the TOP tuning. A comma<br/>involving only those r+1 primes with the appropriate signs (that is, in<br/>the numerator or denominator depending on the sign) will achieve the<br/>maximum of relative error for TOP.</p></div><h3><a id=16215 href="#16215">ðŸ”—</a>Herman Miller &#x3C;hmiller@IO.COM&#x3E;</h3><span>3/9/2007 6:13:03 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>Graham Breed wrote:</p><p>&gt; I still don&apos;t see how you know it&apos;s one of the commas you can easily<br/>&gt; calculate.  How simple is it?  Simplex is non-polynomial, but<br/>&gt; generally fast for that.  All pairs of primes would be cubic time.<br/>&gt; Least squares is linear time for rank 2, and you don&apos;t need a library.<br/>&gt;  It may be you&apos;re duplicating Simplex inefficiently, or that you&apos;ve<br/>&gt; found a reason Simplex can be beaten in this case.</p><p>It could very well be that there&apos;s an easier way to calculate TOP tunings, but I haven&apos;t seen an explanation that I can understand.</p><p>The number of commas I need to calculate goes up pretty rapidly with the number of primes -- only 4 in the case of 7-limit, but 10 for 11-limit, 20 for 13-limit, etc. Still it&apos;s better than brute force converging on the solution by trying many different possible generator values around what&apos;s likely to be the TOP tuning.</p></div><h3><a id=16216 href="#16216">ðŸ”—</a>Graham Breed &#x3C;gbreed@gmail.com&#x3E;</h3><span>3/9/2007 6:22:44 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>On 10/03/07, Herman Miller &lt;<a href="mailto:hmiller@io.com">hmiller@io.com</a>&gt; wrote:<br/>&gt; Graham Breed wrote:<br/>&gt;<br/>&gt; &gt; I still don&apos;t see how you know it&apos;s one of the commas you can easily<br/>&gt; &gt; calculate.  How simple is it?  Simplex is non-polynomial, but<br/>&gt; &gt; generally fast for that.  All pairs of primes would be cubic time.<br/>&gt; &gt; Least squares is linear time for rank 2, and you don&apos;t need a library.<br/>&gt; &gt;  It may be you&apos;re duplicating Simplex inefficiently, or that you&apos;ve<br/>&gt; &gt; found a reason Simplex can be beaten in this case.<br/>&gt;<br/>&gt; It could very well be that there&apos;s an easier way to calculate TOP<br/>&gt; tunings, but I haven&apos;t seen an explanation that I can understand.</p><p>Indeed!</p><p>This may be the easiest in terms of code, but not most efficient in<br/>terms of operations.  Still, in practical terms, removing a library<br/>may speed things up.  I think most of the time in my TOP searches is<br/>spent in the interface with the C library.</p><p>&gt; The number of commas I need to calculate goes up pretty rapidly with the<br/>&gt; number of primes -- only 4 in the case of 7-limit, but 10 for 11-limit,<br/>&gt; 20 for 13-limit, etc. Still it&apos;s better than brute force converging on<br/>&gt; the solution by trying many different possible generator values around<br/>&gt; what&apos;s likely to be the TOP tuning.</p><p>I think I&apos;ve just worked it out.  The number of commas is generally</p><p>n! / (r+1)!(n-r-1)!</p><p>for n primes and a rank r temperament.  For rank 2, that simplifies to</p><p>n(n-1)(n-2) / 6</p><p>The complexity of the whole algorithm is this times the number of<br/>primes, because for each comma you need to run over the primes to get<br/>the error.  So the whole thing is quartic or O(n**4) in complexity.<br/>That&apos;s big, but should be manageable.</p><p>                       Graham</p></div><h3><a id=16219 href="#16219">ðŸ”—</a>Carl Lumma &#x3C;ekin@lumma.org&#x3E;</h3><span>3/9/2007 8:43:13 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>At 06:13 PM 3/9/2007, you wrote:<br/>&gt;Graham Breed wrote:<br/>&gt;<br/>&gt;&gt; I still don&apos;t see how you know it&apos;s one of the commas you can easily<br/>&gt;&gt; calculate.  How simple is it?  Simplex is non-polynomial, but<br/>&gt;&gt; generally fast for that.  All pairs of primes would be cubic time.<br/>&gt;&gt; Least squares is linear time for rank 2, and you don&apos;t need a library.<br/>&gt;&gt;  It may be you&apos;re duplicating Simplex inefficiently, or that you&apos;ve<br/>&gt;&gt; found a reason Simplex can be beaten in this case.<br/>&gt;<br/>&gt;It could very well be that there&apos;s an easier way to calculate TOP<br/>&gt;tunings, but I haven&apos;t seen an explanation that I can understand.<br/>&gt;<br/>&gt;The number of commas I need to calculate goes up pretty rapidly with the<br/>&gt;number of primes -- only 4 in the case of 7-limit, but 10 for 11-limit,<br/>&gt;20 for 13-limit, etc.</p><p>I didn&apos;t think it went up that fast.</p><p>-Carl</p></div><h3><a id=16221 href="#16221">ðŸ”—</a>Graham Breed &#x3C;gbreed@gmail.com&#x3E;</h3><span>3/9/2007 9:25:39 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>On 10/03/07, Carl Lumma &lt;<a href="mailto:ekin@lumma.org">ekin@lumma.org</a>&gt; wrote:<br/>&gt; At 06:13 PM 3/9/2007, you wrote:</p><p>&gt; &gt;The number of commas I need to calculate goes up pretty rapidly with the<br/>&gt; &gt;number of primes -- only 4 in the case of 7-limit, but 10 for 11-limit,<br/>&gt; &gt;20 for 13-limit, etc.<br/>&gt;<br/>&gt; I didn&apos;t think it went up that fast.</p><p>It&apos;s a combinatorics problem.  For rank 2, you need a comma for each<br/>case where all but 3 primes have zero coefficients.  So the number of<br/>commas is the number of ways of choosing 3 from n primes.  Naturally,<br/>for the 5-limit this is 1.  If it were a single entry of zero in each<br/>case that&apos;d be much nicer.</p><p>The magic number 3 here is r+1 where r is the rank.</p><p>              Graham</p></div><h3><a id=16222 href="#16222">ðŸ”—</a>Gene Ward Smith &#x3C;genewardsmith@coolgoose.com&#x3E;</h3><span>3/9/2007 9:27:35 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>--- In <a href="mailto:tuning-math@yahoogroups.com">tuning-math@yahoogroups.com</a>, Carl Lumma &lt;ekin@...&gt; wrote:</p><p>&gt; &gt;The number of commas I need to calculate goes up pretty rapidly with<br/>the<br/>&gt; &gt;number of primes -- only 4 in the case of 7-limit, but 10 for 11-<br/>limit,<br/>&gt; &gt;20 for 13-limit, etc.<br/>&gt;<br/>&gt; I didn&apos;t think it went up that fast.</p><p>The number of triprime commas is going to be n choose 3 = n(n-1)(n-2)/6,<br/>which is cubic polynomial growth. Which could be a lot worse; the<br/>number of corners of a hypercube is exponential growth.</p></div>