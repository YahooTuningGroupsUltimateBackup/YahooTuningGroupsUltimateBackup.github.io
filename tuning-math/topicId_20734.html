<a href="/tuning-math">back to list</a><h1>Toric ideals--woo hoo!</h1><h3><a id=20734 href="#20734">ðŸ”—</a>genewardsmith &#x3C;genewardsmith@sbcglobal.net&#x3E;</h3><span>6/6/2012 1:59:32 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>It looks like Maple has something relevant to this Graver basis problem after all:</p><p><a href="http://www.maplesoft.com/support/help/Maple/view.aspx?path=Groebner/ToricIdealBasis">http://www.maplesoft.com/support/help/Maple/view.aspx?path=Groebner/ToricIdealBasis</a></p><p>Now to see if we can get it to actually do something useful.</p></div><h3><a id=20740 href="#20740">ðŸ”—</a>genewardsmith &#x3C;genewardsmith@sbcglobal.net&#x3E;</h3><span>6/7/2012 1:28:34 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>--- In <a href="mailto:tuning-math@yahoogroups.com">tuning-math@yahoogroups.com</a>, &quot;genewardsmith&quot; &lt;genewardsmith@...&gt; wrote:<br/>&gt;<br/>&gt; It looks like Maple has something relevant to this Graver basis problem after all:<br/>&gt;<br/>&gt; <a href="http://www.maplesoft.com/support/help/Maple/view.aspx?path=Groebner/ToricIdealBasis">http://www.maplesoft.com/support/help/Maple/view.aspx?path=Groebner/ToricIdealBasis</a><br/>&gt;<br/>&gt; Now to see if we can get it to actually do something useful.<br/>&gt;</p><p>I got it to give a subset of the Graver basis. If Mike or anyone else wants to play with it, here it is:</p><p>monocoeff := proc(u, m, n)<br/># monomial coefficient<br/>local i, y;<br/>y := u;<br/>for i from 1 to n do<br/>if not i=m then y := subs(x[i]=1, y) fi od;<br/>coeff(y, x[m], degree(y, x[m])) end:</p><p>monocon := proc(u, n)<br/># monomial conversion<br/>local i, j, z;<br/>z := NULL;<br/>for i from 1 to n do<br/>z := z,signum(0, monocoeff(u, i, n), 0)*degree(u, x[i]) od;<br/>[z] end:</p><p>toric := proc(w)<br/>local M, g, i, n, u, y, z;<br/>n := nops(w[1]);<br/>M := Matrix(w);<br/>z := [seq(x[i], i=1..n)];<br/>g := Groebner[ToricIdealBasis](M, z, plex(op(z)), method=&apos;du&apos;);<br/>z := NULL;<br/>for i to nops(g) do<br/>z := z, monocon(g[i],n) od;<br/>z := monzl2rat([z]);<br/>y := NULL;<br/>for i from 1 to nops(z) do<br/>u := z[i];<br/>if u&lt;1 then u:=1/u fi;<br/>y := y, u od:<br/>tensort([y]) end:</p><p>monz2rat := proc(m)<br/># converts monzo to rational number<br/>local i, t;<br/>t := 1;<br/>for i from 1 to nops(m) do<br/>t := t * ithprime(i)^m[i] od;<br/>t end:</p><p>monzl2rat := proc(w)<br/># list of monzos to list of rationals<br/>local i, u;<br/>u := NULL;<br/>for i from 1 to nops(w) do<br/>u := u,monz2rat(w[i]) od;<br/>[u] end:</p><p>tenney := proc(q)<br/># tenney height of q<br/>numer(q)*denom(q) end:</p><p>tensort := proc(l)<br/># tenney height sorting of list l;<br/>local i, j, n, u, v, w;<br/>u := map(tenney, l);<br/>v := sort(u);<br/>n := nops(u);<br/>w := NULL;<br/>for i from 1 to n do<br/>for j from 1 to n do<br/>if v[i]=u[j] then<br/>w := w,l[j] fi od od;<br/>[w] end:</p></div><h3><a id=20741 href="#20741">ðŸ”—</a>genewardsmith &#x3C;genewardsmith@sbcglobal.net&#x3E;</h3><span>6/8/2012 4:05:55 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>--- In <a href="mailto:tuning-math@yahoogroups.com">tuning-math@yahoogroups.com</a>, &quot;genewardsmith&quot; &lt;genewardsmith@...&gt; wrote:<br/> I&apos;ve got an alternative to &quot;redic&quot; coded up, but I wish it was faster. But at least now I have an alternative when &quot;redic&quot; craps out on me.</p></div><h3><a id=20742 href="#20742">ðŸ”—</a>Mike Battaglia &#x3C;battaglia01@gmail.com&#x3E;</h3><span>6/8/2012 5:33:32 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>I still don&apos;t really get it - how does this help us find the point in an<br/>affine subspace with the least L1 norm?</p><p>-Mike</p><p>On Jun 8, 2012, at 6:06 PM, genewardsmith &lt;<a href="mailto:genewardsmith@sbcglobal.net">genewardsmith@sbcglobal.net</a>&gt;<br/>wrote:</p><p>--- In <a href="mailto:tuning-math@yahoogroups.com">tuning-math@yahoogroups.com</a>, &quot;genewardsmith&quot; &lt;genewardsmith@...&gt;<br/>wrote:<br/>I&apos;ve got an alternative to &quot;redic&quot; coded up, but I wish it was faster. But<br/>at least now I have an alternative when &quot;redic&quot; craps out on me.</p></div><h3><a id=20743 href="#20743">ðŸ”—</a>genewardsmith &#x3C;genewardsmith@sbcglobal.net&#x3E;</h3><span>6/8/2012 8:51:26 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>--- In <a href="mailto:tuning-math@yahoogroups.com">tuning-math@yahoogroups.com</a>, Mike Battaglia &lt;battaglia01@...&gt; wrote:<br/>&gt;<br/>&gt; I still don&apos;t really get it - how does this help us find the point in an<br/>&gt; affine subspace with the least L1 norm?</p><p>Once you find a Graver basis for the commas of a temperament, you can multiply or divide your interval by an element of the Graver basis to see if the Tenney height goes down. Lather, rise, repeat. Of course you can do that anyway, but without the full Graver basis you might get stuck.</p></div><h3><a id=20744 href="#20744">ðŸ”—</a>genewardsmith &#x3C;genewardsmith@sbcglobal.net&#x3E;</h3><span>6/8/2012 9:10:58 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>--- In <a href="mailto:tuning-math@yahoogroups.com">tuning-math@yahoogroups.com</a>, &quot;genewardsmith&quot; &lt;genewardsmith@...&gt; wrote:<br/>&gt;<br/>&gt;<br/>&gt;<br/>&gt; --- In <a href="mailto:tuning-math@yahoogroups.com">tuning-math@yahoogroups.com</a>, Mike Battaglia &lt;battaglia01@&gt; wrote:<br/>&gt; &gt;<br/>&gt; &gt; I still don&apos;t really get it - how does this help us find the point in an<br/>&gt; &gt; affine subspace with the least L1 norm?<br/>&gt;<br/>&gt; Once you find a Graver basis for the commas of a temperament, you can multiply or divide your interval by an element of the Graver basis to see if the Tenney height goes down. Lather, rise, repeat. Of course you can do that anyway, but without the full Graver basis you might get stuck.</p><p>In that connection, I&apos;ll be experimenting with using what might be called the totic basis--the basis given by Maple&apos;s Groebner[ToricIdealBasis](M, z, plex(op(z)), method=&apos;du&apos;). That is very fast to compute.</p></div><h3><a id=20745 href="#20745">ðŸ”—</a>genewardsmith &#x3C;genewardsmith@sbcglobal.net&#x3E;</h3><span>6/9/2012 6:38:29 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>--- In <a href="mailto:tuning-math@yahoogroups.com">tuning-math@yahoogroups.com</a>, &quot;genewardsmith&quot; &lt;genewardsmith@...&gt; wrote:<br/>&gt;<br/>&gt;<br/>&gt;<br/>&gt; --- In <a href="mailto:tuning-math@yahoogroups.com">tuning-math@yahoogroups.com</a>, &quot;genewardsmith&quot; &lt;genewardsmith@&gt; wrote:<br/>&gt; &gt;<br/>&gt; &gt;<br/>&gt; &gt;<br/>&gt; &gt; --- In <a href="mailto:tuning-math@yahoogroups.com">tuning-math@yahoogroups.com</a>, Mike Battaglia &lt;battaglia01@&gt; wrote:<br/>&gt; &gt; &gt;<br/>&gt; &gt; &gt; I still don&apos;t really get it - how does this help us find the point in an<br/>&gt; &gt; &gt; affine subspace with the least L1 norm?<br/>&gt; &gt;<br/>&gt; &gt; Once you find a Graver basis for the commas of a temperament, you can multiply or divide your interval by an element of the Graver basis to see if the Tenney height goes down. Lather, rise, repeat. Of course you can do that anyway, but without the full Graver basis you might get stuck.<br/>&gt;<br/>&gt; In that connection, I&apos;ll be experimenting with using what might be called the totic basis--the basis given by Maple&apos;s Groebner[ToricIdealBasis](M, z, plex(op(z)), method=&apos;du&apos;). That is very fast to compute.<br/>&gt;</p><p>The combination of Mike&apos;s algorithm and the toric basis seems to work fine in practice if anyone, such as Mike, wants it.</p></div><h3><a id=20753 href="#20753">ðŸ”—</a>Mike Battaglia &#x3C;battaglia01@gmail.com&#x3E;</h3><span>6/13/2012 12:47:32 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>On Fri, Jun 8, 2012 at 11:51 PM, genewardsmith &lt;<a href="mailto:genewardsmith@sbcglobal.net">genewardsmith@sbcglobal.net</a>&gt;<br/>wrote:<br/>&gt;<br/>&gt; --- In <a href="mailto:tuning-math@yahoogroups.com">tuning-math@yahoogroups.com</a>, Mike Battaglia &lt;battaglia01@...&gt;<br/>&gt; wrote:<br/>&gt; &gt;<br/>&gt; &gt; I still don&apos;t really get it - how does this help us find the point in an<br/>&gt; &gt; affine subspace with the least L1 norm?<br/>&gt;<br/>&gt; Once you find a Graver basis for the commas of a temperament, you can<br/>&gt; multiply or divide your interval by an element of the Graver basis to see if<br/>&gt; the Tenney height goes down. Lather, rise, repeat. Of course you can do that<br/>&gt; anyway, but without the full Graver basis you might get stuck.</p><p>Do you do it in order or something? As in, first you minimize L1<br/>distance by altering by one member of the basis, then when that&apos;s<br/>minimized you move onto the next one, and so on until you&apos;re done, and<br/>then you&apos;re guaranteed to minimize L1 distance overall?</p><p>-Mike</p></div><h3><a id=20755 href="#20755">ðŸ”—</a>genewardsmith &#x3C;genewardsmith@sbcglobal.net&#x3E;</h3><span>6/13/2012 9:14:45 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>--- In <a href="mailto:tuning-math@yahoogroups.com">tuning-math@yahoogroups.com</a>, Mike Battaglia &lt;battaglia01@...&gt; wrote:</p><p>&gt; Do you do it in order or something? As in, first you minimize L1<br/>&gt; distance by altering by one member of the basis, then when that&apos;s<br/>&gt; minimized you move onto the next one, and so on until you&apos;re done, and<br/>&gt; then you&apos;re guaranteed to minimize L1 distance overall?</p><p>I do it in order of increasing complexity but that should not matter.</p></div>