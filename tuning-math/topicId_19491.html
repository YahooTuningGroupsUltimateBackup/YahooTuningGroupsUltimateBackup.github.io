<a href="/tuning-math">back to list</a><h1>Bug in Graham's scripts for non-octave temperaments?</h1><h3>Keenan Pepper &#x3C;keenanpepper@gmail.com&#x3E;</h3><span>9/7/2011 12:52:40 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>If I search for temperaments in the 3.4.5 limit (including 4/1&apos;s but not octaves), I expect &quot;double-octave meantone&quot; (tempering out 81/80) to do quite well.</p><p>With this search:</p><p><a href="http://x31eq.com/cgi-bin/pregular.cgi?limit=3.4.5&error=4">http://x31eq.com/cgi-bin/pregular.cgi?limit=3.4.5&error=4</a></p><p>&quot;double-octave meantone&quot; is the top result, as expected.</p><p>However, this slightly different search:</p><p><a href="http://x31eq.com/cgi-bin/pregular.cgi?limit=3.4.5&error=5">http://x31eq.com/cgi-bin/pregular.cgi?limit=3.4.5&error=5</a></p><p>the top result looks like it should be &quot;double-octave meantone&quot;, but the reduced mapping is all screwed up. It gives me [ &lt;1 9 2] &lt;0 -29 -2] &gt; instead of the expected [ &lt;1 1 2] &lt;0 1 -2] &gt;</p><p>Seems like a bug to me.</p><p>Keenan</p></div><h3>Graham Breed &#x3C;gbreed@gmail.com&#x3E;</h3><span>9/7/2011 1:04:19 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>&quot;Keenan Pepper&quot; &lt;<a href="mailto:keenanpepper@gmail.com">keenanpepper@gmail.com</a>&gt; wrote:</p><p>&gt; However, this slightly different search:<br/>&gt;<br/>&gt; <a href="http://x31eq.com/cgi-bin/pregular.cgi?limit=3.4.5&error=5">http://x31eq.com/cgi-bin/pregular.cgi?limit=3.4.5&error=5</a><br/>&gt;<br/>&gt; the top result looks like it should be &quot;double-octave<br/>&gt; meantone&quot;, but the reduced mapping is all screwed up. It<br/>&gt; gives me [ &lt;1 9 2] &lt;0 -29 -2] &gt; instead of the expected<br/>&gt; [ &lt;1 1 2] &lt;0 1 -2] &gt;<br/>&gt;<br/>&gt; Seems like a bug to me.</p><p>It&apos;s certainly a bug because the complexities aren&apos;t<br/>consistent.  I&apos;ll look into it tomorrow.</p><p>                    Graham</p></div><h3>Keenan Pepper &#x3C;keenanpepper@gmail.com&#x3E;</h3><span>9/11/2011 5:15:51 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>--- In <a href="mailto:tuning-math@yahoogroups.com">tuning-math@yahoogroups.com</a>, Graham Breed &lt;gbreed@...&gt; wrote:<br/>&gt;<br/>&gt; &quot;Keenan Pepper&quot; &lt;keenanpepper@...&gt; wrote:<br/>&gt;<br/>&gt; &gt; However, this slightly different search:<br/>&gt; &gt;<br/>&gt; &gt; <a href="http://x31eq.com/cgi-bin/pregular.cgi?limit=3.4.5&error=5">http://x31eq.com/cgi-bin/pregular.cgi?limit=3.4.5&error=5</a><br/>&gt; &gt;<br/>&gt; &gt; the top result looks like it should be &quot;double-octave<br/>&gt; &gt; meantone&quot;, but the reduced mapping is all screwed up. It<br/>&gt; &gt; gives me [ &lt;1 9 2] &lt;0 -29 -2] &gt; instead of the expected<br/>&gt; &gt; [ &lt;1 1 2] &lt;0 1 -2] &gt;<br/>&gt; &gt;<br/>&gt; &gt; Seems like a bug to me.<br/>&gt;<br/>&gt; It&apos;s certainly a bug because the complexities aren&apos;t<br/>&gt; consistent.  I&apos;ll look into it tomorrow.</p><p>Any news on this? I could go on a bughunt sometime if need be.</p><p>Keenan</p></div><h3>Graham Breed &#x3C;gbreed@gmail.com&#x3E;</h3><span>9/12/2011 2:08:04 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>&quot;Keenan Pepper&quot; &lt;<a href="mailto:keenanpepper@gmail.com">keenanpepper@gmail.com</a>&gt; wrote:<br/>&gt; --- In <a href="mailto:tuning-math@yahoogroups.com">tuning-math@yahoogroups.com</a>, Graham Breed<br/>&gt; &lt;gbreed@...&gt; wrote:<br/>&gt; &gt;<br/>&gt; &gt; &quot;Keenan Pepper&quot; &lt;keenanpepper@...&gt; wrote:<br/>&gt; &gt; &gt;<br/>&gt; &gt; &gt; <a href="http://x31eq.com/cgi-bin/pregular.cgi?limit=3.4.5&error=5">http://x31eq.com/cgi-bin/pregular.cgi?limit=3.4.5&error=5</a><br/>&gt; &gt; &gt;<br/>&gt; &gt; &gt; the top result looks like it should be &quot;double-octave<br/>&gt; &gt; &gt; meantone&quot;, but the reduced mapping is all screwed up.<br/>&gt; &gt; &gt; It gives me [ &lt;1 9 2] &lt;0 -29 -2] &gt; instead of the<br/>&gt; &gt; &gt; expected [ &lt;1 1 2] &lt;0 1 -2] &gt;</p><p>&gt; Any news on this? I could go on a bughunt sometime if<br/>&gt; need be.</p><p>It&apos;s because 4 is in the &quot;prime&quot; limit, but the equal<br/>temperaments are defined as equal divisions of the octave.<br/>With an odd number of divisions of an octave, the 4 gets<br/>approximated to an exact half step.  So what gets written<br/>as 3bqqc should be 3bqc.</p><p>I haven&apos;t checked the code to find where the problem is.<br/>It&apos;ll be a case of looking at the function for producing<br/>the names, and the one for reverse engineering them.  They<br/>should deal with halves consistently.  I expect it&apos;s a<br/>floating point rounding error, so in one case it comes out<br/>slightly less than half and rounds down when it should<br/>round up.</p><p>                            Graham</p></div><h3>Graham Breed &#x3C;gbreed@gmail.com&#x3E;</h3><span>9/14/2011 2:07:02 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>&quot;Keenan Pepper&quot; &lt;<a href="mailto:keenanpepper@gmail.com">keenanpepper@gmail.com</a>&gt; wrote:</p><p>&gt; <a href="http://x31eq.com/cgi-bin/pregular.cgi?limit=3.4.5&error=5">http://x31eq.com/cgi-bin/pregular.cgi?limit=3.4.5&error=5</a><br/>&gt;<br/>&gt; the top result looks like it should be &quot;double-octave<br/>&gt; meantone&quot;, but the reduced mapping is all screwed up. It<br/>&gt; gives me [ &lt;1 9 2] &lt;0 -29 -2] &gt; instead of the expected<br/>&gt; [ &lt;1 1 2] &lt;0 1 -2] &gt;</p><p>This should be fixed now.  Let me know if you see any more<br/>problems or regressions.</p><p>                        Graham</p></div>