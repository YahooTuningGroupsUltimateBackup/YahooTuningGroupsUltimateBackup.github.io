<a href="/tuning-math">back to list</a><h1>Online temperament finder update</h1><h3>Graham Breed &#x3C;gbreed@gmail.com&#x3E;</h3><span>4/28/2011 7:24:58 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>My head&apos;s swimming in a sea of code now.  What I did was<br/>try and fix the but Mike found with certain temperaments.<br/>That was caused by information being lost between the page<br/>that found the temperaments and the one that displayed<br/>them.  In cases where more than one equal temperament with<br/>a given number of steps to the octave was consistent with<br/>the mapping, it could be chosen wrongly so that the set of<br/>equal temperaments were linearly dependent.  That&apos;s fixed<br/>now, and old links should work.  The starting page is here:</p><p><a href="http://x31eq.com/temper/">http://x31eq.com/temper/</a></p><p>What I then did was overhaul the way links are written so<br/>that they use my twist on Herman&apos;s equal temperament<br/>names.  This has the advantage that the mapping matrix is<br/>uniquely specified in a short space.  But for that to work,<br/>I had to improve the names so that they worked for<br/>third-best approximations to primes, and so on.</p><p>The way to calculate the name is:</p><p>1) For each interval, calculate the absolute error relative<br/>to step size (relative error).</p><p>2) Round this error down, multiply by 2, and call it f.</p><p>3) If the fractional part is greater than half, add 1 to f.</p><p>4) Add f times the corresponding letter to the name.</p><p>The point about comparing to half is that if it&apos;s the<br/>best approximation, the relative error will be less than a<br/>half.  If the relative error rounds down to zero, but is<br/>more than a half, it must be the second best approximation,<br/>and so it gets a single wart.</p><p>To convert from a name to  mapping, what you do is:</p><p>1) For each prime, take the nearest approximation (giving<br/>the patent val).</p><p>2) If the approximation is flat of JI, set s=1.  Otherwise,<br/>set s=-1.</p><p>3) Count the number of relevant letters in the name, and<br/>call it f.</p><p>4) If f is odd, add s*(f+1)/2 to the mapping of this prime.</p><p>5) If f is even, subtract s*f/2 from the mapping of this<br/>prime.</p><p>After I got that working, I discovered that the octave<br/>sizes were supposed to be relative to the 2:1, not the<br/>first prime interval.  I thought it was the latter, and<br/>that explains some other reports that I didn&apos;t understand<br/>at the time.  So I changed it to always use 2:1.  That is<br/>correct (it means the names are consistent over subgroups)<br/>but it&apos;s harder to get right.  It almost is now.</p><p>The big problem is that sometimes you&apos;ll define a mapping<br/>based on a given number of steps to the octave, list it<br/>without the octaves first, and the octave mapping ends up<br/>not being the nearest approximation.  So, say you choose<br/>13z where z is an unlikely wart that doesn&apos;t make this look<br/>like a real example.  The equivalence interval is<br/>something else, and 13z has 17 steps to this interval.  The<br/>patent val for 17 steps to the equivalence interval has 14<br/>steps to the octave.  The name then becomes 14axy to show<br/>that it&apos;s being defined according to 14 steps to the octave<br/>but the octave doesn&apos;t take its optimal value, and because<br/>the coordinates have shifted, other primes don&apos;t take their<br/>ideal values.  And that&apos;s a problem because the algorithms<br/>I outlined above aren&apos;t reversible when the error is<br/>exactly half a scale step.</p><p>The solution is to make sure octaves, when present, are<br/>always identified correctly.  The first way to do that is<br/>calculate approximations according to the optimal scale<br/>stretch rather than the equivalence interval.  But even<br/>that can go wrong, so I added a check to see if there&apos;s<br/>something close to an octave in the subgroup, and if there<br/>is use it.</p><p>At this point I&apos;m not sure if I covered all cases or not.<br/>But it&apos;s working pretty well, so if you find anything that<br/>does break you can tell me.</p><p>A side effect of this is that the naming of non-prime<br/>harmonics (or non-prime prime intervals :-S) has changed,<br/>so any old links will have to be updated.  I also note that<br/>I haven&apos;t defined the naming scheme anywhere, and am not<br/>linking to a definition that exists somewhere else.</p><p>Along the way, I found other bugs that had always been<br/>there, and fixed them.  I&apos;m hoping that these outnumber<br/>whatever bugs I introduced by changing the links, so the<br/>site as a whole has fewer bugs than ever before.</p><p>I&apos;ve updated it with the Magic names I proposed as well.<br/>The lesser rank 3 temperaments look completely useless set<br/>against the background of the rank 3 universe, but I kept<br/>them in anyway.  If anybody&apos;s decided on names I don&apos;t have<br/>for something, either tell me, or (preferably) list them<br/>on a page I can scrape.</p><p>As I mentioned in another message, I have my own list of<br/>names now:</p><p><a href="http://x31eq.com/catalog2.html">http://x31eq.com/catalog2.html</a></p><p>I produced it by generating a load of temperaments, and<br/>checking the mappings to see if they were in the<br/>database.  Along the way I found some examples that could<br/>have originated in different subgroups.  That&apos;s because I<br/>only index by the mapping matrix and not the primes.<br/>Here&apos;s my disambiguation lookup, including the comments to<br/>say that what I think is the correct subgroup is not<br/>actually the best:</p><p>        &quot;Semaphore&quot;:(2,3,5),<br/>        &quot;Supersharp&quot;:(2,3,5),<br/>        &quot;Dominant&quot;:(2,3,7),<br/>        &quot;Compton&quot;:(2,3,5),<br/>        &quot;Blackwood&quot;:(2,3,5),<br/>        &quot;Catler&quot;:(2,3,5,7), # ? simpler in <a href="http://2.3.5.11">2.3.5.11</a><br/>        &quot;Penta&quot;:(2,3,5,7), # ? better in <a href="http://2.3.5.11">2.3.5.11</a><br/>        &quot;Jamesbond&quot;:(2,3,5,7), # also simpler <a href="http://2.3.5.11">2.3.5.11</a><br/>        &quot;Father&quot;:(2,3,5),<br/>        &quot;Meantone&quot;:(2,3,5),<br/>        &quot;Mavila&quot;:(2,3,5),<br/>        &quot;Dicot&quot;:(2,3,5),<br/>        &apos;Bug&apos;:(2,3,5),<br/>        &apos;Vicentino&apos;:(2,3,5),<br/>        &apos;Injera&apos;:(2,3,5),<br/>        # Rank 3<br/>        &apos;Supermagic&apos;:(2,3,5,7),<br/>        &apos;Starling&apos;:(2,3,5,7),<br/>        &apos;breed&apos;:(2,3,5,7),<br/>        &apos;Ennealimmic&apos;:(2,3,5,7,11), #? better 2.3.5.7.13<br/>        &apos;Erato&apos;:(2,3,5,7,11), #? better 2.3.5.7.13<br/>        &apos;Supernatural&apos;:(2,3,5,7,11), # better 2.3.5.7.13<br/>        &apos;Hemifamity&apos;:(2,3,5,7),<br/>        &apos;Octagari&apos;:(2,3,5,7),</p><p>Along with these, there are mappings in the database that I<br/>couldn&apos;t reconcile with notable temperaments.  I mentioned<br/>them in another message.</p><p>Finally, let&apos;s hear it for Atomic.  After much head<br/>scratching, I tracked it down as being the 5-limit<br/>12p&amp;12bccccccccccccc.  I don&apos;t know how it got to be like<br/>that.</p><p>                     Graham</p></div><h3>Herman Miller &#x3C;hmiller@IO.COM&#x3E;</h3><span>4/28/2011 6:33:36 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>On 4/28/2011 10:24 AM, Graham Breed wrote:</p><p>&gt; Finally, let&apos;s hear it for Atomic.  After much head<br/>&gt; scratching, I tracked it down as being the 5-limit<br/>&gt; 12p&amp;12bccccccccccccc.  I don&apos;t know how it got to be like<br/>&gt; that.</p><p>I have atomic as 12&amp;576.</p></div><h3>Mike Battaglia &#x3C;battaglia01@gmail.com&#x3E;</h3><span>4/28/2011 7:25:36 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>On Thu, Apr 28, 2011 at 10:24 AM, Graham Breed &lt;<a href="mailto:gbreed@gmail.com">gbreed@gmail.com</a>&gt; wrote:<br/>&gt;<br/>&gt; My head&apos;s swimming in a sea of code now. What I did was<br/>&gt; try and fix the but Mike found with certain temperaments.<br/>&gt; That was caused by information being lost between the page<br/>&gt; that found the temperaments and the one that displayed<br/>&gt; them. In cases where more than one equal temperament with<br/>&gt; a given number of steps to the octave was consistent with<br/>&gt; the mapping, it could be chosen wrongly so that the set of<br/>&gt; equal temperaments were linearly dependent. That&apos;s fixed<br/>&gt; now, and old links should work. The starting page is here:</p><p>Thanks for working this out. I had noted a bug before with the POTE<br/>generator in which sometimes the two scala files you produce for &quot;pure<br/>octaves&quot; turn out to yield different results, but I see it&apos;s fixed.</p><p>As a side note, is there any way to work out the POTE generator for a<br/>temperament without just clicking on the Scala file and hunting around<br/>for generators? For rank 2 temperaments this is usually easy, but gets<br/>harder if the ETs involved are large and/or you&apos;re higher than rank 2.<br/>For example</p><p><a href="http://x31eq.com/cgi-bin/rt.cgi?ets=32+27+46&limit=2.3.7.13%2F5">http://x31eq.com/cgi-bin/rt.cgi?ets=32+27+46&limit=2.3.7.13%2F5</a></p><p>I&apos;m pretty sure this is the rank 3 91/90 temperament, which I&apos;m trying<br/>to explore as a higher limit subgroup alternative to the 5-limit JI<br/>lattice. I wanted to figure out what the canonical tuning for this<br/>temperament should be, so POTE optimizing seemed like a way to go. I<br/>have yet to program my own POTE algorithm (although I think I<br/>understand it now) so I decided to click on the 46-note POTE scala<br/>file and hunt around for generators... Yikes.</p><p>&gt; Finally, let&apos;s hear it for Atomic. After much head<br/>&gt; scratching, I tracked it down as being the 5-limit<br/>&gt; 12p&amp;12bccccccccccccc. I don&apos;t know how it got to be like<br/>&gt; that.</p><p>That&apos;s quite an accomplishment. So c is 7/1? What, exactly, is the<br/>18th best approximation to 7/1 in 12-equal?</p><p>-Mike</p></div><h3>Mike Battaglia &#x3C;battaglia01@gmail.com&#x3E;</h3><span>4/28/2011 8:22:53 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>On Thu, Apr 28, 2011 at 10:24 AM, Graham Breed &lt;<a href="mailto:gbreed@gmail.com">gbreed@gmail.com</a>&gt; wrote:<br/>&gt;<br/>&gt; A side effect of this is that the naming of non-prime<br/>&gt; harmonics (or non-prime prime intervals :-S) has changed,<br/>&gt; so any old links will have to be updated. I also note that<br/>&gt; I haven&apos;t defined the naming scheme anywhere, and am not<br/>&gt; linking to a definition that exists somewhere else.</p><p>So a new bug - subgroups seem to be broken and spit out vals with torsion.</p><p><a href="http://x31eq.com/cgi-bin/rt.cgi?ets=7+12&limit=2.5.7">http://x31eq.com/cgi-bin/rt.cgi?ets=7+12&limit=2.5.7</a></p><p>The generator is 4/3, but there&apos;s no 4/3. And also</p><p><a href="http://x31eq.com/cgi-bin/rt.cgi?ets=7+12&limit=2.5.9">http://x31eq.com/cgi-bin/rt.cgi?ets=7+12&limit=2.5.9</a></p><p>I haven&apos;t seen evidence of this jumping to full-prime limits yet so<br/>far, just subgroups.</p><p>-Mike</p></div><h3>Graham Breed &#x3C;gbreed@gmail.com&#x3E;</h3><span>4/28/2011 9:27:27 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>Mike Battaglia &lt;<a href="mailto:battaglia01@gmail.com">battaglia01@gmail.com</a>&gt; wrote:</p><p>&gt; So a new bug - subgroups seem to be broken and spit out<br/>&gt; vals with torsion.<br/>&gt;<br/>&gt; <a href="http://x31eq.com/cgi-bin/rt.cgi?ets=7+12&limit=2.5.7">http://x31eq.com/cgi-bin/rt.cgi?ets=7+12&limit=2.5.7</a><br/>&gt;<br/>&gt; The generator is 4/3, but there&apos;s no 4/3. And also<br/>&gt;<br/>&gt; <a href="http://x31eq.com/cgi-bin/rt.cgi?ets=7+12&limit=2.5.9">http://x31eq.com/cgi-bin/rt.cgi?ets=7+12&limit=2.5.9</a></p><p>Those are correct.  They&apos;re what you asked for.  The<br/>mappings may change in different subgroups but there<br/>shouldn&apos;t be violent changes in generator size.</p><p>&gt; I haven&apos;t seen evidence of this jumping to full-prime<br/>&gt; limits yet so far, just subgroups.</p><p>It is possible to get contorsion in consecutive prime<br/>limits.</p><p><a href="http://x31eq.com/cgi-bin/rt.cgi?ets=7+31&limit=5">http://x31eq.com/cgi-bin/rt.cgi?ets=7+31&limit=5</a></p><p>                Graham</p></div><h3>Mike Battaglia &#x3C;battaglia01@gmail.com&#x3E;</h3><span>4/28/2011 9:33:40 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>On Fri, Apr 29, 2011 at 12:27 AM, Graham Breed &lt;<a href="mailto:gbreed@gmail.com">gbreed@gmail.com</a>&gt; wrote:<br/>&gt;<br/>&gt; Those are correct. They&apos;re what you asked for. The<br/>&gt; mappings may change in different subgroups but there<br/>&gt; shouldn&apos;t be violent changes in generator size.</p><p>So certain combinations of equal temperament val themselves define a<br/>torsion block?</p><p>&gt; &gt; I haven&apos;t seen evidence of this jumping to full-prime<br/>&gt; &gt; limits yet so far, just subgroups.<br/>&gt;<br/>&gt; It is possible to get contorsion in consecutive prime<br/>&gt; limits.<br/>&gt;<br/>&gt; <a href="http://x31eq.com/cgi-bin/rt.cgi?ets=7+31&limit=5">http://x31eq.com/cgi-bin/rt.cgi?ets=7+31&limit=5</a></p><p>Would this be an example of torsion or contortion? I actually took the<br/>time to calculate the GCF of the minors of the val matrix, and since<br/>the GCF wasn&apos;t 1, I assumed that meant torsion. Is it actually<br/>contortion?</p><p>-Mike</p></div><h3>Graham Breed &#x3C;gbreed@gmail.com&#x3E;</h3><span>4/28/2011 9:45:39 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>Mike Battaglia &lt;<a href="mailto:battaglia01@gmail.com">battaglia01@gmail.com</a>&gt; wrote:</p><p>&gt; Thanks for working this out. I had noted a bug before<br/>&gt; with the POTE generator in which sometimes the two scala<br/>&gt; files you produce for &quot;pure octaves&quot; turn out to yield<br/>&gt; different results, but I see it&apos;s fixed.</p><p>That&apos;s likely still broken somewhere because Scala files<br/>are still using the old link format.</p><p>&gt; As a side note, is there any way to work out the POTE<br/>&gt; generator for a temperament without just clicking on the<br/>&gt; Scala file and hunting around for generators? For rank 2<br/>&gt; temperaments this is usually easy, but gets harder if the<br/>&gt; ETs involved are large and/or you&apos;re higher than rank 2.<br/>&gt; For example<br/>&gt;<br/>&gt; <a href="http://x31eq.com/cgi-bin/rt.cgi?ets=32+27+46&limit=2.3.7.13%2F5">http://x31eq.com/cgi-bin/rt.cgi?ets=32+27+46&limit=2.3.7.13%2F5</a><br/>&gt;<br/>&gt; I&apos;m pretty sure this is the rank 3 91/90 temperament,<br/>&gt; which I&apos;m trying to explore as a higher limit subgroup<br/>&gt; alternative to the 5-limit JI lattice. I wanted to figure<br/>&gt; out what the canonical tuning for this temperament should<br/>&gt; be, so POTE optimizing seemed like a way to go. I have<br/>&gt; yet to program my own POTE algorithm (although I think I<br/>&gt; understand it now) so I decided to click on the 46-note<br/>&gt; POTE scala file and hunt around for generators... Yikes.</p><p>You look at the tuning map.  The octave&apos;s 1200.918 cents<br/>and you want 1200.000.  So multiply by<br/>1200/1200.918=0.9992356.  That gives a 3:1 generator of<br/>1906.569*0.9992356=1905.112 cents and a 7:1 generator of<br/>3361.588*0.9992356=3359.018.</p><p>For 27&amp;32&amp;46, the Scala file&apos;s giving 4:3 instead of 3:2.<br/>2400-1905.112=494.889.  There&apos;s an interval of 494.888<br/>cents in the file, which is correct to within the rounding<br/>error.  8:7 is 3600-3359.018=240.982 cents.  I don&apos;t see<br/>that or 959.018 in the file so I don&apos;t know what the Fokker<br/>block&apos;s doing.</p><p>                    Graham</p></div><h3>Graham Breed &#x3C;gbreed@gmail.com&#x3E;</h3><span>4/29/2011 5:25:14 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>Mike Battaglia &lt;<a href="mailto:battaglia01@gmail.com">battaglia01@gmail.com</a>&gt; wrote:</p><p>&gt; So certain combinations of equal temperament val<br/>&gt; themselves define a torsion block?</p><p>If you allow them to.  Sometimes, yes, it naturally happens<br/>that only half (or even a third) of the intervals<br/>correspond to approximations of ratios.  You could remove<br/>the torsion but I don&apos;t.  The complexity is calculated so<br/>that contorsion brings a big penalty but if something<br/>contorted gets into the lists, so be it.</p><p>&gt; &gt; <a href="http://x31eq.com/cgi-bin/rt.cgi?ets=7+31&limit=5">http://x31eq.com/cgi-bin/rt.cgi?ets=7+31&limit=5</a><br/>&gt;<br/>&gt; Would this be an example of torsion or contortion? I<br/>&gt; actually took the time to calculate the GCF of the minors<br/>&gt; of the val matrix, and since the GCF wasn&apos;t 1, I assumed<br/>&gt; that meant torsion. Is it actually contortion?</p><p>It&apos;s contorsion because it manifests itself in a regular<br/>temperament, not a periodicity block.  I don&apos;t know if that<br/>means it isn&apos;t torsion as well.</p><p>                Graham</p></div><h3>genewardsmith &#x3C;genewardsmith@sbcglobal.net&#x3E;</h3><span>4/30/2011 11:01:24 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>--- In <a href="mailto:tuning-math@yahoogroups.com">tuning-math@yahoogroups.com</a>, Graham Breed &lt;gbreed@...&gt; wrote:</p><p>&gt; <a href="http://x31eq.com/catalog2.html">http://x31eq.com/catalog2.html</a></p><p>Great list, but all the names are upper case except for &quot;breed&quot;.</p></div>