<a href="/tuning-math">back to list</a><h1>Archiving some stuff about the Weil norm off of Facebook</h1><h3><a id=21052 href="#21052">ðŸ”—</a>Mike Battaglia &#x3C;battaglia01@gmail.com&#x3E;</h3><span>11/2/2012 9:29:09 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>I posted this on Facebook to Paul about the Weil norm; I&apos;m archiving<br/>it here. This is shameless information vomit because I want to<br/>preserve the information in case FB goes down. This might be useful<br/>for those in the future who might be working on things related to<br/>max(n,d) complexity and are scouring these archives for info on it.<br/>This sums up the things I learned while working on it, but at this<br/>point I&apos;m done with it and am onto other things.</p><p>Perhaps unsurprisingly, the study the basic behavior of max(n,d) and<br/>its logarithmic counterpart log(max(n,d)) ends up touching on a whole<br/>bunch of random topics, including but not limited to</p><p>- Kees expressibility (the Weil norm is a generalization of it; Kees<br/>expressibility can be derived from it as a seminorm)<br/>- Truly Kees-optimal tunings that minimize the max odd-limit-weighted<br/>error over all intervals<br/>- HE and why the Farey series (really &quot;Weil series&quot;) curve slopes down<br/>- HE and where 1/sqrt(n*d) and 1/min(n,d) widths may come from<br/>- Identifying Parncutt&apos;s model with HE seeded with min(n,d) instead of max(n,d)<br/>- Building on Graham&apos;s work with &quot;Farey limits&quot; in composite.pdf,<br/>which are the same as Weil limits, to figure out things minimizing<br/>average Weil-weighted error rather than max<br/>- Weil height doubling as a span-based complexity measure, since it&apos;s<br/>secretly the average of (logarithmic) Tenney height and (logarithmic)<br/>span.<br/>- A &quot;generalized musical norm&quot; incorporating Tenney, Weil,<br/>Tenney-Euclidean, Weil-Euclidean, etc norms, as well as a norm related<br/>to Cangwu badness<br/>- Unweighted Hahn distance is related to the W2 norm somehow (at least<br/>in the 7-limit)<br/>- The hexagonal lattice norm is the same as the W2 norm<br/>- Augmented interval space organically appearing yet again, just like<br/>when I was working with affine spaces</p><p>rearranged in order of how likely I think people are to care about any of them.</p><p>The above are all interesting points of departure for further<br/>research, and what&apos;s below sums up what I know about them and how<br/>they&apos;ve come up.</p><p>BASIC GEOMETRIC THINGS</p><p>=What the Weil norm unit sphere looks like on a rectangular lattice=<br/>1D: the endpoints of a line segment<br/>2D: an irregular hexagon<br/>3D: a cuboctahedron<br/>4D+: &quot;a higher dimensional hexagon&quot;</p><p>=The relationship between the Weil norm and Kees expressibility=<br/>Kees expressibility is really just a &quot;seminorm&quot; on interval space<br/>which you can define by making all intervals octave-equivalent and<br/>only getting the Weil norm of the simplest one. Some work here will<br/>probably lead to a pure-octave Kees tuning which minimizes odd-limit<br/>error over all intervals, but it requires knowing what the dual of a<br/>seminorm is (is it a quasinorm?)</p><p>=What the dual norm of the Weil norm looks like=<br/>Should just be the dual polygons to everything listed above; you can<br/>apparently use something evil called the Legendre transformation to<br/>work this out and I haven&apos;t done it yet</p><p>=What happens if you use a triangular lattice=<br/>My thought is &quot;Paul knows more about this than I do it&apos;s the same as<br/>Kees expressibility basically&quot;</p><p>ALGEBRAIC THINGS</p><p>=How the Weil norm is defined algebraically=<br/>It can be shown that log(max(n,d)) = (log(n*d) + |log(n/d)|)/2. In<br/>weighted monzo form, this means that the Weil height of |a b c&gt; is<br/>given by (|a| + |b| + |c| + |a+b+c|)/2, and this generalizes to<br/>higher-dimensional monzos as you&apos;d expect. However, we don&apos;t really<br/>need to worry about this division by 2 at the end since it scales the<br/>height of all monzos identically, so we can simply look at |a| + |b| +<br/>|c| + |a+b+c| instead; this corresponds to log(max(n,d)^2) instead of<br/>just log(max(n,d)). Keenan and I worked this out with him beating me<br/>in the &quot;race&quot; to find the correct expression. Note all coordinates are<br/>weighted.</p><p>Note that |a| + |b| + |c| + |a+b+c| is the same as the L1 height of<br/>the vector |a b c; (a+b+c)&gt;, where we simply add one &quot;augmented&quot;<br/>coordinate at the end of the vector (with the semicolon serving as a<br/>delimiter. This is hugely important, because we can come up with a<br/>simple matrix mapping monzos of the form |a b c&gt; to &quot;augmented&quot; monzos<br/>of the form |a b c; (a+b+c)&gt;; I will call this matrix W. Then if M is<br/>a monzo, the Weil norm of M is simply given by ||W*M||_1!!</p><p>=What does this &quot;augmented vector space&quot; mean geometrically?=<br/>So for the 3-limit, the Weil norm&apos;s unit sphere is a hexagon. A<br/>hexagons, however, is a cross section of an octahedron. So what we&apos;re<br/>really doing is, we&apos;re creating a larger 3D vector space where and<br/>equipping it with the Tenney norm, which has an octahedron as its unit<br/>sphere. Then, we&apos;re mapping all normal monzos to a 2D subspace of this<br/>3D vector space, where the intersection of this special subspace and<br/>the octahedron is exactly the Weil hexagon. So the unit sphere of this<br/>larger, spurious vector space is an octahedron, but the unit sphere on<br/>the subspace we care about is just a hexagon. The same applies to<br/>higher-dimensional generalizations of this concept.</p><p>=Hey also, you mentioned augmented monzos before in your thing about<br/>affine spaces, right? How the hell are those popping up again?=<br/>It is indeed interesting that this space has now organically emerged<br/>on more than one occasion, isn&apos;t it? There&apos;s a really deep connection<br/>here I&apos;m sort of still wrapping my head around.</p><p>=Hexagons are also cross sections of other things too; are there other<br/>ways to define the Weil norm?=<br/>Yes; there&apos;s also the Linf norm of the vector |a b c; (a+b) (a+c)<br/>(a+b+c)&gt; (which is magically related to Hahn distance somehow). Let&apos;s<br/>call that the &quot;alternate Weil norm&quot;, and note that this correspond to<br/>exactly log(max(n,d)), not log(max(n,d)^2) or anything else.</p><p>PRACTICAL THINGS</p><p>=Why did this crash and burn?=<br/>Minimax tunings are usually OK, and the Weil norm is usually OK, but<br/>the two together seems to be bad.</p><p>=What if we used Graham&apos;s techniques in composite.pdf to work out RMS<br/>Weil error or something?=<br/>Graham Breed may have already worked some of this out, since his work<br/>with &quot;Farey limits&quot; is exactly the same as what I&apos;m now calling Weil<br/>limits (at Gene&apos;s request). The matrices he worked out there have<br/>off-diagonal terms, but I suspect that it&apos;ll work the same as the Weil<br/>tuning in general, where you can map any normal monzo to an &quot;augmented<br/>monzo&quot; in a special vector space where suddenly the off-diagonal terms<br/>disappear.</p><p>=OK, so if we&apos;re going to come up with some composite Weil norm and<br/>we&apos;re going to use Graham&apos;s composite.pdf techniques, we need to work<br/>out an L2 version of the Weil norm, right?=<br/>Yes.</p><p>L2 OPTIMIZATION GRAHAM BREED INFLUENCE TYPE THINGS</p><p>=How the W2 norm is defined=<br/>The Weil norm is given by the following algorithm:<br/>1) Map ordinary monzos to these special &quot;augmented monzos&quot;<br/>2) Take the Tenney (T1) norm of the result</p><p>We thus say that the Weil norm is also called the W1 norm, and the L2<br/>version is the W2 norm. To compute the W2 norm, just take the T2 norm<br/>of the result in step 2 instead of the T1 norm. Easy, and the same<br/>applies to any Lp generalization of the weil norm you want.</p><p>We can also call this the WE norm, for &quot;Weil-Euclidean&quot;.</p><p>=Wait, you said that there was this other &quot;alternate Weil norm&quot; which<br/>is an Linf norm, right? Why don&apos;t we take the L2 version of that<br/>instead?=<br/>So the alternate Weil norm is actually an Linf norm, so let&apos;s call it<br/>the AWinf norm. So you know the W1 norm is log(max(n,d)^2), and the<br/>AWinf norm is log(max(n,d)). So they&apos;re the same, up to a constant<br/>scaling factor.</p><p>Miraculously, the W2 and AW2 norms are also the same exact thing up to<br/>a constant scaling factor. The former is sqrt(|a|^2 + |b|^2 + |c|^2 +<br/>|a+b+c|^2), and the latter is sqrt(|a|^2 + |b|^2 + |c|^2 + |a+b|^2 +<br/>|a+c|^2 + |b+c|^2 + |a+b+c|^2). If you work it out algebraically, you<br/>realize that one is just a multiple of the other. The latter is also<br/>the L2 norm on a hexagonal lattice or something like that, Gene said.</p><p>Also miraculously, the W1 norm and the AWinf are the same exact thing,<br/>up to a constant scaling factor.</p><p>So:<br/>W1 ~= AWinf<br/>W2 ~= AW2<br/>Winf ~= AW1</p><p>is there a pattern beyond these three norms? Probably, but I haven&apos;t<br/>figured it out. But we probably don&apos;t care about anything beyond W1<br/>and Awinf anyway.</p><p>So that&apos;s nice.</p><p>=What the W2 norm looks like geometrically=<br/>1D: the endpoints of a line segment<br/>2D: an ellipse that&apos;s rotated to align with the hexagon<br/>3D: an ellipsoid that&apos;s rotated to align with the cuboctahedron<br/>4D+: higher-dimensional ellipsoids that are rotated to align with the<br/>higher-dimensional hexagons</p><p>=Can we just immediately now use this to say that the W2 norm<br/>minimizes RMS unweighted error over all Weil-bounded subsets of the<br/>lattice?=<br/>Not quite yet; another problem is that if we do the above, we now have<br/>a bunch of &quot;junk&quot; monzos to worry about in the new space. I haven&apos;t<br/>worked it out.</p><p>=How does the W2 tuning relate to the T2 tuning?=<br/>In practice, UNLIKE the T1 (TOP) tuning vs the W1 (Weil) tuning, the<br/>T2 (TE) and W2 (WE) tunings agree almost all the time. Or, at least<br/>the POTE and POWE ones agreed a lot (again this is all empirical for<br/>now).</p><p>So how about them apples! This is, again, probably related to what<br/>Graham proved in composite.pdf.</p><p>REALLY COOL THINGS I NEVER EVEN GOT TO</p><p>=Are there norms that interpolate between Tenney and Weil norms?=<br/>Yes, there&apos;s a class of norms corresponding to log(n*d) + k*|log(n/d)|<br/>for some free parameter k. So if n&gt;d, this means it&apos;s the same as<br/>(n*d) * (n/d)^k if you get rid of logs. k=1 is n*n, k=0 is n*d, and<br/>k=-1 is d*d, so in general k=1 is max(n,d)^2, k=0 is n*d, and k=-1 is<br/>min(n,d)^2.</p><p>A nice &quot;geometric&quot; version of this is given by throwing that scaling<br/>factor from before back in, where we divide by 2. This is the magic<br/>bullet:</p><p>(log(n*d) + k*|log(n/d)|)/(1+k)</p><p>If you look at the unit sphere for this: for k=0 you get the usual<br/>Tenney norm, as k goes to 1 the sides of the Tenney norm diamond get<br/>&quot;pulled out&quot; to become the Weil norm, and as k goes to -1 the sides<br/>get &quot;pinched&quot; all the way in.</p><p>I have pictures of this but it&apos;s all disorganized now.</p><p>=So the most general norm possible would have two free parameters; one<br/>interpolating between Weil and Tenney, and the other interpolating<br/>between L1 and L2 and beyond, right?=</p><p>Yes, and that first parameter magically corresponds to a weighting<br/>factor controlling how much you care about the logarithmic span of the<br/>interval.</p><p>=Whoa!=<br/>I know!</p><p>=Does Cangwu badness fit into that somehow?=<br/>Still not sure.</p><p>HARMONIC ENTROPY THINGS</p><p>=OK, so the thing we&apos;re calling &quot;Farey series&quot; HE is really &quot;Weil<br/>limit HE&quot;, right?=</p><p>Yes. We were calling it a Farey series at first, but really we&apos;re<br/>looking at all positive rationals under a certain Weil height, given<br/>by big N.</p><p>=And the basic gist of it is, Weil height is something like the<br/>average of (logarithmic) Tenney height and span, right?=</p><p>Exactly. For some rational n/d, it&apos;s exactly (TH(n/d) + span(n/d))/2,<br/>which is (log(n*d) + |log(n/d)|)/2. By controlling the weight on the<br/>second term, e.g. (log(n*d) + k*|log(n/d)|)/2, you can transform<br/>between max(n,d), sqrt(n*d), and min(n,d). If you drop the /2 at the<br/>end, you get max(n,d)^2, n*d, and min(n,d)^2.</p><p>=Wait, could this have anything to do with the slope in HE? For<br/>instance, the &quot;Farey series&quot; approach, which is really just the Weil<br/>height approach, has a downward slope as span increases.=</p><p>That would appear to be the case, though I don&apos;t have it all worked<br/>out algebraically. For Weil height, as intervals increase in span,<br/>they also increase in Weil height, so there are less of them<br/>competing. This (almost certainly) leads to the characteristic<br/>downward slope of the Farey series HE curve, which should probably be<br/>a &quot;Weil series curve&quot; or something.</p><p>=What about the 1/d widths?=<br/>Those widths are really 1/min(n,d). There must also be some beautiful<br/>relationship here but I&apos;m not sure what it is yet.</p><p>=What if we use min(n,d) to seed the HE curve rather than max(n,d)?=</p><p>Well, note that min(n,d) isn&apos;t a height, so there are an infinite<br/>number of intervals for any min(n,d) = N bound that you want to set.<br/>For instance, saying that min(n,d) &lt;= 1 gives you 1/1, 2/1, 3/1, 4/1,<br/>5/1, ... etc. But hey, saying that min(n,d) &lt;= 7 is basically what<br/>Parncutt and Terhardt were doing, right?</p><p>=Gadzooks, that gives us Parncutt HE!=</p><p>Egads even! So this basically predicts that Parncutt HE will look<br/>exactly like normal HE, but with an upward rather than a downward<br/>slope.</p><p>=So since Weil height is secretly the average of span and Tenney<br/>Height, could we also interpret it as a consonance measure that<br/>penalizes for span as well as Tenney height?=</p><p>Yes, it works out really nicely like that. If you don&apos;t care about<br/>span, this identity will make no sense at all to you, but you can<br/>still use the other properties of the Weil norm. If you do care about<br/>span, then this is yet another added bonus.</p><p>=So basically, the takehome point is, for HE, the &quot;Farey series&quot;<br/>approach is basically a bound on intervals by Weil height, which<br/>secretly has Tenney height built in at its core as well as taking into<br/>account span, right?=</p><p>Yes, exactly, and this is reflected visually by the shape of the<br/>curve. Tenney Height is what&apos;s really powering the whole thing.</p><p>=============================================================</p><p>That&apos;s it for now. Phew, moving on!</p><p>-Mike</p></div>