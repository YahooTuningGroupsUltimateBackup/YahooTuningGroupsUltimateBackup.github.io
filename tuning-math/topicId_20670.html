<!DOCTYPE html>
            <html>
            <head>
            <meta charset="utf-8">
                <meta name="viewport"
            content="width=device-width, height=device-height, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no">
                <meta http-equiv="x-ua-compatible" content="ie=edge">
                <title>Yahoo Tuning Groups Ultimate Backup tuning-math Useful normal form for representing affine subspaces</title>
                <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
            </head>
            <body>
            </body>
            </html>
        <a href="/tuning-math">back to list</a><h1>Useful normal form for representing affine subspaces</h1><h3><a id=20670 href="#20670">ðŸ”—</a>Mike Battaglia &#x3C;battaglia01@gmail.com&#x3E;</h3><span>5/19/2012 2:19:46 AM</span><button style="float: right; margin-right: 20px">toggle monospace</button><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>Column-reversed hermite normal form, defined as<br/>fliplr(hermiteForm(fliplr(matrix))), is extremely useful for<br/>representing affine subspaces as translated vector subspaces. This<br/>will come up a lot in the posts I&apos;m going to write so I might as well<br/>define it here.</p><p>For instance, say we want to figure out the 11-limit temperament which<br/>equates 10/9, 11/10, and 12/11. We know that the set of all JI<br/>intervals which are also equated with these three will be the affine<br/>span of the above set. To represent this affine span, we simply<br/>construct an augmented matrix with the above monzos as points:</p><p>[ 1    -2     1     0     0  ;  1]<br/>[-1     0    -1     0     1  ;  1]<br/>[ 2     1     0     0    -1  ;  1]</p><p>If we then simply put it in column-reversed hermite form, we get this:</p><p>[ 1    -2     1     0     0  ;  1]<br/>[-1    -3     1     0     1  ;  0]<br/>[ 1    -5     3     0     0  ;  0]</p><p>Note that the top row is a point and the bottom rows are vectors. The<br/>top point is |1 -2 1 0 0), which represents 10/9. The vector below is<br/>|-1 -3 1 0 1&gt;, which represents 55/54. The vector below that is |1 -5<br/>3 0 0&gt;, which represents 250/243.</p><p>The bottom two rows tell us the vanishing monzos, and show that they<br/>span the 55/54 &amp; 250/243 linear subspace, which represents Sonic<br/>temperament. The top row tells us that 10/9 is the point to which we<br/>have to translate this subspace to intersect in order to represent the<br/>tempered interval we originally wanted.</p><p>The intersection of the row space of this matrix and the embedded<br/>representation of A^5 is the set of all vectors in R^6 with a final<br/>coordinate of 1. Therefore, by looking at the above matrix, we can see<br/>that all such points will consist of some linear combination of |-1 -3<br/>1 0 1&gt; and |1 -5 3 0 0&gt; added to |1 -2 1 0 0). All such represented<br/>intervals will be of the form 10/9 * (55/54)^n * (250/243)^m, which<br/>our initial three equated intervals satisfy.</p><p>I&apos;ll be making use of this representation in my next few posts, so<br/>this post will serve as a good mathematical reference for it.</p><p>-Mike</p></div><h3><a id=20671 href="#20671">ðŸ”—</a>Mike Battaglia &#x3C;battaglia01@gmail.com&#x3E;</h3><span>5/19/2012 2:40:17 AM</span><button style="float: right; margin-right: 20px">toggle monospace</button><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>Also, a useful variant of this normal form comes if we&apos;re working with<br/>vals. For instance, say we want to represent the affine span of &lt;12 19<br/>28|, &lt;7 11 16|, and &lt;15 24 35|, for some reason, to see what useful<br/>information it gives us. So we construct a matrix as follows:</p><p>[12    19    28  ;  1]<br/>[ 7    11    16  ;  1]<br/>[15    24    35  ;  1]</p><p>If we put it in column-reversed Hermite form, we get this:</p><p>[1     3     0  ;  1]<br/>[1     3     1  ;  0]<br/>[1     4     0  ;  0]</p><p>Unlike with monzos, this doesn&apos;t really make things terribly clear at<br/>all. For instance, it&apos;s clear to see that this is the subspace spanned<br/>by &lt;1 3 1| and &lt;1 4 0|, translated to intersect the point (1 3 0|, but<br/>it&apos;s not clear what &lt;1 3 1| and &lt;1 4 0| are supposed to represent at<br/>all.</p><p>What&apos;s very useful in this situation when working with vals is: after<br/>putting the matrix in column-reversed hermite form, simply to take the<br/>lowest n-1 rows - e.g. all but the top row, meaning all of the rows<br/>which represent vectors and not points - and then put this submatrix<br/>in non-column reversed Hermite normal form. If you do that, you get<br/>this:</p><p>[1     3     0  ;  1]<br/>[1     0     4  ;  0]<br/>[0     1    -1  ;  0]</p><p>Note that the bottom two rows now represent a mapping matrix, and it<br/>happens to be the mapping matrix for Father temperament, which is<br/>somewhat mysterious. The top row represents the point val (1 3 0|,<br/>which is also somewhat mysterious. Although I haven&apos;t delved into the<br/>algorithm for this yet (that&apos;ll be in my next post), we can get some<br/>useful information out of this by taking the null space:</p><p>[-4]<br/>[ 1]<br/>[ 1]<br/>[ 1]</p><p>This represents the point |-4 1 1), or 15/16. As it will be shown to<br/>turn out, the fact that this is the null space to the above matrix,<br/>coupled with the fact that that latter coordinate is 1, means that the<br/>reciprocal of 15/16, or 16/15, is mapped to 1 in all of the above<br/>vals.</p><p>So the thing that |7 11 16&gt;, |12 19 28|, and |15 24 35&gt; all have in<br/>common is that they map 16/15 to 1 step. And that&apos;s a useful thing to<br/>know! In other words, much like the linear span of a set of vals<br/>defines a temperament, the affine span of a set of vals defines a sort<br/>of object in which the comma in question maps to a number of steps<br/>other than 0.</p><p>This may now make sense if you go back and look at the normal form matrix again:</p><p>[1     3     0  ;  1]<br/>[1     0     4  ;  0]<br/>[0     1    -1  ;  0]</p><p>You can see that the top point is (1 3 0|, and the corresponding val<br/>&lt;1 3 0| sends 16/15 to 1. Also, you can see that the bottom two vals<br/>are the mapping matrix for father temperament. Therefore, adding<br/>anything supported by father temperament to the val &lt;1 3 0| will lead<br/>to a val that maps 16/15 to 1 step.</p><p>Of course, you can always just put the above matrix in Hermite form<br/>without any of this column-reversing or what have you:</p><p>[1     0     0  ;  4]<br/>[0     1     0  ; -1]<br/>[0     0     1  ; -1]</p><p>Note that the right hand column now spells out |4 -1 -1&gt; or 16/15.<br/>This now makes obvious sense as an augmented matrix, and should<br/>perhaps explain why the above works. But this doesn&apos;t give you any<br/>sort of immediate picture of the sort of vals that actually map 16/15<br/>to 1 step, nor does it have any sort of intuitive geometric<br/>representation.</p><p>-Mike</p><p>On Sat, May 19, 2012 at 5:19 AM, Mike Battaglia &lt;<a href="mailto:battaglia01@gmail.com">battaglia01@gmail.com</a>&gt; wrote:<br/>&gt; Column-reversed hermite normal form, defined as<br/>&gt; fliplr(hermiteForm(fliplr(matrix))), is extremely useful for<br/>&gt; representing affine subspaces as translated vector subspaces. This<br/>&gt; will come up a lot in the posts I&apos;m going to write so I might as well<br/>&gt; define it here.</p></div><h3><a id=20673 href="#20673">ðŸ”—</a>genewardsmith &#x3C;genewardsmith@sbcglobal.net&#x3E;</h3><span>5/19/2012 9:19:07 AM</span><button style="float: right; margin-right: 20px">toggle monospace</button><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>--- In <a href="mailto:tuning-math@yahoogroups.com">tuning-math@yahoogroups.com</a>, Mike Battaglia &lt;battaglia01@...&gt; wrote:</p><p>&gt; For instance, say we want to figure out the 11-limit temperament which<br/>&gt; equates 10/9, 11/10, and 12/11.</p><p>Isn&apos;t the obvious way to do that to take (10/9)/(11/10) = 100/99 and (11/10)/(12/11) = 121/120 as commas? This gives the rank-three temperament sonic, as in Sonic the Hedgehog.</p></div><h3><a id=20675 href="#20675">ðŸ”—</a>Graham Breed &#x3C;gbreed@gmail.com&#x3E;</h3><span>5/19/2012 9:27:30 AM</span><button style="float: right; margin-right: 20px">toggle monospace</button><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>&quot;genewardsmith&quot; &lt;<a href="mailto:genewardsmith@sbcglobal.net">genewardsmith@sbcglobal.net</a>&gt; wrote:<br/>&gt;<br/>&gt;<br/>&gt; --- In <a href="mailto:tuning-math@yahoogroups.com">tuning-math@yahoogroups.com</a>, Mike Battaglia<br/>&gt; &lt;battaglia01@...&gt; wrote:<br/>&gt;<br/>&gt; &gt; For instance, say we want to figure out the 11-limit<br/>&gt; &gt; temperament which equates 10/9, 11/10, and 12/11.<br/>&gt;<br/>&gt; Isn&apos;t the obvious way to do that to take (10/9)/(11/10) =<br/>&gt; 100/99 and (11/10)/(12/11) = 121/120 as commas? This<br/>&gt; gives the rank-three temperament sonic, as in Sonic the<br/>&gt; Hedgehog.</p><p>I thought it was named after the signaling protein :-O</p><p>Anyway, yes, tempering out the commas is the obvious way to<br/>do it.  The problem&apos;s that getting from tempered out commas<br/>to a mapping isn&apos;t a trivial operation.  The way Mike did<br/>it is pretty simple.</p><p>                        Graham</p></div><h3><a id=20676 href="#20676">ðŸ”—</a>genewardsmith &#x3C;genewardsmith@sbcglobal.net&#x3E;</h3><span>5/19/2012 9:48:25 AM</span><button style="float: right; margin-right: 20px">toggle monospace</button><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>--- In <a href="mailto:tuning-math@yahoogroups.com">tuning-math@yahoogroups.com</a>, Mike Battaglia &lt;battaglia01@...&gt; wrote:</p><p>&gt; What&apos;s very useful in this situation when working with vals is: after<br/>&gt; putting the matrix in column-reversed hermite form, simply to take the<br/>&gt; lowest n-1 rows - e.g. all but the top row, meaning all of the rows<br/>&gt; which represent vectors and not points - and then put this submatrix<br/>&gt; in non-column reversed Hermite normal form. If you do that, you get<br/>&gt; this:<br/>&gt;<br/>&gt; [1     3     0  ;  1]<br/>&gt; [1     0     4  ;  0]<br/>&gt; [0     1    -1  ;  0]</p><p>Why not simply put the &quot;1&quot; in front? Now HNF gives</p><p>[1; 0 0 -1]<br/>[0; 1 0 4]<br/>[0; 0 1 -1]</p><p>Again, the bottom two rows are the mapping for father.</p><p>&gt; Note that the bottom two rows now represent a mapping matrix, and it<br/>&gt; happens to be the mapping matrix for Father temperament, which is<br/>&gt; somewhat mysterious. The top row represents the point val (1 3 0|,<br/>&gt; which is also somewhat mysterious. Although I haven&apos;t delved into the<br/>&gt; algorithm for this yet (that&apos;ll be in my next post), we can get some<br/>&gt; useful information out of this by taking the null space:<br/>&gt;<br/>&gt; [-4]<br/>&gt; [ 1]<br/>&gt; [ 1]<br/>&gt; [ 1]<br/>&gt;<br/>&gt; This represents the point |-4 1 1), or 15/16.</p><p>Using the 1 in front version, you get [1 -4 1 1], and removing the 1 in front gives |-4 1 1&gt;, or 15/16.</p></div><h3><a id=20677 href="#20677">ðŸ”—</a>Mike Battaglia &#x3C;battaglia01@gmail.com&#x3E;</h3><span>5/19/2012 10:48:15 AM</span><button style="float: right; margin-right: 20px">toggle monospace</button><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>On Sat, May 19, 2012 at 12:19 PM, genewardsmith<br/>&lt;<a href="mailto:genewardsmith@sbcglobal.net">genewardsmith@sbcglobal.net</a>&gt; wrote:<br/>&gt;<br/>&gt; --- In <a href="mailto:tuning-math@yahoogroups.com">tuning-math@yahoogroups.com</a>, Mike Battaglia &lt;battaglia01@...&gt;<br/>&gt; wrote:<br/>&gt;<br/>&gt; &gt; For instance, say we want to figure out the 11-limit temperament which<br/>&gt; &gt; equates 10/9, 11/10, and 12/11.<br/>&gt;<br/>&gt; Isn&apos;t the obvious way to do that to take (10/9)/(11/10) = 100/99 and<br/>&gt; (11/10)/(12/11) = 121/120 as commas? This gives the rank-three temperament<br/>&gt; sonic, as in Sonic the Hedgehog.</p><p>Yes, of course. It&apos;s not really a problem that needs solving. This is<br/>just a nice neat way to do it algorithmically that shows you a lot of<br/>useful information. Plus, if you, in your wanton ignorance decide that<br/>you want to temper together a set of intervals which aren&apos;t affinely<br/>independent, then this will immediately show you by having rows of 0&apos;s<br/>at the bottom. This was just a dummy application to demonstrate the<br/>information obtainable this way.</p><p>-Mike</p></div><h3><a id=20678 href="#20678">ðŸ”—</a>genewardsmith &#x3C;genewardsmith@sbcglobal.net&#x3E;</h3><span>5/19/2012 11:15:51 AM</span><button style="float: right; margin-right: 20px">toggle monospace</button><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>--- In <a href="mailto:tuning-math@yahoogroups.com">tuning-math@yahoogroups.com</a>, Mike Battaglia &lt;battaglia01@...&gt; wrote:<br/> This was just a dummy application to demonstrate the<br/>&gt; information obtainable this way.</p><p>I&apos;d still like an explanation of how to find generators. I tried what I thought you said on IRC without success.</p></div><h3><a id=20679 href="#20679">ðŸ”—</a>Mike Battaglia &#x3C;battaglia01@gmail.com&#x3E;</h3><span>5/19/2012 11:16:18 AM</span><button style="float: right; margin-right: 20px">toggle monospace</button><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>On Sat, May 19, 2012 at 12:48 PM, genewardsmith<br/>&lt;<a href="mailto:genewardsmith@sbcglobal.net">genewardsmith@sbcglobal.net</a>&gt; wrote:<br/>&gt;<br/>&gt; Why not simply put the &quot;1&quot; in front? Now HNF gives<br/>&gt;<br/>&gt; [1; 0 0 -1]<br/>&gt; [0; 1 0 4]<br/>&gt; [0; 0 1 -1]<br/>&gt;<br/>&gt; Again, the bottom two rows are the mapping for father.</p><p>This is a great idea and I like the way the representation comes out!<br/>The one thing I don&apos;t like about it is, if you&apos;re doing some<br/>complicated operation that requires using both monzos and vals, this<br/>requires switching the augmented coordinate system in the middle of a<br/>procedure. Probably the simplest solution is to simply define the<br/>normal form for vals as follows:</p><p>If M is an augmented matrix in which the rows are vals with a<br/>rightmost coordinate of 1, then, let M&apos; be the matrix obtained by<br/>removing the right column of M and instead prepending it onto the<br/>left. Then M is considered to be in normal form if M&apos; is in Hermite<br/>form.</p><p>This still way gets all of the benefits of what you said above, and<br/>even makes the top val point look a bit cleaner. It just sweeps the<br/>coordinate change under the rug and hides it into the definition of<br/>the normal form, so that people don&apos;t have to actually deal with it<br/>(since augmented coordinates can be weird enough as is). Plus, it&apos;s<br/>still simpler to define than the thing I said, which involved running<br/>through Hermite form twice.</p><p>-Mike</p></div><h3><a id=20680 href="#20680">ðŸ”—</a>genewardsmith &#x3C;genewardsmith@sbcglobal.net&#x3E;</h3><span>5/19/2012 11:54:08 AM</span><button style="float: right; margin-right: 20px">toggle monospace</button><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>--- In <a href="mailto:tuning-math@yahoogroups.com">tuning-math@yahoogroups.com</a>, Mike Battaglia &lt;battaglia01@...&gt; wrote:</p><p>&gt; This is a great idea and I like the way the representation comes out!<br/>&gt; The one thing I don&apos;t like about it is, if you&apos;re doing some<br/>&gt; complicated operation that requires using both monzos and vals, this<br/>&gt; requires switching the augmented coordinate system in the middle of a<br/>&gt; procedure.</p><p>There&apos;s no reason I can see that the augmented coordinates for vals should be the same as those for monzos. In fact, if &lt;v|m&gt; = C, then &lt;1 v|m 1&gt; = C+1, which is kind of nice.</p></div><h3><a id=20681 href="#20681">ðŸ”—</a>Mike Battaglia &#x3C;battaglia01@gmail.com&#x3E;</h3><span>5/19/2012 12:09:41 PM</span><button style="float: right; margin-right: 20px">toggle monospace</button><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>On Sat, May 19, 2012 at 2:54 PM, genewardsmith &lt;<a href="mailto:genewardsmith@sbcglobal.net">genewardsmith@sbcglobal.net</a>&gt;<br/>wrote:<br/>&gt;<br/>&gt; There&apos;s no reason I can see that the augmented coordinates for vals should<br/>&gt; be the same as those for monzos. In fact, if &lt;v|m&gt; = C, then &lt;1 v|m 1&gt; =<br/>&gt; C+1, which is kind of nice.</p><p>Ack, no! If you do it that way, everything gets misaligned!</p><p>&lt;1;12 19 28|-4 4 -1;1&gt; = 1*-4 + 12*4 + 19*-1 + 28*1 = 53</p><p>It doesn&apos;t even let you do vectors and vectors anymore!</p><p>&lt;0;12 19 28|-4 4 -1;0&gt; = 0*-4 + 12*4 + 19*-1 + 28*0 = 29</p><p> See? &lt;v 1|m 1&gt; = C+1, which is what you want.</p><p>However, if you don&apos;t mind changing the coordinate system for vals,<br/>then what I was -actually- going to write, the entire post of which I<br/>deleted when I read this, is that I&apos;m starting to think it might be<br/>useful to use -1 as the augmented coordinate for vals, and +1 as the<br/>augmented coordinate for monzos. (Or +1 for vals and -1 for monzos,<br/>but they should be opposite in sign.) This lets you get rid of all of<br/>this inverted generator crap, because the affine span of &lt;7 11 16|,<br/>&lt;12 19 28| and &lt;15 24 35| is then this matrix</p><p>[12    19    28  ; -1]<br/>[ 7    11    16  ; -1]<br/>[15    24    35  ; -1]</p><p>The null space of this matrix is then</p><p>[ 4]<br/>[-1]<br/>[-1]<br/>[ 1]</p><p>Which is actually 16/15, rather than this stupid upside down 15/16 we<br/>keep getting. This will make it easy and simple to state lots of<br/>theorems, one of which is that the meantone-tempered pythagorean comma<br/>is dual to the set of all singly-positive meantone temperaments, and<br/>the meantone-tempered inverted pythagorean comma is dual to the set of<br/>all singly-positive meantone temperaments. And if I could ever get to<br/>my method for finding the generators for a temperament, and intervals<br/>in general, you&apos;d see why that might be useful :)</p><p>-Mike</p></div>
                <script>
                    let monospace = false
                    $('button').on('click', function () {
                      if (monospace) {
                        $('p').css("font-family", "")
                      } else {
                        $('p').css("font-family", "monospace")
                      }
                      monospace = !monospace
                    })
                </script>
            