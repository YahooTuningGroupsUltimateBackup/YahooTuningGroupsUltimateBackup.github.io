<a href="/tuning-math">back to list</a><h1>Farey height and Farey norms, intro</h1><h3><a id=20967 href="#20967">ðŸ”—</a>Mike Battaglia &#x3C;battaglia01@gmail.com&#x3E;</h3><span>8/15/2012 7:28:13 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>Sometimes, Tenney height is used to bound intervals by complexity, and<br/>other times, odd-limit is used. There are cases when the former is<br/>more appropriate, and cases when the latter is more appropriate. Farey<br/>height is an alternative to Tenney height which represents the latter<br/>way of thinking, and which will enable us to define:</p><p>1) a &quot;Farey norm&quot; on interval space representing the Farey height of<br/>any interval and a corresponding dual norm on vals and tuning maps,<br/>2) a class of &quot;Farey optimal&quot;, or FOP tunings which minimize<br/>Farey-weighted error over all intervals,<br/>3) an easily computable L2-based approximation to the Farey norm<br/>called the &quot;Farey-Euclidean&quot; or &quot;FE&quot; norm, and a corresponding FE<br/>tuning,<br/>4) a completely generalized class of Fp norms paralleling the Tp norms<br/>we&apos;ve talking about for the past week,<br/>5) quotient norms corresponding to the usual odd-limit,<br/>3/1-equivalent-limit, etc as special cases.</p><p>To accomplish all this, we drop the initial assumption of octave<br/>equivalence and define the Farey height of any interval as max(n,d)<br/>(or log(max(n,d)); this is basically the &quot;integer-limit&quot; of any<br/>interval. To do this treats 2/1 as any other vector and makes things<br/>much more straightforward. Then, when we want to impose<br/>octave-equivalence and look at odd-limit, we can easily define Kees<br/>expressibility as a quotient norm by modding by the 2/1 vector (or, if<br/>you like, to define a seminorm on interval space). The same applies<br/>for settings where you want 3/1 to be equivalent instead of 2/1.</p><p>Aside from using this as a launch pad for getting different seminorms,<br/>there may be some situations where integer-limit is itself useful. For<br/>instance, odd-limit is a useful way of bounding intervals in<br/>situations where you want 5/3 before 15/1, and as such tends to give<br/>you intervals which combine well to form simple chords. While<br/>octave-equivalence is probably a decent rule of thumb for chord<br/>intonation for the 5-limit, for higher-limit chords there are<br/>certainly cases where it starts to get trickier: for instance, one<br/>might compare 4:7:9:11 to 8:9:11:14, or 4:7:11:13 to 8:11:13:14, or<br/>2:3:5:7:11:17 to 16:17:20:22:24:28 to perhaps find cases where octave<br/>transposition makes a difference in the ways that chords are intoned.<br/>So you can think of integer-limit as being like odd-limit in that it<br/>still tends to give you intervals that combine well to make simple<br/>chords, but which respects these differences in octave transposition.</p><p>Another interesting property of Farey height is that the following<br/>identity holds:</p><p>max(n,d) = sqrt(n*d * max(n/d, d/n))</p><p>So if n*d is the complexity of an interval, and max(n/d, d/n) is its<br/>span (both in linear-frequency) units, then the Farey height of any<br/>interval is sqrt(complexity*span), e.g. the geometric mean of<br/>complexity and span. Even more interesting is how this works out<br/>logarithmically, as Keenan pointed out:</p><p>log(max(n,d)) = (log(n*d) + |log(n/d)|)/2</p><p>So identifying log(n*d) as complexity and log(n/d) as span in<br/>log-frequency units, then the (log) Farey height of any interval is<br/>(complexity+span)/2, e.g. the arithmetic mean of complexity and span.<br/>So if you care about the span of an interval and feel that extremely<br/>wide intervals should be penalized, this may be musically relevant for<br/>you. If you don&apos;t care about span, then for you, this equates to a<br/>simple note that many of the expressions that can be derived from this<br/>Farey norm will automagically tend to be functions of the complexity<br/>and span of an interval, but for you people this will be just a<br/>non-musical coincidence. (We&apos;ll use this later to define a class of<br/>highly generalized norms for which Tenney, Farey, TE, Kees, min(n,d),<br/>etc are all special cases.)</p><p>This is a good chunk of information for now. I&apos;ll be back with part 2<br/>shortly to explain how to define this in terms of monzo coordinates.</p><p>-Mike</p></div><h3><a id=20968 href="#20968">ðŸ”—</a>genewardsmith &#x3C;genewardsmith@sbcglobal.net&#x3E;</h3><span>8/15/2012 10:47:25 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>--- In <a href="mailto:tuning-math@yahoogroups.com">tuning-math@yahoogroups.com</a>, Mike Battaglia &lt;battaglia01@...&gt; wrote:</p><p>&gt; 1) a &quot;Farey norm&quot; on interval space representing the Farey height of<br/>&gt; any interval and a corresponding dual norm on vals and tuning maps</p><p>Since Farey had nothing whatever to do with this height function, I really don&apos;t see that it&apos;s a good idea to hang his name on it. If you apply Weil height to positive rationals, this is what you get, so one  solution would be to call it Weil height.</p></div><h3><a id=20969 href="#20969">ðŸ”—</a>genewardsmith &#x3C;genewardsmith@sbcglobal.net&#x3E;</h3><span>8/15/2012 10:50:40 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>--- In <a href="mailto:tuning-math@yahoogroups.com">tuning-math@yahoogroups.com</a>, &quot;genewardsmith&quot; &lt;genewardsmith@...&gt; wrote:<br/>&gt;<br/>&gt;<br/>&gt;<br/>&gt; --- In <a href="mailto:tuning-math@yahoogroups.com">tuning-math@yahoogroups.com</a>, Mike Battaglia &lt;battaglia01@&gt; wrote:<br/>&gt;<br/>&gt; &gt; 1) a &quot;Farey norm&quot; on interval space representing the Farey height of<br/>&gt; &gt; any interval and a corresponding dual norm on vals and tuning maps<br/>&gt;<br/>&gt; Since Farey had nothing whatever to do with this height function, I really don&apos;t see that it&apos;s a good idea to hang his name on it. If you apply Weil height to positive rationals, this is what you get, so one  solution would be to call it Weil height.</p><p>I just googled this idea, and these authors do exactly that:</p><p><a href="http://www.math.rochester.edu/people/faculty/ttucker/Papers.dir/Equi.pdf">http://www.math.rochester.edu/people/faculty/ttucker/Papers.dir/Equi.pdf</a></p><p>I say let&apos;s call it Weil height.</p></div><h3><a id=20970 href="#20970">ðŸ”—</a>Mike Battaglia &#x3C;battaglia01@gmail.com&#x3E;</h3><span>8/16/2012 12:16:25 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>On Thu, Aug 16, 2012 at 1:50 AM, genewardsmith &lt;<a href="mailto:genewardsmith@sbcglobal.net">genewardsmith@sbcglobal.net</a>&gt;<br/>wrote:<br/>&gt;<br/>&gt; I just googled this idea, and these authors do exactly that:<br/>&gt;<br/>&gt; <a href="http://www.math.rochester.edu/people/faculty/ttucker/Papers.dir/Equi.pdf">http://www.math.rochester.edu/people/faculty/ttucker/Papers.dir/Equi.pdf</a><br/>&gt;<br/>&gt; I say let&apos;s call it Weil height.</p><p>OK, before we switch names, can we please confirm that Weil height<br/>displays the correct behavior? For instance, the whole point of the<br/>function I&apos;m describing is that it also defines a norm, meaning that<br/>|| |0.5 0 0&gt; || = 0.5 * || |1 0 0&gt; ||, and this behavior is essential<br/>for defining things like temperamental complexity and using<br/>Hahn-Banach and such. So if the absolute logarithmic Weil height<br/>function is W(n/d) = log(max(|n|,|d|)), then does the generalized<br/>version for algebraic number fields have it so that W(sqrt(2)) = 1/2 *<br/>W(2)?</p><p>The whole point of Weil height is apparently to use it for algebraic<br/>number fields, so it should be possible to answer this question, at<br/>least for the above example by using the field Q(sqrt(2)). I&apos;ve been<br/>trying to figure out what the answer is, but I don&apos;t know enough about<br/>p-adic numbers and what a &quot;place&quot; is to unpack the definition.</p><p>If it does match, then I&apos;m up for changing it. If it doesn&apos;t, though,<br/>then we shouldn&apos;t call this Weil height or it&apos;s going to confuse the<br/>living hell out of everyone.</p><p>-Mike</p></div><h3><a id=20971 href="#20971">ðŸ”—</a>genewardsmith &#x3C;genewardsmith@sbcglobal.net&#x3E;</h3><span>8/16/2012 10:46:38 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>--- In <a href="mailto:tuning-math@yahoogroups.com">tuning-math@yahoogroups.com</a>, Mike Battaglia &lt;battaglia01@...&gt; wrote:</p><p>&gt; OK, before we switch names, can we please confirm that Weil height<br/>&gt; displays the correct behavior? For instance, the whole point of the<br/>&gt; function I&apos;m describing is that it also defines a norm, meaning that<br/>&gt; || |0.5 0 0&gt; || = 0.5 * || |1 0 0&gt; ||, and this behavior is essential<br/>&gt; for defining things like temperamental complexity and using<br/>&gt; Hahn-Banach and such. So if the absolute logarithmic Weil height<br/>&gt; function is W(n/d) = log(max(|n|,|d|)), then does the generalized<br/>&gt; version for algebraic number fields have it so that W(sqrt(2)) = 1/2 *<br/>&gt; W(2)?</p><p>Yes it does; equivalently, for arithmetic Weil height, H(sqrt(2)) = sqrt(2).</p><p>&gt; The whole point of Weil height is apparently to use it for algebraic<br/>&gt; number fields, so it should be possible to answer this question, at<br/>&gt; least for the above example by using the field Q(sqrt(2)). I&apos;ve been<br/>&gt; trying to figure out what the answer is, but I don&apos;t know enough about<br/>&gt; p-adic numbers and what a &quot;place&quot; is to unpack the definition.</p><p>I could unpack it for you, but rather than starting a tutorial on algebraic number theory, I suggest using an alternative definition of Weil height. Suppose x is  an algebraic number, with minimal polynomial a0x^n + ... + an. Suppose the product of those roots with absolute value greater than 1 is P. Then H(x) = |a0P|^(1/n). In your example, a0=1, P=-2, and n=2, so H(sqrt(2)) = |-2|^(1/2) = sqrt(2).</p></div><h3><a id=20972 href="#20972">ðŸ”—</a>genewardsmith &#x3C;genewardsmith@sbcglobal.net&#x3E;</h3><span>8/16/2012 11:31:07 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>--- In <a href="mailto:tuning-math@yahoogroups.com">tuning-math@yahoogroups.com</a>, &quot;genewardsmith&quot; &lt;genewardsmith@...&gt; wrote:</p><p>&gt; I could unpack it for you, but rather than starting a tutorial on algebraic number theory, I suggest using an alternative definition of Weil height. Suppose x is  an algebraic number, with minimal polynomial a0x^n + ... + an. Suppose the product of those roots with absolute value greater than 1 is P. Then H(x) = |a0P|^(1/n). In your example, a0=1, P=-2, and n=2, so H(sqrt(2)) = |-2|^(1/2) = sqrt(2).<br/>&gt;</p><p>Eh, I should have added that if the product is empty we take it as being 1.</p></div><h3><a id=20973 href="#20973">ðŸ”—</a>Mike Battaglia &#x3C;battaglia01@gmail.com&#x3E;</h3><span>8/16/2012 12:49:55 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>On Thu, Aug 16, 2012 at 1:46 PM, genewardsmith &lt;<a href="mailto:genewardsmith@sbcglobal.net">genewardsmith@sbcglobal.net</a>&gt;<br/>wrote:<br/>&gt;<br/>&gt; I could unpack it for you, but rather than starting a tutorial on<br/>&gt; algebraic number theory, I suggest using an alternative definition of Weil<br/>&gt; height. Suppose x is an algebraic number, with minimal polynomial a0x^n +<br/>&gt; ... + an. Suppose the product of those roots with absolute value greater<br/>&gt; than 1 is P. Then H(x) = |a0P|^(1/n). In your example, a0=1, P=-2, and n=2,<br/>&gt; so H(sqrt(2)) = |-2|^(1/2) = sqrt(2).</p><p>It works but seems like random magic to me.</p><p>The given definition for H(x) is that I&apos;m supposed to sum log<br/>max(|x|_v, 1) over all the absolute values v, right? And the different<br/>&quot;absolute values&quot; just refers to the different p-adic norms, and then<br/>the one ordinary absolute value, yes? So if | &middot; |_r is the ordinary<br/>absolute value, then for 5/3, I get</p><p>log(max(|5/3|_3,1)) + log(max(|5/3|_5,1)) + log(max(|5/3|_r,1))</p><p>and |5/3|_3 = 3, |5/3|_5 = 1/5, and |5/3|_r = 5/3, so I get</p><p>log(max(3,1)) + log(max(1/5,1)) + log(max(5/3,1)) = log(3) + log(1) +<br/>log(5/3) = log(3) + log(5/3) = log(5)</p><p>Right? I still don&apos;t know what a &quot;place&quot; is, but this seems to work out.</p><p>-Mike</p></div><h3><a id=20974 href="#20974">ðŸ”—</a>Mike Battaglia &#x3C;battaglia01@gmail.com&#x3E;</h3><span>8/16/2012 1:15:07 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>On Thu, Aug 16, 2012 at 3:49 PM, Mike Battaglia &lt;<a href="mailto:battaglia01@gmail.com">battaglia01@gmail.com</a>&gt; wrote:<br/>&gt;<br/>&gt; log(max(3,1)) + log(max(1/5,1)) + log(max(5/3,1)) = log(3) + log(1) +<br/>&gt; log(5/3) = log(3) + log(5/3) = log(5)<br/>&gt;<br/>&gt; Right? I still don&apos;t know what a &quot;place&quot; is, but this seems to work out.</p><p>OK, it seems obvious now. So in music-theoretic terms, for an<br/>unweighted monzo |a b c ...&gt;, the formula is</p><p>1) Set all positive coordinates in the monzo to 0.<br/>2) Get the T1 norm of the resulting modified monzo.<br/>3) Get the span of the original unmodified monzo in units of &quot;octaves&quot;.<br/>4) Add them up.</p><p>So for 5/3, which is |0 -1 1&gt;, this means you get<br/>1) |0 -1 1&gt; becomes |0 -1 0&gt;<br/>2) || |0 0 1&gt; ||_T1 = log2(3)<br/>3) span(|0 -1 1&gt;) = log2(5/3)<br/>4) log2(3) + log2(5/3) = log2(5)</p><p>So then the algebro-number-theoretic version of the thing we were<br/>talking about on IRC, the identity that Keenan &quot;won the race&quot; to<br/>figure out, is</p><p>H(x) = sum_v (|log(|x|_v)|_r)/2, where | &middot; |_r is the Archimedean<br/>absolute value. So for any rational p/q, this gives you H(p/q) =<br/>(log(p*q) + |log(p/q)|)/2.</p><p>The definition above is notable because if you take it over all<br/>absolute values OTHER than the Archimedean one, you get Tenney height,<br/>and if you include the Archimedean one, you get Weil height. Or well,<br/>more specifically, you get Tenney height/2.</p><p>-Mike</p></div><h3><a id=20975 href="#20975">ðŸ”—</a>genewardsmith &#x3C;genewardsmith@sbcglobal.net&#x3E;</h3><span>8/16/2012 3:20:52 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>--- In <a href="mailto:tuning-math@yahoogroups.com">tuning-math@yahoogroups.com</a>, Mike Battaglia &lt;battaglia01@...&gt; wrote:</p><p>&gt; Right? I still don&apos;t know what a &quot;place&quot; is, but this seems to work out.</p><p><a href="http://en.wikipedia.org/wiki/Absolute_value_(algebra)">http://en.wikipedia.org/wiki/Absolute_value_(algebra)</a><br/><a href="http://en.wikipedia.org/wiki/Discrete_valuation">http://en.wikipedia.org/wiki/Discrete_valuation</a></p><p>If you look at the concept for algebraic function fields, you can see a &quot;place&quot; actually is a place. Unfortunately, Wikipedia&apos;s article on algebraic function fields is crap.</p></div><h3><a id=20976 href="#20976">ðŸ”—</a>Mike Battaglia &#x3C;battaglia01@gmail.com&#x3E;</h3><span>8/16/2012 3:43:07 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>On Thu, Aug 16, 2012 at 6:20 PM, genewardsmith &lt;<a href="mailto:genewardsmith@sbcglobal.net">genewardsmith@sbcglobal.net</a>&gt;<br/>wrote:<br/>&gt;<br/>&gt; --- In <a href="mailto:tuning-math@yahoogroups.com">tuning-math@yahoogroups.com</a>, Mike Battaglia &lt;battaglia01@...&gt;<br/>&gt; wrote:<br/>&gt;<br/>&gt; &gt; Right? I still don&apos;t know what a &quot;place&quot; is, but this seems to work out.<br/>&gt;<br/>&gt; <a href="http://en.wikipedia.org/wiki/Absolute_value_(algebra)">http://en.wikipedia.org/wiki/Absolute_value_(algebra)</a><br/>&gt; <a href="http://en.wikipedia.org/wiki/Discrete_valuation">http://en.wikipedia.org/wiki/Discrete_valuation</a><br/>&gt;<br/>&gt; If you look at the concept for algebraic function fields, you can see a<br/>&gt; &quot;place&quot; actually is a place. Unfortunately, Wikipedia&apos;s article on algebraic<br/>&gt; function fields is crap.</p><p>OK, I see now. So given a place, which is an equivalence class of<br/>absolute values, how do I actually evaluate a rational at that place?<br/>Which absolute value in the equivalence class do I use?</p><p>-Mike</p></div><h3><a id=20977 href="#20977">ðŸ”—</a>genewardsmith &#x3C;genewardsmith@sbcglobal.net&#x3E;</h3><span>8/16/2012 4:21:59 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>--- In <a href="mailto:tuning-math@yahoogroups.com">tuning-math@yahoogroups.com</a>, Mike Battaglia &lt;battaglia01@...&gt; wrote:</p><p>&gt; OK, I see now. So given a place, which is an equivalence class of<br/>&gt; absolute values, how do I actually evaluate a rational at that place?<br/>&gt; Which absolute value in the equivalence class do I use?</p><p>For any algebraic number field, or for Q? For extension fields, there are two ways people sometimes do things.</p></div><h3><a id=20978 href="#20978">ðŸ”—</a>genewardsmith &#x3C;genewardsmith@sbcglobal.net&#x3E;</h3><span>8/16/2012 5:30:38 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>--- In <a href="mailto:tuning-math@yahoogroups.com">tuning-math@yahoogroups.com</a>, &quot;genewardsmith&quot; &lt;genewardsmith@...&gt; wrote:<br/>&gt;<br/>&gt;<br/>&gt;<br/>&gt; --- In <a href="mailto:tuning-math@yahoogroups.com">tuning-math@yahoogroups.com</a>, Mike Battaglia &lt;battaglia01@&gt; wrote:<br/>&gt;<br/>&gt; &gt; OK, I see now. So given a place, which is an equivalence class of<br/>&gt; &gt; absolute values, how do I actually evaluate a rational at that place?<br/>&gt; &gt; Which absolute value in the equivalence class do I use?<br/>&gt;<br/>&gt; For any algebraic number field, or for Q? For extension fields, there are two ways people sometimes do things.<br/>&gt;</p><p>I can&apos;t seem to find a good explanation of this stuff, but I think the better method is the one which woks well with Haar measure and which works with extensions of Qp instead of treating the primes of a number field just like those of Q. So, x^2-2 is irreducible over Q2, and so you take |sqrt(2)|_2 = 1/sqrt(2), not 1/2. You take the 1/nth power of the valuation of the norm term, which is 1/2, so yoi get sqrt(1/2).</p></div><h3><a id=20980 href="#20980">ðŸ”—</a>Mike Battaglia &#x3C;battaglia01@gmail.com&#x3E;</h3><span>8/17/2012 11:31:24 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>On Thu, Aug 16, 2012 at 8:30 PM, genewardsmith &lt;<a href="mailto:genewardsmith@sbcglobal.net">genewardsmith@sbcglobal.net</a>&gt;<br/>wrote:<br/>&gt;<br/>&gt; I can&apos;t seem to find a good explanation of this stuff, but I think the<br/>&gt; better method is the one which woks well with Haar measure and which works<br/>&gt; with extensions of Qp instead of treating the primes of a number field just<br/>&gt; like those of Q. So, x^2-2 is irreducible over Q2, and so you take<br/>&gt; |sqrt(2)|_2 = 1/sqrt(2), not 1/2. You take the 1/nth power of the valuation<br/>&gt; of the norm term, which is 1/2, so yoi get sqrt(1/2).</p><p>This is the alternative definition you gave, right?</p><p>I&apos;m just trying to figure out what place means. A &quot;place&quot; is an<br/>equivalence class of functions. What does it even mean to evaluate a<br/>number in a number field at one of the field&apos;s places then? I know how<br/>to apply a single function to a number, but how do I apply an entire<br/>equivalence class of functions to a number? It would be helpful to<br/>figure out some of the other neat identities and results in these<br/>papers about Weil height and figure out what the equivalent results<br/>are for monzos.</p><p>-Mike</p></div><h3><a id=20981 href="#20981">ðŸ”—</a>genewardsmith &#x3C;genewardsmith@sbcglobal.net&#x3E;</h3><span>8/17/2012 12:04:08 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>--- In <a href="mailto:tuning-math@yahoogroups.com">tuning-math@yahoogroups.com</a>, Mike Battaglia &lt;battaglia01@...&gt; wrote:</p><p>&gt; I&apos;m just trying to figure out what place means. A &quot;place&quot; is an<br/>&gt; equivalence class of functions. What does it even mean to evaluate a<br/>&gt; number in a number field at one of the field&apos;s places then?</p><p>It means you should use a canonical choice of function, which is what I was talking about.</p><p>If you want to fool around with this, I suggest downloading Pari, which lets you factor polynomials over p-adic numbers. If you take a monic minimal polynomial for an algebraic number, it will be irreducible by definition over Q, but may factor over Qp. The different monic factors correspond to different places lying over p, and you can evaluate each one in one canonical way by taking the norm term, finding the p-adic absolute value, and taking the nth root, where n is the degree of the factor in question.</p></div><h3><a id=20987 href="#20987">ðŸ”—</a>Mike Battaglia &#x3C;battaglia01@gmail.com&#x3E;</h3><span>8/17/2012 2:17:39 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>On Fri, Aug 17, 2012 at 3:04 PM, genewardsmith &lt;<a href="mailto:genewardsmith@sbcglobal.net">genewardsmith@sbcglobal.net</a>&gt;<br/>wrote:<br/>&gt;<br/>&gt; If you want to fool around with this, I suggest downloading Pari, which<br/>&gt; lets you factor polynomials over p-adic numbers. If you take a monic minimal<br/>&gt; polynomial for an algebraic number, it will be irreducible by definition<br/>&gt; over Q, but may factor over Qp. The different monic factors correspond to<br/>&gt; different places lying over p, and you can evaluate each one in one<br/>&gt; canonical way by taking the norm term, finding the p-adic absolute value,<br/>&gt; and taking the nth root, where n is the degree of the factor in question.</p><p>I guess this is how I figure out how to write phi as a monzo then.</p><p>-Mike</p></div>