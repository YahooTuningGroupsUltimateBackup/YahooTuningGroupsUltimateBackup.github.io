<a href="/tuning-math">back to list</a><h1>A simpler, affine-space view on the "find generators" algorithm I just posted</h1><h3>Mike Battaglia &#x3C;battaglia01@gmail.com&#x3E;</h3><span>5/16/2012 11:53:19 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>Consider interval space to be an affine space. Then in addition to<br/>having vectors in this space, we also have a new type of object, which<br/>is a &quot;point.&quot; I&apos;ll represent vectors by |a b c&gt; and points by |a b c),<br/>with a parenthesis on the end.</p><p>We can represent both points and vectors in this space in the standard<br/>way by using homogeneous coordinates. So in this approach, 3/2 is the<br/>point |-1 1 0), which represented in homogeneous coordinates becomes<br/>|-1 1 0;1&gt;. (The semicolon was Keenan&apos;s suggestion, and means that the<br/>following coordinate is intended to be the homogeneous &quot;w&quot; or whatever<br/>you&apos;d like to call it.) Because these are homogeneous coordinates, |-1<br/>1 0;1&gt; = |-2 2 0;2&gt;, but |-1 1 0;1&gt; != |-2 2 0;1&gt;.</p><p>The difference of two points is a vector, which is distinguished by<br/>having a homogeneous component of 0. For instance, |0 1 0) - |-1 1 0)<br/>= |0 1 0;1&gt; - |-1 1 0;1&gt; = |1 0 0;0&gt; = |1 0 0&gt;, with the 0 on the end<br/>denoting that this is a vector. Although you can consider both |1 0<br/>0;0&gt; and |2 0 0;0&gt; to be equal (as a &quot;point at infinity&quot;), it&apos;s also<br/>useful to keep them distinct as a way of notating vectors.</p><p>Homogeneous coordinates cleverly let us represent affine subspaces of<br/>a vector space as follows: for instance, here&apos;s the affine subspace of<br/>interval space consisting of all intervals of the form (3/2) *<br/>(81/80)^k, represented for visual clarity with monzos as row vectors:</p><p>[-1 1  0;1]<br/>[-4 4 -1;0]</p><p>Note that the semicolons are just there for formatting, to designate<br/>that the last column consists of the homogeneous coordinate. You can<br/>see that it consists of all intervals of the form k*|-1 1 0;1&gt; + l*|-4<br/>4 -1;0&gt;. However, since all k*|-1 1 0;1&gt; are homogeneously equivalent<br/>to the same point, then this matrix effectively consists of |-1 1 0) +<br/>k*|-4 4 -1&gt;, meaning it&apos;s a translation of the subspace going through<br/>81/80 that&apos;s translated so that the origin is at the point |-1 1 0).</p><p>This representation of affine subspaces lets us solve a few regular<br/>temperament problems that are a bit difficult otherwise. For instance,<br/>say we want to find the generators for meantone. In order to find the<br/>interval |x y&gt; for a particular basis of meantone, we can take the<br/>mapping matrix</p><p>[1 1 0]<br/>[0 1 4]</p><p>And add the |x y&gt; as a homogeneous coordinate as follows</p><p>[1 1 0;x]<br/>[0 1 4;y]</p><p>So if what we want is |0 1&gt;, then it&apos;ll be this:</p><p>[1 1 0;0]<br/>[0 1 4;1]</p><p>Note that we&apos;ve turned the lower val, which is the generator, into a<br/>point. (If we didn&apos;t pick something like |0 1&gt;, it would still always<br/>be possible to perform elementary row operations on the matrix to put<br/>it in the above form, with one row representing a point and the rest<br/>representing vectors.)</p><p>If we take the null space of this matrix, we get the following matrix:</p><p>[-4     1]<br/>[ 4    -1]<br/>[-1     0]<br/>[ 0     1]   &lt;-- homogeneous coordinate</p><p>Note that the null space of the above matrix is k*|-4 4 -1;0&gt; + l*|1<br/>-1 0;1&gt;. Since all l*|1 -1 0;1&gt; are considered equivalent to |1 -1<br/>0;1&gt;, then using my notation from before, this is the same subspace as<br/>k*|-4 4 -1&gt; + |1 -1 0). In other words, it&apos;s the subspace spanned by<br/>81/80, translated so that 2/3 is the origin.</p><p>This isn&apos;t quite the affine subspace of interval space corresponding<br/>to all generators in meantone - it&apos;s instead the affine subspace of<br/>interval space corresponding to all inverted, upside-down generators<br/>in meantone. In other words, it&apos;s the thing which, if you add it TO<br/>the generator, cancels out and gives you the null vector, which makes<br/>sense, because this is the null space of that matrix. So we can easily<br/>invert and figure out that |-1 1 0) + k*|-4 4 -1&gt; is the subspace of<br/>intervals mapping to |0 1&gt; under that matrix.</p><p>(If you don&apos;t like this, you can append |-x -y&gt; instead of |x y&gt; to<br/>the original mapping matrix to do the same thing.)</p><p>This also has some nice properties in val space - although the concept<br/>of an &quot;affine val&quot; isn&apos;t quite as intuitive as an &quot;affine interval,&quot;<br/>it still makes algebraic sense enough to easily find answers to<br/>questions like &quot;what&apos;s the set of all vals that support meantone and<br/>are Bosanquet singly-negative,&quot; meaning &quot;what&apos;s the set of all vals<br/>that map 81/80 to 0 and 128/125 to 1?&quot;</p><p>It&apos;s the same basic sort of question, just formulated from the reverse<br/>perspective. Doing this will also allow us to define some nice &quot;dual&quot;<br/>properties for affine subspaces, in a similar way to how we do it for<br/>linear subspaces. I&apos;ll post about that next.</p><p>-Mike</p></div><h3>genewardsmith &#x3C;genewardsmith@sbcglobal.net&#x3E;</h3><span>5/16/2012 5:56:18 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>--- In <a href="mailto:tuning-math@yahoogroups.com">tuning-math@yahoogroups.com</a>, Mike Battaglia &lt;battaglia01@...&gt; wrote:<br/>&gt;<br/>&gt; Consider interval space to be an affine space.</p><p>If it&apos;s an affine space, you should call it note space or pitch space.</p><p>&gt; We can represent both points and vectors in this space in the standard<br/>&gt; way by using homogeneous coordinates.</p><p>Now you are saying it&apos;s a projective space?? By the way, you never define your homogenous coordinates. I don&apos;t want to try to figure out what you are doing without, at least, definitions.</p></div><h3>Mike Battaglia &#x3C;battaglia01@gmail.com&#x3E;</h3><span>5/16/2012 6:06:22 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>On Wed, May 16, 2012 at 8:56 PM, genewardsmith &lt;<a href="mailto:genewardsmith@sbcglobal.net">genewardsmith@sbcglobal.net</a>&gt;<br/>wrote:<br/>&gt;<br/>&gt; --- In <a href="mailto:tuning-math@yahoogroups.com">tuning-math@yahoogroups.com</a>, Mike Battaglia &lt;battaglia01@...&gt;<br/>&gt; wrote:<br/>&gt; &gt;<br/>&gt; &gt; Consider interval space to be an affine space.<br/>&gt;<br/>&gt; If it&apos;s an affine space, you should call it note space or pitch space.</p><p>OK, note space.</p><p>&gt; &gt; We can represent both points and vectors in this space in the standard<br/>&gt; &gt; way by using homogeneous coordinates.<br/>&gt;<br/>&gt; Now you are saying it&apos;s a projective space??</p><p>I&apos;m saying it&apos;s an affine space, but that a useful representation of<br/>the elements in this space is to treat A(R^n), the affine space on<br/>R^n, as P(R^(n+1)), the projective space on R^(n+1). This allows you<br/>to express affine transformations as matrices, and to differentiate<br/>between points and vectors. This is a common technique in computer<br/>graphics programming.</p><p>&gt; By the way, you never define<br/>&gt; your homogenous coordinates. I don&apos;t want to try to figure out what you are<br/>&gt; doing without, at least, definitions.</p><p>The standard way: <a href="http://en.wikipedia.org/wiki/Homogeneous_coordinates">http://en.wikipedia.org/wiki/Homogeneous_coordinates</a></p><p>I&apos;m using the definition where points become projective lines we<br/>append a &quot;1&quot; to the end of the point. So in other words, the point (x,<br/>y, z) becomes (x, y, z, 1). Then, in general, (wx, wy, wz, w) = (x, y,<br/>z, 1).</p><p>-Mike</p></div><h3>Mike Battaglia &#x3C;battaglia01@gmail.com&#x3E;</h3><span>5/16/2012 6:35:49 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>On Wed, May 16, 2012 at 9:06 PM, Mike Battaglia &lt;<a href="mailto:battaglia01@gmail.com">battaglia01@gmail.com</a>&gt; wrote:<br/>&gt;<br/>&gt;&gt; By the way, you never define<br/>&gt;&gt; your homogenous coordinates. I don&apos;t want to try to figure out what you are<br/>&gt;&gt; doing without, at least, definitions.<br/>&gt;<br/>&gt; The standard way: <a href="http://en.wikipedia.org/wiki/Homogeneous_coordinates">http://en.wikipedia.org/wiki/Homogeneous_coordinates</a><br/>&gt;<br/>&gt; I&apos;m using the definition where points become projective lines we<br/>&gt; append a &quot;1&quot; to the end of the point. So in other words, the point (x,<br/>&gt; y, z) becomes (x, y, z, 1). Then, in general, (wx, wy, wz, w) = (x, y,<br/>&gt; z, 1).</p><p>OK, here&apos;s the complete spec. This is the only way I&apos;ve ever seen<br/>homogeneous coordinates make sense, so it&apos;s hardly my invention. But<br/>here goes:</p><p>POINTS<br/>1) Points in A(R^3) are mapped to lines in P(R^4).<br/>2) The mapping is that (x, y, z) |-&gt; U {w*(x, y, z, 1)}, where U is<br/>union, and w is any nonzero scalar in R.<br/>3) We can represent this line by any set of homogeneous coordinates<br/>(x, y, z, 1), and note that (wx, wy, wz, w) represents the same line<br/>for nonzero w.<br/>4) The canonical representation of any point is where the latter<br/>coordinate is 1.<br/>5) I&apos;m going to put a semicolon before the last coefficient to signify<br/>that the following number is the homogeneous coordinate; e.g. I will<br/>write (x, y, z; 1) instead of (x, y, z, 1).</p><p>VECTORS<br/>5) The difference between two points in the affine space is done by<br/>first homogenizing the last coordinate to 1, and then subtracting. In<br/>other words, (x, y, z, 1) - (a, b, c; 1) = (x-a, y-b, z-c; 0).<br/>6) Note that the difference between two points is something with the<br/>last coordinate set to 0. You can consider this a projective &quot;point at<br/>infinity&quot; if you want, but algebraically it makes more sense to<br/>consider this object to be a -vector-, and if you do so, all of the<br/>math will work out, especially when it comes to representing affine<br/>subspaces as matrices.<br/>7) Note that since the homogeneous coordinate is 0, (a, b, c; 0) is<br/>not considered to be the same as (wa, wb, wc; 0).</p><p>ADDING POINTS<br/>8) It makes no sense to add points in an affine space. However, it<br/>does make sense to take a weighted combination of points, provided the<br/>sum of weights is 1.<br/>9) In our representation, we can thus add the points (1, 0, 0) to (0,<br/>1, 0) by doing 1/2 * (1, 0, 0; 1) + 1/2 * (0, 1, 0; 1) = (0.5, 0.5, 0;<br/>1).<br/>10) However, note that in our representation, 1/2 (1, 0, 0; 1)<br/>represents the same point as (1, 0, 0; 1). So provided we&apos;ve<br/>normalized our points so that they&apos;re in the canonical representation<br/>where the latter coordinate is 1, we can just add them and then<br/>re-normalize. So (1, 0, 0; 1) + (0, 1, 0; 1) = (1, 1, 0; 2) = (0.5,<br/>0.5, 0; 1).<br/>11) If we agree to renormalize like this, then we can just add affine<br/>points (x, y, z; w1) + (a, b, c; w2) directly, and the normalization<br/>takes care of making sure all the weights sum to 1 for us.</p><p>That&apos;s it. So if I want to represent the point (1, 1, 1), that turns<br/>into the point (1, 1, 1; 1). If I want to represent the vector (1, 1,<br/>1), that turns into the point (1, 1, 1; 0). Simple.</p><p>Now let&apos;s construct a matrix whose row space represents the affine<br/>subspace going through the points (-1, 1, 0) and (3, -3, 1). So we<br/>just do it using the homogeneous system set above:</p><p>[-1 1 0 1]<br/>[3 -3 1 1]</p><p>Note that all k*[-1 1 0 1] lie in this row space, but these all<br/>represent the same point as [-1 1 0 1], which is the point (-1, 1, 0;<br/>1). Note also that you can get terms like k*[-1 1 0 1] * l*[3 -3 1 1]<br/>in there for nonzero k, l, which because of the renormalization that<br/>takes place when you add homogeneous coordinates as per #11, different<br/>k and l count as taking different weighted averages of the points.<br/>Therefore, this will hence trace out the affine hull of the points<br/>represented by the row vectors of the matrix.</p><p>More revealing is to put the matrix into this form, row-equivalent to the above:</p><p>[-1 1 0 1]<br/>[-4 4 -1 0]</p><p>Now you can see that it consists the point indexed by (-1, 1, 0; 1),<br/>with the set of all k*(-4, 4, -1; 0) being added to it. In other<br/>words, it&apos;s the translation of the subspace spanned by (-4, 4, -1; 0),<br/>such that the origin becomes (-1, 1, 0; 1).</p><p>-Mike</p></div><h3>genewardsmith &#x3C;genewardsmith@sbcglobal.net&#x3E;</h3><span>5/16/2012 8:51:39 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>--- In <a href="mailto:tuning-math@yahoogroups.com">tuning-math@yahoogroups.com</a>, Mike Battaglia &lt;battaglia01@...&gt; wrote:</p><p>&gt; &gt; By the way, you never define<br/>&gt; &gt; your homogenous coordinates. I don&apos;t want to try to figure out what you are<br/>&gt; &gt; doing without, at least, definitions.<br/>&gt;<br/>&gt; The standard way: <a href="http://en.wikipedia.org/wiki/Homogeneous_coordinates">http://en.wikipedia.org/wiki/Homogeneous_coordinates</a></p><p>Not really. You say a zero on the end denotes a vector. Ordinarily, it denotes a point at infinity. Can we just use standard notation and save outselves wear and tear on the brain?</p></div><h3>Mike Battaglia &#x3C;battaglia01@gmail.com&#x3E;</h3><span>5/16/2012 8:55:03 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>On Wed, May 16, 2012 at 11:51 PM, genewardsmith<br/>&lt;<a href="mailto:genewardsmith@sbcglobal.net">genewardsmith@sbcglobal.net</a>&gt; wrote:<br/>&gt;<br/>&gt; --- In <a href="mailto:tuning-math@yahoogroups.com">tuning-math@yahoogroups.com</a>, Mike Battaglia &lt;battaglia01@...&gt;<br/>&gt; wrote:<br/>&gt;<br/>&gt; &gt; &gt; By the way, you never define<br/>&gt; &gt; &gt; your homogenous coordinates. I don&apos;t want to try to figure out what<br/>&gt; &gt; &gt; you are<br/>&gt; &gt; &gt; doing without, at least, definitions.<br/>&gt; &gt;<br/>&gt; &gt; The standard way: <a href="http://en.wikipedia.org/wiki/Homogeneous_coordinates">http://en.wikipedia.org/wiki/Homogeneous_coordinates</a><br/>&gt;<br/>&gt; Not really. You say a zero on the end denotes a vector. Ordinarily, it<br/>&gt; denotes a point at infinity. Can we just use standard notation and save<br/>&gt; outselves wear and tear on the brain?</p><p>What is the &quot;standard&quot; way to represent vectors in an affine space?<br/>This is the only way I know.</p><p>-Mike</p></div><h3>genewardsmith &#x3C;genewardsmith@sbcglobal.net&#x3E;</h3><span>5/16/2012 9:05:05 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>--- In <a href="mailto:tuning-math@yahoogroups.com">tuning-math@yahoogroups.com</a>, Mike Battaglia &lt;battaglia01@...&gt; wrote:</p><p>&gt; 6) Note that the difference between two points is something with the<br/>&gt; last coordinate set to 0. You can consider this a projective &quot;point at<br/>&gt; infinity&quot; if you want, but algebraically it makes more sense to<br/>&gt; consider this object to be a -vector-, and if you do so, all of the<br/>&gt; math will work out, especially when it comes to representing affine<br/>&gt; subspaces as matrices.</p><p>That makes no sense to me. Normally, if (a b c d) is such that d is not zero, then it is in the affine patch leaving off the plane d=0 at infinity, with coordinates (a/d b/d c/d).</p><p>&gt; 7) Note that since the homogeneous coordinate is 0, (a, b, c; 0) is<br/>&gt; not considered to be the same as (wa, wb, wc; 0).</p><p>Not considered by you. Standard math definitions says it is the same. Would it not be possible to do this in a standard, less confusing, way?</p></div><h3>Mike Battaglia &#x3C;battaglia01@gmail.com&#x3E;</h3><span>5/16/2012 9:08:31 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>On Thu, May 17, 2012 at 12:05 AM, genewardsmith<br/>&lt;<a href="mailto:genewardsmith@sbcglobal.net">genewardsmith@sbcglobal.net</a>&gt; wrote:<br/>&gt;<br/>&gt; &gt; 7) Note that since the homogeneous coordinate is 0, (a, b, c; 0) is<br/>&gt; &gt; not considered to be the same as (wa, wb, wc; 0).<br/>&gt;<br/>&gt; Not considered by you. Standard math definitions says it is the same.<br/>&gt; Would it not be possible to do this in a standard, less confusing, way?</p><p>If you have a simpler way to do it, I&apos;m all for it. This is just the<br/>way I know, and it&apos;s useful because it lets you represent affine<br/>subspaces as row spaces in matrices. How are we supposed to do that<br/>otherwise?</p><p>-Mike</p></div><h3>genewardsmith &#x3C;genewardsmith@sbcglobal.net&#x3E;</h3><span>5/16/2012 9:09:07 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>--- In <a href="mailto:tuning-math@yahoogroups.com">tuning-math@yahoogroups.com</a>, Mike Battaglia &lt;battaglia01@...&gt; wrote:</p><p>&gt; What is the &quot;standard&quot; way to represent vectors in an affine space?<br/>&gt; This is the only way I know.</p><p>If (x1 y1 z1) and (x2 y2 z2) are two points in a 3D affine space, then |x1-x2 y1-y2 z1-z2&gt; is a vector.</p></div>