<a href="/tuning-math">back to list</a><h1>12 equal to meantone conversion algorithm</h1><h3><a id=6372 href="#6372">ðŸ”—</a>Gene Ward Smith &#x3C;gwsmith@svpal.org&#x3E;</h3><span>6/21/2003 10:35:21 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>It seems to me that a pretty good start on this could be done<br/>algorithmically, and that in any event the result would be<br/>interesting and listenable. The method I&apos;ve been pondering would<br/>definately not solve any 128/125 drift problem; one may regard that<br/>as a bug or a feature.</p><p>Given a set of octave reduced note classes, we can represent each<br/>element as a unit vector or equivalently, a complex number of<br/>absolute value one. Raise these to the seventh power to get a set of<br/>complex numbers organized around a circle of fifths, then add all of<br/>the complex numbers (sum_i z_i^7); if the result is zero, return<br/>zero; otherwise divide by the absolute value to get another number of<br/>absolute value unity. This is the 12-equal midpoint.</p><p>We now take the previous chord&apos;s 12-equal midpoint and find which<br/>side of it the new midpoint it is closest to (with a tiebreaker if<br/>needed.) We add that on to the previous chord&apos;s meantone midpoint,<br/>which is a real number, not a number mod 1 or 12 or 2 pi or 360<br/>(however you are measuring a circle) to get the meantone midpoint of<br/>the new chord. If the new chord has a 12-equal midpoint of zero, we<br/>add zero and simply use the old midpoint. The first chord has a<br/>meantone midpoint equal to its 12-equal midpoint, allowing us to<br/>start the recursion (if the first chord is an augmented triad or<br/>diminished seventh, we probably need to go to the first unambiguous<br/>chord and work backwards and forwards.)</p><p>We now take a range of +-6 around the meantone midpoint, and use it<br/>to decide how to map the 12 note classes to meantone for this chord,<br/>using the previous midpoint as a tiebreaker if needed.</p><p>I&apos;m actually thinking of trying to code this in C, despite the fact<br/>that I&apos;ve written only in Maple for the last 15 years, but of course<br/>if I could con someone into doing it for me that would be even<br/>better. I think it would be a wonderful addition to Scala and Ada<br/>would be just fine as a language to write it in; Python also springs<br/>to mind as a good language. :)</p></div><h3><a id=6373 href="#6373">ðŸ”—</a>Carl Lumma &#x3C;ekin@lumma.org&#x3E;</h3><span>6/22/2003 12:59:35 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>Pretty simple, compared to this:</p><p><a href="http://lumma.org/stuff/adaptive.txt">http://lumma.org/stuff/adaptive.txt</a></p><p>-Carl</p></div><h3><a id=6374 href="#6374">ðŸ”—</a>wallyesterpaulrus &#x3C;wallyesterpaulrus@yahoo.com&#x3E;</h3><span>6/22/2003 5:47:35 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>how does this compare with dave keenan&apos;s ideas:</p><p><a href="http://www.uq.net.au/~zzdkeena/Music/AdaptiveMeantone.htm">http://www.uq.net.au/~zzdkeena/Music/AdaptiveMeantone.htm</a></p><p>?</p><p>--- In <a href="mailto:tuning-math@yahoogroups.com">tuning-math@yahoogroups.com</a>, &quot;Gene Ward Smith&quot; &lt;gwsmith@s...&gt;<br/>wrote:<br/>&gt; It seems to me that a pretty good start on this could be done<br/>&gt; algorithmically, and that in any event the result would be<br/>&gt; interesting and listenable. The method I&apos;ve been pondering would<br/>&gt; definately not solve any 128/125 drift problem; one may regard that<br/>&gt; as a bug or a feature.<br/>&gt;<br/>&gt; Given a set of octave reduced note classes, we can represent each<br/>&gt; element as a unit vector or equivalently, a complex number of<br/>&gt; absolute value one. Raise these to the seventh power to get a set of<br/>&gt; complex numbers organized around a circle of fifths, then add all of<br/>&gt; the complex numbers (sum_i z_i^7); if the result is zero, return<br/>&gt; zero; otherwise divide by the absolute value to get another number<br/>of<br/>&gt; absolute value unity. This is the 12-equal midpoint.<br/>&gt;<br/>&gt; We now take the previous chord&apos;s 12-equal midpoint and find which<br/>&gt; side of it the new midpoint it is closest to (with a tiebreaker if<br/>&gt; needed.) We add that on to the previous chord&apos;s meantone midpoint,<br/>&gt; which is a real number, not a number mod 1 or 12 or 2 pi or 360<br/>&gt; (however you are measuring a circle) to get the meantone midpoint of<br/>&gt; the new chord. If the new chord has a 12-equal midpoint of zero, we<br/>&gt; add zero and simply use the old midpoint. The first chord has a<br/>&gt; meantone midpoint equal to its 12-equal midpoint, allowing us to<br/>&gt; start the recursion (if the first chord is an augmented triad or<br/>&gt; diminished seventh, we probably need to go to the first unambiguous<br/>&gt; chord and work backwards and forwards.)<br/>&gt;<br/>&gt; We now take a range of +-6 around the meantone midpoint, and use it<br/>&gt; to decide how to map the 12 note classes to meantone for this chord,<br/>&gt; using the previous midpoint as a tiebreaker if needed.<br/>&gt;<br/>&gt; I&apos;m actually thinking of trying to code this in C, despite the fact<br/>&gt; that I&apos;ve written only in Maple for the last 15 years, but of course<br/>&gt; if I could con someone into doing it for me that would be even<br/>&gt; better. I think it would be a wonderful addition to Scala and Ada<br/>&gt; would be just fine as a language to write it in; Python also springs<br/>&gt; to mind as a good language. :)</p></div><h3><a id=6375 href="#6375">ðŸ”—</a>Gene Ward Smith &#x3C;gwsmith@svpal.org&#x3E;</h3><span>6/22/2003 8:33:46 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>--- In <a href="mailto:tuning-math@yahoogroups.com">tuning-math@yahoogroups.com</a>, &quot;wallyesterpaulrus&quot;<br/>&lt;wallyesterpaulrus@y...&gt; wrote:<br/>&gt; how does this compare with dave keenan&apos;s ideas:<br/>&gt;<br/>&gt; <a href="http://www.uq.net.au/~zzdkeena/Music/AdaptiveMeantone.htm">http://www.uq.net.au/~zzdkeena/Music/AdaptiveMeantone.htm</a></p><p>Thanks for pointing this out. They are similar in both using a<br/>sliding window. Despite the fact that I use complex numbers, my<br/>algorithm is actually simpler and more straightforward. If we did the<br/>ascending chromatic scale example, using my method we simply get<br/>ascending diatonic semitones; hence we do not arrive back in the key<br/>of C, but we don&apos;t experience any irregularities.</p></div><h3><a id=6376 href="#6376">ðŸ”—</a>Gene Ward Smith &#x3C;gwsmith@svpal.org&#x3E;</h3><span>6/22/2003 9:08:59 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>--- In <a href="mailto:tuning-math@yahoogroups.com">tuning-math@yahoogroups.com</a>, &quot;Gene Ward Smith&quot; &lt;gwsmith@s...&gt;<br/>wrote:</p><p>&gt; Thanks for pointing this out. They are similar in both using a<br/>&gt; sliding window. Despite the fact that I use complex numbers, my<br/>&gt; algorithm is actually simpler and more straightforward. If we did<br/>the<br/>&gt; ascending chromatic scale example, using my method we simply get<br/>&gt; ascending diatonic semitones; hence we do not arrive back in the<br/>key<br/>&gt; of C, but we don&apos;t experience any irregularities.</p><p>I should point out that this is only true if the chromatic scale is<br/>not harmonized. My algorithm, while very simple, does not work on the<br/>crude level of note-for-note, but is based on note-sets. If the<br/>chromatic passage was harmonized in a way which leads back to C, for<br/>instance by C-A-D-cm-C-F-D-G-fm-F-C7-G7-C, back to C we would come.</p></div><h3><a id=6379 href="#6379">ðŸ”—</a>Graham Breed &#x3C;graham@microtonal.co.uk&#x3E;</h3><span>6/23/2003 2:27:09 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>Gene Ward Smith wrote:</p><p>&gt; I should point out that this is only true if the chromatic scale is &gt; not harmonized. My algorithm, while very simple, does not work on the &gt; crude level of note-for-note, but is based on note-sets. If the &gt; chromatic passage was harmonized in a way which leads back to C, for &gt; instance by C-A-D-cm-C-F-D-G-fm-F-C7-G7-C, back to C we would come.</p><p>I also have some code for 12-equal to meantone conversions, and I managed to write it without using complex numbers!  It&apos;s at <a href="http://www.microtonal.co.uk/gesualdo.zip">http://www.microtonal.co.uk/gesualdo.zip</a></p><p>I don&apos;t know how out of date that is, but I do have a more recent version on my Revo.  One difference is that I have found passages in Gesualdo that it doesn&apos;t convert correctly.  There&apos;s a total of 3 wrong chords.  From what I remember, these can be resolved by using a different gamut depending on whether he used a Bb in the key signature.</p><p>The gamut restrictions could possible be removed by using a flexible key center.  Take everything relative to the average number of steps on the spiral of fifths, calculated recursively as</p><p>total(n) = k*total(n-1) + note<br/>number(n) = k*number(n-1) + 1<br/>center(n) = total(n)/number(n)</p><p>Then, k=0 means it calculates each new chord looking at only the previous chord, and k=1 makes it remember all previous chords equally, which will give very conservative results.  I didn&apos;t implement this for the Gesualdo program, because it isn&apos;t a rule he was likely to follow, but it might work for an automated tuning program.</p><p>                   Graham</p></div><h3><a id=6380 href="#6380">ðŸ”—</a>Gene Ward Smith &#x3C;gwsmith@svpal.org&#x3E;</h3><span>6/23/2003 3:52:34 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>--- In <a href="mailto:tuning-math@yahoogroups.com">tuning-math@yahoogroups.com</a>, Graham Breed &lt;graham@m...&gt; wrote:</p><p>&gt; I don&apos;t know how out of date that is, but I do have a more recent<br/>&gt; version on my Revo.  One difference is that I have found passages<br/>in<br/>&gt; Gesualdo that it doesn&apos;t convert correctly.  There&apos;s a total of 3<br/>wrong<br/>&gt; chords.  From what I remember, these can be resolved by using a<br/>&gt; different gamut depending on whether he used a Bb in the key<br/>signature.</p><p>You think you have problems. I just tried my algorithm on Schumann&apos;s<br/>Foreign Lands and Peoples. The fact that it didn&apos;t end up in the same<br/>key it started with wasn&apos;t as disturbing as the obvious clinkers. Of<br/>course, I imagine Renaissance music is easier to covert to meantone!</p></div><h3><a id=6381 href="#6381">ðŸ”—</a>Manuel Op de Coul &#x3C;manuel.op.de.coul@eon-benelux.com&#x3E;</h3><span>6/23/2003 4:49:59 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>Have a look at this too:<br/><a href="http://www.ai.univie.ac.at/cgi-bin/tr-online?number+2001-12">http://www.ai.univie.ac.at/cgi-bin/tr-online?number+2001-12</a></p><p>Manuel</p></div><h3><a id=6382 href="#6382">ðŸ”—</a>Gene Ward Smith &#x3C;gwsmith@svpal.org&#x3E;</h3><span>6/23/2003 10:58:24 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>--- In <a href="mailto:tuning-math@yahoogroups.com">tuning-math@yahoogroups.com</a>, &quot;Gene Ward Smith&quot; &lt;gwsmith@s...&gt;<br/>wrote:</p><p>&gt; You think you have problems. I just tried my algorithm on<br/>Schumann&apos;s<br/>&gt; Foreign Lands and Peoples. The fact that it didn&apos;t end up in the<br/>same<br/>&gt; key it started with wasn&apos;t as disturbing as the obvious clinkers.</p><p>I screwed up; the Schumann in fact presents zero difficulties for<br/>conversion to meantone so far as I can determine. You can find a<br/>31-equal version and the midi I retuned here:<br/>.<br/>.<br/>.<br/><a href="http://groups.yahoo.com/group/tuning_files/files/31%20equal/fore.mid">http://groups.yahoo.com/group/tuning_files/files/31%20equal/fore.mid</a></p><p><a href="http://groups.yahoo.com/group/tuning_files/files/originals/sr15-1.mid">http://groups.yahoo.com/group/tuning_files/files/originals/sr15-1.mid</a></p></div>