<a href="/tuning">back to list</a><h1>Barbershop Spectrogram</h1><h3><a id=282 href="#282">ðŸ”—</a>Carl Lumma &#x3C;clumma@xxx.xxxx&#x3E;</h3><span>1/10/1999 2:23:03 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>In the spirit of Gary Morrison&apos;s suggestion, this post makes use of remote<br/>resources posted at...</p><p><a href="http://lumma.org/list/">http://lumma.org/list/</a></p><p>The other day Dan Wolf recommended a spectrogram program and I downloaded<br/>it.  It works really well.  It seems we have reason to be happy that we<br/>live in a time when people can trade such valuable stuff without having to<br/>bother with value abstraction.  But I digress.</p><p>To test the program, I thought I&apos;d try some Barbershop.  For the test, I<br/>picked a brief excerpt of song by the Happiness Emporium.  This group did<br/>most of their recordings (including this one, from their album &quot;That&apos;s<br/>Entertainment!&quot;) back in the 70&apos;s, when Barbershop technique wasn&apos;t a<br/>shadow of what it is today.  However, they have a nice sound, and I thought<br/>I&apos;d give them a try.</p><p>Using Cool Edit, I extracted the CD audio to 16-bit 44.1 WAV format, and<br/>mixed it down from stereo to mono.  I then ran it thru Spectrogram,<br/>fiddling with the settings until I got a clear picture.  The values used to<br/>produce the image full.bmp are:</p><p>Attenuation=0<br/>Palette=CB<br/>Freq Scale=Log<br/>FFT Size (points)=8192<br/>Freq Resolution (hertz)=5.4<br/>Band (hertz)=10-22050<br/>Time Scale (ms)=12<br/>Spectrum Average (ms)=1<br/>Toggle Grid=off</p><p>This example contains a nice C7 chord, and I cropped it with Cool Edit and<br/>spectrogrized it with the same options as above, except with a time scale<br/>of 4 miliseconds.</p><p>Note: I downsampled full.wav to 22K with Cool Edit to make it smaller for<br/>you all.  Up.wav remains at 44K.</p><p>Note: When I save bmps with the grid on, the grid moves relative to the<br/>rest of the graph.  This is why the bmp files on my web site don&apos;t have<br/>grids.  Does this happen to you?</p><p>Then, I opened Notepad with the idea that I&apos;d record the frequencies of the<br/>first 9 peaks (starting at the bottom of the graph) in this chord that I<br/>could get a signal strength of greater than -40 dbs out of.  I picked 9<br/>arbitrarily.  I started at the bottom because I knew that&apos;s where most of<br/>the parts would be.</p><p>I didn&apos;t take the readings from the same time on the graph.  Rather, I took<br/>each reading at the strongest point in each peak (it happened that all of<br/>these fell very near each other, in third quarter or so of the total time).<br/> The crosshairs have a resolution of 1cps, and I did some careful work with<br/>the mouse.  If there was a range of frequencies that shared the same<br/>strength, I took the one closest to the middle of the range, taking the<br/>higher frequency if the range was odd.</p><p>After I had done all that and closed Spectrogram, I turned by text file<br/>into the chart in up.txt.  I am at a loss to explain the results.  With the<br/>transform limited to a frequency resolution worse than 5 hertz, I should<br/>not have gotten, nor did I expect to get, anywhere near the accuracy I did.</p><p>It may be noticed that I do not have the lead part labeled in the up.txt<br/>chart.  At first I thought that maybe the baritone was at peak3 and the<br/>lead at peak4, with peak2 being 5-3.  However, this would be an unusual<br/>voicing, and listening reveals that the Baritone is singing peak2, and the<br/>lead is singing a 5/2 above the bass.  This peak is in the spectrogram<br/>(up.bmp) but not the chart because I couldn&apos;t get more than -40 db&apos;s out of<br/>it.</p><p>Carl</p></div><h3><a id=283 href="#283">ðŸ”—</a>Daniel Wolf &#x3C;DJWOLF_MATERIAL@xxxxxxxxxx.xxxx&#x3E;</h3><span>1/10/1999 4:55:45 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>Carl Lumma:</p><p>Which vowel is being sung on the chord you selected for the analysis? My<br/>impression is that the accuracy of the intonation owes a lot to getting the<br/>voicing of a given chord to support (i.e. &apos;ring&apos;) in the formant range of<br/>the vowel.</p><p>Given the likely roots of Barbershop singing in the African-American<br/>tradition, it might be interesting to look also at choral music in other<br/>parts of the African diaspora -- I&apos;ve heard Ghanean and Haitian choral<br/>musics which share the tendency to &apos;ring&apos; sustained chords.</p><p>I have been doing analyses of Javanese _rebab_ playing and solo vocal music<br/>(_bawa_), so have not yet paid much attention to western intonation. I&apos;d be<br/>curious to see more analyses of choral and instrumental performance<br/>comparing horizonal and vertical intonations. There are a lot of<br/>assumptions out there (i.e. that strings tend &apos;naturally&apos; to the<br/>Pythagorean) that ought to be better documented.</p><p>The other shareware programs that I mentioned in my earlier posting were:</p><p>AcidWAV, which is part of Tommy Anderberg&apos;s GSound package (with WAVMaker<br/>and other useful things), available at <a href="http://www.polyhedric.com">www.polyhedric.com</a></p><p>and</p><p>Tune!It, a handy little digital tuner, reasonably accurate in a pinch with<br/>some nice features, by D. Volkmer, ftp://ftp.zeta.org.au/home/dvolkmer/ or<br/><a href="http://www.zeta.org.au/ftp/home/dvolkmer/">http://www.zeta.org.au/ftp/home/dvolkmer/</a></p><p>Another nice way to double check an analysis is to resynthesize and then<br/>compare the original with the imitation. AcidWAV has an eight-oscillator<br/>additive synthesis module (in addition to analog, FM, Karplus-Strong and a<br/>freely drawn waveform modules) that works well when intervals of 1 Hz are<br/>sufficient.</p><p>Dr. Daniel J. Wolf, Komponist<br/>Material Press, Frankfurt am Main<br/><a href="mailto:DJWOLF_MATERIAL@COMPUSERVE.COM">DJWOLF_MATERIAL@COMPUSERVE.COM</a></p></div><h3><a id=289 href="#289">ðŸ”—</a>alves@xxxxx.xx.xxx.xxxxxxxxxxxxxxx)</h3><span>1/11/1999 9:51:45 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>&gt;After I had done all that and closed Spectrogram, I turned by text file<br/>&gt;into the chart in up.txt.  I am at a loss to explain the results.  With the<br/>&gt;transform limited to a frequency resolution worse than 5 hertz, I should<br/>&gt;not have gotten, nor did I expect to get, anywhere near the accuracy I did.</p><p>The resolution of an FFT is determined by the window size (the length of<br/>time which is analyzed) and the sampling rate. A discrete Fourier transform<br/>transforms the time-domain data into the same number of data points in the<br/>frequency and phase domains. Since we are interested in the frequency<br/>domain, that leaves one-half the points to represent the available<br/>frequencies (from 0 to the Nyquist frequency, one-half the sample rate).</p><p>Thus, to find the frequency resolution of a transform, divide the sampling<br/>rate by the window size in samples. In your example, a 44100 sampling rate<br/>divided by an 8192 window size leaves 5.4 hertz per frequency band. I agree<br/>that it&apos;s not enough to do good pitch analysis, especially in the lower<br/>range.</p><p>I used to do frequency analysis on a Synclavier, which allowed window sizes<br/>up to 16384. Unfortunately, I have not found any other spectral analysis<br/>tools which allow more than 8192 samples per window. One possible solution<br/>would be to lower the sampling rate of your file. While this may seem<br/>counter-intuitive, it means that a lot of the resolution is not wasted<br/>analyzing the very high frequencies.</p><p>Bill</p><p>^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^<br/>^ Bill Alves                                      email: <a href="mailto:alves@hmc.edu">alves@hmc.edu</a> ^<br/>^ Harvey Mudd College                 URL: <a href="http://www2.hmc.edu/~alves/">http://www2.hmc.edu/~alves/</a> ^<br/>^ 301 E. Twelfth St.                            (909)607-4170 (office) ^<br/>^ Claremont CA 91711 USA                           (909)607-7600 (fax) ^<br/>^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</p></div><h3><a id=290 href="#290">ðŸ”—</a>Daniel Wolf &#x3C;DJWOLF_MATERIAL@xxxxxxxxxx.xxxx&#x3E;</h3><span>1/11/1999 10:24:55 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>Bill Alves wrote:</p><p>&quot;I used to do frequency analysis on a Synclavier, which allowed window<br/>sizes<br/>up to 16384. Unfortunately, I have not found any other spectral analysis<br/>tools which allow more than 8192 samples per window. One possible solution<br/>would be to lower the sampling rate of your file. While this may seem<br/>counter-intuitive, it means that a lot of the resolution is not wasted<br/>analyzing the very high frequencies.&quot;</p><p>Spectrogram _does_ allow a window size of 16384. I find it very useful to<br/>narrow the frequency band and analyse a sample in approximately<br/>octave-sized slices.</p></div><h3><a id=301 href="#301">ðŸ”—</a>Greg Schiemer &#x3C;gregs@xxxx.xxxx.xxx.xxx&#x3E;</h3><span>1/12/1999 12:35:45 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>&gt;Another nice way to double check an analysis is to resynthesize and then<br/>&gt;compare the original with the imitation.</p><p>Daniel thanks for these pointers. I&apos;ve already downloaded acid WAV. I expect success<br/>with analysing vocal music will depend on the overtone structure of various sounds<br/>singers make when they sing lyrics.</p></div><h3><a id=312 href="#312">ðŸ”—</a>Paul H. Erlich &#x3C;PErlich@xxxxxxxxxxxxx.xxxx&#x3E;</h3><span>1/13/1999 12:49:41 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>&gt;Unfortunately, I have not found any other spectral analysis<br/>&gt;tools which allow more than 8192 samples per window.</p><p>Matlab has no limits on the window size, other than the constraints<br/>imposed by your computer&apos;s resources. The number of samples doesn&apos;t even<br/>have to be a power of two, although the operation is much faster when it<br/>is a power of two.</p></div><h3><a id=614 href="#614">ðŸ”—</a>Carl Lumma &#x3C;clumma@xxx.xxxx&#x3E;</h3><span>2/3/1999 10:00:58 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>If you ever have a chance to trust a brand-new (2 months) top-of-the-line<br/>9gig Seagate Cheetah Ultra2/LVD hard drive.... don&apos;t.  In the event of a<br/>physical head crash, you probably won&apos;t be comforted by the fact that<br/>Seagate furnishes only factory serviced drives for replacement.</p><p>[Daniel Wolf]<br/>&gt;Which vowel is being sung on the chord you selected for the analysis? My<br/>&gt;impression is that the accuracy of the intonation owes a lot to getting the<br/>&gt;voicing of a given chord to support (i.e. &apos;ring&apos;) in the formant range of<br/>&gt;the vowel.</p><p>There&apos;s only one vowel known to Barbershop singers: &quot;ah&quot;.  Of course I<br/>exaggerate, but not by very much.  The vowel in the example in clearly &quot;ah&quot;.</p><p>[Bill Alves]<br/>&gt;Thus, to find the frequency resolution of a transform, divide the sampling<br/>&gt;rate by the window size in samples. In your example, a 44100 sampling rate<br/>&gt;divided by an 8192 window size leaves 5.4 hertz per frequency band. I agree<br/>&gt;that it&apos;s not enough to do good pitch analysis, especially in the lower<br/>&gt;range.</p><p>Yes, I knew the resolution was &quot;worse than 5 hertz&quot; because I calculated<br/>it.  I did work with some Sarangi music using lower sampling rates, and<br/>with Denkla&apos;s CSound Bach filtering for all but a narrow band of<br/>frequencies, but I was complaining about (what appeared to be) too much<br/>resolution in this case, not too little.</p><p>[Charlie Jordan]<br/>&gt;There is a 7/6 interval near the top. To put that interval over the bass<br/>&gt;line would create a 6:7:?:? chord rather than the 4:5:6:7 shown. The<br/>&gt;6:7:8:10 inversion is the least popular.<br/>&gt;<br/>&gt;Perhaps a separate analysis of each voice would be enlightening. Overtones<br/>&gt;and difference tones might be less prominent.</p><p>I&apos;m not sure what you mean.  You can&apos;t get &quot;each voice&quot; to perform in the<br/>same way without the others.  I identified all the parts, and the chord is<br/>most definitely 2-3-5-7; standard Barbershop voicing.</p><p>Carl</p></div><h3><a id=740 href="#740">ðŸ”—</a>aloe@xxx.xxx</h3><span>2/9/1999 11:21:07 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>At 01:00 AM 2/4/99 -0500, Carl Lumma wrote:</p><p>&gt;[Charlie Jordan]</p><p>&gt;&gt;Perhaps a separate analysis of each voice would be enlightening. Overtones<br/>&gt;&gt;and difference tones might be less prominent.<br/>&gt;<br/>&gt;I&apos;m not sure what you mean.  You can&apos;t get &quot;each voice&quot; to perform in the<br/>&gt;same way without the others.</p><p>I suppose each voice could be recorded from a separate microphone.</p><p>&gt;I identified all the parts, and the chord is<br/>&gt;most definitely 2-3-5-7; standard Barbershop voicing.</p><p>There is a peak at 579 hz. There&apos;s no measure of the relative contributions<br/>to this peak of the 3rd harmonic of the bass (129 hz) and the 2nd harmonic<br/>of the baritone (193 hz). This may or may not be useful to know.</p><p>The spectrogram is certainly informative. I appreciate being able to see the<br/>analysis. Like most research, in answering one question, it asks others.</p><p>--Charlie Jordan &lt;<a href="http://www.rev.net/~aloe/music">http://www.rev.net/~aloe/music</a>&gt;</p></div>