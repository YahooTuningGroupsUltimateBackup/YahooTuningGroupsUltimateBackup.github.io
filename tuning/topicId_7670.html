<a href="/tuning">back to list</a><h1>consistency proggie</h1><h3>Carl Lumma &#x3C;clumma@xxx.xxxx&#x3E;</h3><span>1/10/2000 2:07:24 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>If anybody&apos;s interested, here&apos;s a LISP run that returns the highest odd<br/>limit at which an ET is consistent, up to the 19-limit, for a range of<br/>ET&apos;s...</p><p><a href="http://lumma.org/consist.ss">http://lumma.org/consist.ss</a></p><p>It is a LISP translation (likely a very bad one) of some brilliant<br/>pseudocode that Paul Hahn posted here a while back.  You can run it with<br/>the free Chez Scheme Petite...</p><p><a href="http://www.scheme.com/">http://www.scheme.com/</a></p><p>Be sure to download and install SWL (scheme widget library), too.  Follow<br/>the &quot;SWL&quot; shortcut, load <a href="http://consist.ss">consist.ss</a>, and type (chart min max), where min<br/>and max are whole numbers representing the smallest and largest ET&apos;s in<br/>your range, inclusive.  You&apos;ll get back a bunch of what look like ordered<br/>pairs.  The first number in each pair is the ET number, and the second is<br/>the largest odd limit (up to 19) at which the ET is at least level-1<br/>consistent.</p><p>Scheme is interpreted, but on my P2-400 I can do the first 200 ET&apos;s<br/>instantly.  I checked many of them against Paul Hahn&apos;s charts at...</p><p><a href="http://library.wustl.edu/~manynote/music.html">http://library.wustl.edu/~manynote/music.html</a></p><p>...and there seems to be agreement.  In case you have another version of<br/>LISP, you can read the source below.  It can easily be changed to check at<br/>higher limits than 19, or indeed to check consistency against any set of<br/>odd factors you&apos;d like.  Simply change the list (19 17 15 13 11 9 7 5 3)<br/>in the procedure &quot;chart&quot; to the set you want.  Just be sure to put the<br/>factors in reverse order of size.  Comments (and suggestions, if you know<br/>any LISP) requested...</p><p>(define log2?<br/>   (lambda (num)<br/>      (/ (log num) (log 2))))</p><p>(define errors<br/>   (lambda (ET lim)<br/>      (cond<br/>         [(null? lim) &apos;()]<br/>         [else (cons (- (* ET (log2? (car lim))) (round (* ET (log2? (car<br/>lim))))) (errors ET (cdr lim)))])))</p><p>(define max?<br/>   (lambda (ls)<br/>      (cond<br/>         [(null? (cdr ls)) (car ls)]<br/>         [(&gt; (car ls) (max? (cdr ls))) (car ls)]<br/>         [else (max? (cdr ls))])))</p><p>(define min?<br/>   (lambda (ls)<br/>      (cond<br/>         [(null? (cdr ls)) (car ls)]<br/>         [(&lt; (car ls) (min? (cdr ls))) (car ls)]<br/>         [else (min? (cdr ls))])))</p><p>(define consist?<br/>   (lambda (ET lim)<br/>      (cond<br/>         [(&lt; (- (max? (errors ET lim)) (min? (errors ET lim))) (/ 1 2)) #T]<br/>         [else #F])))</p><p>(define limit<br/>   (lambda (ET lim)<br/>      (cond<br/>         [(null? lim) (cons 0 &apos;())]<br/>         [(consist? ET lim) (cons (car lim) &apos;())]<br/>         [else (limit ET (cdr lim))])))</p><p>(define chart<br/>   (lambda (min_ET max_ET)<br/>      (cond<br/>         [(equal? (+ 1 max_ET) min_ET) (cons &apos;FIN &apos;())]<br/>         [else (cons (cons min_ET (limit min_ET &apos;(19 17 15 13 11 9 7 5 3)))<br/>(chart (+ 1 min_ET) max_ET))])))</p><p>-Carl</p></div><h3>Carl Lumma &#x3C;clumma@xxx.xxxx&#x3E;</h3><span>1/10/2000 2:10:35 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>&gt;If anybody&apos;s interested, here&apos;s a LISP run that returns the highest odd<br/>&gt;limit at which an ET is consistent, up to the 19-limit, for a range of<br/>&gt;ET&apos;s...</p><p>I forgot to thank Pauls Hahn and Erlich for the fantastic notion of consistency, and all their help explaining it to me.</p><p>-Carl</p></div><h3>Carl Lumma &#x3C;clumma@xxx.xxxx&#x3E;</h3><span>1/10/2000 10:15:14 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>[I wrote...]<br/>&gt;It can easily be changed to check at higher limits than 19, or indeed to<br/>&gt;check consistency against any set of odd factors you&apos;d like.  Simply change<br/>&gt;the list (19 17 15 13 11 9 7 5 3) in the procedure &quot;chart&quot; to the set you<br/>&gt;want.  Just be sure to put the factors in reverse order of size.</p><p>Actually, size order doesn&apos;t matter.  What you can do, though, is put your<br/>factors in order of importance -- which is reverse size order for complete<br/>odd limits.</p><p>IOW, if all you want to do is check for consistency with an entire set, you<br/>can enter the set in any order.  If the first item gets returned, the ET is<br/>consistent with the whole set.  If any other item gets returned, the ET isn&apos;t<br/>consistent with the whole set -- it&apos;s consistent with the set to the right of<br/>and including the returned item.</p><p>-Carl</p></div><h3>Carl Lumma &#x3C;clumma@xxx.xxxx&#x3E;</h3><span>1/10/2000 1:18:08 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>Apologies to anyone who had trouble accessing files on my web site this<br/>morning.  I&apos;ve moved things around a bit.  Everything regarding this thread<br/>is now at...</p><p>ftp://lumma.org/pub/</p><p>The procedure I posted earlier is now called consist_limit.ss, and the code<br/>I posted earlier is at consist_limit.txt (with a small change that makes it<br/>more forgiving as to the types of input sets you can feed it).</p><p>There&apos;s also a new procedure called consist_ET.ss.  This one returns all<br/>ET&apos;s, within the given range, that are consistent at or above the given<br/>level with respect to the given set of odd factors.  It looks like this...</p><p>(chart lev &apos;(list) min_ET max_ET)</p><p>So, if you wanted to know which ET&apos;s between 5 and 100 (inclusive) were at<br/>least level-2 consistent with respect to the set (1 3 7 11 19), you would<br/>type...</p><p>(chart 2 &apos;(3 7 11 19) 5 100)</p><p>...and you would get...</p><p>(89 fin)</p><p>For regular consistency, just enter a &quot;1&quot; for the level.  Also note that<br/>the level does not have to be a whole number, if you&apos;re interested<br/>fractional consistency.  Just don&apos;t forget the &apos; mark before your list of<br/>factors.</p><p>This new procedure may be helpful when searching for ETs to use with<br/>generalized diatonics that are based on unsaturated chords.</p><p>Once again, I&apos;ve used Paul Hahn&apos;s killer charts to check my work.  And<br/>again, if you don&apos;t already have a version of LISP, or you don&apos;t feel like<br/>changing all the null?&apos;s to nil&apos;s, etc, just download Chez Scheme from<br/>Cadence Research at <a href="http://www.scheme.com">www.scheme.com</a>.</p><p>Oh yeah, please note that these two procedures should be run in seperate<br/>sessions, since I haven&apos;t been careful to keep the bindings straight.</p><p>-Carl</p></div>