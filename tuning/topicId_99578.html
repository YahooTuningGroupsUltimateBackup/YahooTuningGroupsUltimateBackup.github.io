<a href="/tuning">back to list</a><h1>Adaptive JI by injection locking (entrainment)</h1><h3>Keenan Pepper &#x3C;keenanpepper@...&#x3E;</h3><span>5/27/2011 3:18:34 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>I just had a really sweet idea.</p><p>Injection locking, a.k.a. entrainment, is when two oscillators with slightly different natural frequencies become locked in a definite phase relationship when there is a nonlinear coupling between them, so the frequencies become identical. The well-known &quot;discovery&quot; of this phenomenon was when Christiaan Huygens (of 31 equal fame!!) suspended two pendulum clocks from the same beam, and observed that they kept exactly the same time, even though they kept different time when apart.</p><p>Crucially for our purposes, two oscillators can also have any of their harmonics become injection locked to each other. In other words, the fundamentals can become locked to any JI interval. For example, in the audio file here<br/><a href="http://en.wikipedia.org/wiki/Injection_locking#Injection_pulling">http://en.wikipedia.org/wiki/Injection_locking#Injection_pulling</a><br/>it&apos;s obvious that the variable-frequency oscillator becomes locked to the fixed one at intervals of 5/1, 3/1, and 1/1, and if you listen closely you can also hear brief periods of lock at 13/3, 11/3, 7/3, 11/5, 9/5, 5/3, and 7/5. (These contain only odd numbers because the square waves involved have only odd harmonics. In contrast, at 4/1 and 2/1 you can hear the beating stop for an instant, but the oscillators don&apos;t become locked for any finite length of time.)</p><p>This phenomenon is already present and noticeable in acoustic instruments. For example, I&apos;m sure I can hear injection locking in this aulos performance: <a href="http://www.youtube.com/watch?v=PVsWWkBrKG4">http://www.youtube.com/watch?v=PVsWWkBrKG4</a></p><p>But as far as I know, all adaptive JI schemes proposed so far involve some algorithm to determine what the JI intervals are supposed to be, based on some more or less artificial conditions.</p><p>Has anyone ever implemented adaptive JI using digital (simulated) injection locking? This seems to me like a much more &quot;natural&quot; way to do it, and it&apos;s probably much simpler to implement. If not, I&apos;m going to try adding it to amSynth (<a href="http://code.google.com/p/amsynth/">http://code.google.com/p/amsynth/</a>), a nifty little softsynth to which I&apos;m currently adding alternate tuning support.</p><p>Keenan</p><p>P.S. One last random thought: Is it possible for two people to injection lock their voices to each other, by pressing their throats together or something?</p></div><h3>Carl Lumma &#x3C;carl@...&#x3E;</h3><span>5/27/2011 4:39:55 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>&quot;Keenan Pepper&quot; &lt;keenanpepper@...&gt; wrote:</p><p>&gt; I just had a really sweet idea.<br/>&gt; Injection locking, a.k.a. entrainment, [snip]<br/>&gt; Has anyone ever implemented adaptive JI using digital (simulated)<br/>&gt; injection locking? This seems to me like a much more &quot;natural&quot;<br/>&gt; way to do it, and it&apos;s probably much simpler to implement.<br/>&gt; If not, I&apos;m going to try adding it to amSynth<br/>&gt; (<a href="http://code.google.com/p/amsynth/">http://code.google.com/p/amsynth/</a>), a nifty little softsynth<br/>&gt; to which I&apos;m currently adding alternate tuning support.</p><p>The problem with automatic JI isn&apos;t usually figuring out<br/>what the chords are supposed to be, it&apos;s figuring out the<br/>melodic motion between chords.</p><p>&gt; P.S. One last random thought: Is it possible for two people<br/>&gt; to injection lock their voices to each other, by pressing their<br/>&gt; throats together or something?</p><p>I&apos;ve often wondered if brass choirs playing in close<br/>spaces don&apos;t get some guidance from entrainment.  As I<br/>think about it now, probably not.  But it&apos;s a nice<br/>thought.  :)</p><p>-Carl</p></div><h3>Steve Parker &#x3C;steve@...&#x3E;</h3><span>5/27/2011 5:07:04 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>On 28 May 2011, at 00:39, Carl Lumma wrote:</p><p>&gt; The problem with automatic JI isn&apos;t usually figuring out<br/>&gt; what the chords are supposed to be, it&apos;s figuring out the<br/>&gt; melodic motion between chords.</p><p>This may be above my head.. but diving in..</p><p>The biggest problem is dealing with it over an entire piece so drift is accounted for.<br/>In my experience of choral singing this tends to be dealt with in sledge hammer fashion by someone<br/>adamantly sticking to a pitch or re-entering and resetting.</p><p>Steve P.</p></div><h3>Keenan Pepper &#x3C;keenanpepper@...&#x3E;</h3><span>5/27/2011 6:04:16 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>--- In <a href="mailto:tuning@yahoogroups.com">tuning@yahoogroups.com</a>, Steve Parker &lt;steve@...&gt; wrote:<br/>&gt;<br/>&gt;<br/>&gt; On 28 May 2011, at 00:39, Carl Lumma wrote:<br/>&gt;<br/>&gt; &gt; The problem with automatic JI isn&apos;t usually figuring out<br/>&gt; &gt; what the chords are supposed to be, it&apos;s figuring out the<br/>&gt; &gt; melodic motion between chords.<br/>&gt;<br/>&gt; This may be above my head.. but diving in..<br/>&gt;<br/>&gt; The biggest problem is dealing with it over an entire piece so drift<br/>&gt; is accounted for.<br/>&gt; In my experience of choral singing this tends to be dealt with in<br/>&gt; sledge hammer fashion by someone<br/>&gt; adamantly sticking to a pitch or re-entering and resetting.</p><p>Exactly right, and my injection locking idea would instantly solve this problem, because each oscillator would have a permanently fixed natural frequency, and would only differ from that frequency when other oscillators are playing. The average frequency shift over time of all the oscillators would be forced to center itself around zero, because if you try to pull any given oscillator&apos;s frequency too far away from its natural one it will just fall out of lock.</p><p>Also it should be obvious that the injection locking would only apply when multiple oscillators are playing in harmony. If one oscillator is playing a melody by itself it won&apos;t be perturbed by any other oscillators, so the frequencies will be exactly the natural ones you set it to.</p><p>Keenan</p></div><h3>Mike Battaglia &#x3C;battaglia01@...&#x3E;</h3><span>5/27/2011 7:48:42 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>On Fri, May 27, 2011 at 6:18 PM, Keenan Pepper &lt;keenanpepper@...&gt; wrote:<br/>&gt;<br/>&gt; Has anyone ever implemented adaptive JI using digital (simulated) injection locking? This seems to me like a much more &quot;natural&quot; way to do it, and it&apos;s probably much simpler to implement. If not, I&apos;m going to try adding it to amSynth (<a href="http://code.google.com/p/amsynth/">http://code.google.com/p/amsynth/</a>), a nifty little softsynth to which I&apos;m currently adding alternate tuning support.</p><p>This is a fantastic idea, how are you going to implement it? Some kind<br/>of waveguide-based approach?</p><p>-Mike</p></div><h3>Aaron Krister Johnson &#x3C;aaron@...&#x3E;</h3><span>5/27/2011 7:58:45 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>Keenan,</p><p>I&apos;m fascinated by the idea, and interested to see how it progresses!</p><p>More interesting: you use amSynth! Is this now cross-platform? I only know<br/>it from Linux; in fact I was interested in adding tuning tables to the<br/>codebase for WhySynth on Linux some time ago, but I never got started, being<br/>rather too busy to do so. Again, I&apos;m eager to hear how *this* progresses,<br/>too.</p><p>Cheers,<br/>AKJ</p><p>On Fri, May 27, 2011 at 9:48 PM, Mike Battaglia &lt;battaglia01@...&gt;wrote:</p><p>&gt; On Fri, May 27, 2011 at 6:18 PM, Keenan Pepper &lt;keenanpepper@...&gt;<br/>&gt; wrote:<br/>&gt; &gt;<br/>&gt; &gt; Has anyone ever implemented adaptive JI using digital (simulated)<br/>&gt; injection locking? This seems to me like a much more &quot;natural&quot; way to do it,<br/>&gt; and it&apos;s probably much simpler to implement. If not, I&apos;m going to try adding<br/>&gt; it to amSynth (<a href="http://code.google.com/p/amsynth/">http://code.google.com/p/amsynth/</a>), a nifty little<br/>&gt; softsynth to which I&apos;m currently adding alternate tuning support.<br/>&gt;<br/>&gt; This is a fantastic idea, how are you going to implement it? Some kind<br/>&gt; of waveguide-based approach?<br/>&gt;<br/>&gt; -Mike<br/>&gt;<br/>&gt;<br/>&gt; ------------------------------------<br/>&gt;<br/>&gt; You can configure your subscription by sending an empty email to one<br/>&gt; of these addresses (from the address at which you receive the list):<br/>&gt;  <a href="mailto:tuning-subscribe@yahoogroups.com">tuning-subscribe@yahoogroups.com</a> - join the tuning group.<br/>&gt;  <a href="mailto:tuning-unsubscribe@yahoogroups.com">tuning-unsubscribe@yahoogroups.com</a> - leave the group.<br/>&gt;  <a href="mailto:tuning-nomail@yahoogroups.com">tuning-nomail@yahoogroups.com</a> - turn off mail from the group.<br/>&gt;  <a href="mailto:tuning-digest@yahoogroups.com">tuning-digest@yahoogroups.com</a> - set group to send daily digests.<br/>&gt;  <a href="mailto:tuning-normal@yahoogroups.com">tuning-normal@yahoogroups.com</a> - set group to send individual emails.<br/>&gt;  <a href="mailto:tuning-help@yahoogroups.com">tuning-help@yahoogroups.com</a> - receive general help information.<br/>&gt; Yahoo! Groups Links<br/>&gt;<br/>&gt;<br/>&gt;<br/>&gt;</p><p>--<br/>Aaron Krister Johnson<br/><a href="http://www.akjmusic.com">http://www.akjmusic.com</a><br/><a href="http://www.untwelve.org">http://www.untwelve.org</a></p></div><h3>Keenan Pepper &#x3C;keenanpepper@...&#x3E;</h3><span>5/27/2011 8:18:32 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>--- In <a href="mailto:tuning@yahoogroups.com">tuning@yahoogroups.com</a>, Mike Battaglia &lt;battaglia01@...&gt; wrote:<br/>&gt; This is a fantastic idea, how are you going to implement it? Some kind<br/>&gt; of waveguide-based approach?<br/>&gt;<br/>&gt; -Mike</p><p>I&apos;m really interested in what you mean by &quot;waveguide-based&quot;, because I was thinking of something that doesn&apos;t sound at all like that, and is just the simplest thing I could come up with.</p><p>Let&apos;s say you have two oscillators and you want to give them some coupling to each other so they can become injection locked. Each oscillator internally keeps track of its own phase, and for every sample basically does</p><p>phase += frequency * (delta t)</p><p>and then its output is some function of that phase. For concreteness let&apos;s say they&apos;re both sines, so their output is sin(phase).</p><p>If I&apos;m the first oscillator, in order to be able to lock phase with the other guy I have to do something different that depends on his phase. I could certainly look at his phase directly, but if I only look at his output (not his internal phase), I can also make injection locking happen, and that case is more easily generalized to hundreds of oscillators.</p><p>Again for concreteness, let&apos;s say I&apos;m trying to make my phase equal to the other guy&apos;s (rather than some definite nonzero phase difference, which would also work).</p><p>If my phase is zero, that means my output is crossing zero and it&apos;s going up. Therefore, if the other guy&apos;s output is positive, that means he already crossed zero and I need to speed up to catch him. If the other guy&apos;s output is negative, he hasn&apos;t crossed zero yet, so I&apos;m rushing ahead of him and need to slow down.</p><p>If my phase is pi/2, however, then my output is at a maximum and it&apos;s not currently changing. Therefore I can&apos;t tell from the other guy&apos;s output whether I&apos;m lagging behind him or rushing ahead of him. In lieu of an error signal, I always use my own natural frequency when my phase is pi/2.</p><p>The simplest way to complete this emerging pattern is to perturb my frequency by an amount proportional to</p><p>cos(my phase) * (other guy&apos;s output)</p><p>So the way I update my own phase becomes</p><p>phase += (natural_frequency + coupling * cos(phase) * (other guy&apos;s output)) * (delta t)</p><p>A bonus is that this is super easy to generalize to a whole synthesizer&apos;s worth of oscillators. Just replace (other guy&apos;s output) with (whole synthesizer output). It doesn&apos;t even matter if you subtract out each oscillator&apos;s own contribution to the output, because its error signal with its own output must average to zero.</p><p>Keenan</p></div><h3>Keenan Pepper &#x3C;keenanpepper@...&#x3E;</h3><span>5/27/2011 8:26:06 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>--- In <a href="mailto:tuning@yahoogroups.com">tuning@yahoogroups.com</a>, Aaron Krister Johnson &lt;aaron@...&gt; wrote:<br/>&gt;<br/>&gt; Keenan,<br/>&gt;<br/>&gt; I&apos;m fascinated by the idea, and interested to see how it progresses!<br/>&gt;<br/>&gt; More interesting: you use amSynth! Is this now cross-platform? I only know<br/>&gt; it from Linux; in fact I was interested in adding tuning tables to the<br/>&gt; codebase for WhySynth on Linux some time ago, but I never got started, being<br/>&gt; rather too busy to do so. Again, I&apos;m eager to hear how *this* progresses,<br/>&gt; too.</p><p>Unfortunately I don&apos;t think it compiles on Windows yet, but it definitely wouldn&apos;t be too difficult to port. The GUI library, gtkmm, already works on Windows, so all you&apos;d need to do is write Windows MIDI and audio interfaces for it and then compile it.</p><p>My version of amSynth can already read SCL and KBM files and retune itself. I&apos;m about to submit a patch to the main developer, Nick Dowell, so it can get included in the next release, but I&apos;d be happy to send anyone a tarball who wants it.</p><p>Keenan</p></div><h3>Carl Lumma &#x3C;carl@...&#x3E;</h3><span>5/27/2011 9:00:31 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>&quot;Keenan Pepper&quot; &lt;keenanpepper@...&gt; wrote:</p><p>&gt; Exactly right, and my injection locking idea would instantly<br/>&gt; solve this problem, because each oscillator would have a<br/>&gt; permanently fixed natural frequency, and would only differ<br/>&gt; from that frequency when other oscillators are playing.<br/>&gt; The average frequency shift over time of all the oscillators<br/>&gt; would be forced to center itself around zero, [snip]<br/>&gt; Also it should be obvious that the injection locking would<br/>&gt; only apply when multiple oscillators are playing in harmony.</p><p>I don&apos;t get it.  It&apos;s straightforward to simply code this<br/>behavior if it&apos;s what you want.  In fact, Hermode tuning<br/>does.  -Carl</p></div><h3>Keenan Pepper &#x3C;keenanpepper@...&#x3E;</h3><span>5/27/2011 9:26:20 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>--- In <a href="mailto:tuning@yahoogroups.com">tuning@yahoogroups.com</a>, &quot;Carl Lumma&quot; &lt;carl@...&gt; wrote:<br/>&gt; I don&apos;t get it.  It&apos;s straightforward to simply code this<br/>&gt; behavior if it&apos;s what you want.  In fact, Hermode tuning<br/>&gt; does.  -Carl</p><p>Can Hermode tuning automatically work with any tempered scale you choose? Or is it specific to temperaments similar to 12-equal or meantone?</p><p>I think the thing that would make injection locking different from just about any other system is it&apos;s totally temperament-agnostic. There&apos;s really only one parameter: the coupling strength between oscillators.</p><p>Keenan</p></div><h3>Carl Lumma &#x3C;carl@...&#x3E;</h3><span>5/27/2011 10:06:56 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>-- &quot;Keenan Pepper&quot; &lt;keenanpepper@...&gt; wrote:</p><p>&gt; --- In <a href="mailto:tuning@yahoogroups.com">tuning@yahoogroups.com</a>, &quot;Carl Lumma&quot; &lt;carl@&gt; wrote:<br/>&gt; &gt; I don&apos;t get it.  It&apos;s straightforward to simply code this<br/>&gt; &gt; behavior if it&apos;s what you want.  In fact, Hermode tuning<br/>&gt; &gt; does.  -Carl<br/>&gt;<br/>&gt; Can Hermode tuning automatically work with any tempered scale<br/>&gt; you choose?</p><p>Hermode&apos;s anchor tuning is 12-ET and it has 5- and 7-limit<br/>destination tunings depending on the implementation.<br/>Obviously the approach could be used for any tempered scale.<br/>However these approaches work at the score/MIDI level.<br/>Your idea has the potential advantage of working at the synth<br/>level.  But it takes some time for two oscillators to mode<br/>lock and longer for 3 or more...</p><p>-Carl</p></div><h3>Daniel Nielsen &#x3C;nielsed@...&#x3E;</h3><span>5/28/2011 12:11:16 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>Hope I&apos;m not just throwing out needless asides, but a couple things this<br/>reminds me of:<br/>SwarmSynth (oscillator flocking; not a lot of theory to this particular<br/>implementation, I don&apos;t think)<br/><a href="http://anarchysoundsoftware.co.uk/anarchysoundsoftware/?page_id=62">http://anarchysoundsoftware.co.uk/anarchysoundsoftware/?page_id=62</a><br/>The delta rule in neural networks<br/><a href="http://en.wikipedia.org/wiki/Backpropagation">http://en.wikipedia.org/wiki/Backpropagation</a></p><p>Dan N</p></div><h3>bigAndrewM &#x3C;bigandrewm@...&#x3E;</h3><span>5/28/2011 1:50:47 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>This is a cool concept, but to me, the most serious problem is related to the &quot;coupling strength.&quot; How widely do you want the vibrating surfaces to be able to change pitch? This matters a great deal, especially if you want to compose with some of the higher-order JI chords. And even in the simpler chords there are problems. Two problems jump out to me: figuring which version of a JI diminished chord your algorithm will lean toward, and which version of a minor seventh chord your algorithm will lean toward. In those cases, it isn&apos;t even clear that one tuning is &quot;better&quot; than another; for example that minor 7th chord can be either 1, 19:16, 3:2, 7:4, or 1, 6:5, 3:2, 9:5. They&apos;re both good-sounding tunings, and of course choosing one or the other can make a huge difference on your voice-leading, too. I suppose that for specific issues like this, you could base the vibrators on an ET that, combined with adjusting the coupling strength, can distinguish between the two, but I guarantee that no setup will be able to solve all such ambiguities.</p><p>Andrew</p><p>--- In <a href="mailto:tuning@yahoogroups.com">tuning@yahoogroups.com</a>, &quot;Keenan Pepper&quot; &lt;keenanpepper@...&gt; wrote:<br/>&gt;<br/>&gt;<br/>&gt;<br/>&gt; --- In <a href="mailto:tuning@yahoogroups.com">tuning@yahoogroups.com</a>, &quot;Carl Lumma&quot; &lt;carl@&gt; wrote:<br/>&gt; &gt; I don&apos;t get it.  It&apos;s straightforward to simply code this<br/>&gt; &gt; behavior if it&apos;s what you want.  In fact, Hermode tuning<br/>&gt; &gt; does.  -Carl<br/>&gt;<br/>&gt; Can Hermode tuning automatically work with any tempered scale you choose? Or is it specific to temperaments similar to 12-equal or meantone?<br/>&gt;<br/>&gt; I think the thing that would make injection locking different from just about any other system is it&apos;s totally temperament-agnostic. There&apos;s really only one parameter: the coupling strength between oscillators.<br/>&gt;<br/>&gt; Keenan<br/>&gt;</p></div><h3>Steve Parker &#x3C;steve@...&#x3E;</h3><span>5/28/2011 5:44:10 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>But drift occurs without harmony.<br/>Establish the key of C, then sing D A G D A G D A G etc<br/>Sung quickly this is stable, but at say 10 seconds per pitch it can<br/>drift producing:</p><p>&#x9;D A+ G+ D+ A++ G++ D++ A+++ G+++ etc....</p><p>I observe this in actual situations with choirs.</p><p>Steve P.</p><p>On 28 May 2011, at 02:04, Keenan Pepper wrote:</p><p>&gt; --- In <a href="mailto:tuning@yahoogroups.com">tuning@yahoogroups.com</a>, Steve Parker &lt;steve@...&gt; wrote:<br/>&gt; &gt;<br/>&gt; &gt;<br/>&gt; &gt; On 28 May 2011, at 00:39, Carl Lumma wrote:<br/>&gt; &gt;<br/>&gt; &gt; &gt; The problem with automatic JI isn&apos;t usually figuring out<br/>&gt; &gt; &gt; what the chords are supposed to be, it&apos;s figuring out the<br/>&gt; &gt; &gt; melodic motion between chords.<br/>&gt; &gt;<br/>&gt; &gt; This may be above my head.. but diving in..<br/>&gt; &gt;<br/>&gt; &gt; The biggest problem is dealing with it over an entire piece so drift<br/>&gt; &gt; is accounted for.<br/>&gt; &gt; In my experience of choral singing this tends to be dealt with in<br/>&gt; &gt; sledge hammer fashion by someone<br/>&gt; &gt; adamantly sticking to a pitch or re-entering and resetting.<br/>&gt;<br/>&gt; Exactly right, and my injection locking idea would instantly solve<br/>&gt; this problem, because each oscillator would have a permanently fixed<br/>&gt; natural frequency, and would only differ from that frequency when<br/>&gt; other oscillators are playing. The average frequency shift over time<br/>&gt; of all the oscillators would be forced to center itself around zero,<br/>&gt; because if you try to pull any given oscillator&apos;s frequency too far<br/>&gt; away from its natural one it will just fall out of lock.<br/>&gt;<br/>&gt; Also it should be obvious that the injection locking would only<br/>&gt; apply when multiple oscillators are playing in harmony. If one<br/>&gt; oscillator is playing a melody by itself it won&apos;t be perturbed by<br/>&gt; any other oscillators, so the frequencies will be exactly the<br/>&gt; natural ones you set it to.<br/>&gt;<br/>&gt; Keenan<br/>&gt;<br/>&gt;<br/>&gt;</p></div><h3>Mike Battaglia &#x3C;battaglia01@...&#x3E;</h3><span>5/28/2011 11:08:22 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>On Fri, May 27, 2011 at 11:18 PM, Keenan Pepper &lt;keenanpepper@...&gt; wrote:<br/>&gt;<br/>&gt; --- In <a href="mailto:tuning@yahoogroups.com">tuning@yahoogroups.com</a>, Mike Battaglia &lt;battaglia01@...&gt; wrote:<br/>&gt; &gt; This is a fantastic idea, how are you going to implement it? Some kind<br/>&gt; &gt; of waveguide-based approach?<br/>&gt; &gt;<br/>&gt; &gt; -Mike<br/>&gt;<br/>&gt; phase += (natural_frequency + coupling * cos(phase) * (other guy&apos;s output)) * (delta t)<br/>&gt;<br/>&gt; A bonus is that this is super easy to generalize to a whole synthesizer&apos;s worth of oscillators. Just replace (other guy&apos;s output) with (whole synthesizer output). It doesn&apos;t even matter if you subtract out each oscillator&apos;s own contribution to the output, because its error signal with its own output must average to zero.</p><p>Very interesting, although this doesn&apos;t look like it&apos;ll tune each<br/>harmonic separately, but just slowly lock the whole thing to itself. I<br/>was suggesting that perhaps you were going to do it with one of these</p><p><a href="https://ccrma.stanford.edu/~jos/swgt/">https://ccrma.stanford.edu/~jos/swgt/</a></p><p>Commonly referred to as &quot;physical modelling&quot; among the unhip. The<br/>basic idea is that you simulate the propagation of a wave along a<br/>waveguide by modeling the waveguide as a bunch of delay lines, and I<br/>suspect that the combination of that and some sort of nonlinear<br/>junction would handle this situation well, except the word &quot;nonlinear&quot;<br/>could be a code word for almost anything, so I&apos;d have to really<br/>understand the physical basis for the phenomenon to see how exactly a<br/>waveguide setup would work.</p><p>I would have imagined right off the bat that some sort of FM would be<br/>involved, as you wrote in your initial implementation, but it it&apos;s<br/>really true that harmonics can drift independently of the fundamental,<br/>that alone wouldn&apos;t cover it. But all in all it&apos;s a fascinating idea,<br/>if you can give me more details of the mechanism behind it I&apos;d be down<br/>to work on something like this for sure.</p><p>PS - for cross-platform audio coding, have you heard of JUCE?<br/><a href="http://www.rawmaterialsoftware.com/juce.php">http://www.rawmaterialsoftware.com/juce.php</a></p><p>Supports Windows, Mac, Linux, iPhone(!) Android(!!). It&apos;s a general<br/>cross-platform framework, but even more importantly it&apos;s an audio<br/>plugin framework, and makes it so that a plugin you write<br/>automatically gets AU, RTAS, and VST equivalents. The whole thing<br/>supports C++. Can&apos;t beat that.</p><p>-Mike</p></div><h3>Kalle Aho &#x3C;kalleaho@...&#x3E;</h3><span>5/28/2011 1:09:29 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>Hi Keenan,</p><p>isn&apos;t this going produce distortion artifacts in the sound, at<br/>least when the coupling constant is large?</p><p>Also, I understand the explanation for two tones but how is this<br/>going to work with larger chords?</p><p>Kalle</p><p>--- In <a href="mailto:tuning@yahoogroups.com">tuning@yahoogroups.com</a>, &quot;Keenan Pepper&quot; &lt;keenanpepper@...&gt; wrote:<br/>&gt;<br/>&gt;<br/>&gt;<br/>&gt; --- In <a href="mailto:tuning@yahoogroups.com">tuning@yahoogroups.com</a>, Mike Battaglia &lt;battaglia01@&gt; wrote:<br/>&gt; &gt; This is a fantastic idea, how are you going to implement it? Some kind<br/>&gt; &gt; of waveguide-based approach?<br/>&gt; &gt;<br/>&gt; &gt; -Mike<br/>&gt;<br/>&gt; I&apos;m really interested in what you mean by &quot;waveguide-based&quot;, because I was thinking of something that doesn&apos;t sound at all like that, and is just the simplest thing I could come up with.<br/>&gt;<br/>&gt; Let&apos;s say you have two oscillators and you want to give them some coupling to each other so they can become injection locked. Each oscillator internally keeps track of its own phase, and for every sample basically does<br/>&gt;<br/>&gt; phase += frequency * (delta t)<br/>&gt;<br/>&gt; and then its output is some function of that phase. For concreteness let&apos;s say they&apos;re both sines, so their output is sin(phase).<br/>&gt;<br/>&gt; If I&apos;m the first oscillator, in order to be able to lock phase with the other guy I have to do something different that depends on his phase. I could certainly look at his phase directly, but if I only look at his output (not his internal phase), I can also make injection locking happen, and that case is more easily generalized to hundreds of oscillators.<br/>&gt;<br/>&gt; Again for concreteness, let&apos;s say I&apos;m trying to make my phase equal to the other guy&apos;s (rather than some definite nonzero phase difference, which would also work).<br/>&gt;<br/>&gt; If my phase is zero, that means my output is crossing zero and it&apos;s going up. Therefore, if the other guy&apos;s output is positive, that means he already crossed zero and I need to speed up to catch him. If the other guy&apos;s output is negative, he hasn&apos;t crossed zero yet, so I&apos;m rushing ahead of him and need to slow down.<br/>&gt;<br/>&gt; If my phase is pi/2, however, then my output is at a maximum and it&apos;s not currently changing. Therefore I can&apos;t tell from the other guy&apos;s output whether I&apos;m lagging behind him or rushing ahead of him. In lieu of an error signal, I always use my own natural frequency when my phase is pi/2.<br/>&gt;<br/>&gt; The simplest way to complete this emerging pattern is to perturb my frequency by an amount proportional to<br/>&gt;<br/>&gt; cos(my phase) * (other guy&apos;s output)<br/>&gt;<br/>&gt; So the way I update my own phase becomes<br/>&gt;<br/>&gt; phase += (natural_frequency + coupling * cos(phase) * (other guy&apos;s output)) * (delta t)<br/>&gt;<br/>&gt; A bonus is that this is super easy to generalize to a whole synthesizer&apos;s worth of oscillators. Just replace (other guy&apos;s output) with (whole synthesizer output). It doesn&apos;t even matter if you subtract out each oscillator&apos;s own contribution to the output, because its error signal with its own output must average to zero.<br/>&gt;<br/>&gt; Keenan<br/>&gt;</p></div><h3>Keenan Pepper &#x3C;keenanpepper@...&#x3E;</h3><span>5/28/2011 5:09:04 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>--- In <a href="mailto:tuning@yahoogroups.com">tuning@yahoogroups.com</a>, Daniel Nielsen &lt;nielsed@...&gt; wrote:<br/>&gt;<br/>&gt; Hope I&apos;m not just throwing out needless asides, but a couple things this<br/>&gt; reminds me of:<br/>&gt; SwarmSynth (oscillator flocking; not a lot of theory to this particular<br/>&gt; implementation, I don&apos;t think)<br/>&gt; <a href="http://anarchysoundsoftware.co.uk/anarchysoundsoftware/?page_id=62">http://anarchysoundsoftware.co.uk/anarchysoundsoftware/?page_id=62</a></p><p>I would definitely try this if I had a Windows machine. Maybe on one of my school&apos;s computers sometime.</p><p>&gt; The delta rule in neural networks<br/>&gt; <a href="http://en.wikipedia.org/wiki/Backpropagation">http://en.wikipedia.org/wiki/Backpropagation</a></p><p>Not sure how this is related.</p><p>Keenan</p></div><h3>Keenan Pepper &#x3C;keenanpepper@...&#x3E;</h3><span>5/28/2011 6:02:33 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>--- In <a href="mailto:tuning@yahoogroups.com">tuning@yahoogroups.com</a>, &quot;bigAndrewM&quot; &lt;bigandrewm@...&gt; wrote:<br/>&gt;<br/>&gt; This is a cool concept, but to me, the most serious problem is related to the &quot;coupling strength.&quot; How widely do you want the vibrating surfaces to be able to change pitch? This matters a great deal, especially if you want to compose with some of the higher-order JI chords. And even in the simpler chords there are problems. Two problems jump out to me: figuring which version of a JI diminished chord your algorithm will lean toward, and which version of a minor seventh chord your algorithm will lean toward. In those cases, it isn&apos;t even clear that one tuning is &quot;better&quot; than another; for example that minor 7th chord can be either 1, 19:16, 3:2, 7:4, or 1, 6:5, 3:2, 9:5. They&apos;re both good-sounding tunings, and of course choosing one or the other can make a huge difference on your voice-leading, too. I suppose that for specific issues like this, you could base the vibrators on an ET that, combined with adjusting the coupling strength, can distinguish between the two, but I guarantee that no setup will be able to solve all such ambiguities.</p><p>I guess we&apos;ll just have to wait and see which versions of those chords emerge from different coupling parameters. (Of course, a lot of parameter choices might result in those chords remaining unlocked.)</p><p>Also, once you have a working system, it should be quite easy to limit the frequency deviations to some maximum value.</p><p>I think one of the most significant benefits of injection locking is that you never have to make such choices between chords artificially. You just tell the oscillators how to talk to each other and they decide what to do.</p><p>Keenan</p></div><h3>Keenan Pepper &#x3C;keenanpepper@...&#x3E;</h3><span>5/28/2011 6:05:12 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>--- In <a href="mailto:tuning@yahoogroups.com">tuning@yahoogroups.com</a>, Steve Parker &lt;steve@...&gt; wrote:<br/>&gt;<br/>&gt; But drift occurs without harmony.<br/>&gt; Establish the key of C, then sing D A G D A G D A G etc<br/>&gt; Sung quickly this is stable, but at say 10 seconds per pitch it can<br/>&gt; drift producing:<br/>&gt;<br/>&gt; &#x9;D A+ G+ D+ A++ G++ D++ A+++ G+++ etc....<br/>&gt;<br/>&gt; I observe this in actual situations with choirs.</p><p>I&apos;m sure things like that do happen, but I&apos;m equally sure that this is a phenomenon of psychology, or psychoacoustics, or some other thing that only humans suffer from. This won&apos;t happen with digital oscillators because I won&apos;t program them to do that.</p><p>Keenan</p></div><h3>Steve Parker &#x3C;steve@...&#x3E;</h3><span>5/29/2011 3:47:43 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>I&apos;m not at all sure I agree. It&apos;s not a psycoacoustic<br/>problem, it&apos;s a tuning problem. Once you lock in with a comma shift<br/>somewhere, it becomes a long range problem to avoid drift<br/>rather than a chord to chord problem.<br/>With pro choirs sometimes these decisions need to<br/>be made by looking at the entire piece.</p><p>Steve P.</p><p>On 29 May 2011, at 02:05, &quot;Keenan Pepper&quot; &lt;keenanpepper@...&gt; wrote:</p><p>&gt; --- In <a href="mailto:tuning@yahoogroups.com">tuning@yahoogroups.com</a>, Steve Parker &lt;steve@...&gt; wrote:<br/>&gt; &gt;<br/>&gt; &gt; But drift occurs without harmony.<br/>&gt; &gt; Establish the key of C, then sing D A G D A G D A G etc<br/>&gt; &gt; Sung quickly this is stable, but at say 10 seconds per pitch it can<br/>&gt; &gt; drift producing:<br/>&gt; &gt;<br/>&gt; &gt; D A+ G+ D+ A++ G++ D++ A+++ G+++ etc....<br/>&gt; &gt;<br/>&gt; &gt; I observe this in actual situations with choirs.<br/>&gt;<br/>&gt; I&apos;m sure things like that do happen, but I&apos;m equally sure that this is a phenomenon of psychology, or psychoacoustics, or some other thing that only humans suffer from. This won&apos;t happen with digital oscillators because I won&apos;t program them to do that.<br/>&gt;<br/>&gt; Keenan<br/>&gt;<br/>&gt;</p></div><h3>Keenan Pepper &#x3C;keenanpepper@...&#x3E;</h3><span>5/29/2011 10:14:07 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>--- In <a href="mailto:tuning@yahoogroups.com">tuning@yahoogroups.com</a>, Steve Parker &lt;steve@...&gt; wrote:<br/>&gt;<br/>&gt; I&apos;m not at all sure I agree. It&apos;s not a psycoacoustic<br/>&gt; problem, it&apos;s a tuning problem. Once you lock in with a comma shift<br/>&gt; somewhere, it becomes a long range problem to avoid drift<br/>&gt; rather than a chord to chord problem.<br/>&gt; With pro choirs sometimes these decisions need to<br/>&gt; be made by looking at the entire piece.<br/>&gt;<br/>&gt; Steve P.</p><p>I don&apos;t understand. Could you explain specifically why you would expect this to happen with coupled digital oscillators?</p><p>Note that I&apos;m not in any way disputing your conclusions from your experience with pro choirs. I&apos;m disputing their relevance to a purely mathematical process that doesn&apos;t involve humans.</p><p>Keenan</p></div><h3>Aaron Krister Johnson &#x3C;aaron@...&#x3E;</h3><span>5/30/2011 8:53:13 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>Keenan,</p><p>I think what Steve is asking is: how exactly would the oscillators<br/>counteract commatic drift in certain chord progressions? Or is this even a<br/>concern for you?</p><p>The simplest example might be the JI progression that forms a diesis of<br/>128/125 (from Cmaj-Emajor-G#major-B#major, where we want<br/>B#major=Cmajor)...it&apos;s one thing if you just want devil-may-care in<br/>tune-ness, drifting be damned, we&apos;re working with and designing music in<br/>pure JI, so that&apos;s part of the bargain...but it&apos;s quite another if you<br/>expect certain commas to cancel out, and your melodic motions still need to<br/>form &apos;closed loops&apos; even as your vertical harmony is smooth and pure.</p><p>AKJ</p><p>On Mon, May 30, 2011 at 12:14 AM, Keenan Pepper &lt;keenanpepper@...&gt;wrote:</p><p>&gt; --- In <a href="mailto:tuning@yahoogroups.com">tuning@yahoogroups.com</a>, Steve Parker &lt;steve@...&gt; wrote:<br/>&gt; &gt;<br/>&gt; &gt; I&apos;m not at all sure I agree. It&apos;s not a psycoacoustic<br/>&gt; &gt; problem, it&apos;s a tuning problem. Once you lock in with a comma shift<br/>&gt; &gt; somewhere, it becomes a long range problem to avoid drift<br/>&gt; &gt; rather than a chord to chord problem.<br/>&gt; &gt; With pro choirs sometimes these decisions need to<br/>&gt; &gt; be made by looking at the entire piece.<br/>&gt; &gt;<br/>&gt; &gt; Steve P.<br/>&gt;<br/>&gt; I don&apos;t understand. Could you explain specifically why you would expect<br/>&gt; this to happen with coupled digital oscillators?<br/>&gt;<br/>&gt; Note that I&apos;m not in any way disputing your conclusions from your<br/>&gt; experience with pro choirs. I&apos;m disputing their relevance to a purely<br/>&gt; mathematical process that doesn&apos;t involve humans.<br/>&gt;<br/>&gt; Keenan<br/>&gt;<br/>&gt;<br/>&gt;<br/>&gt;<br/>&gt; ------------------------------------<br/>&gt;<br/>&gt; You can configure your subscription by sending an empty email to one<br/>&gt; of these addresses (from the address at which you receive the list):<br/>&gt;  <a href="mailto:tuning-subscribe@yahoogroups.com">tuning-subscribe@yahoogroups.com</a> - join the tuning group.<br/>&gt;  <a href="mailto:tuning-unsubscribe@yahoogroups.com">tuning-unsubscribe@yahoogroups.com</a> - leave the group.<br/>&gt;  <a href="mailto:tuning-nomail@yahoogroups.com">tuning-nomail@yahoogroups.com</a> - turn off mail from the group.<br/>&gt;  <a href="mailto:tuning-digest@yahoogroups.com">tuning-digest@yahoogroups.com</a> - set group to send daily digests.<br/>&gt;  <a href="mailto:tuning-normal@yahoogroups.com">tuning-normal@yahoogroups.com</a> - set group to send individual emails.<br/>&gt;  <a href="mailto:tuning-help@yahoogroups.com">tuning-help@yahoogroups.com</a> - receive general help information.<br/>&gt; Yahoo! Groups Links<br/>&gt;<br/>&gt;<br/>&gt;<br/>&gt;</p><p>--<br/>Aaron Krister Johnson<br/><a href="http://www.akjmusic.com">http://www.akjmusic.com</a><br/><a href="http://www.untwelve.org">http://www.untwelve.org</a></p></div><h3>Keenan Pepper &#x3C;keenanpepper@...&#x3E;</h3><span>5/31/2011 12:21:31 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>Exciting news - I just got amsynth to successfully injection lock real chords!</p><p>It was quite surprising when I finally got it to work, because as I was debugging it it kept making all these weird chirps and gargling sounds, as well as harshly beating chords when it tried to adjust the frequencies the wrong way and never got into lock.</p><p>But eventually I fixed all my stupid programming errors and got all the parameters in a good range, and then suddenly I was hearing all these pure phase-locked JI chords - and the base tuning was still set to 12-equal!</p><p>It&apos;s still really rough because I haven&apos;t optimized anything, so it doesn&apos;t achieve lock as reliably as possible. But it already sounds pretty damn good!</p><p>--- In <a href="mailto:tuning@yahoogroups.com">tuning@yahoogroups.com</a>, Aaron Krister Johnson &lt;aaron@...&gt; wrote:<br/>&gt;<br/>&gt; Keenan,<br/>&gt;<br/>&gt; I think what Steve is asking is: how exactly would the oscillators<br/>&gt; counteract commatic drift in certain chord progressions? Or is this even a<br/>&gt; concern for you?<br/>&gt;<br/>&gt; The simplest example might be the JI progression that forms a diesis of<br/>&gt; 128/125 (from Cmaj-Emajor-G#major-B#major, where we want<br/>&gt; B#major=Cmajor)...it&apos;s one thing if you just want devil-may-care in<br/>&gt; tune-ness, drifting be damned, we&apos;re working with and designing music in<br/>&gt; pure JI, so that&apos;s part of the bargain...but it&apos;s quite another if you<br/>&gt; expect certain commas to cancel out, and your melodic motions still need to<br/>&gt; form &apos;closed loops&apos; even as your vertical harmony is smooth and pure.</p><p>OK, now that I have a rough working prototype I can actually test out things like this and just see what pops out. Without further ado, here&apos;s a recording I put in my files section:</p><p><a href="http://f1.grp.yahoofs.com/v1/8JHkTcd0hUMB3wgbMM_Gi8LDcoyfGm1gT5Awb1SlU7kWk_meLyWzNxn2VDx2zXNpN1CjDNPWI3rCArDpWo0gHS9Nw7VSGOWWwA/KeenanPepper/comma-test.mp3">http://f1.grp.yahoofs.com/v1/8JHkTcd0hUMB3wgbMM_Gi8LDcoyfGm1gT5Awb1SlU7kWk_meLyWzNxn2VDx2zXNpN1CjDNPWI3rCArDpWo0gHS9Nw7VSGOWWwA/KeenanPepper/comma-test.mp3</a></p><p>This is a &quot;typical&quot; result with the coupling scheme I have now, which is to say that I was actually pretty lucky in that all the chords got into lock this quickly and smoothly. =P</p><p>Some things to notice:</p><p>* The last chord really is exactly the same as the first chord. There is no overall drift, as there would unavoidably be with a choir or some other kinds of adaptive JI algorithms.<br/>* Thus, there are slight shifts within voices that are supposed to be holding &quot;the same note&quot;.<br/>* However, these shifts are not really that jarring, because the frequency of each oscillator changes continuously in a natural way as it interacts with the others. In fact, it&apos;s possible to make the transition smoother or more sudden by changing a parameter (basically the integration time of the frequency feedback signal).<br/>* Also, the overall 128/125 comma is distributed quite fairly between the three shifts. I made a longer version of this progression and plotted the spectra in Audacity, and the roots of the chords appear to be 266 Hz, 336 Hz, and 423 Hz. The ratios between these are indistinguishable from 2^(1/3) given the somewhat low spectral resolution provided. (The overall deviation from A-440 is an artifact of my bad implementation of the algorithm - each oscillator isn&apos;t supposed to interact with itself, but in fact it does because the cancellation is imperfect, so the overall pitch of all the oscillators is shifted by about the same amount even when only one is playing at a time.)</p><p>Keenan</p></div><h3>Mike Battaglia &#x3C;battaglia01@...&#x3E;</h3><span>5/31/2011 12:30:22 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>On Tue, May 31, 2011 at 3:21 AM, Keenan Pepper &lt;keenanpepper@...&gt; wrote:<br/>&gt;<br/>&gt; OK, now that I have a rough working prototype I can actually test out things like this and just see what pops out. Without further ado, here&apos;s a recording I put in my files section:<br/>&gt;<br/>&gt; <a href="http://f1.grp.yahoofs.com/v1/8JHkTcd0hUMB3wgbMM_Gi8LDcoyfGm1gT5Awb1SlU7kWk_meLyWzNxn2VDx2zXNpN1CjDNPWI3rCArDpWo0gHS9Nw7VSGOWWwA/KeenanPepper/comma-test.mp3">http://f1.grp.yahoofs.com/v1/8JHkTcd0hUMB3wgbMM_Gi8LDcoyfGm1gT5Awb1SlU7kWk_meLyWzNxn2VDx2zXNpN1CjDNPWI3rCArDpWo0gHS9Nw7VSGOWWwA/KeenanPepper/comma-test.mp3</a><br/>&gt;<br/>&gt; This is a &quot;typical&quot; result with the coupling scheme I have now, which is to say that I was actually pretty lucky in that all the chords got into lock this quickly and smoothly. =P</p><p>Wow! Not bad at all! A few questions -</p><p>1) Does your existing algorithm end up detuning individual harmonics<br/>in a single waveform, or simply alter the pitch of the entire<br/>aggregate waveform to perform the locking? It&apos;s the latter, right?<br/>2) Have you tried tetrads in 12-equal to see if it injection locks<br/>them to 4:5:6:7?<br/>3) Any chance we might get to hear this with 15- or 16-equal? Say a<br/>blackwood circle-of-fifths progression in the first case, or some<br/>mavila comma pump in the latter case (Cmaj -&gt; Em -&gt; Bm -&gt; Fmaj -&gt;<br/>Cmaj, where B -&gt; F is 3/2)</p><p>Still trying to really wrap my head around this man, damn! Good work!</p><p>-Mike</p></div><h3>Carl Lumma &#x3C;carl@...&#x3E;</h3><span>5/31/2011 1:18:51 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>Aaron Krister Johnson &lt;aaron@...&gt; wrote:</p><p>&gt; I think what Steve is asking is: how exactly would the<br/>&gt; oscillators counteract commatic drift in certain chord<br/>&gt; progressions? Or is this even a concern for you?</p><p>No drift can occur in Keenan&apos;s scheme because notes always<br/>begin sounding as scored.  Instead, the proposal will<br/>generate comma shifts.  But these shifts will be smaller<br/>than in strict JI when the scored pitches are tempered.<br/>It is effectively the same as Hermode tuning when the<br/>score is in 12-ET.  The potential advantage is that specific<br/>JI chords don&apos;t have to be programmed into the system in<br/>advance.</p><p>-Carl</p></div><h3>Carl Lumma &#x3C;carl@...&#x3E;</h3><span>5/31/2011 1:25:27 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>&quot;Keenan Pepper&quot; &lt;keenanpepper@...&gt; wrote:</p><p>&gt; OK, now that I have a rough working prototype I can actually<br/>&gt; test out things like this and just see what pops out. Without<br/>&gt; further ado, here&apos;s a recording I put in my files section:</p><p>Wow, impressive.  I&apos;m shocked they lock so quickly.  Can you<br/>confirm the attacks are 12-ET and that this is realtime<br/>performance (i.e. no lookahead)?</p><p>By the way, Manuel once posted some research which concluded<br/>that melodic pitch sensation depends more strongly on the<br/>attack of a note, whereas harmonic purity sensation depends<br/>more strongly on the sustain.  I&apos;d previously suggested this<br/>effect be exploited in adaptive tuning but so far yours is the<br/>first I know to actually do it (assuming the answers to the<br/>above are &quot;yes and yes&quot;).</p><p>Can you get an otonal tetrad to lock?</p><p>-Carl</p></div><h3>Steve Parker &#x3C;steve@...&#x3E;</h3><span>5/31/2011 2:11:42 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>Sorry.. I start messaging then don&apos;t have the time to keep up..</p><p>This is more or less what I&apos;m asking.<br/>Carl Lumma has clarified in that the locking is the choral sledgehammer approach of always beginning with the initial pitches.<br/>Also I was missing completely that the idea was not to lock to standard JI comma shifts but maybe to some halfway house.<br/>I hope I understand now..<br/>My musical aims may just be different, but this seems undesirable because you gain just tuning by sacrificing just voice-leading?</p><p>Steve P.</p><p>On 31 May 2011, at 04:53, Aaron Krister Johnson wrote:</p><p>&gt; Keenan,<br/>&gt;<br/>&gt;<br/>&gt; I think what Steve is asking is: how exactly would the oscillators &gt; counteract commatic drift in certain chord progressions? Or is this &gt; even a concern for you?<br/>&gt;<br/>&gt; The simplest example might be the JI progression that forms a diesis &gt; of 128/125 (from Cmaj-Emajor-G#major-B#major, where we want &gt; B#major=Cmajor)...it&apos;s one thing if you just want devil-may-care in &gt; tune-ness, drifting be damned, we&apos;re working with and designing &gt; music in pure JI, so that&apos;s part of the bargain...but it&apos;s quite &gt; another if you expect certain commas to cancel out, and your melodic &gt; motions still need to form &apos;closed loops&apos; even as your vertical &gt; harmony is smooth and pure.</p></div><h3>Daniel Nielsen &#x3C;nielsed@...&#x3E;</h3><span>5/31/2011 9:42:58 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>Hi, is the file still available? I&apos;m not able to link to it.<br/>Dan N</p><p>On Tue, May 31, 2011 at 4:11 AM, Steve Parker &lt;steve@...&gt; wrote:</p><p>&gt;<br/>&gt;<br/>&gt; Sorry.. I start messaging then don&apos;t have the time to keep up..<br/>&gt;<br/>&gt; This is more or less what I&apos;m asking.<br/>&gt; Carl Lumma has clarified in that the locking is the choral sledgehammer<br/>&gt; approach of always beginning with the initial pitches.<br/>&gt; Also I was missing completely that the idea was not to lock to standard JI<br/>&gt; comma shifts but maybe to some halfway house.<br/>&gt; I hope I understand now..<br/>&gt; My musical aims may just be different, but this seems undesirable because<br/>&gt; you gain just tuning by sacrificing just voice-leading?<br/>&gt;<br/>&gt; Steve P.<br/>&gt;<br/>&gt; On 31 May 2011, at 04:53, Aaron Krister Johnson wrote:<br/>&gt;<br/>&gt; Keenan,<br/>&gt;<br/>&gt; I think what Steve is asking is: how exactly would the oscillators<br/>&gt; counteract commatic drift in certain chord progressions? Or is this even a<br/>&gt; concern for you?<br/>&gt;<br/>&gt; The simplest example might be the JI progression that forms a diesis of<br/>&gt; 128/125 (from Cmaj-Emajor-G#major-B#major, where we want<br/>&gt; B#major=Cmajor)...it&apos;s one thing if you just want devil-may-care in<br/>&gt; tune-ness, drifting be damned, we&apos;re working with and designing music in<br/>&gt; pure JI, so that&apos;s part of the bargain...but it&apos;s quite another if you<br/>&gt; expect certain commas to cancel out, and your melodic motions still need to<br/>&gt; form &apos;closed loops&apos; even as your vertical harmony is smooth and pure.<br/>&gt;<br/>&gt;<br/>&gt;<br/>&gt;</p></div><h3>Aaron Krister Johnson &#x3C;aaron@...&#x3E;</h3><span>5/31/2011 1:28:15 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>+1...I had the same problem, Keenan. I&apos;d love to hear it, and how can<br/>download and install the changed source for amSynth? Is the author accepting<br/>your patch?</p><p>AKJ</p><p>On Tue, May 31, 2011 at 11:42 AM, Daniel Nielsen &lt;nielsed@...&gt; wrote:</p><p>&gt;<br/>&gt;<br/>&gt; Hi, is the file still available? I&apos;m not able to link to it.<br/>&gt; Dan N<br/>&gt;<br/>&gt;<br/>&gt; On Tue, May 31, 2011 at 4:11 AM, Steve Parker &lt;steve@...&gt; wrote:<br/>&gt;<br/>&gt;&gt;<br/>&gt;&gt;<br/>&gt;&gt; Sorry.. I start messaging then don&apos;t have the time to keep up..<br/>&gt;&gt;<br/>&gt;&gt; This is more or less what I&apos;m asking.<br/>&gt;&gt; Carl Lumma has clarified in that the locking is the choral sledgehammer<br/>&gt;&gt; approach of always beginning with the initial pitches.<br/>&gt;&gt; Also I was missing completely that the idea was not to lock to standard JI<br/>&gt;&gt; comma shifts but maybe to some halfway house.<br/>&gt;&gt; I hope I understand now..<br/>&gt;&gt; My musical aims may just be different, but this seems undesirable because<br/>&gt;&gt; you gain just tuning by sacrificing just voice-leading?<br/>&gt;&gt;<br/>&gt;&gt; Steve P.<br/>&gt;&gt;<br/>&gt;&gt; On 31 May 2011, at 04:53, Aaron Krister Johnson wrote:<br/>&gt;&gt;<br/>&gt;&gt; Keenan,<br/>&gt;&gt;<br/>&gt;&gt; I think what Steve is asking is: how exactly would the oscillators<br/>&gt;&gt; counteract commatic drift in certain chord progressions? Or is this even a<br/>&gt;&gt; concern for you?<br/>&gt;&gt;<br/>&gt;&gt; The simplest example might be the JI progression that forms a diesis of<br/>&gt;&gt; 128/125 (from Cmaj-Emajor-G#major-B#major, where we want<br/>&gt;&gt; B#major=Cmajor)...it&apos;s one thing if you just want devil-may-care in<br/>&gt;&gt; tune-ness, drifting be damned, we&apos;re working with and designing music in<br/>&gt;&gt; pure JI, so that&apos;s part of the bargain...but it&apos;s quite another if you<br/>&gt;&gt; expect certain commas to cancel out, and your melodic motions still need to<br/>&gt;&gt; form &apos;closed loops&apos; even as your vertical harmony is smooth and pure.<br/>&gt;&gt;<br/>&gt;&gt;<br/>&gt;&gt;<br/>&gt;<br/>&gt;<br/>&gt;<br/>&gt;</p><p>--<br/>Aaron Krister Johnson<br/><a href="http://www.akjmusic.com">http://www.akjmusic.com</a><br/><a href="http://www.untwelve.org">http://www.untwelve.org</a></p></div><h3>Keenan Pepper &#x3C;keenanpepper@...&#x3E;</h3><span>5/31/2011 3:11:57 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>--- In <a href="mailto:tuning@yahoogroups.com">tuning@yahoogroups.com</a>, &quot;Carl Lumma&quot; &lt;carl@...&gt; wrote:<br/>&gt;<br/>&gt; &quot;Keenan Pepper&quot; &lt;keenanpepper@&gt; wrote:<br/>&gt;<br/>&gt; &gt; OK, now that I have a rough working prototype I can actually<br/>&gt; &gt; test out things like this and just see what pops out. Without<br/>&gt; &gt; further ado, here&apos;s a recording I put in my files section:<br/>&gt;<br/>&gt; Wow, impressive.  I&apos;m shocked they lock so quickly.  Can you<br/>&gt; confirm the attacks are 12-ET and that this is realtime<br/>&gt; performance (i.e. no lookahead)?</p><p>It&apos;s definitely realtime performance (I played the notes in realtime with vkeybd).</p><p>I had to think a little about the &quot;attacks in 12-ET&quot; question. The attacks should have been 12-equal, but they might not have been *exactly* that because there was a bug in my code where I forgot to reset the IIR filters when the note was played again after being inactive (now fixed). But in practice that effect should be tiny because the IIR filter &quot;memory&quot; values quickly go to zero when the note decays.</p><p>So yes, basically the oscillators always start out with their natural frequency for each attack (in this case 12-equal).</p><p>&gt; By the way, Manuel once posted some research which concluded<br/>&gt; that melodic pitch sensation depends more strongly on the<br/>&gt; attack of a note, whereas harmonic purity sensation depends<br/>&gt; more strongly on the sustain.  I&apos;d previously suggested this<br/>&gt; effect be exploited in adaptive tuning but so far yours is the<br/>&gt; first I know to actually do it (assuming the answers to the<br/>&gt; above are &quot;yes and yes&quot;).<br/>&gt;<br/>&gt; Can you get an otonal tetrad to lock?</p><p>In 12-equal, no can do. In a better temperament, piece of cake. See my reply to Mike.</p><p>Keenan</p></div><h3>Keenan Pepper &#x3C;keenanpepper@...&#x3E;</h3><span>5/31/2011 3:12:19 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>--- In <a href="mailto:tuning@yahoogroups.com">tuning@yahoogroups.com</a>, Mike Battaglia &lt;battaglia01@...&gt; wrote:<br/>&gt; Wow! Not bad at all! A few questions -<br/>&gt;<br/>&gt; 1) Does your existing algorithm end up detuning individual harmonics<br/>&gt; in a single waveform, or simply alter the pitch of the entire<br/>&gt; aggregate waveform to perform the locking? It&apos;s the latter, right?</p><p>Right, it&apos;s the latter. I&apos;m not really sure what purpose the former would serve, because the harmonics of any periodic signal are already perfectly phase-locked to each other.</p><p>The only way amsynth can make a timbre with inharmonic overtones is if you manually detune the second oscillator from the first one in the same voice by a non-JI interval (amsynth has two oscillators per voice). In that case it would be easy to simply let each oscillator have its own independent frequency feedback signal and lock to each other, but the overall effect would be difficult to distinguish from what you&apos;d get just by setting the detuning to a JI interval in the first place!</p><p>Maybe if you described something specific you&apos;d like to achieve with this &quot;independent control over harmonics&quot; idea, I&apos;d better understand what you have in mind.</p><p>&gt; 2) Have you tried tetrads in 12-equal to see if it injection locks<br/>&gt; them to 4:5:6:7?</p><p>This definitely doesn&apos;t work. I tried many different combinations of parameters (currently I have just two - coupling strength and integration time), but 0,400,700,1000 cents simply does not want to lock to 4:5:6:7.</p><p>It seems that one of three things always happens:</p><p>The first possibility is that we don&apos;t even have enough coupling for a 4:5:6 chord to lock, so there&apos;s no way 4:5:6:7 is going to lock.</p><p>The second possibility is that 4:5:6 locks fine, but when you try to add 7 it just screeches away all by itself, never locking with the other three notes. (I actually think it managed to lock to some much more complicated chord a few times, but it&apos;s hard to tell.)</p><p>The third possibility, which happens when you turn up the coupling too much, is that the obvious JI intervals you&apos;d expect things to lock to become unstable with respect to even simpler intervals. For example you&apos;d play a 12-equal major third but it would lock to 4/3, not 5/4. In this case if you try to play a 4:5:6:7 tetrad it&apos;ll try to lock to 4:5:6:8 instead (but usually end up just screeching and gurgling and sounding very unhappy).</p><p>On the other hand, if you set the base tuning to 1/4-comma meantone and play an augmented 6th chord, 4:5:6:7 just pops right out, no trouble at all.</p><p>&gt; 3) Any chance we might get to hear this with 15- or 16-equal? Say a<br/>&gt; blackwood circle-of-fifths progression in the first case, or some<br/>&gt; mavila comma pump in the latter case (Cmaj -&gt; Em -&gt; Bm -&gt; Fmaj -&gt;<br/>&gt; Cmaj, where B -&gt; F is 3/2)</p><p><a href="http://f1.grp.yahoofs.com/v1/4GTlTettRlHYikrwZ-HC4fZOnVjDeYINiLV1mA34YYyv05zqnArXPADuHxamhXGALr1mbv_C2H3PAycwmV_YFws9X82IjKd86A/KeenanPepper/blackwood.mp3">http://f1.grp.yahoofs.com/v1/4GTlTettRlHYikrwZ-HC4fZOnVjDeYINiLV1mA34YYyv05zqnArXPADuHxamhXGALr1mbv_C2H3PAycwmV_YFws9X82IjKd86A/KeenanPepper/blackwood.mp3</a></p><p><a href="http://f1.grp.yahoofs.com/v1/4GTlTU33_2LYikrw_qd0kBJVO8peZeiIdQQ37U6Pht2xrZtWfC7ltNxk-URPAbHLlt_SyenhsID_h1GaL4YeERwyk-iz84QSog/KeenanPepper/mavila.mp3">http://f1.grp.yahoofs.com/v1/4GTlTU33_2LYikrw_qd0kBJVO8peZeiIdQQ37U6Pht2xrZtWfC7ltNxk-URPAbHLlt_SyenhsID_h1GaL4YeERwyk-iz84QSog/KeenanPepper/mavila.mp3</a></p><p>This proved pretty difficult to do, for the same reasons as above. But nevertheless I was able to get most (all?) of the chords in those progressions to lock, with much tweaking of parameters. The ability to lock depends strongly on the voicing of the chords, and occasionally also on the *order* in which notes are added to the chord. There&apos;s definitely hysteresis and such.</p><p>If I use a more accurate base tuning, e.g. meantone, everything seems to work much better...</p><p>&gt; Still trying to really wrap my head around this man, damn! Good work!</p><p>Thanks!</p><p>Keenan</p></div><h3>Keenan Pepper &#x3C;keenanpepper@...&#x3E;</h3><span>5/31/2011 3:28:50 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>--- In <a href="mailto:tuning@yahoogroups.com">tuning@yahoogroups.com</a>, Aaron Krister Johnson &lt;aaron@...&gt; wrote:<br/>&gt;<br/>&gt; +1...I had the same problem, Keenan. I&apos;d love to hear it, and how can<br/>&gt; download and install the changed source for amSynth? Is the author accepting<br/>&gt; your patch?</p><p>The file is still working for me. I just uploaded it to the Yahoo group files section in the usual way.</p><p>But in case that&apos;s not working for some people, I also uploaded the examples to Wikimedia Commons (in Ogg Vorbis format):</p><p><a href="http://commons.wikimedia.org/wiki/File:Comma-test.ogg">http://commons.wikimedia.org/wiki/File:Comma-test.ogg</a><br/><a href="http://commons.wikimedia.org/wiki/File:Blackwood.ogg">http://commons.wikimedia.org/wiki/File:Blackwood.ogg</a><br/><a href="http://commons.wikimedia.org/wiki/File:Mavila.ogg">http://commons.wikimedia.org/wiki/File:Mavila.ogg</a></p><p>As for amsynth, the maintainer Nick Dowell said he&apos;s accepting my alternate tuning patches as-is, so in the next release of amsynth you&apos;ll be able to load any Scala scale file or keyboard map. In the meantime, if you&apos;re familiar with these things, you can get the patch at</p><p><a href="http://f1.grp.yahoofs.com/v1/4GTlTefIMcXYikrwNY_ljBeBAKnJeiIk22z7ZmdavkJnLf8oMwwep1QBA8KZ5F7xs5QqUVmf0WPgHtlb8VR9duwFAY88eSzR6g/KeenanPepper/alternate-tuning.patch">http://f1.grp.yahoofs.com/v1/4GTlTefIMcXYikrwNY_ljBeBAKnJeiIk22z7ZmdavkJnLf8oMwwep1QBA8KZ5F7xs5QqUVmf0WPgHtlb8VR9duwFAY88eSzR6g/KeenanPepper/alternate-tuning.patch</a></p><p>and check out the Subversion source, patch it, and compile it.</p><p>However, the injection locking stuff is still really hacked together and nowhere near even beta quality, so it might be a while before you can try that out.</p><p>Keenan</p></div>