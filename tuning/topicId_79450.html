<a href="/tuning">back to list</a><h1>Perfect inharmonicity</h1><h3>Tom Dent &#x3C;stringph@...&#x3E;</h3><span>12/9/2008 1:13:38 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>Some rather startling (at least to me, initially) conclusions I found<br/>yesterday evening...</p><p>Go back to the formula for the overtones</p><p>f_n = n f_0 sqrt(1 + B n^2)</p><p>They said &apos;f_0 is the fundamental&apos;, but that can&apos;t be exactly the<br/>case: f_0 is what the fundamental would be if there were no<br/>inharmonicity. The real fundamental is<br/>f_1 = f_0 sqrt(1 + B).</p><p>Now consider two notes with &apos;ideal fundamentals&apos; f_a and f_b played on<br/>strings of inharmonicity B_a and B_b. We suppose they have<br/>nearly-coincident m&apos;th and n&apos;th partials f_a,m and f_b,n. The true<br/>frequencies will be</p><p>f_a,m = m f_a sqrt(1+B_a m^2)<br/>f_b,n = n f_b sqrt(1+B_b n^2)</p><p>Now we have m f_a approximately equal to n f_b. The coincidence<br/>condition will include the ratio of square roots, which is how the<br/>inharmonicity mucks things up. Even if you get partials &apos;m&apos; and &apos;n&apos; to<br/>coincide, if you go up to 2m and 2n you get a different ratio of<br/>square roots - you can&apos;t get the overtones an octave above to work out.<br/>But there is one exception! That is: if B is a constant times f_0^2.<br/>Say B = f_0^2/f_B^2, where f_B is some very large frequency.</p><p>Suppose B_a = f_a^2/f_B^2, B_b = f_b^2/f_B^2. Now for the two<br/>coincident partials we get the square root factors</p><p>sqrt(1 + m^2 f_a^2/f_B^2)<br/>sqrt(1 + n^2 f_b^2/f_B^2)</p><p>but these are the same because m f_a = n f_b!</p><p>So, providing that the inharmonicity B increases as the square of the<br/>frequency, there is *no* conflict in tuning two notes such that<br/>partials n/m, 2n/2m, 3n/3m, etc. etc. all match. What you get is just<br/>the naive relations m f_a = n f_b between the &apos;ideal fundamentals&apos;.<br/>Although the frequencies are stretched they mesh together.</p><p>Now look at the B formula again. We had<br/>B = metal properties * d^4/(l^2 T)</p><p>But T = stuff * d^2 f_0^2 l^2, so we get</p><p>B = stuff * d^2/(f_0^2 l^4)</p><p>Now remember &apos;Pythagorean scaling&apos; - the length of a string is inverse<br/>to its frequency: if this is the case, f_0^4 l^4 can be taken nearly<br/>constant.</p><p>B = stuff * d^2 f_0^2 /(f_0^4 l^4)</p><p>So, if the string diameter and the scaling proportion (f_0 l) stay<br/>constant up the scale, you get exactly the right relation B = stuff *<br/>f_0^2 !<br/>Basically: The most naively constructed instrument with length<br/>doubling every octave and the same string thickness everywhere, has<br/>just the right distribution of inharmonicity to allow perfectly<br/>coinciding partials.</p><p>In reality, string diameter gently decreases and (f_0 l) gently<br/>increases up the scale, for good musical/technical reasons, so<br/>inharmonicity doesn&apos;t increase so fast as would be required for a<br/>perfect match.</p><p>Although, if you look at the graph at<br/><a href="http://i30.photobucket.com/albums/c348/mireut/sandersonB.png">http://i30.photobucket.com/albums/c348/mireut/sandersonB.png</a><br/>the slope of a lot of the lines is nearly the &apos;ideal&apos; factor of 4 per<br/>octave in pitch (eg increase from 0.01 to 10 over 5 octaves).</p><p>Any note or register that &apos;sticks out&apos; above those smoothly rising<br/>lines will cause trouble because its higher partials will be<br/>increasingly sharp (with increasing n) compared to the partials at<br/>similar frequency of other notes it should make harmony with.</p><p>That&apos;s why although bass notes have quite low inharmonicity measured<br/>by B they cause problems, since they don&apos;t maintain the precipitous<br/>decline that would be consistent with the rest of the scale. A more<br/>useful measure would be B/f_0^2.</p><p>The slow decrease of B/f_0^2 through the tenor and middle also<br/>explains (hopefully) why Bill Bremmer&apos;s &apos;2:1&apos;, &apos;4:2&apos; and &apos;6:3&apos; octaves<br/>are different. If the higher string is thinner and/or has<br/>proportionately longer scaling, its partials won&apos;t &apos;keep up&apos; with the<br/>lower note&apos;s so it would have to be increasingly sharpened to get a<br/>match of higher and higher partials.</p><p>Do stop me if you know all this already...<br/>~~~T~~~</p></div><h3>Carl Lumma &#x3C;carl@...&#x3E;</h3><span>12/21/2008 6:06:04 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>Sorry for the delayed response.  I certainly didn&apos;t know<br/>that.  I knew that all scale designers strive for smoothly-<br/>increasing inharmonicity curves, but I had always puzzled<br/>as to why.</p><p>-Carl</p><p>--- In <a href="mailto:tuning@yahoogroups.com">tuning@yahoogroups.com</a>, &quot;Tom Dent&quot; &lt;stringph@...&gt; wrote:<br/>&gt;<br/>&gt; Some rather startling (at least to me, initially) conclusions<br/>&gt; I found yesterday evening...<br/>&gt;<br/>&gt; Go back to the formula for the overtones<br/>&gt;<br/>&gt; f_n = n f_0 sqrt(1 + B n^2)<br/>&gt;<br/>&gt; They said &apos;f_0 is the fundamental&apos;, but that can&apos;t be exactly<br/>&gt; the case: f_0 is what the fundamental would be if there were no<br/>&gt; inharmonicity. The real fundamental is<br/>&gt; f_1 = f_0 sqrt(1 + B).<br/>&gt;<br/>&gt; Now consider two notes with &apos;ideal fundamentals&apos; f_a and f_b<br/>&gt; played on strings of inharmonicity B_a and B_b. We suppose they<br/>&gt; have nearly-coincident m&apos;th and n&apos;th partials f_a,m and f_b,n.<br/>&gt; The true frequencies will be<br/>&gt;<br/>&gt; f_a,m = m f_a sqrt(1+B_a m^2)<br/>&gt; f_b,n = n f_b sqrt(1+B_b n^2)<br/>&gt;<br/>&gt; Now we have m f_a approximately equal to n f_b. The coincidence<br/>&gt; condition will include the ratio of square roots, which is how the<br/>&gt; inharmonicity mucks things up. Even if you get partials &apos;m&apos; and<br/>&gt; &apos;n&apos; to coincide, if you go up to 2m and 2n you get a different<br/>&gt; ratio of square roots - you can&apos;t get the overtones an octave<br/>&gt; above to work out.  But there is one exception! That is: if B is<br/>&gt; a constant times f_0^2.  Say B = f_0^2/f_B^2, where f_B is some<br/>&gt; very large frequency.<br/>&gt;<br/>&gt; Suppose B_a = f_a^2/f_B^2, B_b = f_b^2/f_B^2. Now for the two<br/>&gt; coincident partials we get the square root factors<br/>&gt;<br/>&gt; sqrt(1 + m^2 f_a^2/f_B^2)<br/>&gt; sqrt(1 + n^2 f_b^2/f_B^2)<br/>&gt;<br/>&gt; but these are the same because m f_a = n f_b!<br/>&gt;<br/>&gt; So, providing that the inharmonicity B increases as the square of<br/>&gt; the frequency, there is *no* conflict in tuning two notes such<br/>&gt; that partials n/m, 2n/2m, 3n/3m, etc. etc. all match. What you<br/>&gt; get is just the naive relations m f_a = n f_b between the &apos;ideal<br/>&gt; fundamentals&apos;.  Although the frequencies are stretched they mesh<br/>&gt; together.<br/>&gt;<br/>&gt; Now look at the B formula again. We had<br/>&gt; B = metal properties * d^4/(l^2 T)<br/>&gt;<br/>&gt; But T = stuff * d^2 f_0^2 l^2, so we get<br/>&gt;<br/>&gt; B = stuff * d^2/(f_0^2 l^4)<br/>&gt;<br/>&gt; Now remember &apos;Pythagorean scaling&apos; - the length of a string is<br/>&gt; inverse to its frequency: if this is the case, f_0^4 l^4 can be<br/>&gt; taken nearly constant.<br/>&gt;<br/>&gt; B = stuff * d^2 f_0^2 /(f_0^4 l^4)<br/>&gt;<br/>&gt; So, if the string diameter and the scaling proportion (f_0 l) stay<br/>&gt; constant up the scale, you get exactly the right relation<br/>&gt; B = stuff * f_0^2 !<br/>&gt; Basically: The most naively constructed instrument with length<br/>&gt; doubling every octave and the same string thickness everywhere, has<br/>&gt; just the right distribution of inharmonicity to allow perfectly<br/>&gt; coinciding partials.<br/>&gt;<br/>&gt; In reality, string diameter gently decreases and (f_0 l) gently<br/>&gt; increases up the scale, for good musical/technical reasons, so<br/>&gt; inharmonicity doesn&apos;t increase so fast as would be required for a<br/>&gt; perfect match.<br/>&gt;<br/>&gt; Although, if you look at the graph at<br/>&gt; <a href="http://i30.photobucket.com/albums/c348/mireut/sandersonB.png">http://i30.photobucket.com/albums/c348/mireut/sandersonB.png</a><br/>&gt; the slope of a lot of the lines is nearly the &apos;ideal&apos; factor of<br/>&gt; 4 per octave in pitch (eg increase from 0.01 to 10 over 5 octaves).<br/>&gt;<br/>&gt; Any note or register that &apos;sticks out&apos; above those smoothly rising<br/>&gt; lines will cause trouble because its higher partials will be<br/>&gt; increasingly sharp (with increasing n) compared to the partials at<br/>&gt; similar frequency of other notes it should make harmony with.<br/>&gt;<br/>&gt; That&apos;s why although bass notes have quite low inharmonicity measured<br/>&gt; by B they cause problems, since they don&apos;t maintain the precipitous<br/>&gt; decline that would be consistent with the rest of the scale. A more<br/>&gt; useful measure would be B/f_0^2.<br/>&gt;<br/>&gt; The slow decrease of B/f_0^2 through the tenor and middle also<br/>&gt; explains (hopefully) why Bill Bremmer&apos;s &apos;2:1&apos;, &apos;4:2&apos; and &apos;6:3&apos;<br/>&gt; octaves are different. If the higher string is thinner and/or has<br/>&gt; proportionately longer scaling, its partials won&apos;t &apos;keep up&apos; with<br/>&gt; the lower note&apos;s so it would have to be increasingly sharpened to<br/>&gt; get a match of higher and higher partials.<br/>&gt;<br/>&gt; Do stop me if you know all this already...<br/>&gt; ~~~T~~~</p></div>