<a href="/tuning">back to list</a><h1>Using Scala to insert pitch-bends (Was t-m: "does not work in the 11-limit")</h1><h3>George D. Secor &#x3C;gdsecor@yahoo.com&#x3E;</h3><span>11/21/2003 10:13:41 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>I am replying on the main list and changing the subject line, since<br/>the topic was no longer appropriate.</p><p>--- In <a href="mailto:tuning-math@yahoogroups.com">tuning-math@yahoogroups.com</a>, &quot;Manuel Op de Coul&quot;<br/>&lt;manuel.op.de.coul@e...&gt; wrote (message #7898):<br/>&gt;<br/>&gt; George wrote:<br/>&gt; &gt;I wanted to see if I could create<br/>&gt; &gt;midi files (consisting of only a single track) from scratch in<br/>Scala<br/>&gt; &gt;(which would save me the trouble of calculating and manually<br/>&gt; &gt;inserting pitch-bends), which I could then import into Cakewalk<br/>(one<br/>&gt; &gt;track at a time).<br/>&gt;<br/>&gt; Ah, I assumed you were using Cakewalk to enter the notes more<br/>quickly,<br/>&gt; but you want to use Scala to enter the notes, and use Cakewalk to<br/>adjust<br/>&gt; the tuning at places afterwards. Well, this is a use case I hadn&apos;t<br/>&gt; envisioned, since with Scala you can change the tuning quickly, but<br/>&gt; typing note commands is very slowly.</p><p>I&apos;m sorry, but I guess that what I said was misleading.  Forget about<br/>everything that I said previously and let me start fresh.</p><p>What I originally had in mind was to create a midi file in Cakewalk<br/>without any pitch bends.  All of the notes in each track would be on<br/>the same channel, with no simultaneous notes in any track being<br/>separated by an interval other than an octave (or multiple octave).<br/>Each track would have its own channel, and a change of channel would<br/>never occur on any track, so that there would be a one-to-one<br/>correspondence between tracks and channels.</p><p>Once the file was created, I then wanted to import it into Scala,<br/>load a scale, and then have Scala insert the pitch-bends into my file<br/>(deleting any pitch-bends that might already be there), but without<br/>making any changes to the track or channel assignments in my source<br/>file.  I would then save the result as a midi file and import it back<br/>into Cakewalk.  If Scala doesn&apos;t allow this at present, I wouldn&apos;t<br/>think that it would be difficult to provide that option (hint, hint).</p><p>However, let me ask something.  In a Cakewalk work file I&apos;m able to<br/>specify whether a note will display as a sharp or flat (e.g., G# or<br/>Ab), but if I save it as a midi file, would that distinction be lost<br/>(such that Scala would not tell them apart)?  If so, I would then<br/>have to restrict myself to scales having no more than 12 pitches in<br/>the octave.</p><p>Unless: if the insert-pitch-bend operation would allow the user to<br/>select which channel(s) would be affected in a pass, then a new scale<br/>could be loaded between passes to allow for additional pitches<br/>(supposing, for example, that my midi source file were to have two<br/>channels on each track (say channels 1 and 2 on track 1, channels 3<br/>and 4 on track 2, chs. 5 and 6 on trk. 3, etc.)</p><p>Does this make any sense?</p><p>&gt; &gt;Your Scala documentation indicates that pitch-bend<br/>&gt; &gt;events are minimized, so that you are constantly *changing<br/>channels*<br/>&gt; &gt;from one note to the next (rather than inserting *pitch-bend<br/>events*<br/>&gt; &gt;for a single channel).<br/>&gt;<br/>&gt; This is not entirely true anymore, I forgot to update the<br/>documentation<br/>&gt; for that. There are also possibly program change and parameter<br/>change<br/>&gt; events involved in channel switching. So minimising pitch bend<br/>events<br/>&gt; doesn&apos;t make sense if it causes many more other messages.<br/>&gt;<br/>&gt; There may be a way to do what you want but I&apos;ve never tried it.<br/>&gt; You can exclude midi channels from being used. So if you exclude all<br/>&gt; channels except the first for the first track, then generate the<br/>&gt; midi file for that track and for the next track exclude all<br/>&gt; channels except the second one, generate that, etc.<br/>&gt; I don&apos;t see why that wouldn&apos;t work.</p><p>I did see that feature in the documentation, but I&apos;ve come to the<br/>conclusion that doing this a track at a time may be as time-consuming<br/>as inserting pitch-bends manually, if this involves importing and<br/>exporting each track to and from Scala as separate midi files --<br/>unless it is possible to generate the pitch-bends in Scala one track<br/>at a time, then reset the channel exclusions and then do the next<br/>track, etc., as I suggested above.</p><p>&gt; Generating MTS from .seq files isn&apos;t a good solution because it<br/>keeps<br/>&gt; the channels, but switches the note numbers on a round-robin<br/>&gt; basis. That will be even more confusing to look at in Cakewalk :-)<br/>&gt;<br/>&gt; But perhaps still the most efficient solution would be to discard<br/>&gt; Cakewalk from the process, and do all changes in one seq file, not<br/>&gt; looking at the midi file.</p><p>And how convenient is it to display and edit the notes in a seq<br/>file?  Cakewalk has features that I would not want to lose.</p><p>--George</p></div><h3>Manuel Op de Coul &#x3C;manuel.op.de.coul@eon-benelux.com&#x3E;</h3><span>11/21/2003 2:36:48 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>George wrote:<br/>&gt;If Scala doesn&apos;t allow this at present, I wouldn&apos;t<br/>&gt;think that it would be difficult to provide that option (hint, hint).</p><p>It doesn&apos;t no. You might get it by accident, perhaps if all<br/>channels use different parameters, but it&apos;s not probable.<br/>I&apos;ll think about adding it, wouldn&apos;t be difficult indeed.</p><p>&gt; In a Cakewalk work file I&apos;m able to<br/>&gt;specify whether a note will display as a sharp or flat (e.g., G# or<br/>&gt;Ab), but if I save it as a midi file, would that distinction be lost</p><p>Yes, but there&apos;s a but. If Cakewalk allows inserting key change<br/>messages, then Scala can write it to a seq files with proper (meantone)<br/>sharp or flat. But it&apos;s not completely flexible then.</p><p>&gt;If so, I would then<br/>&gt;have to restrict myself to scales having no more than 12 pitches in<br/>&gt;the octave.</p><p>Or borrow keys from unused octaves and use a keyboard mapping.<br/>Probably easier than the method above.</p><p>&gt;Does this make any sense?</p><p>I think so, instead of abusing pitch bend statements for this, one<br/>could use an unregistered midi parameter for switching scales.<br/>I have considered implementing it, but no one has asked for it yet.</p><p>&gt;And how convenient is it to display and edit the notes in a seq<br/>&gt;file?  Cakewalk has features that I would not want to lose.</p><p>Depends how quick you are with Wordpad or some such.<br/>But you can type Sagittal names...</p><p>Manuel</p></div>