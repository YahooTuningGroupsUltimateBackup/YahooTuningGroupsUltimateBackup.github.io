<!DOCTYPE html>
            <html>
            <head>
            <meta charset="utf-8">
                <meta name="viewport"
            content="width=device-width, height=device-height, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no">
                <meta http-equiv="x-ua-compatible" content="ie=edge">
                <title>Yahoo Tuning Groups Ultimate Backup tuning Euclid/Stern-Broot algorithms</title>
                <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
            </head>
            <body>
            </body>
            </html>
        <a href="/tuning">back to list</a><h1>Euclid/Stern-Broot algorithms</h1><h3><a id=13207 href="#13207">ðŸ”—</a>Pierre Lamothe &#x3C;plamothe@aei.ca&#x3E;</h3><span>9/21/2000 12:37:05 PM</span><button style="float: right; margin-right: 20px">toggle monospace</button><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>For the benefit of those who would like but have difficulties to implant<br/>tree navigation in tones and by procrastination to resume my web pages<br/>writing.</p><p>There exist a unique simple mathematical structure that appears<br/>superficially as several distincts objets (Stern-Brocot tree, Euclid tree,<br/>binary rank tree, modular matrix 2x2 tree) or very close objects like Farey<br/>series, continued fractions and Euclid algorithm.</p><p>Navigation for tones in this structure is very easy.</p><p>There are two essential algorithms : to go up and to go down. In my<br/>convention, like in nature, root is low and leaves are high. I show yet my<br/>logarithmic representation of Stern-Brocot subtree in first octave.</p><p><a href="http://www.aei.ca/~plamothe/pix/stern-brocot.gif">http://www.aei.ca/~plamothe/pix/stern-brocot.gif</a></p><p>[To go up]</p><p>In basic approach, for going up in Stern-Brocot tree, starting with 1/1<br/>value, we have to keep trace of current ratio x/y and precedent adjacent<br/>left a/b and right c/d ratios. To go right, for example, is to put value<br/>x/y in left a/b and value (x+c)/(y+d) in current x/y.</p><p>Knowing isomorphism of Stern-Brocot and modular matrix trees it&apos;s possible to<br/>clarify algorithm. Current x/y is identified with matrix (c,d)(a,b) were<br/>(c,d) and (a,b) are the left and right descending columns of the matrix.</p><p>Starting with identity matrix (1,0)(0,1) then to go right is to add left<br/>column value in right one, and to go left is to add right column value in<br/>left one. Is&apos;nt cute ? At end, adding rows gives ratio in Stern-Brocot tree<br/>and adding columns gives ratio in Euclid tree.</p><p>Example :</p><p>What is the ratio of rank 565 (1000110101 binary form) in Stern-Brocot tree<br/>and then in Euclid tree ?</p><p>In rank 1000110101, the first 1 represents starting identity matrix and,<br/>subsequently, 0 represents &quot;to go left&quot; and 1 &quot;to go right&quot;.</p><p>1 (1,0)(0,1)<br/>0 (1,1)(0,1)<br/>0 (1,2)(0,1)<br/>0 (1,3)(0,1)<br/>1 (1,3)(1,4)<br/>1 (1,3)(2,7)<br/>0 (3,10)(2,7)<br/>1 (3,10)(5,17)<br/>0 (8,27)(5,17)<br/>1 (8,27)(13,44)</p><p>Adding rows gives 21/71 in Stern-Brocot tree.<br/>Adding colums gives 57/35 in Euclid tree.</p><p>If we want restriction at particular subtree like first octave, a final<br/>operation has to be added representing restriction. Adding rows represents<br/>starting at root 1/1 for all tree. Here, (8a+13b)/(27a+44b) represents<br/>value of rank 565 in subtree of root a/b. It&apos;s a multiplication of the<br/>matrix by vector (a,b). Thus, ratio of rank 565 in first octave is<br/>(8*3+13*2)/(27*3+44*2) = 50/169.</p><p>To go up in Euclid tree only is yet simpler. I give only example here.</p><p>1  1/1<br/>0  1/2<br/>0  1/3<br/>0  1/4<br/>1  5/4<br/>1  9/4<br/>0  9/13<br/>1  22/13<br/>0  22/35<br/>1  57/35</p><p>[To go down]</p><p>If we ask what is the rank of 21/71 in Stern-Brocot tree, we can&apos;t directly<br/>go down for precedent adjacent left and right ratios are unknown. We can,<br/>in the basic manner, start with 1/1 and go up, comparing 21/71 and current<br/>value to know if we go left or right. But rows have to be added for<br/>comparison.</p><p>Knowing Euclid and Stern-Brocot are transposed trees, we can do an almost<br/>magic<br/>go down in Euclid tree. Transposed trees implies that ranks 1000110101 and<br/>1101011000 have their values permuted in Stern-Brocot and Euclid. For<br/>transposition, first 1 is fix and others are exchanged, last becoming first.</p><p>Algorithm is so easy than I give example first :</p><p>21 21 21 21 13  5  5  2  2  1<br/>71 50 29  8  8  8  3  3  1  1</p><p> 0  0  0  1  1  0  1  0  1 (1)</p><p>Rank in Euclid tree has to be read right to left 1101011000 and<br/>transposition becomes thus only transfert of last 1 in first place. Answer<br/>for rank in Stern-Brocot is 1000110101 or 565 in decimal.</p><p>It&apos;s derived from Euclid algorithm for GCD. It&apos;s why I name Euclid tree the<br/>transposed Stern-Brocot tree as representing all ways followed by his<br/>algorithm  &lt;&lt; Greater value is replace with difference &gt;&gt;. Since starting<br/>fraction is reduced, the final values are (1 1). If fraction was not<br/>reduced, double GCD would be obtained.</p><p>At end, values lesser than 1 are represented by 0, and the others by 1.</p><p>[What about continued fractions ?]</p><p>Continued fractions calculation is strictly equivalent to a going up in<br/>Stern-Brocot tree with stops only when direction (left/right) is changing<br/>(where are best approximations). However multiplication has to be used in<br/>algorithm.</p><p>Rank in Stern-Brocot tree and continued fraction [a b c d ..]<br/>representation are strictly equivalent but better evidence occurs with<br/>little modification on traditional formalism. I add the last 1 in<br/>calculation so the last value in [] is diminuished by 1 compared with<br/>traditional.</p><p>           [a b c ... d] = a + 1/(b + 1/(c + 1 ... /(d + 1)))<br/>                                                         ^</p><p>By example, to clarify possible ambiguouness for first values we have :</p><p>[a b 1] = a + 1/((b + 1)/(1 + 1)) = (2ab + a + 2)/(2b + 1)<br/>[a b] = a + 1/(b + 1) = (ab + a + 1)/(b + 1)<br/>[1 b] = 1 + 1/(b + 1) = (b + 2)/(b + 1)<br/>[0 b] = 0 + 1/(b + 1) = 1/(b + 1)<br/>[0 1] = 0 + 1/(1 + 1) = 1/2<br/>[a] = (a + 1)/1<br/>[1] = 2/1<br/>[0] = 1/1</p><p>Now, comparing rank in Stern-Brocot tree and adjusted formalism for<br/>continued fractions, we see that values in [] are alternatively the number<br/>of successive 1 and successive 0 in corresponding branch of Stern-Brocot<br/>tree :</p><p>    [03]  [021]  [0111]  [012]  [12]   [111]  [21]  [3]</p><p>       [02]          [011]         [11]          [2]</p><p>              [01]                          [1]</p><p>                              [0]</p><p>   1 [0]   = 1/1<br/>  10 [01]  = 1/2<br/>  11 [1]   = 2/1<br/> 100 [02]  = 1/3<br/> 101 [011] = 2/3<br/> 110 [11]  = 3/2<br/> 111 [2]   = 3/1<br/>1000 [03]  = 1/4<br/>1001 [021] = 2/5</p><p>11111110001111100    [6 3 5 2] = 322/51<br/>10000001110000011  [0 6 3 5 2] = 51/322</p><p>** RULES **</p><p>1. First 1 is ignored<br/>2. [0 x ..] = 1/[x ..]<br/>3. Don&apos;t forget to add last 1 in calculation</p><p>With our example, rank 565 == 1000110101 == [3 2 1 1 1 1] = 21/71</p><p>Question : Give the continued fraction of 57/35<br/>           which has rank 565 in Euclid tree ?</p><p>By simple transposition of [3 2 1 1 1 1] the answer is [1 1 1 1 2 3].</p><p>Pierre Lamothe</p></div>
                <script>
                    let monospace = false
                    $('button').on('click', function () {
                      if (monospace) {
                        $('p').css("font-family", "")
                      } else {
                        $('p').css("font-family", "monospace")
                      }
                      monospace = !monospace
                    })
                </script>
            