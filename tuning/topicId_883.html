<a href="/tuning">back to list</a><h1>Re: unit numbers** to ratios (was Re: (d / O * F) * f)</h1><h3><a id=883 href="#883">ðŸ”—</a>Dave Keenan &#x3C;d.keenan@xx.xxx.xxx&#x3E;</h3><span>2/17/1999 7:27:04 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>In case anyone&apos;s wondering, this thread is about a simple formula due to Dan Stearn that generates a ratio (N/D) to approximate any number of steps (n) of any (d)-tET.</p><p>Some corrections to my previous post on this topic.</p><p>Multiplying the number of divisions, d, by 2/ln(2) ~= 2.8854 to generate the magic number minimises the error near 1/1 but this is not what we want. We want to minimise the error over all intervals between 1/1 and the tritone (half-octave) inclusive. I have empirically determined that approx. 2.9071 does this (using a spreadsheet).</p><p>Amazingly the underlying error in Dan&apos;s formula (with this modification) is only +-1.5 cents. By &quot;underlying error&quot; I mean errors apart from those due to rounding the numerator and denominator to the nearest integers. It starts off at zero error for the unison, goes down to 1.5 cents flat around the minor third, climbs back to zero error again just past the fourth and increases to 1.5 cents sharp by the tritone.</p><p>32/11 (~=2.9091) is a better approximation to 2.9071... than 35/12, and again, we don&apos;t have to worry about which way to round .5&apos;s.</p><p>The magic numbers generated by 35/12 (rounding .5&apos;s down) deviate from optimum at the following tETs less than 80: 17, 27..29, 38..41, 49..53, 60..65, 70..77.</p><p>Those generated by 32/11 deviate from optimum at: 27, 38, 49, 60, 70, 71.</p><p>The next best rational approximation of 2.9071... (it irks me not to have an analytic expression for this) is 93/32 which deviates from optimum at 59-tET. Then there&apos;s 125/43 which is as good as anyone could want since it works all the way up to 112 tET.</p><p>For 17-tET Dan gave<br/>1/1, 51/49, 13/12, 53/47, 27/23, 11/9, 14/11, 57/43, 29/21[i]42/29, 86/57,<br/>11/7, 18/11, 46/27, 94/53, 24/13, 98/51, 2/1</p><p>The revised formula gives the slightly more accurate<br/>1/1 25/24 51/47 26/23 53/45 27/22 55/43 4/3 57/41 82/57 3/2 86/55 44/27 90/53 23/13 94/51 48/25 2/1</p><p>But in another sense both of these are &quot;too accurate&quot;, i.e. they give many ratios which are too complex to be musically significant, as Dan agrees.</p><p>I also found that the derivation of 35/12 proposed by Dan is definitely not numerology, but not quite correct either.</p><p>If we want the underlying error to be zero at the fourth (4/3) [and this is close to optimum], we can work out what fraction of an octave a fourth corresponds to and multiply this by 7 (because (7+1)/(7-1) = 4/3). One way of working out this fraction is to consider a tET with accurate fourths, e.g. 12-tET. Since a fourth is 5 semitones, 5/12 * 7 = 35/12 (~= 2.9167) should work. But note that the 7 is not due to the number of semitones in a fifth. If we choose another tET with better fourths, say 53-tET, we get the better approximation of 22/53 * 7 = 154/53 (~= 2.9057).</p><p>To recap: The magic numbers aren&apos;t quite roundings of  (d / O * F) * f, but<br/>d * 2.90708338... (or d * 125/43 is close enough).</p><p>m = Round(d * 125/43)<br/>N = m+n<br/>D = m-n</p><p>Now what happens if, instead of just rounding m to the nearest integer, we don&apos;t round m but we round N and D to the nearest even number (exact odds go up, and of course we then divide them both by 2)? Do we get ratios that look more musical without being too inaccurate? i.e.</p><p>m = d * 125/43<br/>N = Round((m+n)/2)<br/>D = Round((m-n)/2)</p><p>Alas, this simplifies about half the ratios but it can make some worse. I suspect Dan already discovered this since his &quot;formula&quot; looked more like this than my previous translation, although his results appear to correspond to the previous.</p><p>Converting a given ratio N/D to the nearest n steps of a particular d-tET is easy.</p><p>n = Round( d * ln(N/D) / ln(2) )</p><p>but I never thought there was any easy way to find a musically significant ratio near any given n steps of d-tET since there is usually more than one answer. This is the whole point of using a tET instead of JI; commas &quot;disappear&quot;, so the same interval (number of steps) can serve more than one purpose (ratio).</p><p>However, I&apos;m surprised that Dan&apos;s formula does as well as it does.</p><p>Now <a href="mailto:Mckyyy@aol.com">Mckyyy@aol.com</a>, the numbers look reasonable. What&apos;s the algorithm?</p><p>It would be useful if either the highest prime allowed, or the maximum error in cents was a parameter. But this is all academic to me, I don&apos;t actually have a use for it.</p><p>It seems more useful to me to know: For a given d-tET, and a given (prime or odd) limit for the ratios, what is the maximum error in the most accurate *consistent* set of mappings of n steps to ratios? My charts at <a href="http://uq.net.au/~zzdkeena/Music/OpenTunings.htm">http://uq.net.au/~zzdkeena/Music/OpenTunings.htm</a> answer this for many important cases. If anyone wants the results for cases I haven&apos;t covered, let me know.</p><p>Regards,<br/>-- Dave Keenan<br/><a href="http://uq.net.au/~zzdkeena">http://uq.net.au/~zzdkeena</a></p></div>