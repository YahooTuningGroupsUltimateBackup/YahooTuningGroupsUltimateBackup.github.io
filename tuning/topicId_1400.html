<a href="/tuning">back to list</a><h1>Complexity Formulae</h1><h3>Dave Keenan &#x3C;d.keenan@xx.xxx.xxx&#x3E;</h3><span>3/8/1999 10:09:36 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>!!!!!!!!! THEORY WARNING !!!!!!!!!!!</p><p>Dear tuning folk,</p><p>I&apos;d like to back up a little here. Here&apos;s my view on what we are trying to<br/>do in this thread.</p><p>First a reminder that what we are talking about here is just a small part<br/>of the attempt to mathematically model what we hear when several notes are<br/>played together. We know our models will always be inadequate, not least<br/>because people don&apos;t agree about what they hear. But there are various<br/>reasons to persist, and various tradeoffs available between the accuracy of<br/>a model and its user-friendliness.</p><p>We want to reduce any chord to a (hopefully short) list of numbers. But not<br/>just any bunch of numbers, that&apos;s easy. Numbers such that chords that sound<br/>similar in some way have numbers that are close together. Each number<br/>should approximate a &quot;dimension&quot; of our perceptual space. We&apos;ve easily<br/>agreed to factor out loudness and pitch as the most salient dimensions and<br/>can, and have been, ignoring them in this discussion.</p><p>There are plenty of dimensions left, and we could take them as<br/>prime-affects such as Carl Lumma&apos;s<br/>3=openess<br/>5=sweetness<br/>7=florescent lightingness,<br/>and go on from there. But in this discussion we are attempting to first<br/>factor out what seems to many to be the next most salient dimension,<br/>consonance/dissonance. Joe Monzo wants to call this dimension &quot;sonance&quot;, to<br/>make it clear that these are two polarities of the same dimension, but then<br/>I don&apos;t know what increasing numbers mean. It seems mathematically simpler<br/>to give the lowest value to the most consonant &quot;chord&quot;, i.e. a single note<br/>(or silence?), so I want increasing numbers to model increasing *dissonance*.</p><p>We are also, at first, only considering the case of 2-note chords, also<br/>called intervals or dyads. Partly because modelling dissonance for more<br/>than 2 notes looks hard and partly because we expect we have to agree on<br/>dyads (intervals) first if that project is to have any hope of success. An<br/>interval may be described by its width in cents or as a ratio.</p><p>We mostly seem to agree that dissonance can be approximated by composing<br/>two functions. The first, I think we should call complexity (after Wilson).<br/>Although Barlow calls a reciprocal measure &quot;harmonicity&quot; I think that<br/>sounds too much like &quot;consonance&quot;, and I&apos;d prefer to make it clear that we<br/>don&apos;t expect this function to approximate consonnance or dissonance on its<br/>own. For one thing, it gives far too much importance to high primes (at<br/>least in dyads).</p><p>The second function has been called tolerance. This is some kind of<br/>blurring function where the dissonance of a complex ratio will depend more<br/>on its proximity to nearby simpler ratios, thus limiting the significance<br/>of higher primes. Paul Erlich&apos;s Harmonic Entropy and the Plomp/Levelt<br/>dissonance curve for two sine tones, perform this function in different<br/>models.</p><p>Bill Sethares&apos; model works well but is rather computationally intensive. We<br/>agree that there are simpler models of dissonance that work well enough for<br/>timbres with harmonic or near-harmonic partials. The two most popular<br/>do-it-in-your-head dissonance measures are odd-limit and prime-limit. These<br/>are really only complexity measures, and tolerance is often ignored or<br/>treated somewhat ad hoc.</p><p>Mostly what we expect from a complexity measure is that it will at least<br/>rank the intervals in the correct order of increasing dissonance.<br/>Complexity is only defined for ratios, not irrationals or cent values (the<br/>tolerance or blurring function takes care of them). The complexity of a<br/>ratio is typically described as some function of the complexities of its<br/>numerator and denominator. In the case of odd-limit and prime-limit this is<br/>just the maximum value (this is part of the appropriateness of the word<br/>&quot;limit&quot;). My spreadsheet has so far only considered whole numbers.</p><p>Partch&apos;s Odd-limit ranks the whole numbers up to 19 as<br/>(1,2,4,8,16),(3,6,12),(5,10),(7,14),(9,18),11,13,15,17,19<br/>while Prime-limit gives<br/>(1,2,4,8,16),(3,6,9,12,18),(5,10,15),(7,14),11,13,17,19<br/>where those in parenthesis are given equal rank.</p><p>These two complexity measures disagree most importantly about the<br/>dissonance of ratios of 9, and less importantly about 15.</p><p>There are formulae for musical complexity whose computational complexity is<br/>intermediate. Barlow&apos;s is one such. Note that Barlow calls it<br/>indigestibility when it is applied to whole numbers but flips it over and<br/>calls it harmonicity (a consonance measure) when applied to ratios.<br/>Barlow&apos;s ranking is<br/>1,2,4,3,8,6,16,12,9,18,5,10,15,7,14,11,13,17,19.<br/>This is hardly different from that of prime-limit, except in placing 3 and<br/>6 below 8 and 16 respectively.</p><p>Another is Wilson&apos;s Harmonic Complexity, giving<br/>(1,2,4,8,16),(3,6,12),(5,10),(9,18),(7,14),15,11,13,17,19<br/>In its treatment of 9 and 15 it is intermediate between odd-limit and<br/>either prime-limit or Barlow&apos;s, and as such it agrees better with my<br/>experience.</p><p>Just as there are both linear and logarithmic measures of loudness (pascals<br/>vs. decibels) and pitch (hertz vs. cents) there are linear and logarithmic<br/>measures of dissonance. We could call the respective units the partch and<br/>the wilson since Partch&apos;s odd-limit (and the so called integer-limit) is a<br/>linear measure while Wilson&apos;s complexity (and Barlow&apos;s and prime-limit) is<br/>logarithmic. The easiest way to tell is by the value they assign to 1. If<br/>this is zero, it is most likely logarithmic. The other way is just by<br/>comparing their curves. By the way, the curves imply that the prime-limit<br/>of 1/1 may be safely defined as 0 even though its odd-limit is 1.</p><p>Of course taking the log (or its inverse the exponential) of any complexity<br/>measure does not alter its ranking of the intervals. However, I&apos;m inclined<br/>to say that the logarithmic measures correspond more closely to our<br/>experience (as they do for loudness and pitch).</p><p>When I entered this thread I proposed a complexity measure that had a<br/>variable parameter (an exponent weight) for each prime, so that it could be<br/>made to approximate the various existing measures and allow for others in<br/>between, in the hope of enabling a consensus.</p><p>I now understand that Manuel Op de Coul has already done this in Scala by<br/>generalising Barlow&apos;s harmonicity to allow the prime exponent weights to be<br/>changed with the SET HARMCONST comand. This is good, except I&apos;d prefer to<br/>stick to a *dissonance* measure (not consonnance) and would also ignore the<br/>sign (+ or -). The absolute value of the reciprocal of Manuel&apos;s harmonicity<br/>is entirely equivalent to the the logarithmic version of my complexity when<br/>my weights are multiplied by the log of their prime. So I&apos;d like to use<br/>this formulation from now on to explore the possibility for some kind of<br/>consensus on the weights.</p><p>Given a whole number whose prime factorisation is</p><p>n = 2^a * 3^b * 5^c * ...</p><p>its logarithmic complexity is now</p><p>log_complexity(n) = k_2*a + k_3*b + k_5*c + ...</p><p>where the k_p&apos;s are the prime exponent weights (Manuel&apos;s HARMCONSTs).</p><p>The logarithmic complexity of a ratio n/d in lowest terms is then just the<br/>sum of the log complexities of numerator and denominator.</p><p>Alternatively and equivalently a ratio n/d (which need not be in lowest<br/>terms) may be expressed as a single prime factorisation where exponents may<br/>be positive or negative and its log complexity is</p><p>k_2*|a| + k_3*|b| + k_5*|c| + ...</p><p>where |x| is the absolute value of x.</p><p>The linear complexity is therefore</p><p>lin_complexity = e^log_complexity<br/>               = e^(k_2*|a| + k_3*|b| + k_5*|c| + ...)<br/>               = e^(k_2*|a|) * e^(k_3*|b|) * e^(k_5*|c|) * ...</p><p>where e is the natural log base. Note that since my first proposal, the e&apos;s<br/>have replaced the primes themselves, however the equivalence is explained<br/>by the fact that<br/>2^(k_2*a) = e^(ln(2)*k_2*a) and<br/>3^(k_3*b) = e^(ln(3)*k_3*b) etc.<br/>where ln(x) is the natural log of x.</p><p>I&apos;ll let you know when I&apos;ve updated my spreadsheet, and I promise to answer<br/>any earlier questions that weren&apos;t answered above, when I can find the time.</p><p>Regards,</p><p>-- Dave Keenan<br/><a href="http://uq.net.au/~zzdkeena">http://uq.net.au/~zzdkeena</a></p></div><h3>Paul H. Erlich &#x3C;PErlich@xxxxxxxxxxxxx.xxxx&#x3E;</h3><span>3/8/1999 4:36:51 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>Dave Keenan wrote,</p><p>&gt;The second function has been called tolerance. This is some kind of<br/>&gt;blurring function where the dissonance of a complex ratio will depend<br/>more<br/>&gt;on its proximity to nearby simpler ratios, thus limiting the<br/>significance<br/>&gt;of higher primes. Paul Erlich&apos;s Harmonic Entropy and the Plomp/Levelt<br/>&gt;dissonance curve for two sine tones, perform this function in different<br/>&gt;models.</p><p>Did you mean the Plomp/Levely dissonance curve for two non-sine harmonic<br/>tones?</p><p>P.S. Dave: I don&apos;t like it if 15/8 is given the same complexity as 6/5,<br/>assuming factors of 2 are ignored. This last post of yours seems to<br/>propose a family of formulae that do give the two the same complexity if<br/>factors of 2 are ignored. Did you see Paul Hahn&apos;s post on using<br/>triangular lattices?</p></div><h3>Daniel Wolf &#x3C;DJWOLF_MATERIAL@xxxxxxxxxx.xxxx&#x3E;</h3><span>3/9/1999 1:40:21 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>Message text written by Paul Erlich</p><p>&gt;P.S. Dave: I don&apos;t like it if 15/8 is given the same complexity as 6/5,<br/>assuming factors of 2 are ignored.&lt;</p><p>P.E.:</p><p>If you don&apos;t mind my jumping into your postscript, what do you imagine a<br/>complexity formula to look like where the factors of 2 are not ignored?<br/>Might this be a useful, if not necessary, component in a complexity theory<br/>in which register is taken into account?  I am thinking here of something<br/>in addition to a roughness/critical band curve.</p><p>DJW</p></div><h3>Paul H. Erlich &#x3C;PErlich@xxxxxxxxxxxxx.xxxx&#x3E;</h3><span>3/9/1999 3:27:28 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>Dave Keenan wrote,</p><p>&gt;The second function has been called tolerance. This is some kind of<br/>&gt;blurring function where the dissonance of a complex ratio will depend<br/>more<br/>&gt;on its proximity to nearby simpler ratios, thus limiting the<br/>significance<br/>&gt;of higher primes.</p><p>Have you noticed that this argument is far more valid if you replace<br/>&quot;primes&quot; with &quot;odds&quot; at the end of the sentence, showing that a strict<br/>lattice approach like all those we&apos;ve been discussing is much more<br/>likely to be meaningful if we restrict ourselves to, say, the<br/>11-odd-limit, than if we restrict ourselves to the 11-prime-limit, the<br/>7-prime-limit, the 5-prime-limit, or even the 3-prime-limit? The<br/>11-odd-limit seems about right given ideal conditions for pitch<br/>discrimination. And again, a triagular lattice would be more<br/>appropriate.</p></div><h3>Paul H. Erlich &#x3C;PErlich@xxxxxxxxxxxxx.xxxx&#x3E;</h3><span>3/11/1999 2:00:18 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>&gt;&gt;P.S. Dave: I don&apos;t like it if 15/8 is given the same complexity as<br/>6/5,<br/>&gt;assuming factors of 2 are ignored.&lt;</p><p>&gt;P.E.:</p><p>&gt;If you don&apos;t mind my jumping into your postscript, what do you imagine<br/>a<br/>&gt;complexity formula to look like where the factors of 2 are not ignored?</p><p>&gt;Might this be a useful, if not necessary, component in a complexity<br/>theory<br/>&gt;in which register is taken into account?  I am thinking here of<br/>something<br/>&gt;in addition to a roughness/critical band curve.</p><p>&gt;DJW</p><p>Yes, factors of 2 should be important in an octave-specific theory. I&apos;m<br/>not sure what you mean by &quot;in addition to&quot;; a true psychoacoustical<br/>dissonance curve (including both roughness and harmonic entropy) would<br/>be a refinement over a lattice-based complexity measure; the latter is<br/>desireable as an approximation which allows actual _visualization_ of<br/>scales with &quot;closeness&quot; representing &quot;consonance&quot; to a good<br/>approximation.</p></div><h3>Daniel Wolf &#x3C;DJWOLF_MATERIAL@xxxxxxxxxx.xxxx&#x3E;</h3><span>3/12/1999 1:06:57 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>Message text written by P. Erlich<br/>&gt;Yes, factors of 2 should be important in an octave-specific theory. I&apos;m<br/>not sure what you mean by &quot;in addition to&quot;; a true psychoacoustical<br/>dissonance curve (including both roughness and harmonic entropy) would<br/>be a refinement over a lattice-based complexity measure; the latter is<br/>desireable as an approximation which allows actual _visualization_ of<br/>scales with &quot;closeness&quot; representing &quot;consonance&quot; to a good<br/>approximation.<br/>&lt;</p><p>With my students, I&apos;ve always explained lattices as analogous to flat<br/>geographic maps. That is, that they represent distances (harmonic and<br/>physical, resp.) quite precisely in the center but with increased distorted<br/>in the extremes. For the analysis or composition of a piece of tonal music,<br/>in a typical chorale range and voicing, the lattice will be close enough.</p><p>The &apos;in addition to&apos; meant precisely the inclusion of roughness, and of 2^n<br/>phenomena (which I have previously called remoteness, but I gather is<br/>covered by your harmonic entropy; I&apos;m pleased to find the better term).</p><p>These are more than details in real musical situations. For example, if I<br/>wanted to write a choral piece with a minor third between the tenors and<br/>basses, how low could it be voiced before becoming too rough? In the past I<br/>had always orchestrated with the rule of thumb than the lowest &apos;clean&apos;<br/>voicings would follow the intervals of a harmonic series two octave below<br/>Bb. (So, for example, Bb - d, was the lowest &apos;clean&apos; M3rd etc.). Recently,<br/>in preparation for a large orchestra piece, I have been refining this more<br/>systematically by subjective analysis of sampled sounds. So, not only would<br/>my ideal complexity formula include roughness, but have the roughness<br/>classified further by timbre.</p><p>Not directly related, I have also used variations on a formula, called<br/>&apos;effort&apos;, to help in the generation of melodic lines with a vocal charcter.<br/>This is based on the notion that the larger the interval, the greater the<br/>vocal &apos;effort&apos; to produce the leap, while leaps of simpler ratios reduce<br/>the error. Most often, I have have calculated effort simply by multiplying<br/>the Wilson complexity by cents. Here are some effort values, calculated off<br/>the top of my head:</p><p>2/1 1200<br/>15/8 8704<br/>11/6 14686<br/>9/5 11209<br/>16/9 5976<br/>7/4 6783<br/>5/3 7072<br/>13/8 10933<br/>8/5 4070<br/>14/9 9945<br/>3/2 2106<br/>11/8 6061<br/>4/3 1494<br/>9/7 5655<br/>81/64 4896<br/>5/4 1930<br/>11/9 5899<br/>6/5 2528<br/>7/6 2670<br/>8/7 1617<br/>9/8 1224<br/>10/9 2002<br/>16/15 672<br/>25/24 923<br/>1/1 0</p></div>