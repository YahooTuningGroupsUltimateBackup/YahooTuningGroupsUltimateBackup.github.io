<a href="/tuning">back to list</a><h1>complexity formulae, tolerance</h1><h3><a id=1284 href="#1284">ðŸ”—</a>Daniel Wolf &#x3C;DJWOLF_MATERIAL@xxxxxxxxxx.xxxx&#x3E;</h3><span>3/5/1999 2:08:08 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>In chapter 5 of his _Divisions of the Tetrachord_ (Frog Peak 1993), John<br/>Chalmers gives an excellent summary of methods for the analysis of<br/>tetrachords which might be usefully applicable to individual intervals and<br/>systems other than tetrachords. The presentation of Klarenz Barlow&apos;s<br/>indigestability formula is, however, not so useful out of the context of<br/>Bawrlough&apos;s landmark  _Bus Journey to Parametron_ (Feedback Papers 21-23,<br/>available in the states from Frog Peak).</p><p>Some formulae from Chalmers:</p><p>(1) Intervallic inequality: the ratio of the logarithms (e.g. cents) of two<br/>intervals.</p><p>(2) Harmonic complexity functions:</p><p>        (a) Largest prime function, i.e. the prime limit.<br/>        (b) Wilson&apos;s complexity function: the sum of the prime factors<br/>(greater than two) times        the absolute values of their exponents.<br/>        (c) Harmonic simplicity: reciprocal of (b)</p><p>(3).Distance formulae:</p><p>        (a) Euclidian distance: the square root of the sum of the squares<br/>of the differences of<br/>        the coordinates.<br/>        (b) Minkowskian (&apos;City Block&apos;) metric: the sum of the absolute<br/>values of the differences<br/>        between corresponding intervals.<br/>        (c) Tenney&apos;s pitch-distance function: the base two logarithm of p/q<br/>(multiply this by       1200 to get cents)<br/>        (d) Tenney&apos;s harmonic-distance function: the log of pq</p><p>(4) Barlow&apos;s formulae:</p><p>        (a) indigestibility: the indigestibility of p is equal to<br/>2(p-1)^2/p<br/>        (b) harmonicity:  the harmonicity of p/q is equal to<br/>sgn(indegestibility(p)-indigestibility(q))/(indigestibility(p)+indigestibil<br/>ity(q)),<br/>        The sgn function equal +1 when indigestibility(p) is greater than<br/>indigestibility(q) and<br/>        -1 when indigestibility(q) is greater.</p><p>(5) Euler&apos;s _gradus suavatis_ function:</p><p>        (a) for prime numbers: the prime number itself<br/>        (b) for composite numbers: the sum of the prime factors minus one<br/>less than the   number of factors.<br/>        (c) for ratios:  convert a ratio to a segment of the harmonic<br/>series, then<br/>        compute the least common multiple of the terms.</p><p>        (d, for the record, not in Chalmers) Euler&apos;s totient function, if N<br/>is a positive whole     number, then phi(n) = one less than the number of<br/>positive whole numbers less than N      which share no common divisors with<br/>N. e.g. 12 contains no factors common to at     most the three numbers<br/>5,7,11, therefore phi(12)=3+1=4</p><p>At this point, Chalmers brings up an important point: ratios which deviate<br/>by only a small amount<br/>from ratios of small whole numbers contain either high primes or large<br/>composites, so that the dissonance of these slightly mistuned consonance<br/>becomes arbitrarily large when expressed in any theory base upon prime<br/>factorization.  Helmholtz&apos;s beat theory and the critical band theories<br/>correct this, and are typical bases for theories of tolerance.</p><p>Barlow&apos;s two factors for establishing the limits of  tolerance, or what he<br/>calls &apos;wishful tuning&apos;, are</p><p>&quot;1. The deviation of the imagined pitch from the given one, and<br/>2. The contraction or expansion of the steps in the scale resulting from<br/>the aforesaid stretch of the imagination.&quot;</p><p>Barlow set --- arbitrarily -- the tolerance limits as +/-25 cents and +/-18<br/>cents respectively. Thus if the ear &apos;bent&apos; 100 cents upward to 111.7 cents,<br/>to hear the ratio 16/15, then the tone 200 cents above the tonic could not<br/>be interpreted as a 10/9 of 182.4 cents, because the resulting imagined<br/>halfstep of 70.7 cents would fall outside of the step tolerance limit of<br/>100+/-18 cents.</p></div><h3><a id=1293 href="#1293">ðŸ”—</a>Paul Hahn &#x3C;Paul-Hahn@xxxxxxx.xxxxx.xxxx&#x3E;</h3><span>3/5/1999 8:42:28 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>On Fri, 5 Mar 1999, Daniel Wolf wrote:<br/>&gt; Some formulae from Chalmers:<br/>[ . . . ]<br/>&gt; (3).Distance formulae:</p><p>The complexity function which is integral to the concept of consistency<br/>level, and even more so to diameter, is like the &quot;city-block&quot; metric<br/>except on a triangulated lattice.  It can be calculated numerically<br/>without a diagram, at least up to the 7-limit, as follows:</p><p>   -&#x9;Take the exponents of the factorization of the ratio, excluding<br/>&#x9;the 2s.<br/>   -&#x9;Sum the positive and negative exponents separately, then take<br/>&#x9;the absolute values of the sums.<br/>   -&#x9;The greater of the two values is the complexity.</p><p>Example: the 225:224 which we&apos;ve been using so often lately is factored<br/>(3^2 * 5^2 * 7^-1), in Fokker&apos;s vector notation (2 2 -1).  |2 + 2| = 4;<br/>|-1| = 1; therefore this is a quaternary (7-limit) interval.</p><p>Other examples:</p><p>126:125&#x9;(2 -3 1) &#x9;|2 + 1| = |-3|&#x9;&#x9;tertiary interval.</p><p>128:125 (0 -3)&#x9;&#x9;|-3| = 3&#x9;&#x9;tertiary interval.</p><p>81:80&#x9;(4 -1)&#x9;&#x9;|4| &gt; |-1|&#x9;&#x9;quaternary interval.</p><p>64:63&#x9;(-2 0 -1)&#x9;|-2 + -1| = 3&#x9;&#x9;tertiary interval.</p><p>50:49&#x9;(0 2 -2)&#x9;|2| = |-2|&#x9;&#x9;secondary interval.</p><p>If you&apos;re an odd-limit proponent such as myself, things get a little<br/>complicated at the 9-limit and above, since 9 is composite, and<br/>odd-factorization does not necessarily yield unique results.  However,<br/>the minimum complexity is achieved by assigning the 9 exponent as large<br/>as possible, and the 3 exponent 0 or 1 as appropriate.</p><p>Example: going back to the 225:224, its 9-limit factorization would be<br/>(0 2 -1 1), so it&apos;s a tertiary interval in the 9-limit even though it&apos;s<br/>a quaternary interval at lower limits.  Similarly, the schisma (8 1) has<br/>complexity 9 at the 5- or 7-limit, but at the 9-limit its vector becomes<br/>(0 1 0 4), so its complexity drops to 5.</p><p>It _really_ gets hairy at the 15-limit, since 15 has more than one odd<br/>factor, but as Carl just pointed out there doesn&apos;t seem to a practical<br/>need to go that high.</p><p>Paul Erlich (and, I&apos;m sure, others as well) has suggested weighting this<br/>triangulated-city-block function by the logs of the prime factors<br/>involved; this can be done simply by multiplying each exponent by the<br/>log of its base before summing.  This certainly could be useful for some<br/>purposes; in particular, it neatly resolves the odd vs. prime limit<br/>question, as the two become equivalent.</p><p>--pH &lt;<a href="mailto:manynote@lib-rary.wustl.edu">manynote@lib-rary.wustl.edu</a>&gt; <a href="http://library.wustl.edu/~manynote">http://library.wustl.edu/~manynote</a><br/>    O<br/>   /\        &quot;Well, so far, every time I break he runs out.<br/>  -\-\-- o    But he&apos;s gotta slip up sometime . . . &quot;</p><p>             NOTE: dehyphenate node to remove spamblock.          &lt;*&gt;</p></div><h3><a id=1295 href="#1295">ðŸ”—</a>Paul Hahn &#x3C;Paul-Hahn@xxxxxxx.xxxxx.xxxx&#x3E;</h3><span>3/5/1999 9:08:16 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>On Fri, 5 Mar 1999, Paul Hahn wrote:<br/>&gt;                                                               However,<br/>&gt; the minimum complexity is achieved by assigning the 9 exponent as large<br/>&gt; as possible, and the 3 exponent 0 or 1 as appropriate.</p><p>That&apos;s if the 3 exponent in the prime factorization is positive; if it&apos;s<br/>negative, do the above with the signs reversed.</p><p>--pH &lt;<a href="mailto:manynote@lib-rary.wustl.edu">manynote@lib-rary.wustl.edu</a>&gt; <a href="http://library.wustl.edu/~manynote">http://library.wustl.edu/~manynote</a><br/>    O<br/>   /\        &quot;Well, so far, every time I break he runs out.<br/>  -\-\-- o    But he&apos;s gotta slip up sometime . . . &quot;</p><p>             NOTE: dehyphenate node to remove spamblock.          &lt;*&gt;</p></div><h3><a id=1303 href="#1303">ðŸ”—</a>Paul H. Erlich &#x3C;PErlich@xxxxxxxxxxxxx.xxxx&#x3E;</h3><span>3/5/1999 2:08:09 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>Daniel Wolf wrote,</p><p>&gt;(4) Barlow&apos;s formulae:</p><p>&gt;        (a) indigestibility: the indigestibility of p is equal to<br/>&gt;2(p-1)^2/p<br/>&gt;        (b) harmonicity:  the harmonicity of p/q is equal to<br/>&gt;sgn(indegestibility(p)-indigestibility(q))/(indigestibility(p)+indigest<br/>ibil<br/>&gt;ity(q)),<br/>&gt;        The sgn function equal +1 when indigestibility(p) is greater<br/>than<br/>&gt;indigestibility(q) and<br/>&gt;        -1 when indigestibility(q) is greater.</p><p>This is only correct in the case where p and q are prime. You&apos;re leaving<br/>out a step or two.</p><p>&gt;(3).Distance formulae:</p><p>&gt;        (a) Euclidian distance: the square root of the sum of the<br/>squares<br/>of the differences of<br/>&gt;        the coordinates.<br/>&gt;        (b) Minkowskian (&apos;City Block&apos;) metric: the sum of the absolute<br/>&gt;values of the differences<br/>&gt;        between corresponding intervals.</p><p>you mean the differences between coordinates of corresponding intervals.</p><p>[...]<br/>&gt;        (d) Tenney&apos;s harmonic-distance function: the log of pq</p><p>All of these assume a rectangular lattice; a triangular lattice would<br/>imply different (and perhaps more valid) result. e.g. 6/5 vs. 15/8,<br/>which are the same by all the above measures, but a triangular lattice<br/>would make 6/5 &quot;closer&quot; than 15/8. I came up with a triangular version<br/>of Tenney&apos;s harmonic-distance function before I heard of the original<br/>version.</p></div><h3><a id=1317 href="#1317">ðŸ”—</a>Joseph L Monzo &#x3C;monz@xxxx.xxxx&#x3E;</h3><span>3/5/1999 8:07:23 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>Thanks to Daniel Wolf for a great posting<br/>summarizing a lot of complex musical math!</p><p>- Monzo<br/>___________________________________________________________________<br/>You don&apos;t need to buy Internet access to use free Internet e-mail.<br/>Get completely free e-mail from Juno at <a href="http://www.juno.com/getjuno.html">http://www.juno.com/getjuno.html</a><br/>or call Juno at (800) 654-JUNO [654-5866]</p></div><h3><a id=1404 href="#1404">ðŸ”—</a>Paul H. Erlich &#x3C;PErlich@xxxxxxxxxxxxx.xxxx&#x3E;</h3><span>3/8/1999 2:13:39 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>Paul Hahn wrote,</p><p>&gt;On Fri, 5 Mar 1999, Daniel Wolf wrote:<br/>&gt;&gt; Some formulae from Chalmers:<br/>&gt;[ . . . ]<br/>&gt;&gt; (3).Distance formulae:</p><p>&gt;The complexity function which is integral to the concept of consistency<br/>&gt;level, and even more so to diameter, is like the &quot;city-block&quot; metric<br/>&gt;except on a triangulated lattice.  It can be calculated numerically<br/>&gt;without a diagram, at least up to the 7-limit, as follows:</p><p>&gt;   -&#x9;Take the exponents of the factorization of the ratio, excluding<br/>&gt;&#x9;the 2s.<br/>&gt;   -&#x9;Sum the positive and negative exponents separately, then take<br/>&gt;&#x9;the absolute values of the sums.<br/>&gt;   -&#x9;The greater of the two values is the complexity.</p><p>&gt;Example: the 225:224 which we&apos;ve been using so often lately is factored<br/>&gt;(3^2 * 5^2 * 7^-1), in Fokker&apos;s vector notation (2 2 -1).  |2 + 2| = 4;</p><p>&gt;|-1| = 1; therefore this is a quaternary (7-limit) interval.</p><p>&gt;Other examples:</p><p>&gt;126:125&#x9;(2 -3 1) &#x9;|2 + 1| = |-3|&#x9;&#x9;tertiary<br/>interval.</p><p>&gt;128:125 (0 -3)&#x9;&#x9;|-3| = 3&#x9;&#x9;tertiary interval.</p><p>&gt;81:80&#x9;(4 -1)&#x9;&#x9;|4| &gt; |-1|&#x9;&#x9;quaternary interval.</p><p>&gt;64:63&#x9;(-2 0 -1)&#x9;|-2 + -1| = 3&#x9;&#x9;tertiary interval.</p><p>&gt;50:49&#x9;(0 2 -2)&#x9;|2| = |-2|&#x9;&#x9;secondary interval.</p><p>&gt;If you&apos;re an odd-limit proponent such as myself, things get a little<br/>&gt;complicated at the 9-limit and above, since 9 is composite, and<br/>&gt;odd-factorization does not necessarily yield unique results.  However,<br/>&gt;the minimum complexity is achieved by assigning the 9 exponent as large<br/>&gt;as possible, and the 3 exponent 0 or 1 as appropriate.</p><p>&gt;Example: going back to the 225:224, its 9-limit factorization would be<br/>&gt;(0 2 -1 1), so it&apos;s a tertiary interval in the 9-limit even though it&apos;s<br/>&gt;a quaternary interval at lower limits.  Similarly, the schisma (8 1)<br/>has<br/>&gt;complexity 9 at the 5- or 7-limit, but at the 9-limit its vector<br/>becomes<br/>&gt;(0 1 0 4), so its complexity drops to 5.</p><p>&gt;It _really_ gets hairy at the 15-limit, since 15 has more than one odd<br/>&gt;factor, but as Carl just pointed out there doesn&apos;t seem to a practical<br/>&gt;need to go that high.</p><p>&gt;Paul Erlich (and, I&apos;m sure, others as well) has suggested weighting<br/>this<br/>&gt;triangulated-city-block function by the logs of the prime factors<br/>&gt;involved; this can be done simply by multiplying each exponent by the<br/>&gt;log of its base before summing.  This certainly could be useful for<br/>some<br/>&gt;purposes; in particular, it neatly resolves the odd vs. prime limit<br/>&gt;question, as the two become equivalent.</p><p>Thanks, Paul H., for explaining this. Take note, Manuel (I do feel<br/>strongly that this improves upon Tenney&apos;s and Barlow&apos;s formulations,<br/>especially in the typical case where factors of two are ignored). I<br/>don&apos;t know if anyone else has suggested this metric, but you are right,<br/>I use the log function so that 3^2 and 9, or 3*5 and 15, come out<br/>exactly the same and (in the context of the triangular metric as you<br/>explained above) it renders the odd. vs. prime limit question moot.</p><p>I have used these complexity values as inputs to a multidimensional<br/>scaling algorithm in order to produce visualizations of scales (the<br/>diatonic scale comes out as a helix, a chain of fifths twisted so that<br/>every note has its major and minor thirds on adjacent turns).</p></div><h3><a id=1480 href="#1480">ðŸ”—</a>manuel.op.de.coul@xxx.xx</h3><span>3/10/1999 8:41:55 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>Paul Erlich wrote:<br/>&gt; Thanks, Paul H., for explaining this. Take note, Manuel (I do feel<br/>&gt; strongly that this improves upon Tenney&apos;s and Barlow&apos;s formulations,<br/>&gt; especially in the typical case where factors of two are ignored). I<br/>&gt; don&apos;t know if anyone else has suggested this metric, but you are right,<br/>&gt; I use the log function so that 3^2 and 9, or 3*5 and 15, come out<br/>&gt; exactly the same and (in the context of the triangular metric as you<br/>&gt; explained above) it renders the odd. vs. prime limit question moot.</p><p>Ok, I assume you take the smallest primes most often when going in the<br/>triangular lattice from the ratio&apos;s point to the origin while summing the<br/>log values, so as to obtain the lowest value for the function.<br/>If so, please verify my results. I have used the base-2 log.<br/>225/224          7.813781<br/>126/125          5.491853<br/>128/125          6.965784<br/>81/80            6.339850<br/>64/63            5.977279<br/>50/49            4.643856</p><p>Manuel Op de Coul    <a href="mailto:coul@ezh.nl">coul@ezh.nl</a></p></div><h3><a id=1481 href="#1481">ðŸ”—</a>Paul Hahn &#x3C;Paul-Hahn@xxxxxxx.xxxxx.xxxx&#x3E;</h3><span>3/10/1999 9:59:16 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>On Wed, 10 Mar 1999 <a href="mailto:manuel.op.de.coul@ezh.nl">manuel.op.de.coul@ezh.nl</a> wrote:<br/>&gt; Ok, I assume you take the smallest primes most often when going in the<br/>&gt; triangular lattice from the ratio&apos;s point to the origin while summing the<br/>&gt; log values, so as to obtain the lowest value for the function.</p><p>There are often many routes through the lattice.  As long as you take<br/>one which is as direct as possible (not going along 2 sides of a<br/>triangle instead of one) the results should be the same.</p><p>&gt; If so, please verify my results. I have used the base-2 log.<br/>&gt;<br/>&gt; 225/224          7.813781<br/>&gt; 126/125          5.491853<br/>&gt; 128/125          6.965784<br/>&gt; 81/80            6.339850<br/>&gt; 64/63            5.977279<br/>&gt; 50/49            4.643856</p><p>126/125 should be 7.451211.<br/> 50/49  should be 5.614709.</p><p>The others are correct.</p><p>A note--126/125 does not work if you use the algorithm I posted, where<br/>you sum the exponents.  The vector for 126/125 is (2 -3 1):</p><p>&#x9; 2 lg(3) + lg(7) = 5.977279<br/>&#x9;-3 lg(5)&#x9; = 6.965784</p><p>But if you actually look at the lattice, the simplest route to 126/125<br/>is 6/5 * 6/5 * 7/5 (* 1/2), so it should be</p><p>&#x9; 2 lg(5) + lg(7) = 7.451211</p><p>Which means that my algorithm doesn&apos;t work for the weighted version,<br/>only the integer one.  Durn.  That&apos;s going to make it harder for you to<br/>incorporate into Scala, Manuel.</p><p>--pH &lt;<a href="mailto:manynote@lib-rary.wustl.edu">manynote@lib-rary.wustl.edu</a>&gt; <a href="http://library.wustl.edu/~manynote">http://library.wustl.edu/~manynote</a><br/>    O<br/>   /\        &quot;Well, so far, every time I break he runs out.<br/>  -\-\-- o    But he&apos;s gotta slip up sometime . . . &quot;</p><p>             NOTE: dehyphenate node to remove spamblock.          &lt;*&gt;</p></div>