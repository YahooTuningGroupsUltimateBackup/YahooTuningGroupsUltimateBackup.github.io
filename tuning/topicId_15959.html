<a href="/tuning">back to list</a><h1>Re: FTS crash</h1><h3><a id=15959 href="#15959">ðŸ”—</a>Robert Walker &#x3C;robert_walker@rcwalker.freeserve.co.uk&#x3E;</h3><span>11/27/2000 8:49:20 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>Hi Joseph,</p><p>V. sorry about that...</p><p>A bit of a loss what to do. The message usually means a program tried to access an area<br/>of memory that hasn&apos;t been allocated to it, and the rest of the information is only really useful<br/>if you are working at a v. low level, e.g. assembly language rather than c.</p><p>I&apos;ve just uploaded next version of the beta today.<br/><a href="http://members.nbci.com/tune_smithy/fts_beta/fts_beta_download.htm">http://members.nbci.com/tune_smithy/fts_beta/fts_beta_download.htm</a></p><p>I&apos;d v. much like to try to fix it, but would need more information, haven&apos;t got much to go on<br/>at present,</p><p>I can&apos;t duplicate it here.</p><p>Sounds as if it may be happening somewhere in the tune or the sound generation, and since it<br/>happens for playing just the seed as well, that localises it quite a bit - prob. to the part<br/>concerned with sending notes to MIDI out, or else perhaps to the part of the code to do<br/>with working out the pitch to play from the scale and arpeggio definitions.</p><p>However that is still a large amount of code - getting on for 2000 lines. Also made a fair number<br/>of changes there.</p><p>So what I&apos;d need to do is to make a version the beta with debug code in it, which you could<br/>activate by typing, say, #dbg into the time for one note box.</p><p>Then you&apos;d download it, crash it, and send the log file it makes to me. It would just consist of lots of lines like<br/>Reached line such and such<br/>Reached line such and such, relevant variables such and such,<br/>etc.</p><p>I could look at that and hopefully see which line it crashed in. May need to do it again, maybe<br/>two or three times, esp. if it turns out to be happening in another part of the program instead<br/>(e.g. in section called from that part).</p><p>This isn&apos;t completely guaranteed to work because occasionally in this situation,adding in debug code<br/>can change it enough to stop it from crashing, but since the bug seems to be pretty easy to repeat,<br/>I would expect it to quite likely work.</p><p>Making sure FTS doesn&apos;t crash is my top priority, so I hope you can help with this, - nobody else<br/>has yet reported this bug to me.</p><p>Robert</p></div><h3><a id=15986 href="#15986">ðŸ”—</a>Joseph Pehrson &#x3C;pehrson@pubmedia.com&#x3E;</h3><span>11/28/2000 11:18:42 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>--- In <a href="mailto:tuning@egroups.com">tuning@egroups.com</a>, &quot;Robert Walker&quot; &lt;robert_walker@r...&gt; wrote:</p><p><a href="http://www.egroups.com/message/tuning/15959">http://www.egroups.com/message/tuning/15959</a></p><p>&gt; Hi Joseph,<br/>&gt;<br/>&gt; V. sorry about that...<br/>&gt;<br/>&gt; A bit of a loss what to do. The message usually means a program<br/>tried to access an area of memory that hasn&apos;t been allocated to it,<br/>and the rest of the information is only really useful<br/>&gt; if you are working at a v. low level, e.g. assembly language rather<br/>than c.<br/>&gt;<br/>Oh yeah... I guess so... It&apos;s just a bunch of hexadecimal numbers or<br/>something...</p><p>&gt; I&apos;ve just uploaded next version of the beta today.<br/>&gt; <a href="http://members.nbci.com/tune_smithy/fts_beta/fts_beta_download.htm">http://members.nbci.com/tune_smithy/fts_beta/fts_beta_download.htm</a><br/>&gt;</p><p>Well, I&apos;ll try this one, and see if it works any better...</p><p>&gt; So what I&apos;d need to do is to make a version the beta with debug<br/>code in it, which you could activate by typing, say, #dbg into the<br/>time for one note box.<br/>&gt;<br/>&gt; Then you&apos;d download it, crash it, and send the log file it makes to<br/>me. It would just consist of lots of lines like<br/>&gt; Reached line such and such<br/>&gt; Reached line such and such, relevant variables such and such,<br/>&gt; etc.<br/>&gt;</p><p>Well, this is no problem.  Just tell me exactly what to do...</p><p>I&apos;ll try the newest beta first, just to see if it works any better...<br/>by comparison, now the &quot;older&quot; one is a disappointment!</p><p>&gt; This isn&apos;t completely guaranteed to work because occasionally in<br/>this situation,adding in debug code can change it enough to stop it<br/>from crashing</p><p>This is funny... well, ok, it&apos;s funny to ME, but it wouldn&apos;t be very<br/>funny to anyone programming the thing...</p><p>&gt;<br/>&gt; Making sure FTS doesn&apos;t crash is my top priority, so I hope you can<br/>help with this, - nobody else has yet reported this bug to me.<br/>&gt;<br/>Well, I can&apos;t imagine there&apos;s anything that &quot;special&quot; about my own<br/>setup...</p><p>I&apos;ll try the most recent beta, hopefully this evening (NYC time)...<br/>_____ ___ __ _ __<br/>Joseph Pehrson</p></div><h3><a id=16050 href="#16050">ðŸ”—</a>Robert Walker &#x3C;robert_walker@rcwalker.freeserve.co.uk&#x3E;</h3><span>11/29/2000 4:51:22 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>Hi Joseph...</p><p>&gt;Well, I just downloaded the new beta Smithy right now.  It&apos;s 9:40PM<br/>&gt;New York time, so it means it&apos;s 3:40AM your time...  Gee, you work<br/>&gt;really late... or EARLY!</p><p>Late, fairly often, though v. irregular.</p><p>&gt;Ummm.  It crashes again.  Same thing...both in playing scales and<br/>&gt;playing &quot;seeds.&quot;</p><p>Ah well, anyway suggest it is a pretty robust bug, which is hopeful.</p><p>&gt;So, I uninstalled the entire thing and went back to the older<br/>&gt;&quot;authenticated&quot; version of Smithy, since I cannot now be without a<br/>&gt;working version of Smithy!</p><p>Glad you find it so useful!</p><p>Actually, you can keep both installations - works fine, any number of<br/>copies of the program are okay - just install each version in a new directory<br/>- if you use the installer, you just need to change the Destination directory<br/>and the Program folder for each version. (1.09 needs some new files in its<br/>folder that 1.082 doesn&apos;t have)</p><p>&gt;It seems like the earlier version of the beta worked for me just<br/>&gt;fine...  I wonder what&apos;s happening</p><p>If you want to go back to 14th Oct release of beta, I&apos;ve put link<br/>to the .exe file on the download page.</p><p>That is the beta for immediately after I did the complete ascending<br/>Mode / arpeggio for Follow scale and complete Scale up to octave.</p><p>You can save that one into same directory as the buggy beta if you<br/>like, and use it in its place until I&apos;ve got it sorted out.</p><p>But hopefully will get this sorted out pretty quickly!</p><p>&gt;Well, perhaps a &quot;crash-beta&quot; is in order, with clear instructions as<br/>&gt;to post-demolition...</p><p>Okay.</p><p>Download:</p><p><a href="http://www.robertwalker.f9.co.uk/FractalTuneSmithySetup_109_beta_debug.exe">http://www.robertwalker.f9.co.uk/FractalTuneSmithySetup_109_beta_debug.exe</a></p><p>(setup prog)</p><p>(Say if you prefer the zip / se zip.)</p><p>I&apos;ve changed the default program folder and destination directory both to Fractal Tune Smithy Debug.</p><p>Once installed and it&apos;s running, tick the new box &quot;Debug log&quot; in the main window.</p><p>Everything will then be a bit slower because of the debug log.</p><p>Play a seed (I think of the that may be easier for debugging poss.)</p><p>When you press the button, it may not change to the yellow square immediately, because<br/>of all the writing to file with the debug log, but just wait. If you click again at<br/>that point, it will prob. stop playback before it gets to the bug.</p><p>Hopefully, it crashes at that point!</p><p>Then look in the directory - c:\Program Files\Fractal Tune Smithy<br/>(or whatever you named it to) and look for the file<br/>DEBUG_LOG, which will be the most recent one in the folder</p><p>Here, after playing complete seed, the file is 65-70 KB or so, (3500 lines or so<br/>of output), so will prob. be less than that</p><p>If it goes into a runaway loop it could get v. large. Doesn&apos;t sound like<br/>that sort of bug - it would either stop responding, or generate a<br/>stack fault. But as a precaution I&apos;ve set it to stop making the log file<br/>if it reaches 10,000 lines of output (still small enough to send easily).</p><p>Whenever you tick the &quot;Debug log&quot; box, it remakes the log file anew, in case Smithy<br/>doesn&apos;t crash, and you want to have another go (may be worth a second try<br/>if it doesn&apos;t crash)</p><p>Send it to me, and I&apos;ll see what I can make of it.</p><p>Cheers,</p><p>Robert</p></div><h3><a id=16053 href="#16053">ðŸ”—</a>Joseph Pehrson &#x3C;josephpehrson@compuserve.com&#x3E;</h3><span>11/29/2000 7:27:21 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>--- In <a href="mailto:tuning@egroups.com">tuning@egroups.com</a>, &quot;Robert Walker&quot; &lt;robert_walker@r...&gt; wrote:</p><p><a href="http://www.egroups.com/message/tuning/16050">http://www.egroups.com/message/tuning/16050</a></p><p>Hello Robert!</p><p>Well, you warned me that this might happen...  Now that you included<br/>the &quot;debug&quot; code, the program works perfectly....</p><p>It reminds me of a couple times I went to the doctor when I was<br/>feeling lousy, and as soon as I was in the office I felt great<br/>again.... or then, the computer crash that will never happen when the<br/>local &quot;computer guru&quot; comes by to check it out for you...</p><p>Well, I guess that&apos;s good.  No bad news is good news, so I suppose we<br/>should leave it at that!</p><p>Actually, the little &quot;debug&quot; box is a nice feature that I would<br/>recommend leaving it in, unless it seems embarassing to you.  It&apos;s so<br/>small, it doesn&apos;t seem to bother anything.  Then anybody can send you<br/>a report in the future....</p><p>Also, I wouldn&apos;t take it back out, since it might start crashing<br/>again<br/>:)  One never knows....</p><p>Thanks again!!!</p><p>_________ ___ __ _<br/>Joseph</p></div><h3><a id=16058 href="#16058">ðŸ”—</a>Robert Walker &#x3C;robert_walker@rcwalker.freeserve.co.uk&#x3E;</h3><span>11/29/2000 8:03:38 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>Hi Joseph,</p><p>&gt;Well, you warned me that this might happen... Now that you included<br/>&gt;the &quot;debug&quot; code, the program works perfectly....</p><p>Do I understand you right, that with the debug code in, even when you don&apos;t<br/>tick the box, it works fine?</p><p>If it only runs with the box ticked, that&apos;s no good because you will be making<br/>huge log files all the time. Will also slow the program down considerably.</p><p>But if it runs with it unticked, that indeed will do no harm, and no appreciable<br/>slowing down of the program - lots of sections that look like this:<br/>if(debug_log)<br/>{<br/>...<br/>}<br/>which will just be skipped out.</p><p>Prob. adds a few K to length of the prog. but not much. In fact, just checked, it<br/>adds 56 K.</p><p>&gt;Actually, the little &quot;debug&quot; box is a nice feature that I would<br/>&gt;recommend leaving it in, unless it seems embarassing to you. It&apos;s so<br/>&gt;small, it doesn&apos;t seem to bother anything. Then anybody can send you<br/>&gt;a report in the future....</p><p>It&apos;s a possibility - could make it showable with some command such as<br/>#dbg into the note time box.</p><p>In fact I&apos;ve just done that now.</p><p>You show it using #dbg, and hide it with #ndbg, typed into the Sustain box.</p><p>As you say, it doesn&apos;t seem to bother anything much.  If you have<br/>ticked the option to skip fast notes when a fractal tune gets into<br/>tiny micro-second notes, then you get a little message there saying<br/>how many notes were skipped each time they are. That&apos;s all that<br/>it is used for at present.</p><p>No, it doesn&apos;t embarass me - if Netscape can show a special dialog<br/>box when it crashes, which you fill in to send them a bug report, then I don&apos;t mind<br/>including a special debug feature in Fractal Tune Smithy.</p><p>&gt;Also, I wouldn&apos;t take it back out, since it might start crashing<br/>&gt;again<br/>&gt;:) One never knows....</p><p>Well, since I haven&apos;t fixed anything, you may yet find it does crash, and if it does,<br/>you can try to repeat the crash with the box ticked, and send the log file to me.</p><p>So can anyone else using the program, as you say. It is indeed an idea.</p><p>The next step would prob. take some time - one would now try including only<br/>part of the debug code, say, just the line numbers without the info added to make<br/>it more readable, and then if it still didn&apos;t crash, remove them from one section at<br/>a time until it did.</p><p>I would really prefer to do a more thorough investigation, but if you are happy<br/>with it like this, I can just leave it for now.</p><p>I will also go through that area of the program yet again, really really thoroughly,<br/>keeping an eagle eye out for bugs to fix, before the release = it is really central to it<br/>and must work pretty perfectly if the program is to be any good at all.</p><p>So now you will be able to use the new features. Especially, you can redo the midi<br/>clips for the _recent_ VRML files if you want, in any voice and pitch, in broken chords / ordinary<br/>chords, etc. (see beta download page for how to instructions if you haven&apos;t come<br/>across it yet). It&apos;s very easy to do.</p><p>Basically, you just open the .ts file you find in the VRML folder, change the voice /<br/>pitch as you like, then type a code such as #msc into the sustain box (that&apos;s the one<br/>to use if you want to make chords, reduced into single octave). Wait for disk drive<br/>to whirr a bit, and there they all are - just reload the VRML model to hear them!<br/>:-)</p><p>Robert</p></div><h3><a id=16063 href="#16063">ðŸ”—</a>Joseph Pehrson &#x3C;pehrson@pubmedia.com&#x3E;</h3><span>11/30/2000 6:13:01 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>--- In <a href="mailto:tuning@egroups.com">tuning@egroups.com</a>, &quot;Robert Walker&quot; &lt;robert_walker@r...&gt; wrote:</p><p><a href="http://www.egroups.com/message/tuning/16058">http://www.egroups.com/message/tuning/16058</a></p><p>&gt; Hi Joseph,<br/>&gt;<br/>&gt; &gt;Well, you warned me that this might happen... Now that you<br/>included the &quot;debug&quot; code, the program works perfectly....<br/>&gt;<br/>&gt; Do I understand you right, that with the debug code in, even when<br/>you don&apos;t tick the box, it works fine?<br/>&gt;</p><p>Well, I did it last night, and, as I recall, the program worked<br/>perfectly whether the &quot;debug&quot; box was checked or not!.. but I will<br/>try it again this evening just to make sure.</p><p>&gt;<br/>&gt; It&apos;s a possibility - could make it showable with some command such<br/>as #dbg into the note time box.<br/>&gt;<br/>&gt; In fact I&apos;ve just done that now.</p><p>Great... that will be a valuable feature for sending reports back to<br/>you, obviously...</p><p>&gt;<br/>&gt; You show it using #dbg, and hide it with #ndbg, typed into the<br/>Sustain box.<br/>&gt;<br/>&gt;&gt;<br/>&gt; &gt;Also, I wouldn&apos;t take it back out, since it might start crashing<br/>&gt; &gt;again<br/>&gt; &gt;:) One never knows....<br/>&gt;<br/>&gt; Well, since I haven&apos;t fixed anything, you may yet find it does<br/>crash, and if it does, you can try to repeat the crash with the box<br/>ticked, and send the log file to me.<br/>&gt;</p><p>Absolutely.  I swear to you, though, that before you put in the debug<br/>code the beta crashed EVERY TIME!  And with TWO DIFFERENT<br/>installations from scratch!!</p><p>&gt; The next step would prob. take some time - one would now try<br/>including only part of the debug code, say, just the line numbers<br/>without the info added to make it more readable, and then if it still<br/>didn&apos;t crash, remove them from one section at a time until it did.<br/>&gt;</p><p>Is that really worth it??  With the box unchecked it really doesn&apos;t<br/>affect much, as you say...  Except now it doesn&apos;t crash!</p><p>&gt; I would really prefer to do a more thorough investigation, but if<br/>you are happy with it like this, I can just leave it for now.</p><p>Well, perhaps now the users can just &quot;mess around&quot; with it, and<br/>report any anomalies...</p><p>&gt;<br/>&gt; I will also go through that area of the program yet again, really<br/>really thoroughly, keeping an eagle eye out for bugs to fix, before<br/>the release = it is really central to it and must work pretty<br/>perfectly if the program is to be any good at all.<br/>&gt;</p><p>Yeah... it would be pretty bad on first appraisal if what happened to<br/>me happened to others who bought the license...</p><p>&gt; So now you will be able to use the new features. Especially, you<br/>can redo the midi clips for the _recent_ VRML files if you want, in<br/>any voice and pitch, in broken chords / ordinary chords, etc. (see<br/>beta download page for how to instructions if you haven&apos;t come across<br/>it yet). It&apos;s very easy to do.<br/>&gt;<br/>&gt; Basically, you just open the .ts file you find in the VRML folder,</p><p>Great.  I will try it.</p><p>Thanks again!</p><p>Joseph</p></div>