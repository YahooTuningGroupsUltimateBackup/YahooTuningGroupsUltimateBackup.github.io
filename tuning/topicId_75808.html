<a href="/tuning">back to list</a><h1>Algorithm for 'unfolding' regular temperaments</h1><h3>Torsten Anders &#x3C;torstenanders@gmx.de&#x3E;</h3><span>4/7/2008 3:06:46 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>Dear all,</p><p>   [This is possibly a newbie FAQ, please point me to the relevant<br/>    literature in this case :) ]</p><p>thanks again for your many responses (in particular to George who I<br/>did not thank explicitly before).</p><p>Many of you kindly gave me tuning specifications (generator and<br/>period) for regular temperaments / linear temperaments. I understood<br/>that I can use Scala to create the respective temperaments with these<br/>specs. Nevertheless, I would like to compute them myself (e.g., I can<br/>then easily use these temperaments in some composition software --<br/>without any dependency to Scale). Unfortunately, I was unable so far<br/>to find any formal explanation how a tuning table is computed from<br/>such a regular temperament specification.</p><p>So, my question is: what is the formula or algorithm you use in order<br/>to compute a tuning table (a list of cent values) for a regular<br/>temperament for which the generator and the period is given?  Also,<br/>can you recommend some introductory reading on what regular<br/>temperaments / linear temperaments are?</p><p>Thank you!</p><p>Best<br/>Torsten</p><p>--<br/>Torsten Anders<br/>Interdisciplinary Centre for Computer Music Research<br/>University of Plymouth<br/>Office: +44-1752-233667<br/>Private: +44-1752-558917<br/><a href="http://strasheela.sourceforge.net">http://strasheela.sourceforge.net</a><br/><a href="http://www.torsten-anders.de">http://www.torsten-anders.de</a></p></div><h3>Carl Lumma &#x3C;carl@lumma.org&#x3E;</h3><span>4/7/2008 5:48:46 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>Hi Torsten,</p><p>&gt; So, my question is: what is the formula or algorithm you use<br/>&gt; in order to compute a tuning table (a list of cent values)<br/>&gt; for a regular temperament for which the generator and the<br/>&gt; period is given?</p><p>If the period (P) and generator (G) are given as frequency<br/>ratios (e.g. the Pythagorean regime with 2/1 and 3/2), the<br/>pitches of a scale supporting it are given by (G^n)/(P^m),<br/>where n and m are integers between 1 and anything you like<br/>(the total number of pitches you end up with will be n*m).</p><p>The distinction between generator and period here is somewhat<br/>artificial.  Really they are both just generators.  These<br/>temperaments are called &quot;rank 2 regular temperaments&quot; because<br/>their pitches are mapped using two generators.  Typically,<br/>one of the generators quickly gives a good approximation to<br/>an interval of psychoacoustic equivalence like the octave.<br/>This generator is called the period by convention.  Usually<br/>it is either 1/3 or 1/2 of an octave, or a whole octave.<br/>When it is a whole octave we call the temperament a &quot;linear<br/>temperament&quot;, mostly by convention.  So Pythagorean scales<br/>can been seen as scales of a linear temperament with a<br/>generator of 3/2 and a mapping of</p><p>&lt; 1 1 ]<br/>&lt; 0 1 ]</p><p>This is a 3-limit mapping consisting of two &quot;vals&quot;.  The<br/>first line is the val for the period; the second line is<br/>the val for the generator.  The column on the left is the<br/>mapping to the prime number 2, and the column on the right<br/>is the mapping to the prime number 3.  So there is 1 period<br/>and 0 generators to get 2:1, and 1 generator and 1 period<br/>to get 3:1.</p><p>Is this making any sense?</p><p>If P and G are given in cents, the pitches are given by<br/>(G*N) - (P*M).  For example, in Pythagorean tuning we<br/>have G = 702 cents and P = 1200 cents.</p><p>&gt; Also, can you recommend some introductory reading on what<br/>&gt; regular temperaments / linear temperaments are?</p><p>Hopefully the above has demystified it a little.</p><p>-Carl</p></div><h3>Graham Breed &#x3C;gbreed@gmail.com&#x3E;</h3><span>4/7/2008 7:32:21 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>Torsten Anders wrote:</p><p>&gt; So, my question is: what is the formula or algorithm you use in order<br/>&gt; to compute a tuning table (a list of cent values) for a regular<br/>&gt; temperament for which the generator and the period is given?  Also,<br/>&gt; can you recommend some introductory reading on what regular<br/>&gt; temperaments / linear temperaments are?</p><p>Here&apos;s a simplification of my Python code</p><p>scale = []<br/>for nSteps in range(stepsPerPeriod):<br/>    root = (nSteps*generator)%period<br/>    for repeat in range(periodsPerOctave):<br/>        scale.append(period*repeat + root)<br/>scale.sort()</p><p>It assumes the generator and period are specified in cents.   It also assumes periodsPerOctave is given.  If you don&apos;t have that you can still get a tuning table for one period.</p><p>sorted([(n*generator)%period<br/>    for n in range(stepsPerPeriod)])</p><p>You always have to choose the number of steps you want.  You may also like the period to be include in the table</p><p>sorted([(n*generator)%period<br/>    for n in range(stepsPerPeriod)])+[period]</p><p>For background,</p><p><a href="http://eceserv0.ece.wisc.edu/%7Esethares/paperspdf/Erlich-MiddlePath.pdf">http://eceserv0.ece.wisc.edu/%7Esethares/paperspdf/Erlich-MiddlePath.pdf</a></p><p>                     Graham</p></div><h3>Torsten Anders &#x3C;torstenanders@gmx.de&#x3E;</h3><span>4/8/2008 1:12:36 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>Dear Carl,</p><p>thank you very much for your reply including these simple formulas.<br/>Thanks helpful.</p><p>Just for my better understanding: with your following formula I am in<br/>fact creating a lattice (segment) for the dimensions G and P. Is that<br/>correct?</p><p>   (G^n)/(P^m), n \in 1..n_max, m \in 1..m_max</p><p>What are typical values for n_max and m_max? For example, if I have a<br/>generator and a period for pajara  (there where many examples in the<br/>recent postings) and I want 22 pitches, do I then use the following?</p><p>   n_max = 11, m_max = 2</p><p>&gt; If P and G are given in cents, the pitches are given by<br/>&gt; (G*N) - (P*M). For example, in Pythagorean tuning we<br/>&gt; have G = 702 cents and P = 1200 cents.</p><p>That looks simple enough :)</p><p>Thanks!</p><p>Best<br/>Torsten</p><p>On Apr 8, 2008, at 1:48 AM, Carl Lumma wrote:<br/>&gt; Hi Torsten,<br/>&gt;<br/>&gt;&gt; So, my question is: what is the formula or algorithm you use<br/>&gt;&gt; in order to compute a tuning table (a list of cent values)<br/>&gt;&gt; for a regular temperament for which the generator and the<br/>&gt;&gt; period is given?<br/>&gt;<br/>&gt; If the period (P) and generator (G) are given as frequency<br/>&gt; ratios (e.g. the Pythagorean regime with 2/1 and 3/2), the<br/>&gt; pitches of a scale supporting it are given by (G^n)/(P^m),<br/>&gt; where n and m are integers between 1 and anything you like<br/>&gt; (the total number of pitches you end up with will be n*m).<br/>&gt;<br/>&gt; The distinction between generator and period here is somewhat<br/>&gt; artificial. Really they are both just generators. These<br/>&gt; temperaments are called &quot;rank 2 regular temperaments&quot; because<br/>&gt; their pitches are mapped using two generators. Typically,<br/>&gt; one of the generators quickly gives a good approximation to<br/>&gt; an interval of psychoacoustic equivalence like the octave.<br/>&gt; This generator is called the period by convention. Usually<br/>&gt; it is either 1/3 or 1/2 of an octave, or a whole octave.<br/>&gt; When it is a whole octave we call the temperament a &quot;linear<br/>&gt; temperament&quot;, mostly by convention. So Pythagorean scales<br/>&gt; can been seen as scales of a linear temperament with a<br/>&gt; generator of 3/2 and a mapping of<br/>&gt;<br/>&gt; &lt; 1 1 ]<br/>&gt; &lt; 0 1 ]<br/>&gt;<br/>&gt; This is a 3-limit mapping consisting of two &quot;vals&quot;. The<br/>&gt; first line is the val for the period; the second line is<br/>&gt; the val for the generator. The column on the left is the<br/>&gt; mapping to the prime number 2, and the column on the right<br/>&gt; is the mapping to the prime number 3. So there is 1 period<br/>&gt; and 0 generators to get 2:1, and 1 generator and 1 period<br/>&gt; to get 3:1.<br/>&gt;<br/>&gt; Is this making any sense?<br/>&gt;<br/>&gt; If P and G are given in cents, the pitches are given by<br/>&gt; (G*N) - (P*M). For example, in Pythagorean tuning we<br/>&gt; have G = 702 cents and P = 1200 cents.<br/>&gt;<br/>&gt;&gt; Also, can you recommend some introductory reading on what<br/>&gt;&gt; regular temperaments / linear temperaments are?<br/>&gt;<br/>&gt; Hopefully the above has demystified it a little.<br/>&gt;<br/>&gt; -Carl<br/>&gt;<br/>&gt;<br/>&gt; --<br/>Torsten Anders<br/>Interdisciplinary Centre for Computer Music Research<br/>University of Plymouth<br/>Office: +44-1752-233667<br/>Private: +44-1752-558917<br/><a href="http://strasheela.sourceforge.net">http://strasheela.sourceforge.net</a><br/><a href="http://www.torsten-anders.de">http://www.torsten-anders.de</a></p></div><h3>Torsten Anders &#x3C;torstenanders@gmx.de&#x3E;</h3><span>4/8/2008 1:12:43 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>Dear Carl,</p><p>thanks a lot for these Python lines. It appears to me that your<br/>formula differs slightly from Carl&apos;s. I am translating them into a<br/>common format:</p><p>   Pitch_i = (Generator * N mod Period) + (Period * M)<br/>     where N \in 1..StepsPerPeriod, M \in PeriodsPerOctave</p><p>or</p><p>   Pitch_i = (Generator * N) - (Period * M)</p><p>I don&apos;t see how I can transform one formula into the other (but that<br/>might be because my last math classes are almost 20 years ago :).<br/>What am I missing?</p><p>Thank you!</p><p>Best<br/>Torsten</p><p>On Apr 8, 2008, at 3:32 AM, Graham Breed wrote:<br/>&gt; Here&apos;s a simplification of my Python code<br/>&gt;<br/>&gt; scale = []<br/>&gt; for nSteps in range(stepsPerPeriod):<br/>&gt; root = (nSteps*generator)%period<br/>&gt; for repeat in range(periodsPerOctave):<br/>&gt; scale.append(period*repeat + root)<br/>&gt; scale.sort()<br/>&gt;<br/>&gt; It assumes the generator and period are specified in cents.<br/>&gt; It also assumes periodsPerOctave is given. If you don&apos;t<br/>&gt; have that you can still get a tuning table for one period.<br/>&gt;<br/>&gt; sorted([(n*generator)%period<br/>&gt; for n in range(stepsPerPeriod)])<br/>&gt;<br/>&gt; You always have to choose the number of steps you want. You<br/>&gt; may also like the period to be include in the table<br/>&gt;<br/>&gt; sorted([(n*generator)%period<br/>&gt; for n in range(stepsPerPeriod)])+[period]</p><p>--<br/>Torsten Anders<br/>Interdisciplinary Centre for Computer Music Research<br/>University of Plymouth<br/>Office: +44-1752-233667<br/>Private: +44-1752-558917<br/><a href="http://strasheela.sourceforge.net">http://strasheela.sourceforge.net</a><br/><a href="http://www.torsten-anders.de">http://www.torsten-anders.de</a></p></div><h3>Torsten Anders &#x3C;torstenanders@gmx.de&#x3E;</h3><span>4/8/2008 1:13:35 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>Oops, this should of course read &quot;Dear Graham&quot;.</p><p>On Apr 8, 2008, at 9:12 AM, Torsten Anders wrote:<br/>&gt; Dear Carl,<br/>&gt;<br/>&gt; thanks a lot for these Python lines. It appears to me that your<br/>&gt; formula differs slightly from Carl&apos;s. I am translating them into a<br/>&gt; common format:<br/>&gt;<br/>&gt;    Pitch_i = (Generator * N mod Period) + (Period * M)<br/>&gt;      where N \in 1..StepsPerPeriod, M \in PeriodsPerOctave<br/>&gt;<br/>&gt; or<br/>&gt;<br/>&gt;    Pitch_i = (Generator * N) - (Period * M)<br/>&gt;<br/>&gt; I don&apos;t see how I can transform one formula into the other (but that<br/>&gt; might be because my last math classes are almost 20 years ago :).<br/>&gt; What am I missing?<br/>&gt;<br/>&gt; Thank you!<br/>&gt;<br/>&gt; Best<br/>&gt; Torsten<br/>&gt;<br/>&gt; On Apr 8, 2008, at 3:32 AM, Graham Breed wrote:<br/>&gt;&gt; Here&apos;s a simplification of my Python code<br/>&gt;&gt;<br/>&gt;&gt; scale = []<br/>&gt;&gt; for nSteps in range(stepsPerPeriod):<br/>&gt;&gt; root = (nSteps*generator)%period<br/>&gt;&gt; for repeat in range(periodsPerOctave):<br/>&gt;&gt; scale.append(period*repeat + root)<br/>&gt;&gt; scale.sort()<br/>&gt;&gt;<br/>&gt;&gt; It assumes the generator and period are specified in cents.<br/>&gt;&gt; It also assumes periodsPerOctave is given. If you don&apos;t<br/>&gt;&gt; have that you can still get a tuning table for one period.<br/>&gt;&gt;<br/>&gt;&gt; sorted([(n*generator)%period<br/>&gt;&gt; for n in range(stepsPerPeriod)])<br/>&gt;&gt;<br/>&gt;&gt; You always have to choose the number of steps you want. You<br/>&gt;&gt; may also like the period to be include in the table<br/>&gt;&gt;<br/>&gt;&gt; sorted([(n*generator)%period<br/>&gt;&gt; for n in range(stepsPerPeriod)])+[period]<br/>&gt;<br/>&gt; --<br/>&gt; Torsten Anders<br/>&gt; Interdisciplinary Centre for Computer Music Research<br/>&gt; University of Plymouth<br/>&gt; Office: +44-1752-233667<br/>&gt; Private: +44-1752-558917<br/>&gt; <a href="http://strasheela.sourceforge.net">http://strasheela.sourceforge.net</a><br/>&gt; <a href="http://www.torsten-anders.de">http://www.torsten-anders.de</a><br/>&gt;<br/>&gt;<br/>&gt;<br/>&gt;</p></div><h3>Graham Breed &#x3C;gbreed@gmail.com&#x3E;</h3><span>4/8/2008 6:24:14 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>Torsten Anders wrote:</p><p>&gt; thanks a lot for these Python lines. It appears to me that your<br/>&gt; formula differs slightly from Carl&apos;s. I am translating them into a<br/>&gt; common format:<br/>&gt; &gt;     Pitch_i = (Generator * N mod Period) + (Period * M)<br/>&gt;       where N \in 1..StepsPerPeriod, M \in PeriodsPerOctave<br/>&gt; &gt; or<br/>&gt; &gt;     Pitch_i = (Generator * N) - (Period * M)<br/>&gt; &gt; I don&apos;t see how I can transform one formula into the other (but that<br/>&gt; might be because my last math classes are almost 20 years ago :).<br/>&gt; What am I missing?</p><p>The &quot;mod Period&quot; part adds or subtracts a number of periods such that (Generator * N mod Period) is always between a unison and a period.  This is an extension of the modulo operation because it doesn&apos;t require integer arguments.</p><p>Let&apos;s define the modulus as</p><p>x/y = floor(x/y) + (x mod y)/y</p><p>Then</p><p>x mod y = x - y * floor(x/y)</p><p>Generator * N mod Period =<br/>        Generator * N - Period * floor[(Generator*N)/Period]</p><p>the transformation you need is</p><p>M = floor[(Generator*N)/Period]</p><p>The reason for the modulus being there is that it ensures you get all the notes within the period when all you have to specify is the number of notes (and the period and generator sizes, of course).</p><p>More generally you&apos;d have to specify the slice of the spiral of generators you want to use.  For example, set the period to 1200 and the generator to 700.  The simple algorithm with stepsPerPeriod=7 will give you a Lydian scale.  If you wanted a major scale you&apos;d go from -1 to 5 generators instead of 0 to 6.  And more generally still you have to be explicit about M.</p><p>                     Graham</p></div><h3>Carl Lumma &#x3C;carl@lumma.org&#x3E;</h3><span>4/8/2008 12:57:11 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>Hi Torsten,</p><p>&gt; thank you very much for your reply including these simple<br/>&gt; formulas. Thanks helpful.</p><p>Sure.  A little too simple, perhaps, but hopefully they<br/>got the point across.</p><p>&gt; Just for my better understanding: with your following formula<br/>&gt; I am in fact creating a lattice (segment) for the dimensions<br/>&gt; G and P. Is that correct?</p><p>Yes.</p><p>&gt;   (G^n)/(P^m), n \in 1..n_max, m \in 1..m_max<br/>&gt;<br/>&gt; What are typical values for n_max and m_max?</p><p>It depends on the particular generator and period.  For<br/>a given G and P, certain values of n_max and m_max will<br/>result in &quot;MOS&quot; scales.  These are most popular because<br/>they have a simpler interval structure (at most 2 sizes<br/>of each generic diatonic interval... 2nds 3rds etc.).</p><p>&gt;For example, if I have a generator and a period for<br/>&gt;pajara (there where many examples in the recent postings)<br/>&gt;and I want 22 pitches, do I then use the following?<br/>&gt;<br/>&gt;   n_max = 11, m_max = 2</p><p>It depends where you want those 22 pitches.  They could be<br/>obtained with 21 generators and 0 periods, or 21 periods<br/>and 0 generators.  Probably you want 22/octave, so 10<br/>generators/period and O*2 periods, where O is the number<br/>of octaves on your instrument.</p><p>-Carl</p></div><h3>Torsten Anders &#x3C;torstenanders@gmx.de&#x3E;</h3><span>4/8/2008 3:56:35 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>Thank you for this clarification!</p><p>Torsten</p><p>On Apr 8, 2008, at 8:57 PM, Carl Lumma wrote:<br/>&gt; Hi Torsten,<br/>&gt;<br/>&gt; &gt; thank you very much for your reply including these simple<br/>&gt; &gt; formulas. Thanks helpful.<br/>&gt;<br/>&gt; Sure. A little too simple, perhaps, but hopefully they<br/>&gt; got the point across.<br/>&gt;<br/>&gt; &gt; Just for my better understanding: with your following formula<br/>&gt; &gt; I am in fact creating a lattice (segment) for the dimensions<br/>&gt; &gt; G and P. Is that correct?<br/>&gt;<br/>&gt; Yes.<br/>&gt;<br/>&gt; &gt; (G^n)/(P^m), n \in 1..n_max, m \in 1..m_max<br/>&gt; &gt;<br/>&gt; &gt; What are typical values for n_max and m_max?<br/>&gt;<br/>&gt; It depends on the particular generator and period. For<br/>&gt; a given G and P, certain values of n_max and m_max will<br/>&gt; result in &quot;MOS&quot; scales. These are most popular because<br/>&gt; they have a simpler interval structure (at most 2 sizes<br/>&gt; of each generic diatonic interval... 2nds 3rds etc.).<br/>&gt;<br/>&gt; &gt;For example, if I have a generator and a period for<br/>&gt; &gt;pajara (there where many examples in the recent postings)<br/>&gt; &gt;and I want 22 pitches, do I then use the following?<br/>&gt; &gt;<br/>&gt; &gt; n_max = 11, m_max = 2<br/>&gt;<br/>&gt; It depends where you want those 22 pitches. They could be<br/>&gt; obtained with 21 generators and 0 periods, or 21 periods<br/>&gt; and 0 generators. Probably you want 22/octave, so 10<br/>&gt; generators/period and O*2 periods, where O is the number<br/>&gt; of octaves on your instrument.<br/>&gt;<br/>&gt; -Carl<br/>&gt;<br/>&gt;<br/>&gt;<br/>--<br/>Torsten Anders<br/>Interdisciplinary Centre for Computer Music Research<br/>University of Plymouth<br/>Office: +44-1752-233667<br/>Private: +44-1752-558917<br/><a href="http://strasheela.sourceforge.net">http://strasheela.sourceforge.net</a><br/><a href="http://www.torsten-anders.de">http://www.torsten-anders.de</a></p></div>