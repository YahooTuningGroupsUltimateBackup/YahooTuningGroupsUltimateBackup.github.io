<a href="/tuning">back to list</a><h1>Regular temperament JS library</h1><h3><a id=102129 href="#102129">ðŸ”—</a>Mike Battaglia &#x3C;battaglia01@...&#x3E;</h3><span>12/27/2011 11:07:30 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>A few months ago, I mentioned I was interested in writing a JavaScript<br/>library to handle a lot of the aspects of regular temperament theory.<br/>I now feel like I know enough of the math involved to actually start<br/>doing that.</p><p>So now the question is: what branches of &quot;pure&quot; math should this<br/>library cover so that I can implement regular temperament stuff as<br/>instances of that? This is what seems to be necessary</p><p>1) Linear Algebra<br/>  a) Basic matrix algebra<br/>  b) Vectors<br/>  c) Pseudoinverse</p><p>2) Exterior Algebra<br/>  a) Exterior products<br/>  b) Interior products<br/>  c) Hodge star operator</p><p>What other specific features and subroutines should I have to handle the basics?</p><p>-Mike</p></div><h3><a id=102130 href="#102130">ðŸ”—</a>genewardsmith &#x3C;genewardsmith@...&#x3E;</h3><span>12/27/2011 11:09:21 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>--- In <a href="mailto:tuning@yahoogroups.com">tuning@yahoogroups.com</a>, Mike Battaglia &lt;battaglia01@...&gt; wrote:</p><p>&gt; What other specific features and subroutines should I have to handle the basics?</p><p>Hermite normal form, saturation.</p></div><h3><a id=102132 href="#102132">ðŸ”—</a>Mike Battaglia &#x3C;battaglia01@...&#x3E;</h3><span>12/27/2011 11:25:18 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>On Tue, Dec 27, 2011 at 2:09 PM, genewardsmith<br/>&lt;genewardsmith@...&gt; wrote:<br/>&gt;<br/>&gt; --- In <a href="mailto:tuning@yahoogroups.com">tuning@yahoogroups.com</a>, Mike Battaglia &lt;battaglia01@...&gt; wrote:<br/>&gt;<br/>&gt; &gt; What other specific features and subroutines should I have to handle the basics?<br/>&gt;<br/>&gt; Hermite normal form, saturation.</p><p>Oh right, can&apos;t forget those.</p><p>With the addition of those two things, does that handle 100% of<br/>everything on this page?</p><p><a href="http://xenharmonic.wikispaces.com/Mathematical+Theory">http://xenharmonic.wikispaces.com/Mathematical+Theory</a></p><p>In other words, can everything on these pages be constructed by making<br/>use of those subroutines?</p><p>Also, how should I organize this? Should I put it on sourceforge?</p><p>-Mike</p></div><h3><a id=102133 href="#102133">ðŸ”—</a>gbreed@...</h3><span>12/27/2011 12:00:00 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>You don&apos;t need exterior algebra. You need to be able to solve a least squares problem but that needn&apos;t involve a pseudoinverse. You will need determinants to go beyond low rank special cases.<br/>Hermite normal form is useful as Gene said.</p><p>        Graham</p><p>------Original message------<br/>From: Mike Battaglia &lt;battaglia01@...&gt;<br/>To: &lt;<a href="mailto:tuning@yahoogroups.com">tuning@yahoogroups.com</a>&gt;<br/>Date: Tuesday, December 27, 2011 2:07:30 PM GMT-0500<br/>Subject: [tuning] Regular temperament JS library</p><p>A few months ago, I mentioned I was interested in writing a JavaScript<br/>library to handle a lot of the aspects of regular temperament theory.<br/>I now feel like I know enough of the math involved to actually start<br/>doing that.</p><p>So now the question is: what branches of &quot;pure&quot; math should this<br/>library cover so that I can implement regular temperament stuff as<br/>instances of that? This is what seems to be necessary</p><p>1) Linear Algebra<br/>  a) Basic matrix algebra<br/>  b) Vectors<br/>  c) Pseudoinverse</p><p>2) Exterior Algebra<br/>  a) Exterior products<br/>  b) Interior products<br/>  c) Hodge star operator</p><p>What other specific features and subroutines should I have to handle the basics?</p><p>-Mike</p><p>------------------------------------</p><p>You can configure your subscription by sending an empty email to one<br/>of these addresses (from the address at which you receive the list):<br/>  <a href="mailto:tuning-subscribe@yahoogroups.com">tuning-subscribe@yahoogroups.com</a> - join the tuning group.<br/>  <a href="mailto:tuning-unsubscribe@yahoogroups.com">tuning-unsubscribe@yahoogroups.com</a> - leave the group.<br/>  <a href="mailto:tuning-nomail@yahoogroups.com">tuning-nomail@yahoogroups.com</a> - turn off mail from the group.<br/>  <a href="mailto:tuning-digest@yahoogroups.com">tuning-digest@yahoogroups.com</a> - set group to send daily digests.<br/>  <a href="mailto:tuning-normal@yahoogroups.com">tuning-normal@yahoogroups.com</a> - set group to send individual emails.<br/>  <a href="mailto:tuning-help@yahoogroups.com">tuning-help@yahoogroups.com</a> - receive general help information.<br/>Yahoo! Groups Links</p></div><h3><a id=102137 href="#102137">ðŸ”—</a>Carl Lumma &#x3C;carl@...&#x3E;</h3><span>12/27/2011 12:20:56 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>--- In <a href="mailto:tuning@yahoogroups.com">tuning@yahoogroups.com</a>, Mike Battaglia &lt;battaglia01@...&gt; wrote:</p><p>&gt; Also, how should I organize this? Should I put it on sourceforge?</p><p>github &gt; sourceforge  -C.</p></div><h3><a id=103261 href="#103261">ðŸ”—</a>Mike Battaglia &#x3C;battaglia01@...&#x3E;</h3><span>1/28/2012 11:31:02 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>OK, coming back to this, there doesn&apos;t seem to be a &quot;basic matrix<br/>algebra&quot; library for JS that has all the stuff I want. So a lot of my<br/>time will be spent implementing algorithms, unfortunately.</p><p>I&apos;ve thought about this a bit and it seems like the exterior algebra<br/>stuff ought to be significantly easier to do. Is this correct? For<br/>example, I have no idea how to compute the null space of a matrix just<br/>yet, but if I use only monzos and vals, I can always do this:</p><p>1) take a set of vals<br/>2) wedge them together and compute the multival and remove contorsion<br/>3) get their dual exactly as Gene&apos;s defined it on the wiki<br/>4) take interior products with the resulting multimonzo<br/>5) transpose and put into Hermite normal form (how?) and transpose again</p><p>So the only thing I&apos;d need to implement requiring any real work is<br/>Hermite form, which seems like it&apos;ll have to be done no matter what I<br/>do really. Now I have a set of monzos tempered out by those vals. I<br/>can do the same thing in reverse to get the vals tempering out a set<br/>of monzos. I&apos;d have to remove contorsion throughout this process<br/>though, but OK. If it weren&apos;t for the fact that all contorted versions<br/>of the same temperament have the same multival, I could probably use<br/>this to actually compute the null space of a matrix.</p><p>In contrast, this is how it seems it&apos;ll work out for the matrix-based approach<br/>1) take a set of vals, concatenate them into a matrix<br/>2) find the null space... how?<br/>3) put this null space into a reduced form that somehow makes sense as<br/>a set of column vectors representing monzos... how?<br/>4) ok, now you&apos;re done</p><p>How do I do any of this? Do I need to program everything using<br/>rational arithmetic? That might be a dealbreaker...</p><p>-Mike</p></div><h3><a id=103265 href="#103265">ðŸ”—</a>gbreed@...</h3><span>1/29/2012 6:54:36 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>I don&apos;t know why you say there isn&apos;t a suitable javascript library when I thought we found two. You can find answers to your questions in my Python code anyway</p><p>----------<br/>Sent from my Nokia phone</p><p>------Original message------<br/>From: Mike Battaglia &lt;battaglia01@...&gt;<br/>To: &lt;<a href="mailto:tuning@yahoogroups.com">tuning@yahoogroups.com</a>&gt;<br/>Date: Sunday, January 29, 2012 2:31:02 AM GMT-0500<br/>Subject: [tuning] Re: Regular temperament JS library</p><p>OK, coming back to this, there doesn&apos;t seem to be a &quot;basic matrix<br/>algebra&quot; library for JS that has all the stuff I want. So a lot of my<br/>time will be spent implementing algorithms, unfortunately.</p><p>I&apos;ve thought about this a bit and it seems like the exterior algebra<br/>stuff ought to be significantly easier to do. Is this correct? For<br/>example, I have no idea how to compute the null space of a matrix just<br/>yet, but if I use only monzos and vals, I can always do this:</p><p>1) take a set of vals<br/>2) wedge them together and compute the multival and remove contorsion<br/>3) get their dual exactly as Gene&apos;s defined it on the wiki<br/>4) take interior products with the resulting multimonzo<br/>5) transpose and put into Hermite normal form (how?) and transpose again</p><p>So the only thing I&apos;d need to implement requiring any real work is<br/>Hermite form, which seems like it&apos;ll have to be done no matter what I<br/>do really. Now I have a set of monzos tempered out by those vals. I<br/>can do the same thing in reverse to get the vals tempering out a set<br/>of monzos. I&apos;d have to remove contorsion throughout this process<br/>though, but OK. If it weren&apos;t for the fact that all contorted versions<br/>of the same temperament have the same multival, I could probably use<br/>this to actually compute the null space of a matrix.</p><p>In contrast, this is how it seems it&apos;ll work out for the matrix-based approach<br/>1) take a set of vals, concatenate them into a matrix<br/>2) find the null space... how?<br/>3) put this null space into a reduced form that somehow makes sense as<br/>a set of column vectors representing monzos... how?<br/>4) ok, now you&apos;re done</p><p>How do I do any of this? Do I need to program everything using<br/>rational arithmetic? That might be a dealbreaker...</p><p>-Mike</p><p>------------------------------------</p><p>You can configure your subscription by sending an empty email to one<br/>of these addresses (from the address at which you receive the list):<br/>  <a href="mailto:tuning-subscribe@yahoogroups.com">tuning-subscribe@yahoogroups.com</a> - join the tuning group.<br/>  <a href="mailto:tuning-unsubscribe@yahoogroups.com">tuning-unsubscribe@yahoogroups.com</a> - leave the group.<br/>  <a href="mailto:tuning-nomail@yahoogroups.com">tuning-nomail@yahoogroups.com</a> - turn off mail from the group.<br/>  <a href="mailto:tuning-digest@yahoogroups.com">tuning-digest@yahoogroups.com</a> - set group to send daily digests.<br/>  <a href="mailto:tuning-normal@yahoogroups.com">tuning-normal@yahoogroups.com</a> - set group to send individual emails.<br/>  <a href="mailto:tuning-help@yahoogroups.com">tuning-help@yahoogroups.com</a> - receive general help information.<br/>Yahoo! Groups Links</p></div><h3><a id=103302 href="#103302">ðŸ”—</a>Mike Battaglia &#x3C;battaglia01@...&#x3E;</h3><span>1/30/2012 4:12:51 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>On Sun, Jan 29, 2012 at 9:54 AM, gbreed@... &lt;gbreed@...&gt; wrote:<br/>&gt;<br/>&gt; I don&apos;t know why you say there isn&apos;t a suitable javascript library when I thought we found two. You can find answers to your questions in my Python code anyway</p><p>We found Sylvester and glMatrix. The latter limits itself to 3x3 and<br/>4x4 matrices only, because it&apos;s deliberately designed to be really<br/>fast for JS computer graphics applications, which tend to use those<br/>matrices. There are a lot of similarly limited matrix JS libraries<br/>I&apos;ve found that only use matrices of a certain size, because there&apos;s<br/>been a lot of focus in this area because of an emergent interest 3D<br/>web programming. As far as I know, the only library out there which<br/>can actually do basic matrix algebra on matrices of an arbitrary size<br/>is Sylvester.</p><p>Sylvester has four classes: Matrix, Vector, Line, and Plane. The last<br/>two only exist in three dimensions, and as such I don&apos;t really have<br/>much general use for them, so I assume the first two classes will take<br/>up the majority of my time. I was wrong about the Matrix class though,<br/>I thought it was pretty weakly featured, but it does have some useful<br/>stuff. There&apos;s just a lot of stuff it doesn&apos;t have, like an rref<br/>function. It doesn&apos;t have adjoint either. It does have<br/>toUpperTriangular though, which might be sort of helpful, maybe.</p><p>Anyway, so point is, Sylvester isn&apos;t fantastic, but it&apos;s not as dismal<br/>as I thought. I&apos;d like to start organizing and setting up some more<br/>obvious matrix functions, like the two I mentioned, an isInteger<br/>function, etc. All really simple stuff for now. There&apos;s a lot of<br/>obvious and really simple functions I&apos;d like to add to the matrix set<br/>to extend Sylvester in addition to the more complicated nontrivial<br/>stuff.</p><p>I also feel like in the process of working out regular temperament<br/>stuff that there will be certain new abstractions which will make<br/>things easier. At some point it&apos;d be nice to have a sister class to<br/>Vector called Covector, which does everything Vector does but stuffs<br/>its results into a row matrix instead of a column matrix. Simple<br/>things like that.</p><p>So I guess my question is, what&apos;s the best way to do this? Do I fork<br/>it? Do I release this as a library for Sylvester? Do I just throw it<br/>into the existing product? I don&apos;t know what the proper etiquette is<br/>because I&apos;m new to open source development.</p><p>-Mike</p></div><h3><a id=103303 href="#103303">ðŸ”—</a>Mike Battaglia &#x3C;battaglia01@...&#x3E;</h3><span>1/30/2012 5:01:02 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>Actually, there&apos;s a damn lot of stuff it doesn&apos;t have which I need. It<br/>doesn&apos;t have pointwise multiplication, for one, nor pointwise<br/>anything. I wish it did. I think I&apos;m going to end up contributing more<br/>code to this than it currently has. Also, this appears to be<br/>abandoned, as development on this hasn&apos;t taken place since 2007. Also,<br/>he doesn&apos;t have a github or repo of any kind to do anything.</p><p>Given that the entire blogosphere is abuzz with how much JavaScript<br/>linear algebra sucks, I&apos;m just going to scrap this whole thing and<br/>start over, starting with Sylvester and building on that.</p><p>-Mike</p><p>On Mon, Jan 30, 2012 at 7:12 PM, Mike Battaglia &lt;battaglia01@...&gt; wrote:<br/>&gt; There&apos;s just a lot of stuff it doesn&apos;t have, like an rref<br/>&gt; function. It doesn&apos;t have adjoint either. It does have<br/>&gt; toUpperTriangular though, which might be sort of helpful, maybe.</p></div><h3><a id=103304 href="#103304">ðŸ”—</a>genewardsmith &#x3C;genewardsmith@...&#x3E;</h3><span>1/30/2012 5:37:58 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>--- In <a href="mailto:tuning@yahoogroups.com">tuning@yahoogroups.com</a>, Mike Battaglia &lt;battaglia01@...&gt; wrote:</p><p>&gt; Given that the entire blogosphere is abuzz with how much JavaScript<br/>&gt; linear algebra sucks, I&apos;m just going to scrap this whole thing and<br/>&gt; start over, starting with Sylvester and building on that.</p><p>My code for music stuff in Maple has a big library it can access, but I don&apos;t use it directly because I don&apos;t like the proliferation of data types and constructors. I suggest making everything a list, including lists of lists, makes life easier.</p></div><h3><a id=103305 href="#103305">ðŸ”—</a>Mike Battaglia &#x3C;battaglia01@...&#x3E;</h3><span>1/30/2012 5:58:16 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>On Mon, Jan 30, 2012 at 8:37 PM, genewardsmith<br/>&lt;genewardsmith@...&gt; wrote:<br/>&gt;<br/>&gt; --- In <a href="mailto:tuning@yahoogroups.com">tuning@yahoogroups.com</a>, Mike Battaglia &lt;battaglia01@...&gt; wrote:<br/>&gt;<br/>&gt; &gt; Given that the entire blogosphere is abuzz with how much JavaScript<br/>&gt; &gt; linear algebra sucks, I&apos;m just going to scrap this whole thing and<br/>&gt; &gt; start over, starting with Sylvester and building on that.<br/>&gt;<br/>&gt; My code for music stuff in Maple has a big library it can access, but I don&apos;t use it directly because I don&apos;t like the proliferation of data types and constructors. I suggest making everything a list, including lists of lists, makes life easier.</p><p>Yes, I thought you&apos;d like the way JavaScript handles that, actually.<br/>In JavaScript, the &quot;list&quot; datatype is called an Array, and it looks<br/>like this:</p><p>var A = [1, 2, 3, 4, 5, 6]</p><p>Note that there&apos;s no semicolon on the end as with C; you can put one<br/>if you want but it&apos;s optional. Arrays can be multidimensional just by<br/>putting them inside one another, as follows:</p><p>var A = [[1, 2, 3], [4, 5, 6]]</p><p>This is a 2x3 multidimensional array. By itself, though, an Array<br/>isn&apos;t a matrix, it&apos;s just a primitive data type that holds stuff. You<br/>don&apos;t even have to put numbers in it:</p><p>var A = [[1, &quot;two&quot;, &quot;shoe&quot;], [&quot;blah&quot;, &quot;blah&quot;, 17]]</p><p>So it&apos;s rather flexible - and a bit too flexible, in fact. Also, it<br/>doesn&apos;t come with any methods and it&apos;s a bit strange to override the<br/>existing ones, as that might cause some problems integrating with<br/>other JavaScript libraries. The best way to handle this is to come up<br/>with a Matrix class which takes an multidimensional Array, or an Array<br/>of Arrays, or alternately, a &quot;list of lists&quot; as input, which would<br/>look something like this:</p><p>var A = Matrix([[1, 2, 3], [4, 5, 6])</p><p>And this is roughly the way Maple does it as well. The syntax won&apos;t<br/>always sync up perfectly like that, but for the most part it&apos;ll be<br/>very close. Thought you might like that.</p><p>The real question facing me now is rational vs floating point<br/>arithmetic. I assume that as a mathematician you&apos;ll probably like the<br/>former, but as an engineer the scope of this project will balloon so<br/>ridiculously if I tackle that that I don&apos;t want to have to do it<br/>unless I really have to. Thoughts?</p><p>-Mike</p></div><h3><a id=103306 href="#103306">ðŸ”—</a>Mike Battaglia &#x3C;battaglia01@...&#x3E;</h3><span>1/30/2012 5:58:57 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>On Mon, Jan 30, 2012 at 8:58 PM, Mike Battaglia &lt;battaglia01@...&gt; wrote:<br/>&gt;<br/>&gt; var A = Matrix([[1, 2, 3], [4, 5, 6])</p><p>Sorry, syntax error here - I left off a bracket at the end. Should be this:</p><p>var A = Matrix([[1, 2, 3], [4, 5, 6]])</p><p>-Mike</p></div><h3><a id=103308 href="#103308">ðŸ”—</a>genewardsmith &#x3C;genewardsmith@...&#x3E;</h3><span>1/30/2012 8:40:59 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>--- In <a href="mailto:tuning@yahoogroups.com">tuning@yahoogroups.com</a>, Mike Battaglia &lt;battaglia01@...&gt; wrote:</p><p> The best way to handle this is to come up<br/>&gt; with a Matrix class which takes an multidimensional Array, or an Array<br/>&gt; of Arrays, or alternately, a &quot;list of lists&quot; as input</p><p>Why is that the best way? Why not simply write functions such that if the list of lists is a matrix, does what you want it to do, and to hell with all the friggin data types?</p><p>&gt; The real question facing me now is rational vs floating point<br/>&gt; arithmetic. I assume that as a mathematician you&apos;ll probably like the<br/>&gt; former, but as an engineer the scope of this project will balloon so<br/>&gt; ridiculously if I tackle that that I don&apos;t want to have to do it<br/>&gt; unless I really have to. Thoughts?</p><p>Rational arithmetic is very useful, but a lot can be done just with integer arithmetic. How hard would it be to implement rational arithmetic? Also, how well does JavaScript handle bignums?</p></div><h3><a id=103316 href="#103316">ðŸ”—</a>gbreed@...</h3><span>1/31/2012 1:26:11 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>Javascript uses 54 bit integers but some operations are limited to 32 bit. There are arbitrary precision libraries for encryption but I don&apos;t know them. Rational numbers may not be that difficult but they&apos;re unlikely to be worth any effort they require. You don&apos;t get operator overloading.<br/>Oh, and arrays most certainly do have methods.</p><p>----------<br/>Sent from my Nokia phone</p><p>------Original message------<br/>From: genewardsmith &lt;<a href="mailto:genewardsmith@sbcglobal.net">genewardsmith@sbcglobal.net</a>&gt;<br/>To: &lt;<a href="mailto:tuning@yahoogroups.com">tuning@yahoogroups.com</a>&gt;<br/>Date: Tuesday, January 31, 2012 4:40:59 AM GMT-0000<br/>Subject: [tuning] Re: Regular temperament JS library</p><p>--- In <a href="mailto:tuning@yahoogroups.com">tuning@yahoogroups.com</a>, Mike Battaglia &lt;battaglia01@...&gt; wrote:</p><p> The best way to handle this is to come up<br/>&gt; with a Matrix class which takes an multidimensional Array, or an Array<br/>&gt; of Arrays, or alternately, a &quot;list of lists&quot; as input</p><p>Why is that the best way? Why not simply write functions such that if the list of lists is a matrix, does what you want it to do, and to hell with all the friggin data types?</p><p>&gt; The real question facing me now is rational vs floating point<br/>&gt; arithmetic. I assume that as a mathematician you&apos;ll probably like the<br/>&gt; former, but as an engineer the scope of this project will balloon so<br/>&gt; ridiculously if I tackle that that I don&apos;t want to have to do it<br/>&gt; unless I really have to. Thoughts?</p><p>Rational arithmetic is very useful, but a lot can be done just with integer arithmetic. How hard would it be to implement rational arithmetic? Also, how well does JavaScript handle bignums?</p><p>------------------------------------</p><p>You can configure your subscription by sending an empty email to one<br/>of these addresses (from the address at which you receive the list):<br/>  <a href="mailto:tuning-subscribe@yahoogroups.com">tuning-subscribe@yahoogroups.com</a> - join the tuning group.<br/>  <a href="mailto:tuning-unsubscribe@yahoogroups.com">tuning-unsubscribe@yahoogroups.com</a> - leave the group.<br/>  <a href="mailto:tuning-nomail@yahoogroups.com">tuning-nomail@yahoogroups.com</a> - turn off mail from the group.<br/>  <a href="mailto:tuning-digest@yahoogroups.com">tuning-digest@yahoogroups.com</a> - set group to send daily digests.<br/>  <a href="mailto:tuning-normal@yahoogroups.com">tuning-normal@yahoogroups.com</a> - set group to send individual emails.<br/>  <a href="mailto:tuning-help@yahoogroups.com">tuning-help@yahoogroups.com</a> - receive general help information.<br/>Yahoo! Groups Links</p></div><h3><a id=103317 href="#103317">ðŸ”—</a>Mike Battaglia &#x3C;battaglia01@...&#x3E;</h3><span>1/31/2012 1:48:23 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>On Mon, Jan 30, 2012 at 11:40 PM, genewardsmith<br/>&lt;genewardsmith@...&gt; wrote:<br/>&gt;<br/>&gt; --- In <a href="mailto:tuning@yahoogroups.com">tuning@yahoogroups.com</a>, Mike Battaglia &lt;battaglia01@...&gt; wrote:<br/>&gt;<br/>&gt; The best way to handle this is to come up<br/>&gt; &gt; with a Matrix class which takes an multidimensional Array, or an Array<br/>&gt; &gt; of Arrays, or alternately, a &quot;list of lists&quot; as input<br/>&gt;<br/>&gt; Why is that the best way? Why not simply write functions such that if the list of lists is a matrix, does what you want it to do, and to hell with all the friggin data types?</p><p>JavaScript is loosely typed, so there&apos;s no strict data types in the<br/>same sense that there is in C. The difference in your end user<br/>experience is mainly one of syntactic sugar. For example, here&apos;s the<br/>way you suggest:</p><p>var meantone = [[1, 1, 0], [0, 1, 4]];<br/>var syntonic = nullspace(meantone);</p><p>Here&apos;s the object-based way:</p><p>var meantone = [[1, 1, 0], [0, 1, 4]];<br/>var syntonic = meantone.nullspace();</p><p>The difference has been entirely reduced to the syntax involved. The<br/>reason I&apos;d like to do it the second way is that I find it easier to<br/>code, and I think it&apos;ll make it easier to integrate with other web<br/>technologies. For example, let&apos;s say I have a function called<br/>&quot;diagonal&quot; which returns the diagonal of a matrix, and I call it by<br/>saying</p><p>var contortedJI = [[1,0,0],[0,2,0],[0,0,1]];<br/>var d = diagonal(contortedJI);</p><p>Now let&apos;s say someone wants to use my library, but they have a<br/>function called diagonal which draws a diagonal line. Which diagonal<br/>is called? Now you have a naming conflict, which is bad. If you want<br/>to keep things entirely procedural and avoid OOP, the solution is to<br/>do this:</p><p>var d = Matrix.diagonal(contortedJI)</p><p>But is there really any difference between that and this?</p><p>var d = contortedJI.diagonal()</p><p>You tell me.</p><p>&gt; &gt; The real question facing me now is rational vs floating point<br/>&gt; &gt; arithmetic. I assume that as a mathematician you&apos;ll probably like the<br/>&gt; &gt; former, but as an engineer the scope of this project will balloon so<br/>&gt; &gt; ridiculously if I tackle that that I don&apos;t want to have to do it<br/>&gt; &gt; unless I really have to. Thoughts?<br/>&gt;<br/>&gt; Rational arithmetic is very useful, but a lot can be done just with integer arithmetic. How hard would it be to implement rational arithmetic? Also, how well does JavaScript handle bignums?</p><p>Integer arithmetic is much easier. It&apos;s easy for me to program a bunch<br/>of functions which assume the matrix is an integer matrix. If the user<br/>tries to do something stupid like pass a floating point matrix into an<br/>integer routine, like calling HermiteForm on a floating point matrix,<br/>there&apos;s plenty of ways to handle that - I could provide functions like<br/>isIntegerMatrix() so the user can check before doing anything stupid,<br/>or I could baby the user and return an error, etc. That part&apos;s easy.</p><p>Rational stuff is not. The problem is that there&apos;s no primitive<br/>Rational datatype. So I&apos;d either have to make or find one, which is<br/>partly why rational arithmetic is more difficult to implement. It&apos;s<br/>not the end of the world, but I want to avoid it if possible, because<br/>it complicates the hell out of everything. Worst of all, it makes the<br/>syntax ugly as hell, because JS has no operator overloading, so you&apos;d<br/>have to do stuff like</p><p>var fifth = Rational(&quot;3/2&quot;)<br/>var fourth = Rational(&quot;4/3&quot;)</p><p>Then to multiply things, you&apos;d have to do something like</p><p>var result = multiply(fifth,fourth)</p><p>or</p><p>var result = fifth.times(fourth)</p><p>the best I can do is</p><p>var result = fifth.x(fourth)</p><p>It just sucks.</p><p>Bignums are pretty good in JavaScript; it can get integers up to +/-<br/>2^53 without a problem. Floating points let you go much larger, but<br/>then you lose precision in the least significant digits. I know of at<br/>least one BigDecimal library out there, but even that still sucks,<br/>because it&apos;s still prone to the same operator issues. I really,<br/>really, really want to avoid this unless I absolutely have to.</p><p>I&apos;m asking because Keenan proposed that linear algebra is<br/>significantly more sensitive to rounding error than the other usual<br/>engineering disciplines that I&apos;m familiar with, and linked me to some<br/>papers on numerical stability, so now I&apos;m not sure how to proceed. I<br/>want to make sure I build this right from the ground up before I go<br/>program rref and pseudoinverse and so on functions and find out that<br/>they don&apos;t work. So if it&apos;s really necessary to build it in, I&apos;ll do<br/>it, but I won&apos;t like it.</p><p>-Mike</p></div><h3><a id=103318 href="#103318">ðŸ”—</a>Mike Battaglia &#x3C;battaglia01@...&#x3E;</h3><span>1/31/2012 1:54:43 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>On Tue, Jan 31, 2012 at 4:26 AM, gbreed@... &lt;gbreed@...&gt; wrote:<br/>&gt;<br/>&gt; Javascript uses 54 bit integers but some operations are limited to 32 bit.</p><p>What operations are limited to 32 bit?</p><p>&gt; There are arbitrary precision libraries for encryption but I don&apos;t know them. Rational numbers may not be that difficult but they&apos;re unlikely to be worth any effort they require. You don&apos;t get operator overloading.</p><p>One thing I was thinking about doing was sneaking the BigDecimal class<br/>in there under the hood just for operations that require extra<br/>precision. For example, I hear rref is prone to roundoff error<br/>problems, except linear algebra people like to call those &quot;numerical<br/>stability&quot; problems. So what I could do is just, in my rref routine,<br/>convert all of the entries in the matrix to BigDecimal entries, get<br/>the exact rref value beyond whatever JS&apos;s floating point resolution<br/>is, round it off under the hood, and convert back to a Number at the<br/>end without the user ever knowing what&apos;s happened.</p><p>Stuff using BigDecimal stuff would still be slow and hence suck<br/>tremendously for any of the cooler applications of an actual linear<br/>algebra library in JavaScript, but it&apos;d get the job done, hide all of<br/>the messy syntactic stuff from the user, and avoid stability problems.<br/>I&apos;d probably still want to make a fast_rref() function though.</p><p>&gt; Oh, and arrays most certainly do have methods.</p><p>[&quot;typo&quot;, &quot;a&quot;, &quot;was&quot;, &quot;it&quot;].reverse()</p><p>-Mike</p></div><h3><a id=103319 href="#103319">ðŸ”—</a>Mike Battaglia &#x3C;battaglia01@...&#x3E;</h3><span>1/31/2012 2:03:52 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>On Tue, Jan 31, 2012 at 4:48 AM, Mike Battaglia &lt;battaglia01@...&gt; wrote:<br/>&gt;<br/>&gt; Here&apos;s the object-based way:<br/>&gt;<br/>&gt; var meantone = [[1, 1, 0], [0, 1, 4]];<br/>&gt; var syntonic = meantone.nullspace();</p><p>Sorry, I made a typo here. These are your three options:</p><p>==PROCEDURAL WAY THAT IS UNWISE FOR ME TO DO==<br/>var meantone = [[1, 1, 0], [0, 1, 4]];<br/>var syntonic = nullspace(meantone);</p><p>==PROCEDURAL WAY THAT I ACTUALLY CAN DO==<br/>var meantone = [[1, 1, 0], [0, 1, 4]];<br/>var syntonic = Matrix.nullspace(meantone);</p><p>==OOP WAY THAT I WANT TO DO IT==<br/>var meantone = Matrix([[1, 1, 0], [0, 1, 4]]);<br/>var syntonic = meantone.nullspace();</p><p>Those are the three options. At the end of it, syntonic will be set to<br/>the list corresponding to the nullspace, which will be reducible to<br/>[[-4], [4], [-1]], which is a column vector. If I do it the third way,<br/>syntonic will be set to the same thing, wrapped in a Matrix object.</p><p>I don&apos;t really think there&apos;s too much difference between any of these,<br/>so it might be bikeshedding. If you have any serious objections<br/>though, now&apos;s the time. The options are #2 and #3 though, and not #1,<br/>because I&apos;m not going to flood the global namespace with names like<br/>&quot;diag&quot; and &quot;det&quot; and &quot;nullspace,&quot; as that&apos;s a bad idea. (You can<br/>always use with(Matrix) { ... } anyway though, same as with Maple.)</p><p>And it might just boil down to that #3 will be easiest to code anyway,<br/>which is what I suspect :)</p><p>-Mike</p></div><h3><a id=103329 href="#103329">ðŸ”—</a>Keenan Pepper &#x3C;keenanpepper@...&#x3E;</h3><span>1/31/2012 11:55:59 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>--- In <a href="mailto:tuning@yahoogroups.com">tuning@yahoogroups.com</a>, Mike Battaglia &lt;battaglia01@...&gt; wrote:<br/>&gt; One thing I was thinking about doing was sneaking the BigDecimal class<br/>&gt; in there under the hood just for operations that require extra<br/>&gt; precision. For example, I hear rref is prone to roundoff error<br/>&gt; problems, except linear algebra people like to call those &quot;numerical<br/>&gt; stability&quot; problems. So what I could do is just, in my rref routine,<br/>&gt; convert all of the entries in the matrix to BigDecimal entries, get<br/>&gt; the exact rref value beyond whatever JS&apos;s floating point resolution<br/>&gt; is, round it off under the hood, and convert back to a Number at the<br/>&gt; end without the user ever knowing what&apos;s happened.</p><p>This seems like the worst of both worlds to me. Why not simply use numerically stable algorithms with floating point?</p><p>Keenan</p></div><h3><a id=103330 href="#103330">ðŸ”—</a>gbreed@...</h3><span>1/31/2012 12:13:14 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>Bitwise operations work on 32 bit integers. Array indices are 32 bit integers. It looks like any function that requires an integer casts it to 32 bits.<br/>The floating point model should be good enough for tuning theory. Some least squares calculations can underflow so be careful there.<br/>A lot of the work can be done with integers. Vals and monzos shouldn&apos;t overflow. Hermite reduction generally makes the numbers smaller. You might want big integers for ratios.</p><p>----------<br/>Sent from my Nokia phone</p><p>------Original message------<br/>From: Mike Battaglia &lt;battaglia01@...&gt;<br/>To: &lt;<a href="mailto:tuning@yahoogroups.com">tuning@yahoogroups.com</a>&gt;<br/>Date: Tuesday, January 31, 2012 4:54:43 AM GMT-0500<br/>Subject: Re: [tuning] Re: Regular temperament JS library</p><p>On Tue, Jan 31, 2012 at 4:26 AM, gbreed@... &lt;gbreed@...&gt; wrote:<br/>&gt;<br/>&gt; Javascript uses 54 bit integers but some operations are limited to 32 bit.</p><p>What operations are limited to 32 bit?</p><p>&gt; There are arbitrary precision libraries for encryption but I don&apos;t know them. Rational numbers may not be that difficult but they&apos;re unlikely to be worth any effort they require. You don&apos;t get operator overloading.</p><p>One thing I was thinking about doing was sneaking the BigDecimal class<br/>in there under the hood just for operations that require extra<br/>precision. For example, I hear rref is prone to roundoff error<br/>problems, except linear algebra people like to call those &quot;numerical<br/>stability&quot; problems. So what I could do is just, in my rref routine,<br/>convert all of the entries in the matrix to BigDecimal entries, get<br/>the exact rref value beyond whatever JS&apos;s floating point resolution<br/>is, round it off under the hood, and convert back to a Number at the<br/>end without the user ever knowing what&apos;s happened.</p><p>Stuff using BigDecimal stuff would still be slow and hence suck<br/>tremendously for any of the cooler applications of an actual linear<br/>algebra library in JavaScript, but it&apos;d get the job done, hide all of<br/>the messy syntactic stuff from the user, and avoid stability problems.<br/>I&apos;d probably still want to make a fast_rref() function though.</p><p>&gt; Oh, and arrays most certainly do have methods.</p><p>[&quot;typo&quot;, &quot;a&quot;, &quot;was&quot;, &quot;it&quot;].reverse()</p><p>-Mike</p><p>------------------------------------</p><p>You can configure your subscription by sending an empty email to one<br/>of these addresses (from the address at which you receive the list):<br/>  <a href="mailto:tuning-subscribe@yahoogroups.com">tuning-subscribe@yahoogroups.com</a> - join the tuning group.<br/>  <a href="mailto:tuning-unsubscribe@yahoogroups.com">tuning-unsubscribe@yahoogroups.com</a> - leave the group.<br/>  <a href="mailto:tuning-nomail@yahoogroups.com">tuning-nomail@yahoogroups.com</a> - turn off mail from the group.<br/>  <a href="mailto:tuning-digest@yahoogroups.com">tuning-digest@yahoogroups.com</a> - set group to send daily digests.<br/>  <a href="mailto:tuning-normal@yahoogroups.com">tuning-normal@yahoogroups.com</a> - set group to send individual emails.<br/>  <a href="mailto:tuning-help@yahoogroups.com">tuning-help@yahoogroups.com</a> - receive general help information.<br/>Yahoo! Groups Links</p></div>