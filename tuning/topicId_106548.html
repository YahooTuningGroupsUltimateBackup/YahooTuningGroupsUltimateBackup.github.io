<a href="/tuning">back to list</a><h1>Scala: Rational Approximation within cent Limits?</h1><h3><a id=106548 href="#106548">ðŸ”—</a>nils.blindenstein@...</h3><span>6/15/2016 2:14:25 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>Hi everyone,<br/>I&apos;ve been working with Scala for a couple of years now and know my way pretty well around the sub-set of features that I need on a regular basis.</p><p>What I&apos;m beginning to need more often recently are the approximation features. Unfortunately, there&apos;s one thing I can&apos;t figure out how to do. I&apos;m pretty sure I&apos;m using the right feature for what I want (&rsaquo;Rational Approximation&lsaquo; ...or maybe not?), but not with the right setting.</p><p>The job that I want Scala to do is best described as:</p><p>&raquo;Find me the simplest rational form of the scale&apos;s pitches (specified as ratio or in cents) within the limits of +/- x cents difference from the original pitch.&laquo;</p><p>A (made-up, but somewhat realistic) example:</p><p>* Let the original pitch be 110.5 cents.<br/>* We want to substitute it by a rational interval, as simple as possible.<br/>* Simple, for our purposes, merely means: small numbers.<br/>* That pitch may not differ from the original by more than +/- 10 cents.</p><p>So:<br/>120/113 (~104c), for example, is -6.5c from the original;<br/>15/14 (~119.5c) is +9c away, but simpler (which we prioritize), so return the latter.</p><p>So the scale that before was</p><p>1/1<br/>110.5<br/>2/1</p><p>should now be</p><p>1/1<br/>15/14<br/>2/1</p><p>Optionally, I want to be able to specify a prime limit: &raquo;Only return intervals that fit within the specified prime limit&laquo;. If I specified, for example a 5-limit, both intervals above would be discarded and the search would have to continue until a 5-limit interval within the +/- 10 cent corridor is found.</p><p>If someone could provide advice on how to do this -- or just point me in the direction of where to find it (in case it&apos;s already there but I haven&apos;t noticed it -- I&apos;d really appreciate it!</p><p>Thanks in advance!<br/>Bests<br/>Nils</p></div><h3><a id=106549 href="#106549">ðŸ”—</a>glenn.leider@...</h3><span>6/16/2016 6:12:21 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>Closer to your 110.5 is the just diatonic ratio of 16:15, which is 111.7 cents, only 1.2 cents away.</p></div><h3><a id=106550 href="#106550">ðŸ”—</a>Steve P. &#x3C;groups@...&#x3E;</h3><span>6/18/2016 3:43:56 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>There is a further consideration (at least for me):<br/>for related intervals, or areas of intervals, it might be desirable to have related denominators, to show relationship.<br/>I do this by hand.</p><p>Steve P.</p><p>&gt; On 15 Jun 2016, at 10:14, nils.blindenstein@... [TUNING] &lt;<a href="mailto:TUNING@yahoogroups.com">TUNING@yahoogroups.com</a>&gt; wrote:<br/>&gt;<br/>&gt; Hi everyone,<br/>&gt; I&apos;ve been working with Scala for a couple of years now and know my way pretty well around the sub-set of features that I need on a regular basis.<br/>&gt;<br/>&gt; What I&apos;m beginning to need more often recently are the approximation features. Unfortunately, there&apos;s one thing I can&apos;t figure out how to do. I&apos;m pretty sure I&apos;m using the right feature for what I want (&rsaquo;Rational Approximation&lsaquo; ...or maybe not?), but not with the right setting.<br/>&gt;<br/>&gt; The job that I want Scala to do is best described as:<br/>&gt;<br/>&gt; &raquo;Find me the simplest rational form of the scale&apos;s pitches (specified as ratio or in cents) within the limits of +/- x cents difference from the original pitch.&laquo;<br/>&gt;<br/>&gt; A (made-up, but somewhat realistic) example:<br/>&gt;<br/>&gt; * Let the original pitch be 110.5 cents.<br/>&gt; * We want to substitute it by a rational interval, as simple as possible.<br/>&gt; * Simple, for our purposes, merely means: small numbers.<br/>&gt; * That pitch may not differ from the original by more than +/- 10 cents.<br/>&gt;<br/>&gt; So:<br/>&gt; 120/113 (~104c), for example, is -6.5c from the original;<br/>&gt; 15/14 (~119.5c) is +9c away, but simpler (which we prioritize), so return the latter.<br/>&gt;<br/>&gt; So the scale that before was<br/>&gt;<br/>&gt; 1/1<br/>&gt; 110.5<br/>&gt; 2/1<br/>&gt;<br/>&gt; should now be<br/>&gt;<br/>&gt; 1/1<br/>&gt; 15/14<br/>&gt; 2/1<br/>&gt;<br/>&gt; Optionally, I want to be able to specify a prime limit: &raquo;Only return intervals that fit within the specified prime limit&laquo;. If I specified, for example a 5-limit, both intervals above would be discarded and the search would have to continue until a 5-limit interval within the +/- 10 cent corridor is found.<br/>&gt;<br/>&gt; If someone could provide advice on how to do this -- or just point me in the direction of where to find it (in case it&apos;s already there but I haven&apos;t noticed it -- I&apos;d really appreciate it!<br/>&gt;<br/>&gt; Thanks in advance!<br/>&gt; Bests<br/>&gt; Nils<br/>&gt;<br/>&gt;<br/>&gt;<br/>&gt;</p></div>