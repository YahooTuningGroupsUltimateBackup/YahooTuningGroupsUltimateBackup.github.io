<a href="/tuning">back to list</a><h1>Ratio manipulation in Python</h1><h3>William S. Annis &#x3C;wsannis@xxxxxx.xxxx&#x3E;</h3><span>10/30/1999 11:42:01 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>Manipulating piles of ratios quickly gets boring.  And my<br/>calculator insists on turning 9/8 into 1 1/8.  So, I&apos;ve written a<br/>short library in Python (a portable language... it should run on any<br/>PC, Mac and most Unix flavors) to help me deal with all of this stuff<br/>without having to spend any more time reducing ratios.</p><p>        The library and documentation -- with a brief example -- can<br/>be found at <a href="http://www.execpc.com/~wsannis/ratio.html">http://www.execpc.com/~wsannis/ratio.html</a> .  To the best<br/>of my knowledge, everthing it claims to do it does correctly, though I<br/>will certainly respond to any bugs people find.</p><p>--<br/>William S. Annis                &#x9;       <a href="mailto:wsannis@execpc.com">wsannis@execpc.com</a><br/>Mi parolas Esperanton - La Internacia Lingvo    <a href="http://www.esperanto.org">www.esperanto.org</a></p></div><h3>est@xxxxxxxxx.xxx</h3><span>10/30/1999 12:20:51 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>William S. Annis discourseth:<br/>&gt;<br/>&gt;         The library and documentation -- with a brief example -- can<br/>&gt; be found at <a href="http://www.execpc.com/~wsannis/ratio.html">http://www.execpc.com/~wsannis/ratio.html</a> .</p><p>Extremely neat..I like Python and do a fair amount of audio and MIDI<br/>work with it (e.g., <a href="http://www.hyperreal.org/~est/oolaboola">www.hyperreal.org/~est/oolaboola</a>,<br/><a href="http://www.hyperreal.org/~est/csound/s1">www.hyperreal.org/~est/csound/s1</a>).</p><p>I&apos;d be better able to use and contribute to your module if you<br/>released it under some defined license.  I&apos;m a bit uncomfortable<br/>looking at source code when I don&apos;t know my obligations.  A copyright<br/>by you in the file along with a declaration of intent (e.g., public<br/>domain, GLPL, GPL, ...) would be most helpful.</p><p>Thanks!</p><p>Eric</p></div><h3>William S. Annis &#x3C;wsannis@xxxxxx.xxxx&#x3E;</h3><span>10/30/1999 2:30:02 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>&gt;Extremely neat..I like Python and do a fair amount of audio and MIDI<br/> &gt;work with it (e.g., <a href="http://www.hyperreal.org/~est/oolaboola">www.hyperreal.org/~est/oolaboola</a>,<br/> &gt;<a href="http://www.hyperreal.org/~est/csound/s1">www.hyperreal.org/~est/csound/s1</a>).</p><p>        Cool.  I&apos;ve written some of my own stuff to make using CSound<br/>easier, particularly in generating score files.  So, I&apos;ve written an<br/>ABC parser.  I remap the names to whatever scale I&apos;m interested in,<br/>and sling out the Csound score file, something like this:</p><p>--------------------------------------------------<br/>tr = Translation()      # This class handles turning ABC into<br/>                        # pitch streams</p><p># Fill out octaves based on a single octave.  If you don&apos;t repeat<br/># at the octave, you have more work to do.<br/>tr.generate_name_to_hz({&apos;C&apos;: Ratio(1, 1),<br/>                        &apos;D&apos;: Ratio(9, 8),<br/>                        &apos;E&apos;: Ratio(7, 6), ...})</p><p>sco = tr.translate_note_stream(abc(&quot;def [da]fg [C2e_1g/2]g&quot;))<br/>cs = CsoundDevice(&apos;test.sco&apos;)<br/>cs.header()<br/># The format string is repeatedly passed a hash<br/><a href="http://cs.stream">cs.stream</a>(&quot;i1 %(start)s %(dur) %(dynamic) %(note)s\n&quot;, sco)<br/>cs.close()<br/>--------------------------------------------------</p><p>        A lot of the complexity of the code is because I expect I&apos;ll<br/>want to use parts of the framework for MIDI eventually.  The most<br/>interesting time saver, as far as I&apos;m concerned, is that I can<br/>arbitrarily map note names to pitches, and then use those names in<br/>strings like &quot;[ceg][dfa]&quot;.  For now, the &quot;scores&quot; of the pieces I&apos;m<br/>writing to learn about JI are just short Python programs which<br/>interpret strings of notes.</p><p> &gt;I&apos;d be better able to use and contribute to your module if you<br/> &gt;released it under some defined license.</p><p>        Ack!  I have templates at work which automatically insert a<br/>copyright notice in new code.  I&apos;d forgotten to do that for my home<br/>machine.  It&apos;s under the Artistic License (a la Perl).  I&apos;ll add that<br/>notice shortly.  Thanks for pointing that out.</p><p>--<br/>William S. Annis                &#x9;       <a href="mailto:wsannis@execpc.com">wsannis@execpc.com</a><br/>Mi parolas Esperanton - La Internacia Lingvo    <a href="http://www.esperanto.org">www.esperanto.org</a></p></div><h3>est@xxxxxxxxx.xxx</h3><span>10/30/1999 2:47:32 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>William S. Annis discourseth:<br/>&gt; From: &quot;William S. Annis&quot; &lt;<a href="mailto:wsannis@execpc.com">wsannis@execpc.com</a>&gt;<br/>&gt;<br/>&gt;         Cool.  I&apos;ve written some of my own stuff to make using CSound<br/>&gt; easier, particularly in generating score files.  So, I&apos;ve written an<br/>&gt; ABC parser.  I remap the names to whatever scale I&apos;m interested in,<br/>&gt; and sling out the Csound score file, something like this:<br/>&gt;<br/>&gt; sco = tr.translate_note_stream(abc(&quot;def [da]fg [C2e_1g/2]g&quot;))</p><p>I don&apos;t know this abc() function/class.</p><p>&gt; # The format string is repeatedly passed a hash<br/>&gt; <a href="http://cs.stream">cs.stream</a>(&quot;i1 %(start)s %(dur) %(dynamic) %(note)s\n&quot;, sco)</p><p>Oooh..I&apos;ve never used the %(...)s format..delightful!</p><p>&gt; For now, the &quot;scores&quot; of the pieces I&apos;m<br/>&gt; writing to learn about JI are just short Python programs which<br/>&gt; interpret strings of notes.</p><p>It&apos;s a good score language. :)</p><p>Are any of these other tools of yours available??</p><p>You might want to join linux-audio-dev (via &grave;subscribe<br/>linux-audio-dev&apos; in the body of a message to<br/><a href="mailto:majordomo@ginette.musique.umontreal.ca">majordomo@ginette.musique.umontreal.ca</a>).  There&apos;s a lot of nice<br/>csound/python/unix activity there.</p><p>Eric</p></div><h3>William S. Annis &#x3C;wsannis@xxxxxx.xxxx&#x3E;</h3><span>10/30/1999 3:11:16 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>&gt;From: <a href="mailto:est@hyperreal.org">est@hyperreal.org</a><br/> &gt;<br/> &gt;William S. Annis discourseth:<br/> &gt;&gt; sco = tr.translate_note_stream(abc(&quot;def [da]fg [C2e_1g/2]g&quot;))<br/> &gt;<br/> &gt;I don&apos;t know this abc() function/class.</p><p>        I should hope not!  Then I&apos;d have to find another name for<br/>it. :)  It&apos;s part of my Csound libraries.</p><p> &gt;&gt; For now, the &quot;scores&quot; of the pieces I&apos;m<br/> &gt;&gt; writing to learn about JI are just short Python programs which<br/> &gt;&gt; interpret strings of notes.<br/> &gt;<br/> &gt;It&apos;s a good score language. :)</p><p>        It&apos;s doing a fine job so far.</p><p> &gt;Are any of these other tools of yours available??</p><p>        Not yet.  I suspect it&apos;ll be another month or so before I have<br/>time to document the basics and clean up the code a little more.  I&apos;ve<br/>only really started to use it -- as opposed to my neurotic testing and<br/>debugging -- a few weeks ago, so I&apos;m still working out broken code and<br/>broken design.  The ABC parser, for instance, needs to be completely<br/>redone, probably as a class.</p><p>        Of course, this all brings up a very serious affliction<br/>everyone on this list should be quite familiar with: The Geek-Musician<br/>dilemma, where you become bogged down in the technical bits of music<br/>making and somehow never get around to making actual music.  I may<br/>never make music if I try to perfect the software tools I&apos;m writing<br/>before ever using them. :)</p><p>        I&apos;ll post an announcement here and to the CSound list when I<br/>have those python libraries ready for initial release.</p><p>--<br/>William S. Annis                &#x9;       <a href="mailto:wsannis@execpc.com">wsannis@execpc.com</a><br/>Mi parolas Esperanton - La Internacia Lingvo    <a href="http://www.esperanto.org">www.esperanto.org</a></p></div>