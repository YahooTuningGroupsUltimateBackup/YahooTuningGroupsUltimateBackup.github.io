<!DOCTYPE html>
            <html>
            <head>
            <meta charset="utf-8">
                <meta name="viewport"
            content="width=device-width, height=device-height, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no">
                <meta http-equiv="x-ua-compatible" content="ie=edge">
                <title>Yahoo Tuning Groups Ultimate Backup tuning Adapting Sagittal notation for use in Csound</title>
                <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
            </head>
            <body>
            </body>
            </html>
        <a href="/tuning">back to list</a><h1>Adapting Sagittal notation for use in Csound</h1><h3><a id=56507 href="#56507">ðŸ”—</a>Herman Miller &#x3C;hmiller@IO.COM&#x3E;</h3><span>12/24/2004 11:02:26 AM</span><button style="float: right; margin-right: 20px">toggle monospace</button><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>I&apos;ve been looking for some way to explore different tunings and temperaments, and evaluate various notations for these, in a way that avoids the limitations of MIDI files. I have a number of MIDI files intended for retuning, but of course there&apos;s no indication within the MIDI file itself what tuning is to be used with them! There&apos;s also the difficulty of finding the right MIDI note on a keyboard or piano roll if you&apos;re working with a non-standard tuning. And MIDI files can&apos;t easily handle scales with 31 or more notes per octave, since there are only 128 distinct MIDI notes.</p><p>So I&apos;ve been looking into the possibility of using Csound. It&apos;s not the easiest thing to use, but it looks like a pretty capable system if I can get past the quirks and the initial learning difficulty. I was reading through the Csound Book and ran across the article on macros; I realized that these could be used to define more complex notation systems.</p><p>One problem with using the Sagittal notation in Csound is that macro names need to be alphanumeric. I know some of the ASCII abbreviations for Sagittal accidentals, but I can&apos;t seem to find a file that documents the complete set. In any case, not all of them are alphanumeric, so I&apos;m going to need to come up with two-or-more-letter alphanumeric equivalents for the ones that aren&apos;t. But I&apos;ve managed to work around the limitations of the system and I&apos;m starting to come up with what seems like a reasonable notation that&apos;s usable in Csound scores.</p><p>Start with a few basic definitions: in this case the base-2 logarithms of the primes:</p><p>#define p2&#x9;#1.000000000#<br/>#define p3&#x9;#1.584962501#<br/>#define p5&#x9;#2.321928095#<br/>#define p7&#x9;#2.807354922#</p><p>... and so on. If on the other hand you want to notate a temperament, such as meantone, you can alter these to the appropriate values. Here&apos;s an example of TOP 7-limit meantone, &lt;&lt;1, 4, 10, 4, 13, 12]].</p><p>#define p2&#x9;#1.001415434#<br/>#define p3&#x9;#1.582719091#<br/>#define p5&#x9;#2.325214630#<br/>#define p7&#x9;#2.808790273#</p><p>Now comes the tricky part. Expression evaluation in Csound scores is pretty limited, and I&apos;ve had to use some trial and error to get these expressions to work. The basic 7 nominals of Sagittal notation are based on factors of 2 and 3 (or their tempered equivalents):</p><p>#define C(X)&#x9;#($X.-4)*$p2.+8#&#x9;&#x9;&#x9;; 1/1<br/>#define D(X)&#x9;#($X.-4)*$p2.+8+(2*$p3.-3*$p2.)#&#x9;; 9/8<br/>#define E(X)&#x9;#($X.-4)*$p2.+8+(4*$p3.-6*$p2.)#&#x9;; 81/64<br/>#define F(X)&#x9;#($X.-4)*$p2.+8+(2*$p2.-$p3.)#&#x9;&#x9;; 4/3<br/>#define G(X)&#x9;#($X.-4)*$p2.+8+($p3.-$p2.)#&#x9;&#x9;; 3/2<br/>#define A(X)&#x9;#($X.-4)*$p2.+8+(3*$p3.-4*$p2.)#&#x9;; 27/16<br/>#define B(X)&#x9;#($X.-4)*$p2.+8+(5*$p3.-7*$p2.)#&#x9;; 243/128</p><p>The initial &quot;($X.-4)*$p2.+8&quot; part of the expression is for setting the pitch of C(4) to be middle C (which is 8.0 in Csound). This allows for the octaves themselves to be tempered if this is desired. The rest of the expression adds together multiples of the prime logarithms to arrive at the correct pitch for each note, based on the selected temperament. Here&apos;s an example of how this could be used in a score:</p><p>i1&#x9;0&#x9;4&#x9;10000&#x9;[$C(4)]<br/>i1&#x9;0.5&#x9;3.5&#x9;10000&#x9;[$E(4)]<br/>i1&#x9;1&#x9;3&#x9;10000&#x9;[$G(4)]</p><p>Unless you&apos;re using a meantone temperament, this will result in a slightly detuned C-E-G major triad. If you want a just 4:5:6 triad, you&apos;ll have to add the accidental for the 5-comma 81/80. In Sagittal notation this is /| for &quot;comma up&quot; and \! for &quot;comma down&quot;, but since macro names must be alphanumeric, I&apos;ve used the names &quot;cu&quot; and &quot;cd&quot;.</p><p>#define cu&#x9;#+(4*$p3.-(4*$p2.+$p5.))#&#x9;;  /|   /  81/80<br/>#define cd&#x9;#-(4*$p3.-(4*$p2.+$p5.))#&#x9;;  \!   \  80/81</p><p>Now you can notate the major triad like this:</p><p>i1&#x9;0&#x9;4&#x9;10000&#x9;[$C(4)]<br/>i1&#x9;0.5&#x9;3.5&#x9;10000&#x9;[$E(4)$cd.]<br/>i1&#x9;1&#x9;3&#x9;10000&#x9;[$G(4)]</p><p>For sharps and flats, I&apos;ve defined the macros &quot;sh&quot; and &quot;fl&quot;.</p><p>#define sh&#x9;#+(7*$p3.-11*$p2.)#&#x9;&#x9;;  /N\  #  2187/2048<br/>#define fl&#x9;#-(7*$p3.-11*$p2.)#&#x9;&#x9;;  \U/  b  2048/2187</p><p>The 7-comma 64/63 has the convenient ASCII abbreviations &quot;f&quot; (up) and &quot;t&quot; (down), so I&apos;ll use these as the names of the macros.</p><p>#define f&#x9;#+(6*$p2.-(2*$p3.+$p7.))#&#x9;;   |)  f  64/63<br/>#define t&#x9;#-(6*$p2.-(2*$p3.+$p7.))#&#x9;;   !)  t  63/64</p><p>Unfortunately I don&apos;t know of a short ASCII version of B!!!) (which is the Sagittal notation for the 7th harmonic above C). A(|\ could be used, but that really represents 729/416, which could be an entirely different note in certain temperaments. (Even in JI, when I did a test with B!!!) played simultaneously with A(|\ I could hear the beating.) So I may have to settle for writing B!!!) as [$B(4)$fl.$t.].</p><p>For the 11 M-diesis 33/32, I settled on &quot;ss&quot; for &quot;semisharp&quot; and &quot;sf&quot; for &quot;semiflat&quot;.</p><p>#define ss&#x9;#+($p3.+$p11.-(5*$p2.))#&#x9;;  /|\  ^  33/32<br/>#define sf&#x9;#-($p3.+$p11.-(5*$p2.))#&#x9;;  \!/  v  32/33</p><p>And conveniently, the 13 L-diesis 27/26 has a single-letter ASCII abbreviation.</p><p>#define m&#x9;#+(3*$p3.-($p2.+$p13.))#&#x9;;  (|\  m  27/26<br/>#define w&#x9;#-(3*$p3.-($p2.+$p13.))#&#x9;;  (!/  w  26/27</p><p>Now we can notate a 4:5:6:7:9:11:13:15 chord.</p><p>i1&#x9;0&#x9;4&#x9;10000&#x9;[$C(4)]<br/>i1&#x9;0.5&#x9;3.5&#x9;10000&#x9;[$E(4)$cd.]<br/>i1&#x9;1&#x9;3&#x9;10000&#x9;[$G(4)]<br/>i1&#x9;1.5&#x9;2.5&#x9;10000&#x9;[$B(4)$fl.$t.]<br/>i1&#x9;2&#x9;2&#x9;10000&#x9;[$D(5)]<br/>i1&#x9;2.5&#x9;1.5&#x9;10000&#x9;[$F(5)$ss.]<br/>i1&#x9;3&#x9;1&#x9;10000&#x9;[$A(5)$w.]<br/>i1&#x9;3.5&#x9;0.5&#x9;10000&#x9;[$B(5)$cd.]</p><p>Extending this to support larger subsets of the Sagittal notation is simply a matter of defining the appropriate macros for each new pair of accidentals. The same method could also be used for representing other notation systems.</p></div><h3><a id=56519 href="#56519">ðŸ”—</a>George D. Secor &#x3C;gdsecor@yahoo.com&#x3E;</h3><span>12/29/2004 9:59:02 AM</span><button style="float: right; margin-right: 20px">toggle monospace</button><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>--- In <a href="mailto:tuning@yahoogroups.com">tuning@yahoogroups.com</a>, Herman Miller &lt;hmiller@I...&gt; wrote:<br/>&gt;<br/>&gt; One problem with using the Sagittal notation in Csound is that<br/>macro<br/>&gt; names need to be alphanumeric. I know some of the ASCII<br/>abbreviations<br/>&gt; for Sagittal accidentals, but I can&apos;t seem to find a file that<br/>documents<br/>&gt; the complete set. In any case, not all of them are alphanumeric, so<br/>I&apos;m<br/>&gt; going to need to come up with two-or-more-letter alphanumeric<br/>&gt; equivalents for the ones that aren&apos;t.</p><p>&gt; ... If you want a just 4:5:6 triad,<br/>&gt; you&apos;ll have to add the accidental for the 5-comma 81/80. In<br/>Sagittal<br/>&gt; notation this is /| for &quot;comma up&quot; and \! for &quot;comma down&quot;, but<br/>since<br/>&gt; macro names must be alphanumeric, I&apos;ve used the names &quot;cu&quot; and &quot;cd&quot;.<br/>&gt;<br/>&gt; #define cu&#x9;#+(4*$p3.-(4*$p2.+$p5.))#&#x9;;  /|   /  81/80<br/>&gt; #define cd&#x9;#-(4*$p3.-(4*$p2.+$p5.))#&#x9;;  \!   \  80/81</p><p>I think it would be a good idea to be more specific with your<br/>abbreviations, since &quot;comma&quot; can apply to a lot of different micro-<br/>accidentals.  Since your macros can be alphanumeric, why not include<br/>numeric digits in their names?  And since you may want an easy way to<br/>distinguish macro names for accidentals from other macro names, you<br/>might want to begin all of them similarly, e.g.,</p><p>u5C for 81:80 (up 5-comma): /|<br/>d5C for 80:81 (down 5-comma): \!<br/>d7C for 63:64 (down 7-comma): !)<br/>u11Md for 33:32 (up 11 medium-diesis): /|\<br/>u11Ld for 729:704 (up 11-large-diesis): (|)<br/>u5r7k for 5120:5103 (up 5:7-kleisma): |(<br/>d5r11Sd for 44:45 (down 5:11 small-diesis): (!(<br/>u7r11C for 45927:45056 (up 7:11 comma): (|<br/>u7r11k for 896:891 (up 7:11 kleisma): )|(<br/>u19s for 513:519 (up 19-schisma):  |(</p><p>The character &quot;r&quot; in &quot;5r7&quot; stands for &quot;ratio&quot; of 5:7.  I used an<br/>upper-case &quot;L&quot; so that it would not be confused with the numeral &quot;1&quot;,<br/>likewise upper-case &quot;C&quot;, &quot;S&quot;, and &quot;M&quot; for comma, small diesis, and<br/>large diesis for consistency.  Notice that the macro names for (|<br/>and )|( differ by only a single character, which demonstrates that<br/>you need the interval category (schisma, kleisma, comma, diesis) in<br/>the macro name.  The boundaries that Dave Keenan determined for these<br/>categories are given in the following table:</p><p>Square of lowerbound&#x9;&#x9;&#x9;<br/>.. 2-exponent<br/>...... 3-exponent&#x9;<br/>............... Lowerbound (cents)&#x9;<br/>................................ Size range name<br/>-------------------------------------------------<br/>.. [ 0 0 &gt; ....... 0 ........... schismina<br/>.. [-84 53 &gt; ..... 1.807522933 . schisma<br/>.. [ 317 -200 &gt; .. 4.499913461 . kleisma<br/>.. [-19 12 &gt; .... 11.73000519 .. comma<br/>.. [ 27 -17 &gt; ... 33.38249264 .. small-diesis<br/>.. [ 8 -5 &gt; ..... 45.11249784 .. (medium-)diesis<br/>.. [-11 7 &gt; ..... 56.84250303 .. large-diesis<br/>.. [-30 19 &gt; .... 68.57250822 .. small-semitone<br/>.. [-49 31 &gt; .... 80.30251341 .. limma<br/>.. [-3 2 &gt; ..... 101.9550009 ... large-semitone<br/>.. [ 62 -39 &gt; .. 111.8774831 ... apotome<br/>.. [-106 67 &gt; .. 115.492529</p><p>These interval (and macro) names would not in any way be restricted<br/>to Sagittal notation.  They&apos;re actually a byproduct of our notation<br/>development project, since they can be used to distinguish intervals<br/>that are very nearly the same size (and thus notated alike in medium-<br/>resolution, athenian-level, Sagittal).  For example:</p><p>d35Ld for 8192:8505 (down 35-large-diesis): (!/ ~64.91 cents<br/>d13Ld for 26:27 (down 13-large-diesis): (!/. ~65.34 cents</p><p>BTW, we have been working on an extreme-resolution (olympian-level)<br/>Sagittal JI notation that *will* be able to distinguish the above<br/>intervals.  This is intended for computer-based and certain<br/>theoretical applications.  I&apos;ve actually used it in the above<br/>example -- notice the period following the slash character for 26:27,<br/>which represents an additional 4095:4096 (schismina, ~0.42 cents) of<br/>alteration.  If you want more information about this, please contact<br/>Dave or myself off-list; there are a number of unresolved issues that<br/>we&apos;ve been discussing, and your opinion may be helpful.  Dave also<br/>developed a way to achieve extreme-resolution pitch accuracy in a<br/>computer application using only medium-resolution (athenian-level)<br/>symbols in conjunction with a table of &quot;smart defaults&quot; that he<br/>recently created (which I have no doubt you&apos;ll be interested in).</p><p>&gt; Now you can notate the major triad like this:<br/>&gt;<br/>&gt; i1&#x9;0&#x9;4&#x9;10000&#x9;[$C(4)]<br/>&gt; i1&#x9;0.5&#x9;3.5&#x9;10000&#x9;[$E(4)$cd.]<br/>&gt; i1&#x9;1&#x9;3&#x9;10000&#x9;[$G(4)]<br/>&gt;<br/>&gt; For sharps and flats, I&apos;ve defined the macros &quot;sh&quot; and &quot;fl&quot;.<br/>&gt;<br/>&gt; #define sh&#x9;#+(7*$p3.-11*$p2.)#&#x9;&#x9;;  /N\  #  2187/2048<br/>&gt; #define fl&#x9;#-(7*$p3.-11*$p2.)#&#x9;&#x9;;  \U/  b  2048/2187</p><p>How about:</p><p>ua (up apotome): /N\<br/>da (down apotome): \U/<br/>uda (up double apotome): /X\<br/>dda (down double apotome): \Y/</p><p>&gt; The 7-comma 64/63 has the convenient ASCII abbreviations &quot;f&quot; (up)<br/>and<br/>&gt; &quot;t&quot; (down), so I&apos;ll use these as the names of the macros.<br/>&gt;<br/>&gt; #define f&#x9;#+(6*$p2.-(2*$p3.+$p7.))#&#x9;;   |)  f  64/63<br/>&gt; #define t&#x9;#-(6*$p2.-(2*$p3.+$p7.))#&#x9;;   !)  t  63/64<br/>&gt;<br/>&gt; Unfortunately I don&apos;t know of a short ASCII version of B!!!) (which<br/>is<br/>&gt; the Sagittal notation for the 7th harmonic above C). A(|\ could be<br/>used,<br/>&gt; but that really represents 729/416, which could be an entirely<br/>different<br/>&gt; note in certain temperaments. (Even in JI, when I did a test with<br/>B!!!)<br/>&gt; played simultaneously with A(|\ I could hear the beating.) So I may<br/>have<br/>&gt; to settle for writing B!!!) as [$B(4)$fl.$t.].</p><p>Short ASCII is only for the mixed-symbol version of Sagittal, since<br/>there are not enough characters for the pure version.  I agree that<br/>you should use two macro names for B!!!), to correspond to the mixed-<br/>symbol Bb!) notation.</p><p>If you really wanted to get 7/4 by altering A upward, your macro<br/>could be named:</p><p>u7Ld for 28:27 (up 7 large-diesis): .(|\ ~62.96 cents</p><p>This is a 5-schisma smaller than u35Ld.  Notice the period preceding<br/>the left-parenthesis character, which represents a decrease of<br/>alteration of 32768:32805 (5-schisma, ~1.95 cents).  The period<br/>character is our shorthand for a grave (down) accent mark; we use the<br/>apostrophe character as shorthand for an acute (up) accent mark.<br/>While it&apos;s possible to use these accent marks on a staff, in real-<br/>time performance they would probably be ignored, since the pitch<br/>alterations they represent are very small.</p><p>&gt; Extending this to support larger subsets of the Sagittal notation<br/>is<br/>&gt; simply a matter of defining the appropriate macros for each new<br/>pair of<br/>&gt; accidentals. The same method could also be used for representing<br/>other<br/>&gt; notation systems.</p><p>The macro names that I&apos;ve suggested are longer than the ones you<br/>have, but they&apos;re easy to determine, once you understand how the<br/>commas are named.</p><p>--George</p></div><h3><a id=56520 href="#56520">ðŸ”—</a>George D. Secor &#x3C;gdsecor@yahoo.com&#x3E;</h3><span>12/29/2004 12:14:51 PM</span><button style="float: right; margin-right: 20px">toggle monospace</button><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>--- In <a href="mailto:tuning@yahoogroups.com">tuning@yahoogroups.com</a>, &quot;George D. Secor&quot; &lt;gdsecor@y...&gt; wrote:<br/>&gt; ...<br/>&gt; u19s for 513:519 (up 19-schisma):  |(</p><p>Oops!  That should have been:</p><p>u19s for 513:519 (up 19-schisma):  )|</p><p>--George</p></div><h3><a id=56522 href="#56522">ðŸ”—</a>Dave Keenan &#x3C;d.keenan@bigpond.net.au&#x3E;</h3><span>12/29/2004 7:32:09 PM</span><button style="float: right; margin-right: 20px">toggle monospace</button><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>--- In <a href="mailto:tuning@yahoogroups.com">tuning@yahoogroups.com</a>, Herman Miller &lt;hmiller@I...&gt; wrote:<br/>...<br/>&gt; I was reading<br/>&gt; through the Csound Book and ran across the article on macros; I<br/>realized<br/>&gt; that these could be used to define more complex notation systems.</p><p>That&apos;s brilliant Herman! I love the way you can change the<br/>temperament by redefining the primes.</p><p>&gt; One problem with using the Sagittal notation in Csound is that<br/>macro<br/>&gt; names need to be alphanumeric. I know some of the ASCII<br/>abbreviations<br/>&gt; for Sagittal accidentals, but I can&apos;t seem to find a file that<br/>documents<br/>&gt; the complete set.</p><p>See<br/><a href="http://dkeenan.com/sagittal/map/">http://dkeenan.com/sagittal/map/</a></p><p>This isn&apos;t the _complete_ complete set, since we haven&apos;t fully<br/>agreed what that is yet. :-) But it certainly contains more Sagittal<br/>symbols than most people will ever need, and it contains all those<br/>with single-character ASCII transliterations.</p><p>&gt; In any case, not all of them are alphanumeric, so I&apos;m<br/>&gt; going to need to come up with two-or-more-letter alphanumeric<br/>&gt; equivalents for the ones that aren&apos;t.</p><p>That&apos;s certainly the case if they are represented in the _names_ of<br/>macros (and I like George&apos;s suggestion there), but I wonder if you<br/>could pass even the non-alphanumeric ones to the macro preprocessor<br/>as string literal _arguments_, and have the macro expand to a huge<br/>nested conditional expression. I know nothing about what operators<br/>are allowed, but I&apos;m guessing any valid C expression that evaluates<br/>to a number.<br/>e.g.</p><p>#define C(X,Y)&#x9;#($X.-4)*$p2.+8+ \<br/>($Y.==&quot;/&quot; + $Y.==&quot;/|&quot;)  ?  (4*$p3.-(4*$p2.+$p5.)) : (\<br/>($Y.==&quot;\&quot; + $Y.==&quot;\!&quot;)  ? -(4*$p3.-(4*$p2.+$p5.)) : (\<br/>($Y.==&quot;f&quot; + $Y.==&quot;|)&quot;)  ?  (6*$p2.-(2*$p3.+$p7.)) : (\<br/>($Y.==&quot;t&quot; + $Y.==&quot;!)&quot;)  ? -(6*$p2.-(2*$p3.+$p7.)) : (\<br/>($Y.==&quot;^&quot; + $Y.==&quot;/|\&quot;) ?  ($p3.+$p11.-(5*$p2.))  : (\<br/>($Y.==&quot;v&quot; + $Y.==&quot;\!/&quot;) ? -($p3.+$p11.-(5*$p2.))  : (\<br/>...<br/>0...))))))#</p><p>The trailing backslashes are intended as line-continuations.</p><p>Another useful property of a scheme like this is that the macro that<br/>expands the sagittal knows what nominal it is being applied to. This<br/>opens up the possibility of using the &quot;smart defaults&quot; that George<br/>mentioned. This property might also be obtained in some other way.<br/>More about &quot;smart defaults&quot; later.</p><p>&gt; Now comes the tricky part. Expression evaluation in Csound scores<br/>is<br/>&gt; pretty limited, and I&apos;ve had to use some trial and error to get<br/>these<br/>&gt; expressions to work.</p><p>Then I guess something like the above is unlikely and you probably<br/>already thought of it.</p><p>&gt; A(|\ could be used,<br/>&gt; but that really represents 729/416, which could be an entirely<br/>different<br/>&gt; note in certain temperaments. (Even in JI, when I did a test with<br/>B!!!)<br/>&gt; played simultaneously with A(|\ I could hear the beating.) So I<br/>may have<br/>&gt; to settle for writing B!!!) as [$B(4)$fl.$t.].</p><p>The question of what a particular sagittal &quot;really represents&quot;, when<br/>combined with a particular nominal, has been reexamined recently<br/>thanks to Robert Walker, who has been busy implementing sagittal in<br/>Fractal Tune Smithy - particularly its chord-progression player.</p><p>For the benefit of other readers: Sagittal isn&apos;t so much a notation,<br/>as a notation _system_. It encompasses notations for many different<br/>tunings in such a way that they are _harmonically_ consistent with<br/>each other, while melodic consistency is maintained as much as<br/>possible within that constraint. For example, in any given tuning, a<br/>4:5:6 major triad on C, or the best available approximation thereof,<br/>will always be notated C:E\:G, unless it happens to be in a<br/>temperament where the syntonic comma vanishes and can therefore be<br/>notated more simply as C:E:G.</p><p>A single _notation_, within the Sagittal system, is characterised by<br/>a notational octave size and a notational fifth size (which<br/>determine the meaning of the nominals), and a limited set of<br/>accidental symbols, and some lookup tables:</p><p>For unambiguously converting from pitch to symbol, a notation must<br/>also give a range of pitch alterations corresponding to each symbol -<br/> the symbol&apos;s &quot;capture zone&quot; - with no overlaps and no gaps between<br/>capture zones. It is enough to list the symbols in pitch order and<br/>give the lower-bound for each in cents.</p><p>And for unambiguously converting from symbol to pitch it must give a<br/>single _default_ pitch alteration corresponding to each symbol. This<br/>default pitch alteration must of course be within the symbol&apos;s<br/>capture zone.</p><p>You can see this information in Scala&apos;s various SAxxx.PAR files,<br/>although in the case of ET notations a greatly abbreviated form can<br/>be used since the defaults are simply successive degrees of the ET<br/>and the zone boundaries are simply half-way between the degrees.</p><p>In the case of the 12-ET-relative &quot;Trojan&quot; notation, the lower-<br/>bounds are given in cents and the defaults are given as fractions of<br/>a 12-ET semitone.</p><p>In the case of the various JI notations (of which only the medium-<br/>resolution &quot;Athenian&quot; notation has so far been defined), the lower<br/>bounds are given in cents and the defaults are given as exact<br/>frequency ratios.</p><p>In fact, these default JI ratios are the glue holding the whole<br/>Sagittal system together. They are, in the absence of any further<br/>information, what the symbols &quot;really represent&quot;. We refer to them<br/>as the symbol&apos;s &quot;primary comma&quot;.</p><p>In order to make the Sagittal system work as well as possible across<br/>so many different tunings, we defined symbols for the most popular<br/>notational commas, i.e. the commas most often needed to notate the<br/>most popular ratios.</p><p>The best way we could figure to determine ratio popularity was to<br/>look at their ocurrences in the Scala archive (thanks Manuel). This<br/>decision might be controversial, but if you look at the results, you<br/>see that in most cases the decision as to which comma to use in a<br/>certain vicinity is like chalk and cheese, one of them notates<br/>ratios that occur many times more often, and this usually agrees<br/>with our intuitions based on consonance, ratio complexity, prime<br/>limit and so on.</p><p>However, an important proviso above is that the primary comma (or<br/>tempered version thereof) is the default pitch alteration &quot;in the<br/>absence of any further information&quot;. For example, if we know that an<br/>ET is being notated, then the default pitch will be an exact degree<br/>of the ET. In fact it will be the degree that is closest to the<br/>tempered primary comma (with some very rare exceptions where a<br/>secondary comma is used because no simple primary is available).</p><p>But we recently realised that even in the case of JI notations we<br/>were not using all the available information to determine exactly<br/>what alteration a sagittal should default to (&quot;really represent&quot;).<br/>We were not using the nominal (and sharps or flats), although these<br/>were of course being used to determine the gross pitch. So for the<br/>Athenian JI notation (the only one so far defined) we revisited the<br/>Scala archive statistics and found the most popular ratio that would<br/>be notated by each combination of nominal, sharps or flats and<br/>sagittal symbol.</p><p>So the sagittal symbol can now &quot;really represent&quot; slightly different<br/>pitch alterations (different commas) depending on the nominal it is<br/>associated with. It now gives the ratio you actually wanted, maybe<br/>99% of the time, and severely reduces the need to use higher-<br/>resolution notations involving accented symbols or more complex<br/>unaccented symbols. We&apos;ve increased the precision without increasing<br/>the number of symbols. This is what we call &quot;smart defaults&quot;.</p><p>The resulting two-dimensional lookup table appears here as a zipped<br/>Excel spreadsheet (28 kB).<br/><a href="http://dkeenan.com/sagittal/AthenianSmartDefaults.z">http://dkeenan.com/sagittal/AthenianSmartDefaults.z</a><br/>ip</p><p>Regards,<br/>-- Dave Keenan</p></div><h3><a id=56525 href="#56525">ðŸ”—</a>George D. Secor &#x3C;gdsecor@yahoo.com&#x3E;</h3><span>12/30/2004 7:32:16 AM</span><button style="float: right; margin-right: 20px">toggle monospace</button><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>--- In <a href="mailto:tuning@yahoogroups.com">tuning@yahoogroups.com</a>, &quot;Dave Keenan&quot; &lt;d.keenan@b...&gt; wrote:</p><p><a href="/tuning/topicId_56507.html#56522">/tuning/topicId_56507.html#56522</a></p><p>Bravo!  If anyone out there wants a two-minute summary of what the<br/>symbols in the Sagittal system &quot;really represent&quot;, then the above is<br/>highly recommended reading.</p><p>Taken in context, this explanation addresses the problem of how to<br/>interpret the symbols in a computer application, where the resolution<br/>of pitch greatly exceeds that allowed by a manageable (finite) number<br/>of symbols:</p><p>&gt; But we recently realised that even in the case of JI notations we<br/>&gt; were not using all the available information to determine exactly<br/>&gt; what alteration a sagittal should default to (&quot;really represent&quot;).<br/>&gt; ...<br/>&gt; [By using this information,] we&apos;ve increased the precision without<br/>increasing<br/>&gt; the number of symbols. This is what we call &quot;smart defaults&quot;.</p><p>In essence, this allows microtonal software to interpret the symbols<br/>in context in much the same way a musician playing an instrument of<br/>flexible pitch in just intonation fine-tunes pitch by ear.</p><p>Smart idea!  Way to go, Dave!</p><p>--George</p></div><h3><a id=56526 href="#56526">ðŸ”—</a>Herman Miller &#x3C;hmiller@IO.COM&#x3E;</h3><span>12/30/2004 9:26:52 AM</span><button style="float: right; margin-right: 20px">toggle monospace</button><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>Dave Keenan wrote:<br/>&gt; That&apos;s certainly the case if they are represented in the _names_ of &gt; macros (and I like George&apos;s suggestion there), but I wonder if you &gt; could pass even the non-alphanumeric ones to the macro preprocessor &gt; as string literal _arguments_, and have the macro expand to a huge &gt; nested conditional expression. I know nothing about what operators &gt; are allowed, but I&apos;m guessing any valid C expression that evaluates &gt; to a number.</p><p>Unfortunately macros are fairly limited in Csound scores. Csound works entirely with numbers (no characters or strings), and macros can only use the arithmetic operators + - * / together with parentheses for grouping. There isn&apos;t even a unary minus, which really complicates things. (At least that&apos;s the case with the version of Csound that came with the Csound Book; it&apos;s possible that a newer version might have improved macro preprocessing.)</p><p>&gt; e.g. &gt; &gt; #define C(X,Y)&#x9;#($X.-4)*$p2.+8+ \<br/>&gt; ($Y.==&quot;/&quot; + $Y.==&quot;/|&quot;)  ?  (4*$p3.-(4*$p2.+$p5.)) : (\<br/>&gt; ($Y.==&quot;\&quot; + $Y.==&quot;\!&quot;)  ? -(4*$p3.-(4*$p2.+$p5.)) : (\<br/>&gt; ($Y.==&quot;f&quot; + $Y.==&quot;|)&quot;)  ?  (6*$p2.-(2*$p3.+$p7.)) : (\<br/>&gt; ($Y.==&quot;t&quot; + $Y.==&quot;!)&quot;)  ? -(6*$p2.-(2*$p3.+$p7.)) : (\<br/>&gt; ($Y.==&quot;^&quot; + $Y.==&quot;/|\&quot;) ?  ($p3.+$p11.-(5*$p2.))  : (\<br/>&gt; ($Y.==&quot;v&quot; + $Y.==&quot;\!/&quot;) ? -($p3.+$p11.-(5*$p2.))  : (\<br/>&gt; ...<br/>&gt; 0...))))))#<br/>&gt; &gt; The trailing backslashes are intended as line-continuations.</p><p>I&apos;ve experimented with naming conventions that have a direct alphanumeric equivalent for each character of the ASCII Sagittal notation. So for instance, Z represents &apos;/&apos; and T represents &apos;|&apos;. A few examples:</p><p>#define ZT&#x9;#+(4*$p3.-(4*$p2.+$p5.))#&#x9;;  /|   /  81/80<br/>#define CLZ&#x9;#-(3*$p3.-($p2.+$p13.))#&#x9;;  (!/  w  26/27<br/>#define UD&#x9;#-($p3.+$p7.-(2*$p2.+$p5.))#&#x9;;   U)     20/21</p><p>But these abbreviations are one step further removed from the Sagittal symbols and end up being difficult to interpret. I think I prefer George&apos;s suggestion of using the comma/kleisma/diesis names. So for instance [$B(4)$d11Ld.] would represent an 11 L-diesis down from B, and you can get a pretty good idea of about what pitch that represents, but [$B(4)$CLD.] is harder to interpret, because you need to translate it mentally to B(!) before it makes any sense. On the other hand, the unmixed Sagittal notation is useful for intervals as simple as 6/5: a 6/5 above C is E!!/, which I could notate either as [$E(4)$UZ.] or [$E(4)$fl.$u5C.]. So I might want to keep a few of these short alphanumeric names around for convenience(especially for the ones smaller than an apotome).</p><p>&gt; Another useful property of a scheme like this is that the macro that &gt; expands the sagittal knows what nominal it is being applied to. This &gt; opens up the possibility of using the &quot;smart defaults&quot; that George &gt; mentioned. This property might also be obtained in some other way. &gt; More about &quot;smart defaults&quot; later.</p><p>Wouldn&apos;t you need to know what key the music is in?</p></div><h3><a id=56529 href="#56529">ðŸ”—</a>Dave Seidel &#x3C;dave@superluminal.com&#x3E;</h3><span>12/30/2004 12:26:32 PM</span><button style="float: right; margin-right: 20px">toggle monospace</button><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>Herman Miller wrote:<br/>&gt; Unfortunately macros are fairly limited in Csound scores. Csound works<br/>&gt; entirely with numbers (no characters or strings), and macros can only<br/>&gt; use the arithmetic operators + - * / together with parentheses for<br/>&gt; grouping. There isn&apos;t even a unary minus, which really complicates<br/>&gt; things. (At least that&apos;s the case with the version of Csound that came<br/>&gt; with the Csound Book; it&apos;s possible that a newer version might have<br/>&gt; improved macro preprocessing.)</p><p>This is not completely accurate with the current &quot;canonical&quot; version (4.23).  I use macros sometimes to paste in a block of orchestra or score code like using a template.  The Csound preprocessor is limited but in basic philosophy is like the C language preprocessor: it just copies literal text unless it encounters a variable token (e.g., $foo.), at which time it replaces the token with whatever it&apos;s #define&apos;d as. Not sure how recursive it is, though.</p><p>For example, I use:</p><p>#define IF_TRK(N) #<br/>if (itrk == $N.) then<br/>    goto TRK$N.#</p><p>#define ELSEIF_TRK(N) #<br/>elseif (itrk == $N.) then<br/>    goto TRK$N.#</p><p>#define ENDIF   #endif#</p><p>#define SEND(N) #<br/>ga$N. = ga$N.+asig<br/>goto DONE#</p><p>so I can say:</p><p>        $IF_TRK(1)<br/>        $ELSEIF_TRK(2)<br/>        $ELSEIF_TRK(3)<br/>        $ELSEIF_TRK(4)<br/>        $ENDIF.</p><p>TRK1:   $SEND(1)<br/>TRK2:   $SEND(2)<br/>TRK3:   $SEND(3)<br/>TRK4:   $SEND(4)<br/>DONE:</p><p>- Dave</p><p>---<br/>Dave Seidel<br/> [blog] <a href="http://superluminal.com/dave/weblog">http://superluminal.com/dave/weblog</a><br/>[music] <a href="http://mysterybear.net">http://mysterybear.net</a></p></div><h3><a id=56530 href="#56530">ðŸ”—</a>Dave Keenan &#x3C;d.keenan@bigpond.net.au&#x3E;</h3><span>12/30/2004 12:40:28 PM</span><button style="float: right; margin-right: 20px">toggle monospace</button><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>--- In <a href="mailto:tuning@yahoogroups.com">tuning@yahoogroups.com</a>, Herman Miller &lt;hmiller@I...&gt; wrote:<br/>&gt; Dave Keenan wrote:<br/>&gt; &gt; Another useful property of a scheme like this is that the macro<br/>that<br/>&gt; &gt; expands the sagittal knows what nominal it is being applied to.<br/>This<br/>&gt; &gt; opens up the possibility of using the &quot;smart defaults&quot; that<br/>George<br/>&gt; &gt; mentioned. This property might also be obtained in some other<br/>way.<br/>&gt; &gt; More about &quot;smart defaults&quot; later.<br/>&gt;<br/>&gt; Wouldn&apos;t you need to know what key the music is in?</p><p>If you had that information, you could certainly use it to<br/>advantage. The horizontal index to the lookup table is intended to<br/>be the distance in fifths of the nominal-plus-sharps-or-flats from<br/>the (possibly local) 1/1 or tonic. But even without that<br/>information, 1/1 can default to C and the smart defaults will still<br/>be significantly better than always using the primary comma, unless<br/>the key is very far from C on the chain of fifths.</p><p>If you can identify the roots of chords (as you can in Fractal Tune<br/>Smithy&apos;s chord-progression player), then these can also be used as<br/>local 1/1s for the purpose of sagittal smart defaults.</p><p>And we still intend to define higher resolution JI notations, that<br/>use accent marks (like the &quot;semantic radicals&quot; of Chinese text) to<br/>indicate which of several possibilities are intended, or to further<br/>narrow the choices for a higher-resolution set of smart defaults.<br/>These can be used if the software&apos;s educated guesses aren&apos;t good<br/>enough, but obviously the learning curve is steeper for the user.</p><p>Another possibility is that the software could tell the user what<br/>pitch (ratio or cents or ET degree etc.) it has interpreted the<br/>nominal-plus-sagittal as, and if it isn&apos;t what they wanted then they<br/>should have the option of explicitly entering the pitch _as_ a ratio<br/>or cents or ET degree etc. I believe Robert Walker intends to do<br/>something like this in Fractal Tune Smithy.</p><p>-- Dave Keenan</p></div>
                <script>
                    let monospace = false
                    $('button').on('click', function () {
                      if (monospace) {
                        $('p').css("font-family", "")
                      } else {
                        $('p').css("font-family", "monospace")
                      }
                      monospace = !monospace
                    })
                </script>
            