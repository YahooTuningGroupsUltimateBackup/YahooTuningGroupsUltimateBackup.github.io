<a href="/tuning">back to list</a><h1>Soundcard accuracy (was Re: Reaktor or Csound)</h1><h3><a id=17379 href="#17379">ðŸ”—</a>graham@microtonal.co.uk</h3><span>1/11/2001 7:58:00 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>In-Reply-To: &lt;007401c07b88$09d69380$137c69d5@e0b9e6&gt;<br/>Robert Walker wrote:</p><p>&gt; You may find the relative pitch is better than absolute pitch.</p><p>Indeed.  This isn&apos;t unique to soundcards.  I think I remember adjusting my<br/>TX81Z&apos;s global tuning a couple of steps to get it in line with A440.</p><p>&gt; Here are my results for my sound card as an example (repeated from an<br/>&gt; earli=<br/>&gt; er post):</p><p>What card are you using?</p><p>&gt; I&apos;ve shown my one is overall sharp by 2 2/3 cents in absolute pitch, but<br/>&gt; relative pitch is correct to within about 0.2 cents.</p><p>I had previously concluded my AWE64 to tune in 1 cent steps, using all the<br/>bits of the pitch bend to decide which step.  You can do this by playing<br/>two notes 1 semitone apart on different channels, and moving the higher<br/>note down that 1 semitone with a pitch bend.  Move the pitch wheel up or<br/>down (this may have to be done by keying into a sequencer rather than<br/>moving a real wheel) until you start to hear beating.  Repeat for other<br/>notes.</p><p>I never worked out how accurate those cent steps were, but my ears tell me<br/>that intervals that are supposed to be just do sound purer than intervals<br/>that are supposed to be tempered.  That should still only give 0.5 cent<br/>accuracy, unless the internal tuning happens to fit JI.</p><p>So I&apos;ll also ask what intervals you&apos;re trying to tune.</p><p>Hold on, I see the figures Dimitris got second time round work out at a<br/>third accurate to 0.1 cents.  So, what soundcard is this?  Hold on again,<br/>he says so further back!  An AVM Apex.  Interesting.</p><p>&gt; The method I used was to actually count number of waves in Goldwave.<br/>&gt; (My soundcard has two synths, one of which producew regular waves for<br/>&gt; some =<br/>&gt; voices,<br/>&gt; which are easy to count, and one which produces the more lifelike ones<br/>&gt; that=<br/>&gt;  are<br/>&gt; much harder to count since the wave shape varies so much as the note<br/>&gt; continues. so this is for the basic synth).</p><p>Can you load your own samples onto the better one?  In that case you can<br/>put some simple waveforms on.  Or try things like &quot;sawtooth lead&quot; or<br/>&quot;synth bass&quot; after turning vibrato and chorus off.</p><p>One problem with this kind of method is that you can get illusory JI<br/>because of the integer number of samples.  But your detail shows you&apos;ve<br/>avoided that kind of thing.  What you haven&apos;t mentioned, though, is how<br/>quickly the wave was passing the zero line.  A square or sawtooth will<br/>give you a high gradient that can give good results.</p><p>&lt;experimental method snipped&gt;</p><p>&gt; Anyone got any ideas why relative pitch of a soundcard would be so much<br/>&gt; mor=<br/>&gt; e accurate than<br/>&gt; absolute pitch?<br/>&gt;<br/>&gt; Or is it the old trend of notes getting sharper at any opportunity!</p><p>Probably that nobody takes the A440 standard that seriously.  I think<br/>there may well be a tendency to tune sharp.  The MIDI Fine Tune parameter<br/>could be used to correct for this.</p><p>For a sample-based synth, it may well be that the samples are being<br/>assigned the wrong frequencies.  You don&apos;t even need the waveform to check<br/>this.  Take the length of the loop, and see if it&apos;s a multiple of the<br/>supposed period.</p><p>                     Graham</p></div><h3><a id=17425 href="#17425">ðŸ”—</a>Robert Walker &#x3C;robert_walker@rcwalker.freeserve.co.uk&#x3E;</h3><span>1/12/2001 7:55:41 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>Todd Wilcox wrote:<br/>&gt; Well, to answer the second question first: I&apos;m only guessing, but I&apos;m pretty<br/>&gt; certain that the overall pitch of a typical sound card synthesiser will be<br/>&gt; based on the oscillations of a quartz crystal. Another possible source for<br/>&gt; timing (and maybe more likley cause it would be cheaper) would simply be<br/>&gt; dividing the bus clock (about 8 MHz for ISA and 33 MHz for PCI). I wouldn&apos;t<br/>&gt; be surprised if there were slight variations in both timing sources from<br/>&gt; computer to computer.</p><p>I&apos;ve done a web search - at least some soundcards use quartz crystal oscillations<br/>(do they all?)</p><p>Also, the drift of the quartz oscillators of soundcards relative to each other can<br/>cause problems in combining tracks from two soundcards:<br/><a href="http://www.hitsquad.com/smm/news/261/#4.b">http://www.hitsquad.com/smm/news/261/#4.b</a><br/>(see 4.b)</p><p>However, my result of a frequency of 640.984552 instead of 640 corresponds to a drift of<br/>0.984552/640 seconds per second, or 24*60*0.984552/640 = 2.215242 minutes per day.</p><p>That is far more than the seconds per month of a typical quartz oscillator in normal use.</p><p>What I&apos;m measuring is the pitch as recorded to a waveform audio file, rather than the<br/>pitch as produced from the speakers</p><p>So what seems most relevant is the drift of the p.c. clock relative to the soundcard.</p><p>If both used the same clock, then one wouldn&apos;t detect any drift at all when recording it<br/>to waveform audio as the timestamps for the samples recorded would exactly match<br/>the ones used to generate them.</p><p>P.c. clocks apparently can be much less accurate than digital clocks, because they are<br/>warm, losing minutes per month.  N.b. I keep mine at the correct time using one of the time keeping<br/>services on the web - the one at Boulder Colorado in fact, and have just downloaded a great utility called<br/>automachron that can do this automatically whenever you connect to the internet:<br/><a href="http://www.softseek.com/Utilities/Clocks_Alarms_and_Reminders/System_Time_Synchronizers/Review_5124_index.html">http://www.softseek.com/Utilities/Clocks_Alarms_and_Reminders/System_Time_Synchronizers/Review_5124_index.html</a></p><p>However minutes per month mean only seconds per day, so that isn&apos;t enough to explain the<br/>discrepancy.</p><p>Another idea is that the Dos clock, used for the system time, _can_ be even more inaccurate, sometimes losing minutes a day,<br/>as it is kept in time by another less accurate method, but one doesn&apos;t normally notice that on a home computeras it is reset<br/>whenever one reboots.</p><p>It keeps time by counting &quot;ticks&quot;. So it can easily miss a few (depending on how heavily one is using the p.c.), and when this<br/>happens, it runs more slowly.</p><p>More about the DOS clock:<br/><a href="http://www.oak.ie/company/dosclock.htm">http://www.oak.ie/company/dosclock.htm</a></p><p>A program that records to waveform audio would quite possibly use the system time to generate<br/>time stamps, and so perhaps time could be slowed down (recorded frequencies speeded up)<br/>due to missing ticks in the DOS clock.</p><p>This time, the amount of the discrepancy is okay.</p><p>However, I&apos;ve been checking mine against the clock at Boulder Colorado, and it isn&apos;t losing anything like<br/>as much as minutes a day. So far, has kept time fine, certainly less than a second drift in several hours.</p><p>So I think my p.c. clock isn&apos;t missing many ticks.</p><p>Perhaps this only applies to older p.cs, or perhaps ones that are _really_ heavily used?</p><p>Anyway, on the data so far, it doesn&apos;t seem that this is the explanation in this particular case, though clock<br/>drift is certainly something one needs to be aware of in some situations.</p><p>&gt; As for the first question: I&apos;m sure 99% of sound card owners are not<br/>&gt; concerned with the tuning of their sound card&apos;s build in synthesiser.</p><p>Yes, agreed, and I imagine the soundcard manufacturers could probably fix it<br/>by automatically adjusting the absolute pitch by some feedback method,<br/>if there was enough demand.</p><p>It is easy enough to compensate if necessary, so I imagine there isn&apos;t going to be much demand for it.</p><p>&gt; An interesting experiment might be to see if the same sound card plays at a<br/>&gt; different overall pitch when installed in different computers, or even in<br/>&gt; the same computer with other hardware differences (other devices on the ISA<br/>&gt; bus, maybe).</p><p>Yes, if anyone wants to try the experiment.</p><p>Graham Breed wrote:</p><p>&gt; What card are you using?</p><p>Soundblaster Live!</p><p>So I imagine it is not too unusual a degree of accuracy for a modern soundcard.</p><p>&gt; So I&apos;ll also ask what intervals you&apos;re trying to tune.</p><p>No particular ones. I tested a number of notes, and found them<br/>sharp by 2.66 cents with range of values of about 0.2 cents.</p><p>This was some time ago (it takes a while to measure a large number of notes by<br/>counting waves by hand).</p><p>&gt; One problem with this kind of method is that you can get illusory JI<br/>&gt; because of the integer number of samples.  But your detail shows you&apos;ve<br/>&gt; avoided that kind of thing.  What you haven&apos;t mentioned, though, is how<br/>&gt; quickly the wave was passing the zero line.  A square or sawtooth will<br/>&gt; give you a high gradient that can give good results.</p><p>The waves were easy to measure as I expanded view until one could see<br/>the individual sample steps. Also for the basic synth, there is only one<br/>crossing point per wave.</p><p>The waves were easy to measure as I expanded view until one could see<br/>the individual sample steps.</p><p>Also as I counted more and more waves in a wave, the calculated frequencies slowly converged.</p><p>So I think the method is a good one.</p><p>I&apos;ve just discovered the drop list in CoolEdit next to FFT size, and the Triangular<br/>option, which gives more accurate frequency measurements than the default<br/>of Welch (Gaussian).</p><p>This seems to work fairly well, and gives roughly similar results. At 440 Hz, it shows a range of<br/>values of about +-0.1 cents depending where I click on the wave).</p><p>Used it to test ascending scales in 200-tet. It suggests an accuracy of 0.5 cents<br/>for my soundcard instead of 0.2 cents.</p><p>I could have been lucky in the choice of notes to test before - only did a small sample of about eight or so<br/>as it takes a while to do them by hand.</p><p>The &quot;Triangular&quot; option is reasonably consistent with the wave counting method over most of the range.</p><p>However it seems to give results that are too flat for low frequency notes such as 110 Hz.</p><p>Example,</p><p>110 Hz</p><p>4 / 0.036312 110.156 Hz<br/>16 /  0.14531 110.109 Hz<br/>64 / 0.58124 110.109 Hz<br/>256 / 256 / 2.32493 110.1108 Hz</p><p>N.B. this is sharp by 1.7429 cents instead of 2.66 cents as it is in middle of range, suggesting the<br/>Midi synth on the soundcard may be slightly flatter for low notes.</p><p>For this note, CoolEdit gives the frequency as various values from 109.91 to 109.99 Hz</p><p>I&apos;m fairly confident in this calculation in Goldwave.</p><p>&gt; Can you load your own samples onto the better one?  In that case you can<br/>&gt; put some simple waveforms on.  Or try things like &quot;sawtooth lead&quot; or<br/>&gt; &quot;synth bass&quot; after turning vibrato and chorus off.</p><p>With the better synth, CoolEdit shows a range of values from 438 to 442 Hz, and the sample repeats<br/>every 0.8 seconds. (this is for recorder voice).</p><p>Similar fluctuations for sawtooth, which is a very complex waveform on the more realistic synth. With occasional<br/>maverick values shown such as 1320.5 Hz, (probably due to multiple peaks in the waveform).</p><p>The fluctuations are too large to tell if the better synth is in pitch or not.</p><p>These aren&apos;t really large fluctuations - + - 2 Hz is +-7.8514 cents</p><p>Not much hope of counting these waves in Goldwave, as you get varying numbers of subsidiary peaks for<br/>each wave, all varying in strength, sometimes with double peaks, and so on.</p><p>Probably best method to check pitch of the better synth would be to load ones own samples, as you say.<br/>Soundblaster Live! has soundfonts which one can create oneself I believe. - I haven&apos;t needed to do that yet,<br/>but one could give it a try.</p><p>&gt; Probably that nobody takes the A440 standard that seriously.  I think<br/>there may well be a tendency to tune sharp.  The MIDI Fine Tune parameter<br/>could be used to correct for this.</p><p>Maybe that&apos;s it...</p><p>Robert</p></div>