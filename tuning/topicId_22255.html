<a href="/tuning">back to list</a><h1>Re: Midi pitch bend range - how to set it from a midi file / sequencer</h1><h3>Robert Walker &#x3C;robert_walker@rcwalker.freeserve.co.uk&#x3E;</h3><span>5/7/2001 9:14:23 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>Hi Manuel</p><p>There is a standard way to set the pitch bend range in Midi,<br/>though it is somewhat esoteric the way it is done, I agree:</p><p>You use the registered parameter number 0.</p><p>I call it for all the channels in my midi files, just in case<br/>it isn&apos;t set to the default of +- one tone.</p><p>To use the rpn, first you do two controller messages with<br/>0x64 as the controller (coarse rpn) and 0x65 as the controller<br/>(fine rpn) and the registered parameter number as the data<br/>for both of them.</p><p>Here it is for channel 1.</p><p>:00 b0 65 00 ;channel 1 controller  - fine rpn 0 (pitch bend sensitivity)<br/>:00 b0 64 00 ;channel 1 controller  - coarse registered parameter number 0</p><p>Then you call the data entry controller which is 06 for the most significant<br/>byte, and 26 for the least significant byte. You pass the amount of the<br/>range as the data:</p><p>:00 b0 06 02 ;channel 1 controller Data Entry - coarse pitch bend range 2 semitones<br/>:00 b0 26 00 ;channel 1 controller Data Entry - fine pitch bend range 0 cents</p><p>Finally, it is considered good practice to null the rpn when you are finished with<br/>it, which you do by calling the rpn controllers again with 0x7f (127) as the data.</p><p>:00 b0 65 7f ;channel 1 controller  - fine rpn 127 (Null the active parameter numbre)<br/>:00 b0 64 7f ;channel 1 controller  - coarse registered parameter number 127</p><p>Ability to change pitch bend range must be pretty standard in modern soundcards, as<br/>the Quicktime media player automatically resets the pitch bend range to +- 2 octaves.<br/>This is for convenience of programmers using a Quicktime programming language.</p><p>See my post to the TL on &quot;Basson piano pitch bends&quot;, 2/14/01.</p><p>Quicktime does this for its own internal synth. However, you can also set the<br/>midi device on your soundcard as the output for Quicktime (in windows:<br/>Control panel | Quicktime | Music), and if you do this, Quicktime resets the<br/>pitch bend range for your soundcard to +- 2 octaves while playing. You can<br/>midi relay the output and look at the data and find the pitch bend range changing<br/>messages.</p><p>To work around the pitch bend range change, it re-writes all the pitch bends<br/>from the midi file on the fly, result being that the midi clip<br/>still sounds the same as before. The loss of pitch bend resolution resulting<br/>from multiplying the smallest pitch bend unit by 12 isn&apos;t significant, as it<br/>is likely to still be smaller than the pitch bend resolution of the soundcard.</p><p>(This caused me a fair amount of puzzlement at the time!)</p><p>Kind of a bit strange that they would do it that way, as one would think they<br/>could just relay the data unchanged from the midi file without doing anything<br/>to it at all when the output device is set in this way, and then it wouldn&apos;t<br/>matter whether or not the output device supported a two octave pitch<br/>bend range. Must be some fairly strong overriding reason for it I suppose.</p><p>For the FTS &quot;joystick theremin&quot;, one option resets the pitch bend range to the<br/>entire range needed for the theremin to get smooth pitch bending without need<br/>to resound the notes, if synthesiser or soundcard supports it.</p><p>The other way, if one wanted more accuracy for whatever reason, and the other<br/>equipment supports it (music using slow beating notes?), one could<br/>still play any pitch one wants using a range of +- half a semitone, and so<br/>a quarter of the size of the unit, or even less if one didn&apos;t need to<br/>go as far from 12-tet as a quarter note sharp / flat.</p><p>I find that changing the pitch bend range can take a significant amount of<br/>time in terms of milliseconds. So one will usually do it for all the channels<br/>at once at start of the midi file, rather than for each note as it is played.</p><p>Anyway, with +- one tone as the Midi standard, and +- two octaves as another<br/>standard that a fair number of Quicktime programmers will be used to, there is<br/>clearly no fixed midi pitch bend unit.</p><p>Robert</p></div>