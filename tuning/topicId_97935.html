<!DOCTYPE html>
            <html>
            <head>
            <meta charset="utf-8">
                <meta name="viewport"
            content="width=device-width, height=device-height, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no">
                <meta http-equiv="x-ua-compatible" content="ie=edge">
                <title>Yahoo Tuning Groups Ultimate Backup tuning Minimal comma pump algorithm</title>
                <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
            </head>
            <body>
            </body>
            </html>
        <a href="/tuning">back to list</a><h1>Minimal comma pump algorithm</h1><h3><a id=97935 href="#97935">ðŸ”—</a>genewardsmith &#x3C;genewardsmith@...&#x3E;</h3><span>4/13/2011 11:18:39 PM</span><button style="float: right; margin-right: 20px">toggle monospace</button><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>Since this started here, I&apos;m posting it here rather than tuning-math.</p><p>We want to find a minimal comma pump for any comma q. This is returned in a canonical form, of a list of rationals of increasing complexity in the temperament defined by tempering out q, which can also be thought of as a multiset. (The routine I have now doesn&apos;t work in the 3-limit, but that I can fix.)</p><p>(1) Compute the spectrum of q, as explained on the Xenwiki article on the spectrum:</p><p><a href="http://xenharmonic.wikispaces.com/Spectrum+of+a+temperament">http://xenharmonic.wikispaces.com/Spectrum+of+a+temperament</a></p><p>(2) If s is the spectrum list, start a new list with [2, s[1]].</p><p>(3) Call a routine which tests if an interval can be expressed in the group generated by a list of intervals. If q can be so expressed, pass the list to an output routine.</p><p>(4) If q cannot be so expressed, test whether the next element of s can be so expressed. If it can, keep checking. If it can&apos;t, add it to the list and go back to step 3.</p><p>The output routine now takes this list &quot;t&quot; and the comma, and expresses the comma in terms of t by taking the pseudoinverse of the matrix of monzos of t, and left multiplying this by the monzo for the comma. Then it creates a new list, appending n copies of t[i] if the ith exponent in this product is +n, n copies of 1/t[i] if the exponent is -n, and nothing if it is zero. The result is a canonical form for the comma pump, but not very elegant. However, factors of two can be merged in to any list element and moved around at will between them, and the whole list may be permuted. Finally, the inverse of the list can be used instead.</p><p>Finally, the test routine takes the interval to be tested and the list of basis intervals, expresses the interval in terms of the basis using the pseudoinverse as above, and then simply tests if the product of the basis elements with the computed exponents in fact gives the interval being tested.</p></div>
                <script>
                    let monospace = false
                    $('button').on('click', function () {
                      if (monospace) {
                        $('p').css("font-family", "")
                      } else {
                        $('p').css("font-family", "monospace")
                      }
                      monospace = !monospace
                    })
                </script>
            