<a href="/tuning">back to list</a><h1>"converting" ET to JI</h1><h3>Canright, David &#x3C;dcanright@xxx.xxxx.xxxx&#x3E;</h3><span>8/23/1999 5:09:56 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>All this thread about how a given ET will be heard as JI reminded me of an<br/>article I wrote for &quot;Interval&quot; way back in 1979, in which I gave tables for<br/>various popular ET&apos;s, such as the following for 11-ET:</p><p>11-tone equal temperament: just approximations to 1 cent<br/>  1 ( 109.1): 16/15 (+2.6) 33/31 (-0.9)<br/>  2 ( 218.2): 8/7 (+13.0) 17/15 (-1.5) 76/67 (+0.0)<br/>  3 ( 327.3): 6/5 (-11.6) 29/24 (+0.3)<br/>  4 ( 436.4): 9/7 (-1.3) 193/150 (+0.0)<br/>  5 ( 545.5): 4/3 (-47.4) 11/8 (+5.9) 26/19 (-2.4) 37/27 (+0.0)<br/>  6 ( 654.5): 3/2 (+47.4) 16/11 (-5.9) 19/13 (+2.4) 54/37 (-0.0)<br/>  7 ( 763.6): 14/9 (+1.3) 143/92 (-0.1)<br/>  8 ( 872.7): 5/3 (+11.6) 48/29 (-0.3)<br/>  9 ( 981.8): 7/4 (-13.0) 30/17 (+1.5) 67/38 (-0.0)<br/> 10 (1090.9): 15/8 (-2.6) 77/41 (+0.2)</p><p>where numbers in parens are cents or cents difference. Of course, this does<br/>not show all JI intervals near each ET tone, only successive approximations<br/>from an algorithm I got from John Chalmers.</p><p>I have just made the program (executable for DOS and source code in C)<br/>available at:<br/>   <a href="http://www.mbay.net/~anne/david/et2ji">http://www.mbay.net/~anne/david/et2ji</a><br/>The program has an option to include intermediate results as well, which for<br/>11-ET gives:</p><p>11-tone equal temperament: just approximations to 1 cent  (detailed)<br/>  1 ( 109.1): 12/11 (+41.5) 13/12 (+29.5) 14/13 (+19.2) 15/14 (+10.4) 16/15<br/>(+2.6) 17/16 (-4.1) 33/31 (-0.9)<br/>  2 ( 218.2): 7/6 (+48.7) 8/7 (+13.0) 9/8 (-14.3) 17/15 (-1.5) 25/22 (+3.1)<br/>42/37 (+1.3) 59/52 (+0.5) 76/67 (+0.0)<br/>  3 ( 327.3): 6/5 (-11.6) 11/9 (+20.1) 17/14 (+8.9) 23/19 (+3.5) 29/24<br/>(+0.3)<br/>  4 ( 436.4): 5/4 (-50.0) 9/7 (-1.3) 13/10 (+17.9) 22/17 (+10.0) 31/24<br/>(+6.7) 40/31 (+4.9) 49/38 (+3.8) 58/45 (+3.0) 67/52 (+2.4) 76/59 (+2.0)<br/>85/66 (+1.6) 94/73 (+1.4) 103/80 (+1.1) 112/87 (+0.9) 121/94 (+0.8) 130/101<br/>(+0.6) 139/108 (+0.5) 148/115 (+0.4) 157/122 (+0.3) 166/129 (+0.2) 175/136<br/>(+0.1) 184/143 (+0.1) 193/150 (+0.0)<br/>  5 ( 545.5): 4/3 (-47.4) 7/5 (+37.1) 11/8 (+5.9) 15/11 (-8.5) 26/19 (-2.4)<br/>37/27 (+0.0)<br/>  6 ( 654.5): 3/2 (+47.4) 10/7 (-37.1) 13/9 (-17.9) 16/11 (-5.9) 19/13<br/>(+2.4) 35/24 (-1.4) 54/37 (-0.0)<br/>  7 ( 763.6): 8/5 (+50.0) 11/7 (+18.9) 14/9 (+1.3) 17/11 (-10.0) 31/20<br/>(-4.9) 45/29 (-3.0) 59/38 (-2.0) 73/47 (-1.4) 87/56 (-0.9) 101/65 (-0.6)<br/>115/74 (-0.4) 129/83 (-0.2) 143/92 (-0.1)<br/>  8 ( 872.7): 5/3 (+11.6) 13/8 (-32.2) 18/11 (-20.1) 23/14 (-13.3) 28/17<br/>(-8.9) 33/20 (-5.8) 38/23 (-3.5) 43/26 (-1.7) 48/29 (-0.3)<br/>  9 ( 981.8): 7/4 (-13.0) 9/5 (+35.8) 16/9 (+14.3) 23/13 (+5.9) 30/17 (+1.5)<br/>37/21 (-1.3) 67/38 (-0.0)<br/> 10 (1090.9): 11/6 (-41.5) 13/7 (-19.2) 15/8 (-2.6) 17/9 (+10.1) 32/17<br/>(+4.1) 47/25 (+2.0) 62/33 (+0.9) 77/41 (+0.2)</p><p>The basic algorithm used to convert a decimal fraction to a ratio is below,<br/>in fake C:</p><p>frac2rat ( double frac, double tolerance ) {<br/>double big, small = 1., td;<br/>int bn = 0, bd = 1, sn = 1, sd = 0, t;<br/>/* bn,bd,sn,sd are big numer &amp; denom, small numer &amp; denom */</p><p>big = frac; /* decimal fraction (freq. ratio) */<br/>do {<br/>  while ( big &gt;= small ) {<br/>&#x9; big -= small; bn += sn; bd += sd;<br/>&#x9; }<br/>/* here, bd/bn is approx.; also big &lt; small, time to swap */<br/>  td = big; big = small; small = td;<br/>  t = bn; bn = sn; sn = t;<br/>  t = bd; bd = sd; sd = t;<br/>  }<br/>while ( error((bd/bn)/frac) &gt; tolerance );<br/>print(bd/bn);<br/>}</p><p>By the way, I agree that &quot;punning&quot; is musically useful, and not only for ET<br/>scales, even for JI scales. For example, I might use a triad 5/4 14/9 15/8<br/>as if the 14/9 were really a 25/16, though it&apos;s 7 cents off. But I would not<br/>resolve to such a triad.</p><p>David Canright                (831) 656-2782 (or -2206)<br/>Math. Dept., Code MA/Ca       (831) 656-2355  (FAX)<br/>Naval Postgraduate School     <a href="mailto:DCanright@NPS.Navy.mil">DCanright@NPS.Navy.mil</a><br/>Monterey, CA  93943  USA      <a href="http://www.mbay.net/~anne/david/">http://www.mbay.net/~anne/david/</a></p></div><h3>Paul H. Erlich &#x3C;PErlich@xxxxxxxxxxxxx.xxxx&#x3E;</h3><span>8/24/1999 12:27:53 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>David Canright wrote,</p><p>&gt;All this thread about how a given ET will be heard as JI reminded me of an<br/>&gt;article I wrote for &quot;Interval&quot; way back in 1979, in which I gave tables for<br/>&gt;various popular ET&apos;s, such as the following for 11-ET:</p><p>[. . .]</p><p>4 ( 436.4): 5/4 (-50.0) 9/7 (-1.3) 13/10 (+17.9) 22/17 (+10.0) 31/24<br/>(+6.7) 40/31 (+4.9) 49/38 (+3.8) 58/45 (+3.0) 67/52 (+2.4) 76/59 (+2.0)<br/>85/66 (+1.6) 94/73 (+1.4)</p><p>[. . .]</p><p>David, why does you algorithm follow a very good approximation (9/7) with<br/>many that are not as good? The standard continued fraction algorithm<br/>wouldn&apos;t do that.</p></div><h3>Canright, David &#x3C;dcanright@xxx.xxxx.xxxx&#x3E;</h3><span>8/25/1999 12:42:20 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>Paul,<br/>The algorithm I use (for which I credit John Chalmers) has an inner and an<br/>outer loop. By default, only the results of the outer loop are shown, which<br/>give successively better approximations (is this equivalent to the continued<br/>fraction method?), such as in my first example:<br/> 4 ( 436.4): 9/7 (-1.3) 193/150 (+0.0)</p><p>I included an option to show the intermediate results of the inner loop,<br/>which gives poorer approximations on the way to a good one, just to show<br/>some other intervals in the neighborhood. The result you quote is from that<br/>option (showing many steps leading from 9/7 to 193/150). In either case, I<br/>only print out those that are closer to tone #n than to #(n+1) or to #(n-1).</p><p>David Canright                (831) 656-2782 (or -2206)<br/>Math. Dept., Code MA/Ca       (831) 656-2355  (FAX)<br/>Naval Postgraduate School     <a href="mailto:DCanright@NPS.Navy.mil">DCanright@NPS.Navy.mil</a><br/>Monterey, CA  93943  USA      <a href="http://www.mbay.net/~anne/david/">http://www.mbay.net/~anne/david/</a></p><p>&gt; -----Original Message-----<br/>&gt; From:&#x9;<a href="mailto:tuning@onelist.com">tuning@onelist.com</a> [SMTP:tuning@onelist.com]<br/>&gt; Sent:&#x9;Tuesday, August 24, 1999 9:05 PM<br/>&gt; To:&#x9;<a href="mailto:tuning@onelist.com">tuning@onelist.com</a><br/>&gt; Subject:&#x9;[tuning] Digest Number 291<br/>&gt; Message: 14<br/>&gt;    Date: Tue, 24 Aug 1999 15:27:53 -0400<br/>&gt;    From: &quot;Paul H. Erlich&quot; &lt;<a href="mailto:PErlich@Acadian-Asset.com">PErlich@Acadian-Asset.com</a>&gt;<br/>&gt; Subject: RE: &quot;converting&quot; ET to JI<br/>&gt;<br/>&gt; David Canright wrote,<br/>&gt;<br/>&gt; &gt;All this thread about how a given ET will be heard as JI reminded me of<br/>&gt; an<br/>&gt; &gt;article I wrote for &quot;Interval&quot; way back in 1979, in which I gave tables<br/>&gt; for<br/>&gt; &gt;various popular ET&apos;s, such as the following for 11-ET:<br/>&gt;<br/>&gt; [. . .]<br/>&gt;<br/>&gt; 4 ( 436.4): 5/4 (-50.0) 9/7 (-1.3) 13/10 (+17.9) 22/17 (+10.0) 31/24<br/>&gt; (+6.7) 40/31 (+4.9) 49/38 (+3.8) 58/45 (+3.0) 67/52 (+2.4) 76/59 (+2.0)<br/>&gt; 85/66 (+1.6) 94/73 (+1.4)<br/>&gt;<br/>&gt; [. . .]<br/>&gt;<br/>&gt; David, why does you algorithm follow a very good approximation (9/7) with<br/>&gt; many that are not as good? The standard continued fraction algorithm<br/>&gt; wouldn&apos;t do that.<br/>&gt;<br/>&gt;<br/>&gt; __________________________________________________________________________<br/>&gt; _____<br/>&gt;</p></div><h3>Paul H. Erlich &#x3C;PErlich@xxxxxxxxxxxxx.xxxx&#x3E;</h3><span>8/26/1999 12:13:04 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>David Canright wrote,</p><p>&gt;The algorithm I use (for which I credit John Chalmers) has an inner and an<br/>&gt;outer loop. By default, only the results of the outer loop are shown, which<br/>&gt;give successively better approximations (is this equivalent to the<br/>continued<br/>&gt;fraction method?), such as in my first example:<br/>&gt; 4 ( 436.4): 9/7 (-1.3) 193/150 (+0.0)</p><p>I believe it is equivalent. The continued fraction expansion for 2^(4/11)<br/>begins</p><p>1 + 1/(3 + 1/(2 + 1/(21 + 1/(25 + 1/(12 + 1/(6 + 1/(2 + 1/(1 +<br/>1/(13)))))))))</p><p>so the successive approximations are</p><p>4/3<br/>9/7<br/>193/150<br/>4834/3757<br/>58201/45234<br/>354040/275161<br/>766281/595556<br/>1120321/870717<br/>15330454/11914877</p><p>at which point the approximation is correct to .00000000001 cent.</p><p>By the way, I really like your music!</p></div>