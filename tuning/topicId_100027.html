<a href="/tuning">back to list</a><h1>Calculating Periodicity Buzz</h1><h3>domeofatonement &#x3C;domeofatonement@...&#x3E;</h3><span>6/13/2011 7:40:11 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>After talking to Mike today I decided to try and find a way to calculate the relative degree of periodicity buzz for linearly stretched triads.  Consider the trig identity below:</p><p>sin(a*t+c)+sin(b*t+d) = 2*sin(t*(a+b)/2+c/2+d/2)*cos(t*(b-a)/2-c/2+d/2)<br/>Or in layman&apos;s terms:<br/>One tone plus another tone is equal to the average frequency of both tones multiplied by the frequency of beating, multiplied by two.</p><p>&apos;a&apos; and &apos;b&apos; represent frequencies<br/>&apos;t&apos; is the domain of time<br/>&apos;c&apos; and &apos;d&apos; are phase shifts</p><p>The cosine term of the above identity is an amplitude modulation (a.k.a. beating).  It should be obvious that when two tones are added together, there is always a degree of low-frequency beating.  I propose that this beating is the cause of periodicity buzz.  The more modulation, the stronger the buzz.</p><p>Lets start with an example: we will be examining a 1:(pi):(2pi-1) triad.  This triad is obviously irrational but it has proportional beating between dyads.</p><p>We must determine the amplitude modulation of both proportionally beating dyads, and then add them with their respective phases to determine the beating intensity.  If the beating intensities are out of phase, subtractive synthesis will occur.</p><p>If all of the notes are in phase, both dyads have a beating frequency of 2*cos(t*(pi-1)/2).  Summing both of these beating frequencies together, we get a total amplitude modulation of 4.</p><p>Now let us do the same calculation, but with the root note 90 degrees out of phase.  The beating of the first dyad is equal to 2*cos(t*(pi-1)/2-pi/4), and the beating of the second dyad is 2*cos(t*(pi-1)/2).  Adding these two together gives us 2*sqrt(2+sqrt(2))*cos(t*(pi-1)/2+pi/8), or an amplitude of about 3.69552.</p><p>Some other amplitude modulation values:<br/>~When the middle note of the triad is 90 degrees out of phase, A=3.69552<br/>~When the root note of the triad is 180 degrees out of phase, A=1.9616<br/>~When all notes are 120 degrees out of phase from one another, A=0</p><p>Notice how when a note is out of phase, the resulting beating frequency is out of phase as well.  Because the top and bottom dyads of the triad have that same frequency of beating, they encounter either additive synthesis or subtractive synthesis when their amplitude modulations are added together, depending on the phase.  This procedure is in agreement with Mike&apos;s hypothesis that triads in phase will have more &apos;buzz&apos; than triads maximally out of phase.  His thread and listening examples can be found here:  <a href="http://launch.dir.groups.yahoo.com/group/tuning/message/95699?var=1">http://launch.dir.groups.yahoo.com/group/tuning/message/95699?var=1</a></p><p>-Ryan</p></div><h3>domeofatonement &#x3C;domeofatonement@...&#x3E;</h3><span>6/14/2011 3:56:54 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>&gt; Notice how when a note is out of phase, the resulting beating frequency is out of phase as well.  Because the top and bottom dyads of the triad have that same frequency of beating, they encounter either additive synthesis or subtractive synthesis when their amplitude modulations are added together, depending on the phase.  This procedure is in agreement with Mike&apos;s hypothesis that triads in phase will have more &apos;buzz&apos; than triads maximally out of phase.  His thread and listening examples can be found here:  <a href="http://launch.dir.groups.yahoo.com/group/tuning/message/95699?var=1">http://launch.dir.groups.yahoo.com/group/tuning/message/95699?var=1</a><br/>&gt;<br/>&gt; -Ryan<br/>&gt;</p><p>Also I forgot to mention the simplified formula, below:</p><p>If you have three sine waves, with frequencies a, b and c, with phase shifts x, y and z respectively, all across the domain of time t, the formula simplifies to this:</p><p>RAM = max &lt; 2*cos((b-a)*t/2-x/2+y/2)+2*cos((c-b)*t/2-y/2+z/2) &gt;</p><p>Where the relative amplitude modulation, RAM, is equal to the maximum value of the function.  This will always be a number between 0 and 4 for triads.  4 represents maximal amplitude modulation, 0 represents minimal amplitude modulation (0 does not mean absence of beating, however).</p><p>If you would like to hear some listening examples, I would suggest you go to Mike&apos;s thread which I linked to in my last message.</p><p>-Ryan</p></div><h3>Mike Battaglia &#x3C;battaglia01@...&#x3E;</h3><span>6/14/2011 4:06:12 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>Hi Ryan, a few points -</p><p>On Mon, Jun 13, 2011 at 10:40 PM, domeofatonement<br/>&lt;domeofatonement@...&gt; wrote:<br/>&gt;<br/>&gt; The cosine term of the above identity is an amplitude modulation (a.k.a. beating). It should be obvious that when two tones are added together, there is always a degree of low-frequency beating. I propose that this beating is the cause of periodicity buzz. The more modulation, the stronger the buzz.</p><p>You&apos;ll notice that the more modulation, the faster the buzz - but also<br/>quieter. That is, 3/1 buzzes less than 9/8 does, even though 3/1 would<br/>have a greater modulation frequency. Which is the main reason why I<br/>keep saying that critical band interactions are involved - because<br/>there&apos;s less interaction as the tones get further apart.</p><p>&gt; Now let us do the same calculation, but with the root note 90 degrees out of phase. The beating of the first dyad is equal to 2*cos(t*(pi-1)/2-pi/4), and the beating of the second dyad is 2*cos(t*(pi-1)/2). Adding these two together gives us 2*sqrt(2+sqrt(2))*cos(t*(pi-1)/2+pi/8), or an amplitude of about 3.69552.<br/>&gt;<br/>&gt; Some other amplitude modulation values:<br/>&gt; ~When the middle note of the triad is 90 degrees out of phase, A=3.69552<br/>&gt; ~When the root note of the triad is 180 degrees out of phase, A=1.9616<br/>&gt; ~When all notes are 120 degrees out of phase from one another, A=0</p><p>I&apos;m not sure I&apos;ve followed correctly, but for the last one, are you<br/>saying that if the first one has a phase of 0, the second one has a<br/>phase of 120, and the third one has a phase of 240, that there will be<br/>no buzz?</p><p>&gt; Notice how when a note is out of phase, the resulting beating frequency is out of phase as well. Because the top and bottom dyads of the triad have that same frequency of beating, they encounter either additive synthesis or subtractive synthesis when their amplitude modulations are added together, depending on the phase. This procedure is in agreement with Mike&apos;s hypothesis that triads in phase will have more &apos;buzz&apos; than triads maximally out of phase. His thread and listening examples can be found here: <a href="http://launch.dir.groups.yahoo.com/group/tuning/message/95699?var=1">http://launch.dir.groups.yahoo.com/group/tuning/message/95699?var=1</a></p><p>I think that we&apos;re on the same track, roughly, although I think the<br/>equations above would be tweaked more to consider group delay rather<br/>than phase - but let me see if I&apos;ve understood what you wrote above<br/>first.</p><p>-Mike</p></div><h3>domeofatonement &#x3C;domeofatonement@...&#x3E;</h3><span>6/14/2011 4:35:20 PM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>--- In <a href="mailto:tuning@yahoogroups.com">tuning@yahoogroups.com</a>, Mike Battaglia &lt;battaglia01@...&gt; wrote:<br/>&gt; I&apos;m not sure I&apos;ve followed correctly, but for the last one, are you<br/>&gt; saying that if the first one has a phase of 0, the second one has a<br/>&gt; phase of 120, and the third one has a phase of 240, that there will be<br/>&gt; no buzz?</p><p>The first has phase -120, the second 0, the third +120; so yes, practically the same as 0, 120, 240.  There will still be buzz, but it will be minimized.  The formula always returns a value between 0 and 4 for triads, which can be used for comparison purposes but not for finding the absolute amplitude of buzzing.</p><p>&gt; I think that we&apos;re on the same track, roughly, although I think the<br/>&gt; equations above would be tweaked more to consider group delay rather<br/>&gt; than phase - but let me see if I&apos;ve understood what you wrote above<br/>&gt; first.<br/>&gt;<br/>&gt; -Mike<br/>&gt;</p><p>What exactly is the difference between group delay and phase?  Maybe the reason we have a misunderstanding is because I still don&apos;t quite understand your periodicity buzz hypothesis.  Not to mention that my formula still needs to be fleshed out.</p><p>-Ryan</p></div><h3>Mike Battaglia &#x3C;battaglia01@...&#x3E;</h3><span>6/17/2011 6:54:39 AM</span><div style='margin: 0px 20px 20px; padding: 20px; background-color: #eee'><p>On Tue, Jun 14, 2011 at 7:35 PM, domeofatonement<br/>&lt;domeofatonement@...&gt; wrote:<br/>&gt;<br/>&gt; --- In <a href="mailto:tuning@yahoogroups.com">tuning@yahoogroups.com</a>, Mike Battaglia &lt;battaglia01@...&gt; wrote:<br/>&gt; &gt; I&apos;m not sure I&apos;ve followed correctly, but for the last one, are you<br/>&gt; &gt; saying that if the first one has a phase of 0, the second one has a<br/>&gt; &gt; phase of 120, and the third one has a phase of 240, that there will be<br/>&gt; &gt; no buzz?<br/>&gt;<br/>&gt; The first has phase -120, the second 0, the third +120; so yes, practically the same as 0, 120, 240. There will still be buzz, but it will be minimized. The formula always returns a value between 0 and 4 for triads, which can be used for comparison purposes but not for finding the absolute amplitude of buzzing.</p><p>So this should still buzz then, because the phases are all in a linear<br/>relationship with one another. It should actually just look like a<br/>time-shifted version of the original waveform. Something like 0, 90,<br/>360 might do the trick better, or 0, 120, 360. Something in which the<br/>phases are in a parabolic relationship with one another. It&apos;s also<br/>going to have to do with whether the frequencies in the chord are<br/>separated by a constant difference (like 4:5:6) or if one is lopsided<br/>(like 8:9:11). See below for more about group delay.</p><p>&gt; What exactly is the difference between group delay and phase?</p><p>Group delay is the first derivative of the phase response of a signal,<br/>where the phase response is that other part of its Fourier transform<br/>that nobody likes to talk about. I could show you the math, but maybe<br/>it&apos;s easier to just describe it as - if you take a signal, and you<br/>delay it in time, this delay is going to have the effect on the phase<br/>response of skewing it linearly, meaning - if p(f) was your original<br/>phase response, when you delay it in time, the new phase response will<br/>be p(f) + mf, where m is a number that scales proportionally with how<br/>much you&apos;ve delayed it. You can see that this mf term is a line, and<br/>so you&apos;ll be adding a line to the phase response.</p><p>So if you take three sines at phase 0 and at frequency 100, 200, and<br/>300, and you delay them in time, you&apos;ll add a line to the phase<br/>response of the whole thing. So you&apos;ll end up getting new (unwrapped)<br/>phase responses like 0, pi/2, and pi, or maybe 0, 200, 400, or<br/>whatever it is - the point is that if you connect the dots in the<br/>phase response, you&apos;ll get a line.</p><p>The main point is that when you try to work backwards, as you&apos;re<br/>doing, although the frequencies you&apos;ve chosen don&apos;t all have the<br/>-same- phase, they are all still in this -linear phase- relationship,<br/>so they aren&apos;t really shifting relative to one another in the way that<br/>you want. Or, well, they are, but the way you&apos;re doing it will make it<br/>so that you magically get the original signal again, shifted in time,<br/>which isn&apos;t what you want. You may have heard the phrase &quot;linear<br/>phase&quot; being thrown around for EQs that are advertised as causing no<br/>phase distortion, and this is why - and unfortunately, phase<br/>distortion is what we want to mess with buzz.</p><p>If you&apos;re not convinced, here are some audio samples:</p><p><a href="http://launch.groups.yahoo.com/group/tuning/message/95568">http://launch.groups.yahoo.com/group/tuning/message/95568</a></p><p>Luckily, the solution is simple: stop dealing with phase and start<br/>looking at group delay. Group delay is the derivative of phase, and<br/>more precisely correlates with what we want here. As I said above, if<br/>you delay a signal, you&apos;re going to add mf to it, and m is<br/>proportional to the amount of delay. The derivative of mf is m, and so<br/>by manipulating the derivative of the phase response, you can produce<br/>variable time delays for different frequencies - which is what we<br/>want, so the buzz gets out of sync with one another. I recommend<br/>messing with a parabolic phase response, which means that group delay<br/>is a linear function of frequency. So if you&apos;re looking at a triad<br/>with frequencies a, b, and c, and c-b = b-a, make the phase of a be 0,<br/>make the phase of b be something else, and then make the phase of c be<br/>FOUR times that - not two times that. Then you&apos;ll see the buzz start<br/>to change depending on how you scale it.</p><p>-Mike</p></div>